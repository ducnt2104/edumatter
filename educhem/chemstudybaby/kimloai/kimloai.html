<!DOCTYPE html>
<html lang="vi" class="dark">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>ch·ªß ƒë·ªÅ 1: Kim Lo·∫°i & Phi Kim - Interactive Master</title>
    <!-- Tailwind CSS -->
    <link rel="icon" href="../../../favicon/educhem.svg" type="image/svg+xml" />
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
      tailwind.config = {
        darkMode: "class",
        theme: {
          extend: {
            colors: {
              primary: "#6366f1",
            },
          },
        },
      };
    </script>
    <!-- Font Awesome -->
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
    />
    <!-- Google Fonts -->
    <link
      href="https://fonts.googleapis.com/css2?family=Be+Vietnam+Pro:wght@300;400;600;700;800&display=swap"
      rel="stylesheet"
    />

    <style>
      body {
        font-family: "Be Vietnam Pro", sans-serif;
      }

      /* Custom Scrollbar */
      ::-webkit-scrollbar {
        width: 6px;
        height: 6px;
      }
      ::-webkit-scrollbar-track {
        background: transparent;
      }
      ::-webkit-scrollbar-thumb {
        background: #cbd5e1;
        border-radius: 4px;
      }
      .dark ::-webkit-scrollbar-thumb {
        background: #475569;
      }

      /* Animations */
      .fade-in {
        animation: fadeIn 0.4s ease-in-out forwards;
      }
      @keyframes fadeIn {
        from {
          opacity: 0;
          transform: translateY(10px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }

      /* Reaction Animations */
      .bubble {
        position: absolute;
        background: rgba(255, 255, 255, 0.7);
        border-radius: 50%;
        animation: rise 2s infinite ease-in;
      }
      @keyframes rise {
        0% {
          bottom: 0;
          opacity: 0;
          transform: scale(0.5);
        }
        50% {
          opacity: 1;
        }
        100% {
          bottom: 100%;
          opacity: 0;
          transform: scale(1.5);
        }
      }

      .explosion {
        animation: explode 0.5s ease-out forwards;
      }
      @keyframes explode {
        0% {
          transform: scale(0);
          opacity: 1;
        }
        50% {
          transform: scale(1.5);
          opacity: 0.8;
        }
        100% {
          transform: scale(2);
          opacity: 0;
        }
      }

      /* Active Tab Styling */
      .tab-btn.active {
        color: #6366f1; /* Indigo-500 */
        border-bottom: 2px solid #6366f1;
        background-color: rgba(99, 102, 241, 0.1);
      }
      .dark .tab-btn.active {
        color: #818cf8; /* Indigo-400 */
        border-bottom: 2px solid #818cf8;
        background-color: rgba(99, 102, 241, 0.2);
      }

      /* Glass Effect Adaptation */
      .glass-panel {
        background: rgba(255, 255, 255, 0.8);
        backdrop-filter: blur(12px);
        border: 1px solid rgba(0, 0, 0, 0.05);
      }
      .dark .glass-panel {
        background: rgba(30, 41, 59, 0.7); /* Slate 800 with opacity */
        border: 1px solid rgba(255, 255, 255, 0.1);
      }
    </style>
  </head>
  <body
    class="bg-slate-50 text-slate-800 dark:bg-slate-900 dark:text-slate-100 transition-colors duration-300 h-screen flex flex-col overflow-hidden"
  >
    <!-- Header & Top Navigation -->
    <header
      class="bg-white/90 dark:bg-slate-900/90 backdrop-blur-md border-b border-slate-200 dark:border-slate-700 z-30 shadow-sm flex-none"
    >
      <div class="max-w-7xl mx-auto px-4">
        <!-- Top Bar: Logo, Back, Theme -->
        <div class="flex items-center justify-between h-14">
          <div class="flex items-center gap-4">
            <a
              href="../chemstudybaby.html"
              class="flex items-center gap-2 text-slate-500 hover:text-indigo-600 dark:text-slate-400 dark:hover:text-indigo-400 transition font-medium text-sm"
            >
              <i class="fa-solid fa-arrow-left"></i> Quay l·∫°i
            </a>
            <div class="h-6 w-px bg-slate-300 dark:bg-slate-700 mx-2"></div>
            <div class="flex items-center gap-2">
              <div
                class="w-8 h-8 rounded-lg bg-indigo-600 flex items-center justify-center text-white"
              >
                <i class="fa-solid fa-flask"></i>
              </div>
              <h1 class="font-bold text-lg hidden sm:block">
                Chemstudy - H√≥a H·ªçc 9
                <span
                  class="font-normal text-slate-500 dark:text-slate-400 text-sm"
                  >ch·ªß ƒë·ªÅ 1 | Kim Lo·∫°i & Phi Kim</span
                >
              </h1>
            </div>
          </div>

          <button
            onclick="toggleTheme()"
            class="w-10 h-10 rounded-full bg-slate-100 dark:bg-slate-800 hover:bg-slate-200 dark:hover:bg-slate-700 flex items-center justify-center transition focus:outline-none"
          >
            <i
              class="fa-regular fa-sun text-yellow-500 hidden dark:block text-xl"
            ></i>
            <i
              class="fa-regular fa-moon text-slate-600 block dark:hidden text-xl"
            ></i>
          </button>
        </div>

        <!-- Navigation Tabs -->
        <nav class="flex overflow-x-auto no-scrollbar gap-1 pb-0">
          <button
            onclick="switchTab('vatly')"
            id="btn-vatly"
            class="tab-btn active px-4 py-3 text-sm font-semibold whitespace-nowrap transition-colors border-b-2 border-transparent hover:text-indigo-500 dark:hover:text-indigo-400 flex items-center gap-2"
          >
            <i class="fa-solid fa-bolt"></i> I. V·∫≠t L√Ω
          </button>
          <button
            onclick="switchTab('hoahoc')"
            id="btn-hoahoc"
            class="tab-btn px-4 py-3 text-sm font-semibold whitespace-nowrap transition-colors border-b-2 border-transparent hover:text-indigo-500 dark:hover:text-indigo-400 flex items-center gap-2"
          >
            <i class="fa-solid fa-vial"></i> II. H√≥a H·ªçc
          </button>
          <button
            onclick="switchTab('dayhoatdong')"
            id="btn-dayhoatdong"
            class="tab-btn px-4 py-3 text-sm font-semibold whitespace-nowrap transition-colors border-b-2 border-transparent hover:text-indigo-500 dark:hover:text-indigo-400 flex items-center gap-2"
          >
            <i class="fa-solid fa-arrow-down-short-wide"></i> III. D√£y Ho·∫°t ƒê·ªông
            & T√°ch KL
          </button>
          <button
            onclick="switchTab('sanxuat')"
            id="btn-sanxuat"
            class="tab-btn px-4 py-3 text-sm font-semibold whitespace-nowrap transition-colors border-b-2 border-transparent hover:text-indigo-500 dark:hover:text-indigo-400 flex items-center gap-2"
          >
            <i class="fa-solid fa-industry"></i> IV. Gang Th√©p & H·ª£p Kim
          </button>
          <button
            onclick="switchTab('phikim')"
            id="btn-phikim"
            class="tab-btn px-4 py-3 text-sm font-semibold whitespace-nowrap transition-colors border-b-2 border-transparent hover:text-indigo-500 dark:hover:text-indigo-400 flex items-center gap-2"
          >
            <i class="fa-solid fa-atom"></i> V. Phi Kim
          </button>
        </nav>
      </div>
    </header>

    <!-- Main Content Container -->
    <main
      class="flex-1 overflow-y-auto bg-slate-50 dark:bg-slate-900 scroll-smooth p-4 md:p-6"
      id="content-area"
    >
      <div class="max-w-6xl mx-auto pb-20">
        <!-- SECTION 1: T√çNH CH·∫§T V·∫¨T L√ù -->
        <section id="vatly" class="tab-content fade-in space-y-6">
          <!-- Info Grid -->
          <div class="grid md:grid-cols-2 gap-6">
            <div class="glass-panel p-6 rounded-2xl shadow-sm">
              <h2
                class="text-xl font-bold text-indigo-600 dark:text-indigo-400 mb-4 flex items-center gap-2"
              >
                <i class="fa-solid fa-star"></i> T√≠nh ch·∫•t ƒë·∫∑c tr∆∞ng
              </h2>
              <ul class="space-y-3 text-sm">
                <li class="flex gap-3">
                  <span
                    class="w-8 h-8 rounded bg-yellow-100 dark:bg-yellow-900/30 text-yellow-600 dark:text-yellow-400 flex items-center justify-center flex-shrink-0"
                    ><i class="fa-regular fa-eye"></i
                  ></span>
                  <div>
                    <span class="font-bold">1. √Ånh kim:</span> B·ªÅ m·∫∑t s√°ng b√≥ng
                    (Au, Ag, Al).
                  </div>
                </li>
                <li class="flex gap-3">
                  <span
                    class="w-8 h-8 rounded bg-blue-100 dark:bg-blue-900/30 text-blue-600 dark:text-blue-400 flex items-center justify-center flex-shrink-0"
                    ><i class="fa-solid fa-bolt"></i
                  ></span>
                  <div>
                    <span class="font-bold">2. D·∫´n ƒëi·ªán/nhi·ªát:</span> Ag > Cu >
                    Au > Al > Fe.
                  </div>
                </li>
                <li class="flex gap-3">
                  <span
                    class="w-8 h-8 rounded bg-green-100 dark:bg-green-900/30 text-green-600 dark:text-green-400 flex items-center justify-center flex-shrink-0"
                    ><i class="fa-solid fa-layer-group"></i
                  ></span>
                  <div>
                    <span class="font-bold">3. T√≠nh d·∫ªo:</span> D√°t m·ªèng, k√©o
                    s·ª£i (V√†ng d·∫ªo nh·∫•t).
                  </div>
                </li>
              </ul>
            </div>

            <!-- Comparison Table -->
            <div class="glass-panel p-6 rounded-2xl shadow-sm">
              <h2
                class="text-xl font-bold text-indigo-600 dark:text-indigo-400 mb-4"
              >
                So s√°nh m·ªôt s·ªë kim lo·∫°i
              </h2>
              <div class="overflow-x-auto">
                <table class="w-full text-sm text-left">
                  <thead
                    class="text-xs uppercase bg-slate-200 dark:bg-slate-700 text-slate-700 dark:text-slate-300"
                  >
                    <tr>
                      <th class="px-4 py-2">Kim lo·∫°i</th>
                      <th class="px-4 py-2">Kh·ªëi l∆∞·ª£ng ri√™ng</th>
                      <th class="px-4 py-2">N√≥ng ch·∫£y (¬∞C)</th>
                      <th class="px-4 py-2">ƒê·∫∑c ƒëi·ªÉm</th>
                    </tr>
                  </thead>
                  <tbody
                    class="divide-y divide-slate-200 dark:divide-slate-700"
                  >
                    <tr>
                      <td class="px-4 py-2 font-bold">Al (Nh√¥m)</td>
                      <td>2.7 (Nh·∫π)</td>
                      <td>660</td>
                      <td>D·∫´n ƒëi·ªán t·ªët, m·ªÅm</td>
                    </tr>
                    <tr>
                      <td class="px-4 py-2 font-bold">Fe (S·∫Øt)</td>
                      <td>7.87 (N·∫∑ng)</td>
                      <td>1535</td>
                      <td>C√≥ t·ª´ t√≠nh</td>
                    </tr>
                    <tr>
                      <td class="px-4 py-2 font-bold">Au (V√†ng)</td>
                      <td>19.3 (R·∫•t n·∫∑ng)</td>
                      <td>1065</td>
                      <td>R·∫•t d·∫ªo, kh√¥ng g·ªâ</td>
                    </tr>
                  </tbody>
                </table>
              </div>
            </div>
          </div>

          <!-- Interactive Simulation: Conductivity & Heat -->
          <div class="glass-panel p-6 rounded-2xl shadow-sm">
            <h3
              class="text-lg font-bold mb-4 flex items-center justify-between"
            >
              <span
                ><i class="fa-solid fa-microscope text-purple-500 mr-2"></i>M√¥
                ph·ªèng: Ki·ªÉm tra d·∫´n ƒëi·ªán</span
              >
              <span
                class="text-xs font-normal text-slate-500 bg-slate-200 dark:bg-slate-700 px-2 py-1 rounded"
                >K√©o v·∫≠t li·ªáu v√†o m·∫°ch</span
              >
            </h3>

            <div
              class="relative h-64 bg-slate-100 dark:bg-slate-800 rounded-xl border border-slate-300 dark:border-slate-600 flex items-center justify-center overflow-hidden"
              id="circuit-board"
            >
              <!-- Battery -->
              <div
                class="absolute left-10 bottom-10 w-12 h-20 bg-slate-700 rounded-md flex flex-col items-center justify-center shadow-lg z-10"
              >
                <span class="text-xs text-white font-bold mb-1">+</span>
                <div
                  class="w-8 h-12 bg-yellow-400 flex items-center justify-center text-xs font-bold text-black transform rotate-90"
                >
                  PIN
                </div>
                <span class="text-xs text-white font-bold mt-1">-</span>
              </div>

              <!-- Bulb -->
              <div
                class="absolute top-10 left-1/2 -translate-x-1/2 flex flex-col items-center z-10"
              >
                <div
                  id="sim-bulb"
                  class="w-16 h-16 rounded-full bg-slate-400 border-4 border-slate-500 shadow-inner transition-all duration-500 flex items-center justify-center"
                >
                  <i class="fa-regular fa-lightbulb text-3xl text-white/50"></i>
                </div>
                <div class="w-8 h-4 bg-slate-600 mt-[-4px]"></div>
              </div>

              <!-- Wires SVG -->
              <svg class="absolute inset-0 w-full h-full pointer-events-none">
                <path
                  d="M 58 190 L 58 60 L 50% 60"
                  stroke="#64748b"
                  stroke-width="4"
                  fill="none"
                  class="dark:stroke-slate-500"
                />
                <path
                  d="M 50% 60 L 90% 60 L 90% 190"
                  stroke="#64748b"
                  stroke-width="4"
                  fill="none"
                  class="dark:stroke-slate-500"
                />
              </svg>

              <!-- Gap for Material -->
              <div
                class="absolute bottom-16 right-10 md:right-32 w-40 h-2 bg-slate-300 dark:bg-slate-700 rounded flex items-center justify-center text-xs text-slate-400"
              >
                Khu v·ª±c n·ªëi m·∫°ch
              </div>

              <!-- Drop Zone Visual -->
              <div
                id="drop-zone"
                class="absolute bottom-12 right-10 md:right-32 w-40 h-10 border-2 border-dashed border-indigo-400 bg-indigo-500/10 rounded flex items-center justify-center text-xs font-bold text-indigo-500"
              >
                Th·∫£ v·∫≠t li·ªáu v√†o ƒë√¢y
              </div>
            </div>

            <!-- Material Picker -->
            <div class="mt-4 flex flex-wrap gap-3 justify-center">
              <button
                onclick="testMaterial('Ag')"
                class="px-4 py-2 bg-slate-200 dark:bg-slate-700 hover:bg-slate-300 dark:hover:bg-slate-600 rounded-lg flex items-center gap-2 transition"
              >
                <div class="w-4 h-4 bg-gray-300 rounded-full border"></div>
                B·∫°c (Ag)
              </button>
              <button
                onclick="testMaterial('Cu')"
                class="px-4 py-2 bg-slate-200 dark:bg-slate-700 hover:bg-slate-300 dark:hover:bg-slate-600 rounded-lg flex items-center gap-2 transition"
              >
                <div class="w-4 h-4 bg-orange-400 rounded-full border"></div>
                ƒê·ªìng (Cu)
              </button>
              <button
                onclick="testMaterial('Wood')"
                class="px-4 py-2 bg-slate-200 dark:bg-slate-700 hover:bg-slate-300 dark:hover:bg-slate-600 rounded-lg flex items-center gap-2 transition"
              >
                <div class="w-4 h-4 bg-amber-800 rounded-full border"></div>
                G·ªó
              </button>
              <button
                onclick="testMaterial('Plastic')"
                class="px-4 py-2 bg-slate-200 dark:bg-slate-700 hover:bg-slate-300 dark:hover:bg-slate-600 rounded-lg flex items-center gap-2 transition"
              >
                <div class="w-4 h-4 bg-blue-500 rounded-full border"></div>
                Nh·ª±a
              </button>
            </div>
            <div
              id="sim-result"
              class="text-center mt-2 font-bold h-6 text-indigo-600 dark:text-indigo-400"
            ></div>
          </div>
        </section>

        <!-- SECTION 2: T√çNH CH·∫§T H√ìA H·ªåC -->
        <section id="hoahoc" class="tab-content hidden space-y-6">
          <!-- Theory Summary Cards -->
          <div class="grid grid-cols-2 md:grid-cols-4 gap-4">
            <div
              class="glass-panel p-3 rounded-xl text-center border-t-4 border-red-500"
            >
              <div class="text-xs font-bold text-slate-500 dark:text-slate-400">
                T√°c d·ª•ng Oxi
              </div>
              <div class="font-bold my-1 text-red-500">Oxit Baz∆°</div>
              <div
                class="text-[10px] bg-slate-200 dark:bg-slate-800 p-1 rounded"
              >
                3Fe + 2O‚ÇÇ ‚Üí Fe‚ÇÉO‚ÇÑ
              </div>
            </div>
            <div
              class="glass-panel p-3 rounded-xl text-center border-t-4 border-green-500"
            >
              <div class="text-xs font-bold text-slate-500 dark:text-slate-400">
                T√°c d·ª•ng Phi kim
              </div>
              <div class="font-bold my-1 text-green-500">Mu·ªëi</div>
              <div
                class="text-[10px] bg-slate-200 dark:bg-slate-800 p-1 rounded"
              >
                2Na + Cl‚ÇÇ ‚Üí 2NaCl
              </div>
            </div>
            <div
              class="glass-panel p-3 rounded-xl text-center border-t-4 border-blue-500"
            >
              <div class="text-xs font-bold text-slate-500 dark:text-slate-400">
                T√°c d·ª•ng Axit
              </div>
              <div class="font-bold my-1 text-blue-500">Mu·ªëi + H‚ÇÇ</div>
              <div
                class="text-[10px] bg-slate-200 dark:bg-slate-800 p-1 rounded"
              >
                Zn + 2HCl ‚Üí ZnCl‚ÇÇ + H‚ÇÇ
              </div>
            </div>
            <div
              class="glass-panel p-3 rounded-xl text-center border-t-4 border-purple-500"
            >
              <div class="text-xs font-bold text-slate-500 dark:text-slate-400">
                T√°c d·ª•ng Mu·ªëi
              </div>
              <div class="font-bold my-1 text-purple-500">ƒê·∫©y kim lo·∫°i</div>
              <div
                class="text-[10px] bg-slate-200 dark:bg-slate-800 p-1 rounded"
              >
                Fe + CuSO‚ÇÑ ‚Üí FeSO‚ÇÑ + Cu
              </div>
            </div>
          </div>

          <!-- Advanced Virtual Lab -->
          <div
            class="glass-panel p-1 rounded-2xl shadow-lg border border-indigo-100 dark:border-slate-700 bg-white dark:bg-slate-800"
          >
            <div
              class="bg-indigo-600 text-white p-3 rounded-t-xl flex justify-between items-center"
            >
              <h3 class="font-bold">
                <i class="fa-solid fa-flask"></i> Ph√≤ng Th√≠ Nghi·ªám ·∫¢o
              </h3>
              <span class="text-xs bg-indigo-500 px-2 py-1 rounded"
                >Interactive Lab 2.0</span
              >
            </div>

            <div class="grid md:grid-cols-3 min-h-[400px]">
              <!-- Reaction Selector -->
              <div
                class="p-4 border-r border-slate-200 dark:border-slate-700 space-y-2 bg-slate-50 dark:bg-slate-900/50"
              >
                <p class="text-xs font-bold text-slate-400 uppercase mb-2">
                  Ch·ªçn th√≠ nghi·ªám:
                </p>

                <button
                  onclick="setExperiment('NaH2O')"
                  class="w-full text-left p-3 rounded-lg bg-white dark:bg-slate-800 hover:bg-indigo-50 dark:hover:bg-slate-700 border border-slate-200 dark:border-slate-600 transition group relative overflow-hidden"
                >
                  <div class="font-bold text-purple-600 dark:text-purple-400">
                    1. Natri + N∆∞·ªõc
                  </div>
                  <div class="text-xs text-slate-500">
                    Ph·∫£n ·ª©ng m√£nh li·ªát, n·ªï
                  </div>
                  <div
                    class="absolute right-2 top-3 opacity-0 group-hover:opacity-100 transition"
                  >
                    <i class="fa-solid fa-play text-purple-500"></i>
                  </div>
                </button>

                <button
                  onclick="setExperiment('FeCuSO4')"
                  class="w-full text-left p-3 rounded-lg bg-white dark:bg-slate-800 hover:bg-indigo-50 dark:hover:bg-slate-700 border border-slate-200 dark:border-slate-600 transition group relative"
                >
                  <div class="font-bold text-blue-600 dark:text-blue-400">
                    2. S·∫Øt + CuSO‚ÇÑ
                  </div>
                  <div class="text-xs text-slate-500">T·∫°o k·∫øt t·ªßa ƒë·ªìng ƒë·ªè</div>
                </button>

                <button
                  onclick="setExperiment('ZnHCl')"
                  class="w-full text-left p-3 rounded-lg bg-white dark:bg-slate-800 hover:bg-indigo-50 dark:hover:bg-slate-700 border border-slate-200 dark:border-slate-600 transition group relative"
                >
                  <div class="font-bold text-green-600 dark:text-green-400">
                    3. K·∫Ωm + HCl
                  </div>
                  <div class="text-xs text-slate-500">S·ªßi b·ªçt kh√≠ Hidro</div>
                </button>

                <button
                  onclick="setExperiment('FeBurning')"
                  class="w-full text-left p-3 rounded-lg bg-white dark:bg-slate-800 hover:bg-indigo-50 dark:hover:bg-slate-700 border border-slate-200 dark:border-slate-600 transition group relative"
                >
                  <div class="font-bold text-red-600 dark:text-red-400">
                    4. ƒê·ªët ch√°y S·∫Øt
                  </div>
                  <div class="text-xs text-slate-500">S√°ng ch√≥i trong Oxi</div>
                </button>
              </div>

              <!-- Visual Stage -->
              <div
                class="col-span-2 relative bg-slate-200 dark:bg-slate-900 flex flex-col items-center justify-end p-6 overflow-hidden"
              >
                <!-- Background Lab Visuals -->
                <div
                  class="absolute inset-0 opacity-10 pointer-events-none bg-[url('https://www.transparenttextures.com/patterns/graphy.png')]"
                ></div>

                <!-- Information Overlay -->
                <div
                  id="exp-info"
                  class="absolute top-4 left-4 right-4 bg-white/90 dark:bg-slate-800/90 backdrop-blur p-4 rounded-xl border border-slate-300 dark:border-slate-600 shadow-lg z-20"
                >
                  <h4
                    class="font-bold text-lg text-slate-800 dark:text-slate-100"
                    id="exp-name"
                  >
                    Ch√†o m·ª´ng ƒë·∫øn ph√≤ng th√≠ nghi·ªám
                  </h4>
                  <p
                    class="text-sm text-slate-600 dark:text-slate-400 mt-1"
                    id="exp-desc"
                  >
                    Vui l√≤ng ch·ªçn m·ªôt th√≠ nghi·ªám b√™n tr√°i ƒë·ªÉ b·∫Øt ƒë·∫ßu.
                  </p>
                  <div
                    id="exp-equation-box"
                    class="hidden mt-2 p-2 bg-slate-100 dark:bg-slate-900 rounded font-mono text-sm text-indigo-600 dark:text-indigo-400 font-bold text-center border border-dashed border-indigo-300"
                  ></div>
                </div>

                <!-- Experiment Container (Beaker/Burner) -->
                <div
                  id="stage-container"
                  class="relative w-48 h-64 flex items-end justify-center mb-8"
                >
                  <!-- Beaker -->
                  <div
                    id="beaker"
                    class="w-40 h-48 border-x-4 border-b-4 border-slate-400/50 bg-blue-100/10 dark:bg-blue-900/10 rounded-b-3xl relative backdrop-blur-sm hidden overflow-hidden"
                  >
                    <div
                      id="liquid"
                      class="absolute bottom-0 w-full h-3/4 bg-blue-400/20 transition-all duration-1000"
                    ></div>
                    <div
                      id="metal-piece"
                      class="absolute bottom-4 left-1/2 -translate-x-1/2 w-8 h-8 bg-gray-400 rounded-sm shadow-md transition-all duration-500 z-10"
                    ></div>
                    <div
                      id="particles-container"
                      class="absolute inset-0 pointer-events-none"
                    ></div>
                  </div>

                  <!-- Water Bowl (Na) -->
                  <div
                    id="bowl"
                    class="w-64 h-24 border-x-4 border-b-4 border-slate-400/50 bg-cyan-100/10 dark:bg-cyan-900/10 rounded-b-full relative backdrop-blur-sm hidden overflow-hidden"
                  >
                    <div
                      class="absolute bottom-0 w-full h-3/4 bg-cyan-500/30"
                    ></div>
                    <div
                      id="na-piece"
                      class="hidden absolute top-1/2 left-1/4 w-4 h-4 bg-gray-300 rounded-full shadow-lg"
                    ></div>
                    <div
                      id="fire-explosion"
                      class="hidden absolute top-1/3 left-1/4 -translate-x-1/2 -translate-y-1/2 text-4xl"
                    >
                      üí•
                    </div>
                  </div>
                </div>

                <!-- Controls -->
                <button
                  id="btn-start"
                  onclick="runExperiment()"
                  class="px-8 py-3 bg-indigo-600 hover:bg-indigo-700 text-white rounded-full font-bold shadow-lg shadow-indigo-500/30 transition transform hover:scale-105 disabled:opacity-50 disabled:cursor-not-allowed"
                  disabled
                >
                  B·∫ÆT ƒê·∫¶U <i class="fa-solid fa-flask ml-2"></i>
                </button>
              </div>
            </div>
          </div>
        </section>

        <!-- SECTION 3: D√ÉY HO·∫†T ƒê·ªòNG & T√ÅCH KIM LO·∫†I -->
        <section id="dayhoatdong" class="tab-content hidden space-y-8">
          <!-- Activity Series Visual -->
          <div class="glass-panel p-6 rounded-2xl text-center">
            <h2
              class="text-2xl font-bold mb-2 text-indigo-600 dark:text-indigo-400"
            >
              D√ÉY HO·∫†T ƒê·ªòNG H√ìA H·ªåC
            </h2>
            <p class="text-sm text-slate-500 dark:text-slate-400 mb-6 italic">
              "Khi N√†o Ba C·∫ßn May √Åo Gi√°p S·∫Øt Nh·ªõ Sang Ph·ªë H·ªèi C·ª≠a H√†ng √Å Phi
              √Çu"
            </p>

            <div
              class="flex flex-wrap justify-center items-center gap-2 mb-4 overflow-x-auto pb-4"
            >
              <div
                class="flex gap-1 p-2 bg-red-100 dark:bg-red-900/30 rounded-xl border border-red-200 dark:border-red-800/50 relative group"
              >
                <span
                  class="font-bold text-red-600 dark:text-red-400 text-lg px-2"
                  >K</span
                >
                <span
                  class="font-bold text-red-600 dark:text-red-400 text-lg px-2"
                  >Na</span
                >
                <span
                  class="font-bold text-red-600 dark:text-red-400 text-lg px-2"
                  >Ba</span
                >
                <span
                  class="font-bold text-red-600 dark:text-red-400 text-lg px-2"
                  >Ca</span
                >
                <div
                  class="absolute -bottom-8 left-0 w-full text-[10px] text-red-500 font-bold bg-white dark:bg-slate-800 shadow px-1 rounded opacity-0 group-hover:opacity-100 transition"
                >
                  ƒêi·ªán ph√¢n n√≥ng ch·∫£y
                </div>
              </div>
              <i class="fa-solid fa-chevron-right text-slate-300"></i>
              <div
                class="flex gap-1 p-2 bg-yellow-100 dark:bg-yellow-900/30 rounded-xl border border-yellow-200 dark:border-yellow-800/50 relative group"
              >
                <span
                  class="font-bold text-yellow-600 dark:text-yellow-400 text-lg px-2"
                  >Mg</span
                >
                <span
                  class="font-bold text-yellow-600 dark:text-yellow-400 text-lg px-2"
                  >Al</span
                >
                <span
                  class="font-bold text-yellow-600 dark:text-yellow-400 text-lg px-2"
                  >Zn</span
                >
                <span
                  class="font-bold text-yellow-600 dark:text-yellow-400 text-lg px-2"
                  >Fe</span
                >
                <span
                  class="font-bold text-yellow-600 dark:text-yellow-400 text-lg px-2"
                  >Pb</span
                >
                <div
                  class="absolute -bottom-8 left-0 w-full text-[10px] text-yellow-500 font-bold bg-white dark:bg-slate-800 shadow px-1 rounded opacity-0 group-hover:opacity-100 transition"
                >
                  Nhi·ªát luy·ªán
                </div>
              </div>
              <i class="fa-solid fa-chevron-right text-slate-300"></i>
              <div
                class="w-10 h-10 rounded-full border-2 border-dashed border-slate-400 flex items-center justify-center font-bold text-slate-500"
              >
                (H)
              </div>
              <i class="fa-solid fa-chevron-right text-slate-300"></i>
              <div
                class="flex gap-1 p-2 bg-blue-100 dark:bg-blue-900/30 rounded-xl border border-blue-200 dark:border-blue-800/50 relative group"
              >
                <span
                  class="font-bold text-blue-600 dark:text-blue-400 text-lg px-2"
                  >Cu</span
                >
                <span
                  class="font-bold text-blue-600 dark:text-blue-400 text-lg px-2"
                  >Ag</span
                >
                <span
                  class="font-bold text-blue-600 dark:text-blue-400 text-lg px-2"
                  >Au</span
                >
                <div
                  class="absolute -bottom-8 left-0 w-full text-[10px] text-blue-500 font-bold bg-white dark:bg-slate-800 shadow px-1 rounded opacity-0 group-hover:opacity-100 transition"
                >
                  Th·ªßy luy·ªán
                </div>
              </div>
            </div>
          </div>

          <!-- Extraction Methods Grid -->
          <div class="grid md:grid-cols-3 gap-6">
            <div
              class="glass-panel p-5 rounded-xl border-t-4 border-red-500 hover:-translate-y-1 transition duration-300"
            >
              <div class="text-4xl mb-3 text-red-500">
                <i class="fa-solid fa-bolt-lightning"></i>
              </div>
              <h3 class="font-bold text-lg mb-2">ƒêi·ªán Ph√¢n N√≥ng Ch·∫£y</h3>
              <p class="text-xs text-slate-500 dark:text-slate-400 mb-2">
                D√πng cho KL m·∫°nh (K ‚Üí Al)
              </p>
              <div
                class="bg-slate-100 dark:bg-slate-800 p-2 rounded text-xs font-mono"
              >
                2Al‚ÇÇO‚ÇÉ ‚Üí 4Al + 3O‚ÇÇ
              </div>
            </div>
            <div
              class="glass-panel p-5 rounded-xl border-t-4 border-yellow-500 hover:-translate-y-1 transition duration-300"
            >
              <div class="text-4xl mb-3 text-yellow-500">
                <i class="fa-solid fa-fire-flame-curved"></i>
              </div>
              <h3 class="font-bold text-lg mb-2">Nhi·ªát Luy·ªán</h3>
              <p class="text-xs text-slate-500 dark:text-slate-400 mb-2">
                D√πng C, CO, H‚ÇÇ kh·ª≠ oxit KL trung b√¨nh
              </p>
              <div
                class="bg-slate-100 dark:bg-slate-800 p-2 rounded text-xs font-mono"
              >
                Fe‚ÇÇO‚ÇÉ + 3CO ‚Üí 2Fe + 3CO‚ÇÇ
              </div>
            </div>
            <div
              class="glass-panel p-5 rounded-xl border-t-4 border-blue-500 hover:-translate-y-1 transition duration-300"
            >
              <div class="text-4xl mb-3 text-blue-500">
                <i class="fa-solid fa-water"></i>
              </div>
              <h3 class="font-bold text-lg mb-2">Th·ªßy Luy·ªán</h3>
              <p class="text-xs text-slate-500 dark:text-slate-400 mb-2">
                D√πng kim lo·∫°i m·∫°nh ƒë·∫©y kim lo·∫°i y·∫øu (Cu, Ag)
              </p>
              <div
                class="bg-slate-100 dark:bg-slate-800 p-2 rounded text-xs font-mono"
              >
                Fe + CuSO‚ÇÑ ‚Üí FeSO‚ÇÑ + Cu
              </div>
            </div>
          </div>
        </section>

        <!-- SECTION 4: GANG TH√âP & S·∫¢N XU·∫§T -->
        <section id="sanxuat" class="tab-content hidden space-y-8">
          <!-- Alloy Info -->
          <div class="glass-panel p-6 rounded-2xl">
            <h2
              class="text-xl font-bold text-indigo-600 dark:text-indigo-400 mb-4"
            >
              H·ª£p Kim L√† G√¨?
            </h2>
            <p class="text-slate-600 dark:text-slate-300 mb-4">
              L√† v·∫≠t li·ªáu kim lo·∫°i ch·ª©a m·ªôt kim lo·∫°i c∆° b·∫£n v√† c√°c kim lo·∫°i ho·∫∑c
              phi kim kh√°c.
            </p>

            <div class="grid md:grid-cols-2 gap-6">
              <!-- Gang -->
              <div
                class="bg-slate-100 dark:bg-slate-800 p-4 rounded-xl flex items-center gap-4"
              >
                <div
                  class="w-12 h-12 bg-gray-600 rounded-lg flex items-center justify-center text-white font-bold shadow-lg"
                >
                  Gang
                </div>
                <div>
                  <div class="font-bold text-slate-800 dark:text-slate-200">
                    S·∫Øt + Cacbon (2-5%)
                  </div>
                  <div class="text-xs text-slate-500">
                    ƒê·∫∑c t√≠nh: C·ª©ng v√† Gi√≤n
                  </div>
                </div>
              </div>
              <!-- Thep -->
              <div
                class="bg-slate-100 dark:bg-slate-800 p-4 rounded-xl flex items-center gap-4"
              >
                <div
                  class="w-12 h-12 bg-gray-400 rounded-lg flex items-center justify-center text-slate-900 font-bold shadow-lg"
                >
                  Th√©p
                </div>
                <div>
                  <div class="font-bold text-slate-800 dark:text-slate-200">
                    S·∫Øt + Cacbon (< 2%)
                  </div>
                  <div class="text-xs text-slate-500">
                    ƒê·∫∑c t√≠nh: D·∫ªo, ƒê√†n h·ªìi, B·ªÅn
                  </div>
                </div>
              </div>
            </div>
          </div>

          <!-- Blast Furnace Interactive Diagram -->
          <div class="glass-panel p-6 rounded-2xl">
            <h2 class="text-xl font-bold mb-4 flex items-center gap-2">
              <i class="fa-solid fa-industry"></i> M√¥ Ph·ªèng L√≤ Cao (S·∫£n xu·∫•t
              Gang)
            </h2>

            <div class="grid lg:grid-cols-2 gap-8 items-center">
              <div
                class="relative h-[400px] flex justify-center bg-white dark:bg-slate-800 rounded-xl border border-slate-200 dark:border-slate-700 p-4"
              >
                <!-- SVG Furnace -->
                <svg viewBox="0 0 200 400" class="h-full drop-shadow-2xl">
                  <!-- Furnace Shape -->
                  <path
                    d="M 60 40 L 40 120 L 30 320 L 50 380 L 150 380 L 170 320 L 160 120 L 140 40 Z"
                    fill="#475569"
                    stroke="#334155"
                    stroke-width="2"
                  />
                  <!-- Inner Heat Gradient -->
                  <defs>
                    <linearGradient id="fireGrad" x1="0" y1="0" x2="0" y2="1">
                      <stop offset="0%" stop-color="#334155" />
                      <stop offset="50%" stop-color="#ef4444" />
                      <stop offset="100%" stop-color="#fbbf24" />
                    </linearGradient>
                  </defs>
                  <path
                    d="M 65 45 L 45 120 L 35 320 L 55 375 L 145 375 L 165 320 L 155 120 L 135 45 Z"
                    fill="url(#fireGrad)"
                    opacity="0.9"
                  />

                  <!-- Animations controlled by JS -->
                  <g id="furnace-content"></g>
                  <g id="furnace-gas"></g>

                  <!-- Tuyeres -->
                  <path
                    d="M 10 340 L 35 340"
                    stroke="#3b82f6"
                    stroke-width="4"
                  />
                  <path
                    d="M 190 340 L 165 340"
                    stroke="#3b82f6"
                    stroke-width="4"
                  />
                  <text
                    x="100"
                    y="390"
                    text-anchor="middle"
                    fill="#000"
                    font-size="10"
                    font-weight="bold"
                  >
                    Gang l·ªèng
                  </text>
                </svg>

                <!-- Labels -->
                <div class="absolute top-10 right-4 text-xs text-slate-500">
                  200¬∞C
                </div>
                <div
                  class="absolute top-1/2 right-4 text-xs text-red-500 font-bold"
                >
                  1000¬∞C (CO kh·ª≠ Fe‚ÇÇO‚ÇÉ)
                </div>
                <div
                  class="absolute bottom-20 right-4 text-xs text-yellow-500 font-bold"
                >
                  1500¬∞C (Ch·∫£y)
                </div>
              </div>

              <!-- Controls & Reactions -->
              <div class="space-y-4">
                <div class="bg-slate-100 dark:bg-slate-800 p-4 rounded-xl">
                  <h4 class="font-bold text-sm mb-2 text-indigo-500">
                    C√°c ph·∫£n ·ª©ng ch√≠nh:
                  </h4>
                  <ul
                    class="space-y-2 text-xs font-mono text-slate-600 dark:text-slate-300"
                  >
                    <li>1. C + O‚ÇÇ ‚Üí CO‚ÇÇ (T·ªèa nhi·ªát)</li>
                    <li>2. CO‚ÇÇ + C ‚Üí 2CO (T·∫°o ch·∫•t kh·ª≠)</li>
                    <li>3. Fe‚ÇÇO‚ÇÉ + 3CO ‚Üí 2Fe + 3CO‚ÇÇ (Kh·ª≠ s·∫Øt)</li>
                    <li>4. CaO + SiO‚ÇÇ ‚Üí CaSiO‚ÇÉ (T·∫°o x·ªâ)</li>
                  </ul>
                </div>

                <div class="flex gap-2">
                  <button
                    onclick="animateFurnace()"
                    class="flex-1 py-3 bg-red-600 hover:bg-red-700 text-white rounded-lg font-bold shadow transition"
                  >
                    <i class="fa-solid fa-play mr-2"></i> Ch·∫°y L√≤ Cao
                  </button>
                </div>
                <p
                  id="furnace-status"
                  class="text-sm text-center text-slate-500 italic min-h-[20px]"
                ></p>
              </div>
            </div>
          </div>
        </section>

        <!-- SECTION 5: PHI KIM -->
        <section id="phikim" class="tab-content hidden space-y-6">
          <!-- Comparison Metal vs Non-metal -->
          <div class="glass-panel p-6 rounded-2xl">
            <h2 class="text-xl font-bold text-center mb-6">
              SO S√ÅNH KIM LO·∫†I & PHI KIM
            </h2>
            <div class="grid grid-cols-2 gap-4">
              <div
                class="bg-indigo-50 dark:bg-indigo-900/20 p-4 rounded-xl border border-indigo-100 dark:border-indigo-800"
              >
                <h3
                  class="font-bold text-indigo-600 dark:text-indigo-400 mb-4 text-center"
                >
                  KIM LO·∫†I
                </h3>
                <ul
                  class="text-sm space-y-2 text-slate-600 dark:text-slate-300"
                >
                  <li>
                    <i class="fa-solid fa-check text-green-500 mr-2"></i>D·∫´n
                    ƒëi·ªán, d·∫´n nhi·ªát t·ªët
                  </li>
                  <li>
                    <i class="fa-solid fa-check text-green-500 mr-2"></i>C√≥ √°nh
                    kim
                  </li>
                  <li>
                    <i class="fa-solid fa-check text-green-500 mr-2"></i>Ch·ªß y·∫øu
                    l√† ch·∫•t R·∫Øn
                  </li>
                  <li>
                    <i class="fa-solid fa-check text-green-500 mr-2"></i>T√≠nh
                    Kh·ª≠ (M·∫•t e)
                  </li>
                  <li>
                    <i class="fa-solid fa-check text-green-500 mr-2"></i>Oxit l√†
                    Oxit Baz∆°
                  </li>
                </ul>
              </div>
              <div
                class="bg-pink-50 dark:bg-pink-900/20 p-4 rounded-xl border border-pink-100 dark:border-pink-800"
              >
                <h3
                  class="font-bold text-pink-600 dark:text-pink-400 mb-4 text-center"
                >
                  PHI KIM
                </h3>
                <ul
                  class="text-sm space-y-2 text-slate-600 dark:text-slate-300"
                >
                  <li>
                    <i class="fa-solid fa-xmark text-red-500 mr-2"></i>Kh√¥ng d·∫´n
                    ƒëi·ªán (tr·ª´ C)
                  </li>
                  <li>
                    <i class="fa-solid fa-xmark text-red-500 mr-2"></i>Kh√¥ng c√≥
                    √°nh kim
                  </li>
                  <li>
                    <i class="fa-solid fa-circle-info text-blue-500 mr-2"></i
                    >R·∫Øn, L·ªèng, Kh√≠
                  </li>
                  <li>
                    <i class="fa-solid fa-check text-green-500 mr-2"></i>T√≠nh
                    Oxi h√≥a (Nh·∫≠n e)
                  </li>
                  <li>
                    <i class="fa-solid fa-check text-green-500 mr-2"></i>Oxit l√†
                    Oxit Axit
                  </li>
                </ul>
              </div>
            </div>
          </div>

          <!-- Applications Grid -->
          <h3 class="text-lg font-bold mt-8 mb-4">·ª®ng D·ª•ng C·ªßa Phi Kim</h3>
          <div class="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-5 gap-4">
            <!-- Clo -->
            <div
              class="glass-panel p-4 rounded-xl text-center hover:shadow-md transition bg-green-50 dark:bg-green-900/10"
            >
              <div class="text-3xl font-bold text-green-600 mb-2">Cl‚ÇÇ</div>
              <div class="font-bold text-sm">Clo</div>
              <p class="text-xs text-slate-500 mt-2">
                Kh·ª≠ tr√πng n∆∞·ªõc, t·∫©y tr·∫Øng, nh·ª±a PVC
              </p>
            </div>
            <!-- Luu Huynh -->
            <div
              class="glass-panel p-4 rounded-xl text-center hover:shadow-md transition bg-yellow-50 dark:bg-yellow-900/10"
            >
              <div class="text-3xl font-bold text-yellow-500 mb-2">S</div>
              <div class="font-bold text-sm">L∆∞u Hu·ª≥nh</div>
              <p class="text-xs text-slate-500 mt-2">
                Thu·ªëc n·ªï, Axit H‚ÇÇSO‚ÇÑ, l∆∞u h√≥a cao su
              </p>
            </div>
            <!-- Cacbon -->
            <div
              class="glass-panel p-4 rounded-xl text-center hover:shadow-md transition bg-gray-50 dark:bg-gray-800"
            >
              <div
                class="text-3xl font-bold text-slate-600 dark:text-slate-400 mb-2"
              >
                C
              </div>
              <div class="font-bold text-sm">Cacbon</div>
              <p class="text-xs text-slate-500 mt-2">
                Than ch√¨, kim c∆∞∆°ng, than ho·∫°t t√≠nh
              </p>
            </div>
            <!-- Photpho -->
            <div
              class="glass-panel p-4 rounded-xl text-center hover:shadow-md transition bg-red-50 dark:bg-red-900/10"
            >
              <div class="text-3xl font-bold text-red-500 mb-2">P</div>
              <div class="font-bold text-sm">Photpho</div>
              <p class="text-xs text-slate-500 mt-2">
                Di√™m, thu·ªëc n·ªï, ph√¢n b√≥n
              </p>
            </div>
            <!-- Nito -->
            <div
              class="glass-panel p-4 rounded-xl text-center hover:shadow-md transition bg-blue-50 dark:bg-blue-900/10"
            >
              <div class="text-3xl font-bold text-blue-500 mb-2">N‚ÇÇ</div>
              <div class="font-bold text-sm">Nit∆°</div>
              <p class="text-xs text-slate-500 mt-2">
                B·∫£o qu·∫£n th·ª±c ph·∫©m, s·∫£n xu·∫•t NH‚ÇÉ
              </p>
            </div>
          </div>
        </section>
      </div>
    </main>

    <script>
      // --- Dark Mode Logic ---
      function toggleTheme() {
        document.documentElement.classList.toggle("dark");
      }

      // --- Navigation Logic ---
      function switchTab(id) {
        // Hide all content
        document
          .querySelectorAll(".tab-content")
          .forEach((el) => el.classList.add("hidden"));
        // Remove active classes
        document
          .querySelectorAll(".tab-btn")
          .forEach((el) => el.classList.remove("active"));

        // Show selected content
        document.getElementById(id).classList.remove("hidden");
        // Add active class
        document.getElementById("btn-" + id).classList.add("active");

        // Re-trigger animations
        const content = document.getElementById(id);
        content.classList.remove("fade-in");
        void content.offsetWidth; // trigger reflow
        content.classList.add("fade-in");
      }

      // --- Simulation 1: Conductivity ---
      function testMaterial(type) {
        const bulb = document.getElementById("sim-bulb");
        const result = document.getElementById("sim-result");
        const zone = document.getElementById("drop-zone");

        zone.innerHTML = `<span class="font-bold text-slate-800 dark:text-white">${type}</span>`;

        // Reset
        bulb.classList.remove(
          "bg-yellow-400",
          "shadow-[0_0_50px_rgba(250,204,21,1)]",
          "border-yellow-500"
        );
        bulb.querySelector("i").classList.add("text-white/50");
        bulb.querySelector("i").classList.remove("text-white");

        result.innerText = "ƒêang ki·ªÉm tra...";

        setTimeout(() => {
          if (type === "Ag" || type === "Cu") {
            bulb.classList.add(
              "bg-yellow-400",
              "shadow-[0_0_50px_rgba(250,204,21,1)]",
              "border-yellow-500"
            );
            bulb.querySelector("i").classList.remove("text-white/50");
            bulb.querySelector("i").classList.add("text-white");
            result.innerHTML = `<span class="text-green-500"><i class="fa-solid fa-check"></i> ${type} d·∫´n ƒëi·ªán T·ªët!</span>`;
          } else {
            result.innerHTML = `<span class="text-red-500"><i class="fa-solid fa-xmark"></i> ${type} kh√¥ng d·∫´n ƒëi·ªán.</span>`;
          }
        }, 600);
      }

      // --- Simulation 2: Advanced Chemical Lab ---
      let currentExp = "";

      function setExperiment(expId) {
        currentExp = expId;
        const btnStart = document.getElementById("btn-start");
        const infoTitle = document.getElementById("exp-name");
        const infoDesc = document.getElementById("exp-desc");
        const eqBox = document.getElementById("exp-equation-box");

        // Reset Visuals
        document.getElementById("beaker").classList.add("hidden");
        document.getElementById("bowl").classList.add("hidden");
        document.getElementById("fire-explosion").classList.add("hidden");
        document.getElementById("particles-container").innerHTML = "";
        document.getElementById("liquid").style.backgroundColor =
          "rgba(96, 165, 250, 0.2)"; // Default blue tint

        btnStart.disabled = false;
        eqBox.classList.add("hidden");

        const data = {
          NaH2O: {
            t: "Natri t√°c d·ª•ng v·ªõi N∆∞·ªõc",
            d: "Natri n√≥ng ch·∫£y, ch·∫°y tr√™n m·∫∑t n∆∞·ªõc v√† ph√°t n·ªï. Dung d·ªãch chuy·ªÉn th√†nh baz∆°.",
            eq: "2Na + 2H‚ÇÇO ‚Üí 2NaOH + H‚ÇÇ‚Üë",
          },
          FeCuSO4: {
            t: "S·∫Øt t√°c d·ª•ng v·ªõi CuSO‚ÇÑ",
            d: "ƒêinh s·∫Øt tan d·∫ßn, l·ªõp ƒë·ªìng ƒë·ªè b√°m ngo√†i. Dung d·ªãch xanh lam nh·∫°t d·∫ßn.",
            eq: "Fe + CuSO‚ÇÑ ‚Üí FeSO‚ÇÑ + Cu‚Üì",
          },
          ZnHCl: {
            t: "K·∫Ωm t√°c d·ª•ng v·ªõi Axit HCl",
            d: "K·∫Ωm tan d·∫ßn, b·ªçt kh√≠ Hidro tho√°t ra m·∫°nh m·∫Ω.",
            eq: "Zn + 2HCl ‚Üí ZnCl‚ÇÇ + H‚ÇÇ‚Üë",
          },
          FeBurning: {
            t: "ƒê·ªët ch√°y d√¢y S·∫Øt trong Oxi",
            d: "S·∫Øt ch√°y s√°ng ch√≥i, t·∫°o h·∫°t n√≥ng ch·∫£y m√†u n√¢u ƒëen, kh√¥ng c√≥ ng·ªçn l·ª≠a.",
            eq: "3Fe + 2O‚ÇÇ ‚Üí Fe‚ÇÉO‚ÇÑ",
          },
        };

        infoTitle.innerText = data[expId].t;
        infoDesc.innerText = data[expId].d;
        eqBox.innerText = data[expId].eq;

        // Show appropriate container
        if (expId === "NaH2O") {
          document.getElementById("bowl").classList.remove("hidden");
          document.getElementById("na-piece").classList.remove("hidden");
        } else {
          document.getElementById("beaker").classList.remove("hidden");
          const metal = document.getElementById("metal-piece");
          metal.style.backgroundColor = "#9ca3af"; // gray
          metal.style.borderRadius = "2px";
          metal.classList.remove("hidden");

          if (expId === "FeCuSO4") {
            document.getElementById("liquid").style.backgroundColor =
              "rgba(59, 130, 246, 0.5)"; // Blue CuSO4
          } else if (expId === "ZnHCl") {
            document.getElementById("liquid").style.backgroundColor =
              "rgba(255, 255, 255, 0.1)"; // Clear HCl
          } else if (expId === "FeBurning") {
            document.getElementById("liquid").classList.add("hidden"); // No liquid for burning
            document.getElementById("metal-piece").style.bottom = "40%"; // Floating wire
          }
        }
      }

      function runExperiment() {
        if (!currentExp) return;
        document.getElementById("exp-equation-box").classList.remove("hidden");

        if (currentExp === "NaH2O") {
          // Animate Na moving wild
          const na = document.getElementById("na-piece");
          const fire = document.getElementById("fire-explosion");

          let steps = 0;
          const interval = setInterval(() => {
            steps++;
            // Random movement
            na.style.left = Math.random() * 60 + 20 + "%";
            na.style.top = Math.random() * 20 + 40 + "%";

            if (steps > 5) {
              clearInterval(interval);
              fire.classList.remove("hidden");
              fire.classList.add("explosion");
              na.classList.add("hidden");
            }
          }, 300);
        } else if (currentExp === "ZnHCl") {
          // Bubbles
          const container = document.getElementById("particles-container");
          for (let i = 0; i < 30; i++) {
            setTimeout(() => {
              const b = document.createElement("div");
              b.className = "bubble w-2 h-2";
              b.style.left = Math.random() * 60 + 20 + "%";
              container.appendChild(b);
            }, i * 100);
          }
          document.getElementById("metal-piece").style.transform =
            "translate(-50%, 0) scale(0.5)"; // Dissolve
        } else if (currentExp === "FeCuSO4") {
          // Change Colors
          document.getElementById("liquid").style.backgroundColor =
            "rgba(167, 243, 208, 0.4)"; // Light green FeSO4
          document.getElementById("metal-piece").style.backgroundColor =
            "#b91c1c"; // Red copper color
        } else if (currentExp === "FeBurning") {
          // Sparks
          const container = document.getElementById("particles-container");
          for (let i = 0; i < 40; i++) {
            setTimeout(() => {
              const s = document.createElement("div");
              s.className = "absolute w-1 h-1 bg-yellow-300 rounded-full";
              s.style.left = "50%";
              s.style.top = "40%";
              s.animate(
                [
                  { transform: "translate(0,0)", opacity: 1 },
                  {
                    transform: `translate(${(Math.random() - 0.5) * 100}px, ${
                      (Math.random() - 0.5) * 100
                    }px)`,
                    opacity: 0,
                  },
                ],
                { duration: 800 }
              );
              container.appendChild(s);
            }, i * 50);
          }
        }
      }

      // --- Simulation 3: Blast Furnace ---
      function animateFurnace() {
        const status = document.getElementById("furnace-status");
        const content = document.getElementById("furnace-content");
        const gas = document.getElementById("furnace-gas");

        status.innerText = "ƒêang n·∫°p nguy√™n li·ªáu (Qu·∫∑ng s·∫Øt, Than c·ªëc)...";
        content.innerHTML = "";
        gas.innerHTML = "";

        // 1. Drop Materials
        let count = 0;
        const dropInt = setInterval(() => {
          const circle = document.createElementNS(
            "http://www.w3.org/2000/svg",
            "circle"
          );
          circle.setAttribute("cx", 80 + Math.random() * 40);
          circle.setAttribute("cy", 40);
          circle.setAttribute("r", 3);
          circle.setAttribute("fill", "#000");
          content.appendChild(circle);

          // Fall animation
          const anim = circle.animate([{ cy: 40 }, { cy: 350 }], {
            duration: 3000,
            fill: "forwards",
          });

          count++;
          if (count > 20) {
            clearInterval(dropInt);
            status.innerText =
              "Th·ªïi gi√≥ n√≥ng... Ph·∫£n ·ª©ng kh·ª≠ x·∫£y ra (CO kh·ª≠ Fe2O3)";
            startGas();
          }
        }, 100);

        function startGas() {
          // 2. Gas rising
          let gCount = 0;
          const gasInt = setInterval(() => {
            const g = document.createElementNS(
              "http://www.w3.org/2000/svg",
              "circle"
            );
            g.setAttribute("cx", 80 + Math.random() * 40);
            g.setAttribute("cy", 340);
            g.setAttribute("r", 2);
            g.setAttribute("fill", "#fff");
            g.setAttribute("opacity", "0.5");
            gas.appendChild(g);

            g.animate(
              [
                { cy: 340, opacity: 0.5 },
                { cy: 40, opacity: 0 },
              ],
              { duration: 2000 }
            );

            gCount++;
            if (gCount > 30) {
              clearInterval(gasInt);
              status.innerText = "Ho√†n t·∫•t! Gang l·ªèng ch·∫£y ra ·ªü ƒë√°y l√≤.";
            }
          }, 100);
        }
      }

      // Init
      switchTab("vatly");
    </script>
  </body>
</html>
