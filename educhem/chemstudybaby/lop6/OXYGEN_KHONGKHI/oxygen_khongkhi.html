<!doctype html>
<html lang="vi">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>CHEMSTUDY BABY || Ch·ªß ƒë·ªÅ 1: Oxygen v√† Kh√¥ng kh√≠</title>
    <style>
      /* 
         * ==========================================
         * 1. RESET & GLOBAL VARIABLES
         * ==========================================
         */
      :root {
        --primary-color: #0066cc; /* Xanh khoa h·ªçc ƒë·∫≠m */
        --primary-light: #e6f0ff; /* Xanh nh·∫°t n·ªÅn */
        --secondary-color: #ff9933; /* Cam nh·∫°t ƒëi·ªÉm nh·∫•n */
        --text-color: #333333;
        --text-light: #666666;
        --white: #ffffff;
        --success: #28a745;
        --danger: #dc3545;
        --warning: #ffc107;
        --font-main: "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
        --shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        --radius: 12px;
        --transition: all 0.3s ease;
      }

      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      body {
        font-family: var(--font-main);
        color: var(--text-color);
        background-color: #f4f7f6;
        line-height: 1.6;
        overflow-x: hidden;
      }

      a {
        text-decoration: none;
        color: inherit;
      }
      ul {
        list-style-position: inside;
      }

      /* 
         * ==========================================
         * 2. HEADER & NAVIGATION
         * ==========================================
         */
      header {
        background: linear-gradient(135deg, var(--primary-color), #004080);
        color: var(--white);
        padding: 2rem 1rem;
        text-align: center;
        position: relative;
        overflow: hidden;
      }

      header h1 {
        font-size: 2.5rem;
        margin-bottom: 0.5rem;
        text-transform: uppercase;
        letter-spacing: 1px;
        animation: fadeInDown 1s ease;
      }

      header h2 {
        font-size: 1.2rem;
        font-weight: 300;
        opacity: 0.9;
      }

      /* Particles decoration in header */
      .header-bg-particles {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        pointer-events: none;
        opacity: 0.3;
      }

      .sticky-nav {
        position: -webkit-sticky; /* Safari */
        position: sticky;
        top: 0;
        background-color: var(--white);
        box-shadow: var(--shadow);
        z-index: 1000;
        display: flex;
        justify-content: center;
        padding: 0.5rem;
        transition: var(--transition);
      }

      .sticky-nav ul {
        display: flex;
        list-style: none;
        gap: 20px;
        flex-wrap: wrap;
        justify-content: center;
      }

      .sticky-nav a {
        padding: 0.5rem 1rem;
        border-radius: 20px;
        font-weight: 600;
        color: var(--primary-color);
        transition: var(--transition);
      }

      .sticky-nav a:hover,
      .sticky-nav a.active {
        background-color: var(--primary-color);
        color: var(--white);
      }

      /* 
         * ==========================================
         * 3. COMMON LAYOUT COMPONENTS
         * ==========================================
         */
      .container {
        max-width: 1200px;
        margin: 0 auto;
        padding: 2rem 1rem;
      }

      section {
        background: var(--white);
        border-radius: var(--radius);
        padding: 2rem;
        margin-bottom: 3rem;
        box-shadow: var(--shadow);
        scroll-margin-top: 80px; /* For sticky header */
      }

      .section-title {
        font-size: 2rem;
        color: var(--primary-color);
        border-bottom: 3px solid var(--secondary-color);
        padding-bottom: 0.5rem;
        margin-bottom: 2rem;
        display: inline-block;
      }

      .content-grid {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 2rem;
        align-items: start;
      }

      @media (max-width: 768px) {
        .content-grid {
          grid-template-columns: 1fr;
        }
      }

      .card {
        background: var(--primary-light);
        padding: 1.5rem;
        border-radius: var(--radius);
        border-left: 5px solid var(--primary-color);
        margin-bottom: 1rem;
      }

      .card h3 {
        color: var(--primary-color);
        margin-bottom: 0.5rem;
      }

      /* 
         * ==========================================
         * 4. SPECIAL UI ELEMENTS (BOX, BUTTONS)
         * ==========================================
         */
      .data-box {
        background: linear-gradient(to right, #ff9933, #ffcc80);
        color: #fff;
        padding: 2rem;
        text-align: center;
        border-radius: var(--radius);
        font-weight: bold;
        box-shadow: 0 10px 20px rgba(255, 153, 51, 0.3);
        transform: scale(1);
        transition: var(--transition);
      }

      .data-box:hover {
        transform: scale(1.02);
      }

      .data-big {
        font-size: 3rem;
        display: block;
        margin: 10px 0;
        text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1);
      }

      .btn {
        background-color: var(--primary-color);
        color: white;
        border: none;
        padding: 10px 20px;
        border-radius: 5px;
        cursor: pointer;
        font-size: 1rem;
        transition: var(--transition);
        display: inline-flex;
        align-items: center;
        gap: 5px;
      }

      .btn:hover {
        background-color: #004080;
      }

      .btn:disabled {
        background-color: #ccc;
        cursor: not-allowed;
        transform: none;
      }

      .btn-secondary {
        background-color: var(--secondary-color);
      }
      .btn-secondary:hover {
        background-color: #e68a00;
      }

      .btn-danger {
        background-color: var(--danger);
      }
      .btn-danger:hover {
        background-color: #b02a37;
      }

      /* 
         * ==========================================
         * 5. SIMULATION & ANIMATION STYLES
         * ==========================================
         */
      .simulation-container {
        background: #222;
        border-radius: var(--radius);
        padding: 1rem;
        position: relative;
        overflow: hidden;
        min-height: 400px;
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        color: white;
      }

      canvas {
        background: transparent;
        max-width: 100%;
        border-radius: 4px;
      }

      .controls {
        margin-top: 1rem;
        display: flex;
        gap: 10px;
        flex-wrap: wrap;
        justify-content: center;
        background: rgba(255, 255, 255, 0.1);
        padding: 10px;
        border-radius: 8px;
        width: 100%;
      }

      /* Fire Triangle Specifics */
      .triangle-container {
        position: relative;
        width: 300px;
        height: 300px;
      }
      .triangle-side {
        position: absolute;
        background: #555;
        height: 10px;
        transition: var(--transition);
        cursor: pointer;
      }
      .triangle-side.active {
        background: var(--danger);
        box-shadow: 0 0 10px var(--danger);
      }
      .fire-center {
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -40%);
        width: 100px;
        height: 150px;
        opacity: 0;
        transition: opacity 0.5s;
      }
      .fire-center.burning {
        opacity: 1;
      }

      /* 
         * ==========================================
         * 6. EXERCISES & ACCORDION
         * ==========================================
         */
      .exercise-item {
        border: 1px solid #ddd;
        border-radius: 8px;
        margin-bottom: 1rem;
        overflow: hidden;
      }

      .exercise-header {
        background: #f9f9f9;
        padding: 1rem;
        font-weight: bold;
        display: flex;
        justify-content: space-between;
        align-items: center;
      }

      .exercise-body {
        padding: 1.5rem;
        background: white;
      }

      .hint-box {
        margin-top: 1rem;
        padding: 1rem;
        background-color: #fff3cd;
        border: 1px solid #ffeeba;
        border-radius: 5px;
        color: #856404;
        display: none; /* Hidden by default */
      }

      .hint-box.show {
        display: block;
        animation: fadeIn 0.5s;
      }

      /* Animations */
      @keyframes fadeInDown {
        from {
          opacity: 0;
          transform: translateY(-20px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }
      @keyframes fadeIn {
        from {
          opacity: 0;
        }
        to {
          opacity: 1;
        }
      }
      @keyframes float {
        0% {
          transform: translateY(0px);
        }
        50% {
          transform: translateY(-10px);
        }
        100% {
          transform: translateY(0px);
        }
      }

      /* Custom Scrollbar */
      ::-webkit-scrollbar {
        width: 10px;
      }
      ::-webkit-scrollbar-track {
        background: #f1f1f1;
      }
      ::-webkit-scrollbar-thumb {
        background: #888;
        border-radius: 5px;
      }
      ::-webkit-scrollbar-thumb:hover {
        background: #555;
      }

      /* Module Specific Styles */
      .infographic-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
        gap: 1.5rem;
        margin-top: 2rem;
      }
      .info-card {
        text-align: center;
        padding: 1.5rem;
        background: white;
        border-radius: 12px;
        box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
        border-top: 4px solid var(--success);
      }
      .info-icon {
        font-size: 3rem;
        margin-bottom: 1rem;
        display: block;
      }
      /* =========================================================
           10. FOOTER
           ========================================================= 
      */
      footer {
        background: #020617;
        color: white;
        padding: 100px 5% 40px;
        position: relative;
        overflow: hidden;
      }

      .footer-waves {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 60px;
        background: var(--bg-body);
        clip-path: polygon(
          0% 45%,
          16% 44%,
          33% 50%,
          54% 60%,
          70% 61%,
          84% 59%,
          100% 52%,
          100% 100%,
          0% 100%
        );
        transition: background-color 0.8s;
      }

      .footer-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
        gap: 60px;
        max-width: 1200px;
        margin: 0 auto;
      }

      .footer-brand h2 {
        font-family: "Space Grotesk", sans-serif;
        font-size: 2rem;
        margin-bottom: 20px;
      }

      .footer-links h4 {
        margin-bottom: 25px;
        text-transform: uppercase;
        letter-spacing: 2px;
        color: var(--p-primary);
      }

      .contact-item {
        margin-bottom: 15px;
        display: flex;
        align-items: center;
        gap: 15px;
        color: #94a3b8;
        transition: 0.3s;
      }
      .contact-item i {
        color: var(--p-primary);
      }
      .contact-item:hover {
        color: white;
        transform: translateX(5px);
      }

      .copyright {
        margin-top: 80px;
        text-align: center;
        padding-top: 30px;
        border-top: 1px solid rgba(255, 255, 255, 0.05);
        color: #475569;
        font-size: 0.9rem;
      }

      /* Responsive */
      @media (max-width: 768px) {
        header {
          padding: 0 20px;
        }
        .site-title {
          font-size: 1.4rem;
        }
        .grid-container {
          grid-template-columns: 1fr;
        }
        #sidebar {
          width: 100%;
          right: -100%;
        }
        .mascot-container {
          display: none; /* Hide mascot on mobile for performance */
        }
        .audio-control {
          bottom: 20px;
          left: 20px;
          padding: 8px 12px;
        }
      }

      @keyframes fadeIn {
        from {
          opacity: 0;
        }
        to {
          opacity: 1;
        }
      }

      .floating {
        animation: floating 3s ease-in-out infinite;
      }
      @keyframes floating {
        0%,
        100% {
          transform: translateY(0);
        }
        50% {
          transform: translateY(-15px);
        }
      }
    </style>
  </head>
  <body>
    <!-- 1. HEADER -->
    <header>
      <canvas id="header-particles" class="header-bg-particles"></canvas>
      <div style="position: relative; z-index: 2">
        <h1>EDUMATTER || EDUCHEM || CHEMSTUDY BABY</h1>
        <h2>CH·ª¶ ƒê·ªÄ 1: OXYGEN V√Ä KH√îNG KH√ç</h2>
      </div>
    </header>

    <nav class="sticky-nav" id="navbar">
      <ul>
        <li><a href="#oxygen" class="active">1. Oxygen</a></li>
        <li><a href="#khongkhi">2. Kh√¥ng Kh√≠</a></li>
        <li><a href="#onhiem">3. √î Nhi·ªÖm</a></li>
        <li><a href="#thinghiem">4. Th√≠ Nghi·ªám & M√¥ H√¨nh</a></li>
        <li><a href="#baitap">5. B√†i T·∫≠p</a></li>
      </ul>
    </nav>

    <div class="container">
      <!-- 2. MODULE 1: OXYGEN -->
      <section id="oxygen">
        <h2 class="section-title">1. Oxygen (Kh√≠ √î-xy)</h2>

        <div class="content-grid">
          <div>
            <h3>T√≥m t·∫Øt l√Ω thuy·∫øt</h3>
            <div class="card">
              <h4>T√≠nh ch·∫•t v·∫≠t l√≠</h4>
              <ul>
                <li>Tr·∫°ng th√°i: Kh√≠</li>
                <li>M√†u s·∫Øc: Kh√¥ng m√†u</li>
                <li>M√πi v·ªã: Kh√¥ng m√πi, kh√¥ng v·ªã</li>
                <li>T·ªâ tr·ªçng: N·∫∑ng h∆°n kh√¥ng kh√≠</li>
                <li>ƒê·ªô tan: √çt tan trong n∆∞·ªõc</li>
              </ul>
            </div>

            <div class="card">
              <h4>T·∫ßm quan tr·ªçng</h4>
              <p>
                <strong>Duy tr√¨ s·ª± s·ªëng:</strong> C·∫ßn thi·∫øt cho h√¥ h·∫•p. N√£o
                thi·∫øu O‚ÇÇ t·ª´ 4-5 ph√∫t s·∫Ω b·ªã t·ªïn th∆∞∆°ng.
              </p>
              <p>
                <strong>Duy tr√¨ s·ª± ch√°y:</strong> ƒê·ªët ch√°y nhi√™n li·ªáu (than,
                gas, c·ªßi).
              </p>
            </div>

            <div class="card" style="border-left-color: var(--secondary-color)">
              <h4>V√≠ d·ª• th·ª±c t·∫ø</h4>
              <ul>
                <li>üè• <strong>Y t·∫ø:</strong> B√¨nh d∆∞·ª°ng kh√≠ cho b·ªánh nh√¢n.</li>
                <li>
                  ü¶ê <strong>Th·ªßy s·∫£n:</strong> Qu·∫°t n∆∞·ªõc cung c·∫•p oxygen cho
                  t√¥m.
                </li>
                <li>
                  üöÄ <strong>C√¥ng nghi·ªáp:</strong> H√†n c·∫Øt kim lo·∫°i, nhi√™n li·ªáu
                  t√™n l·ª≠a.
                </li>
              </ul>
            </div>
          </div>

          <div>
            <!-- Visual Emphasis -->
            <div class="data-box">
              <p>·ªû 20¬∞C, 1 atm:</p>
              <span class="data-big">1 L√≠t N∆∞·ªõc</span>
              <p>h√≤a tan ƒë∆∞·ª£c kho·∫£ng</p>
              <span class="data-big">31 ml Oxygen</span>
              <p>(√çt tan, nh∆∞ng ƒë·ªß nu√¥i s·ªëng sinh v·∫≠t d∆∞·ªõi n∆∞·ªõc)</p>
            </div>

            <!-- Fire Triangle Simulation -->
            <div style="margin-top: 2rem">
              <h3 style="text-align: center; margin-bottom: 1rem">
                M√¥ ph·ªèng: Tam Gi√°c L·ª≠a
              </h3>
              <p
                style="
                  text-align: center;
                  font-size: 0.9rem;
                  margin-bottom: 10px;
                "
              >
                B·∫•m v√†o c√°c n√∫t b√™n d∆∞·ªõi ƒë·ªÉ lo·∫°i b·ªè y·∫øu t·ªë duy tr√¨ s·ª± ch√°y!
              </p>

              <div
                class="simulation-container"
                style="background: #333; height: 350px"
              >
                <div class="triangle-container" id="fireTriangleVis">
                  <!-- Draw Triangle with CSS/SVG -->
                  <svg width="300" height="300" viewBox="0 0 300 300">
                    <!-- Fuel (Bottom) -->
                    <path
                      id="side-fuel"
                      d="M50 250 L250 250"
                      stroke="#8B4513"
                      stroke-width="15"
                      stroke-linecap="round"
                      class="triangle-active"
                    />
                    <text x="150" y="280" fill="white" text-anchor="middle">
                      CH·∫§T CH√ÅY
                    </text>

                    <!-- Oxygen (Right) -->
                    <path
                      id="side-oxygen"
                      d="M250 250 L150 50"
                      stroke="#00BFFF"
                      stroke-width="15"
                      stroke-linecap="round"
                      class="triangle-active"
                    />
                    <text
                      x="230"
                      y="140"
                      fill="white"
                      text-anchor="middle"
                      transform="rotate(60 230,140)"
                    >
                      OXYGEN
                    </text>

                    <!-- Heat (Left) -->
                    <path
                      id="side-heat"
                      d="M150 50 L50 250"
                      stroke="#FF4500"
                      stroke-width="15"
                      stroke-linecap="round"
                      class="triangle-active"
                    />
                    <text
                      x="70"
                      y="140"
                      fill="white"
                      text-anchor="middle"
                      transform="rotate(-60 70,140)"
                    >
                      NHI·ªÜT ƒê·ªò
                    </text>
                  </svg>

                  <!-- Fire Animation (Central) -->
                  <div id="fire-element" class="fire-center burning">
                    <svg
                      viewBox="0 0 24 24"
                      fill="none"
                      xmlns="http://www.w3.org/2000/svg"
                    >
                      <path
                        d="M12 22C17.5228 22 22 17.5228 22 12C22 6.47715 17.5228 2 12 2C6.47715 2 2 6.47715 2 12C2 17.5228 6.47715 22 12 22Z"
                        fill="#FFA500"
                        opacity="0.3"
                      />
                      <path
                        d="M11.9998 2C11.9998 2 7.00024 10.1556 7.00024 14.5C7.00024 17.5376 9.23882 20 12.0002 20C14.7617 20 17.0002 17.5376 17.0002 14.5C17.0002 10.1556 12.0007 2 11.9998 2Z"
                        fill="#FF4500"
                      />
                      <path
                        d="M12 5.5C12 5.5 9 11.5 9 14.5C9 16.5 10.5 18 12 18C13.5 18 15 16.5 15 14.5C15 11.5 12 5.5 12 5.5Z"
                        fill="#FFD700"
                      />
                    </svg>
                  </div>
                </div>

                <div class="controls">
                  <button
                    class="btn btn-secondary js-fire-btn"
                    data-factor="fuel"
                  >
                    B·∫≠t/T·∫Øt Ch·∫•t Ch√°y
                  </button>
                  <button
                    class="btn btn-secondary js-fire-btn"
                    data-factor="oxygen"
                  >
                    B·∫≠t/T·∫Øt Oxygen
                  </button>
                  <button
                    class="btn btn-secondary js-fire-btn"
                    data-factor="heat"
                  >
                    B·∫≠t/T·∫Øt Nhi·ªát ƒê·ªô
                  </button>
                </div>
                <div
                  id="fire-status"
                  style="margin-top: 10px; font-weight: bold; color: #ff4500"
                >
                  TR·∫†NG TH√ÅI: ƒêANG CH√ÅY
                </div>
              </div>
            </div>
          </div>
        </div>
      </section>

      <!-- 3. MODULE 2: AIR -->
      <section id="khongkhi">
        <h2 class="section-title">2. Kh√¥ng Kh√≠ v√† Th√†nh Ph·∫ßn</h2>

        <div class="content-grid">
          <!-- Visual Left -->
          <div>
            <div
              class="simulation-container"
              style="background: #f0f8ff; color: #333; min-height: 450px"
            >
              <canvas id="airChartCanvas" width="400" height="300"></canvas>
              <div
                id="chart-tooltip"
                style="margin-top: 10px; font-weight: bold; height: 20px"
              >
                Di chu·ªôt v√†o bi·ªÉu ƒë·ªì ƒë·ªÉ xem chi ti·∫øt
              </div>

              <!-- Gas Animation -->
              <div
                style="
                  width: 100%;
                  height: 150px;
                  background: #fff;
                  border: 1px solid #ccc;
                  margin-top: 20px;
                  position: relative;
                  overflow: hidden;
                "
                id="gas-box"
              >
                <p
                  style="
                    position: absolute;
                    top: 5px;
                    left: 5px;
                    font-size: 0.8rem;
                    color: #999;
                  "
                >
                  M√¥ ph·ªèng h·∫°t kh√≠ chuy·ªÉn ƒë·ªông
                </p>
                <!-- Canvas for particles -->
                <canvas
                  id="gasParticleCanvas"
                  width="400"
                  height="150"
                ></canvas>
              </div>
              <div
                style="
                  font-size: 0.8rem;
                  display: flex;
                  gap: 10px;
                  justify-content: center;
                  margin-top: 5px;
                "
              >
                <span style="color: blue">‚óè Nitrogen (78%)</span>
                <span style="color: red">‚óè Oxygen (21%)</span>
                <span style="color: green">‚óè Kh√°c (1%)</span>
              </div>
            </div>
          </div>

          <!-- Theory Right -->
          <div>
            <h3>Th√†nh ph·∫ßn kh√¥ng kh√≠</h3>
            <p>Kh√¥ng kh√≠ l√† h·ªón h·ª£p kh√≠ c√≥ th√†nh ph·∫ßn x√°c ƒë·ªãnh:</p>
            <ul style="margin-top: 1rem">
              <li style="margin-bottom: 10px">
                <strong style="color: #0066cc">Nitrogen (78%):</strong> Cung c·∫•p
                d∆∞·ª°ng ch·∫•t cho c√¢y tr·ªìng (qua vi khu·∫©n c·ªë ƒë·ªãnh ƒë·∫°m).
              </li>
              <li style="margin-bottom: 10px">
                <strong style="color: #dc3545">Oxygen (21%):</strong> Duy tr√¨ s·ª±
                s·ªëng v√† s·ª± ch√°y.
              </li>
              <li style="margin-bottom: 10px">
                <strong style="color: #28a745"
                  >Carbon Dioxide, H∆°i n∆∞·ªõc, Kh√≠ hi·∫øm (1%):</strong
                >
                <ul>
                  <li>CO‚ÇÇ: Nguy√™n li·ªáu quang h·ª£p.</li>
                  <li>H∆°i n∆∞·ªõc: ƒêi·ªÅu h√≤a nhi·ªát ƒë·ªô, t·∫°o m√¢y m∆∞a.</li>
                </ul>
              </li>
            </ul>

            <div
              class="card"
              style="margin-top: 2rem; border-left-color: #17a2b8"
            >
              <h4>Hi·ªán t∆∞·ª£ng s∆∞∆°ng m√π</h4>
              <p>
                H∆°i n∆∞·ªõc trong kh√¥ng kh√≠ khi g·∫∑p l·∫°nh ng∆∞ng t·ª• l·∫°i th√†nh c√°c h·∫°t
                n∆∞·ªõc li ti l∆° l·ª≠ng g·∫ßn m·∫∑t ƒë·∫•t t·∫°o th√†nh s∆∞∆°ng m√π.
              </p>
              <div
                class="controls"
                style="
                  background: none;
                  justify-content: flex-start;
                  padding: 0;
                "
              >
                <button class="btn" id="btn-fog">M√¥ ph·ªèng S∆∞∆°ng M√π</button>
              </div>
              <div
                id="fog-sim-display"
                style="
                  width: 100%;
                  height: 100px;
                  background: url(&quot;https://picsum.photos/400/100?grayscale&quot;)
                    center/cover;
                  margin-top: 10px;
                  position: relative;
                  border-radius: 8px;
                "
              >
                <div
                  id="fog-overlay"
                  style="
                    position: absolute;
                    top: 0;
                    left: 0;
                    width: 100%;
                    height: 100%;
                    background: rgba(255, 255, 255, 0);
                    transition: background 2s;
                  "
                ></div>
                <span
                  id="temp-display"
                  style="
                    position: absolute;
                    bottom: 5px;
                    right: 5px;
                    background: rgba(0, 0, 0, 0.5);
                    color: white;
                    padding: 2px 5px;
                    border-radius: 4px;
                  "
                  >25¬∞C</span
                >
              </div>
            </div>
          </div>
        </div>
      </section>

      <!-- 3. MODULE 3: POLLUTION -->
      <section id="onhiem">
        <h2 class="section-title">3. √î Nhi·ªÖm Kh√¥ng Kh√≠ & B·∫£o V·ªá M√¥i Tr∆∞·ªùng</h2>

        <div class="content-grid">
          <div>
            <h3>√î nhi·ªÖm kh√¥ng kh√≠ l√† g√¨?</h3>
            <p>
              L√† s·ª± thay ƒë·ªïi th√†nh ph·∫ßn kh√¥ng kh√≠ do kh√≥i, b·ª•i, kh√≠ l·∫°... g√¢y
              m√πi kh√≥ ch·ªãu, gi·∫£m t·∫ßm nh√¨n v√† h·∫°i s·ª©c kh·ªèe.
            </p>

            <h4 style="margin-top: 1rem">Ngu·ªìn g√¢y √¥ nhi·ªÖm:</h4>
            <ul>
              <li>
                üåã <strong>T·ª± nhi√™n:</strong> N√∫i l·ª≠a phun tr√†o, ch√°y r·ª´ng t·ª±
                nhi√™n.
              </li>
              <li>
                üè≠ <strong>Nh√¢n t·∫°o:</strong> Kh√≠ th·∫£i nh√† m√°y, xe c·ªô, ƒë·ªët r√°c.
              </li>
            </ul>

            <h4 style="margin-top: 1rem">H·∫≠u qu·∫£ nghi√™m tr·ªçng:</h4>
            <div class="card" style="border-left-color: #6610f2">
              <strong>M∆∞a Acid:</strong> Kh√≠ SO‚ÇÇ, NO‚Çì + H∆°i n∆∞·ªõc ‚Üí Acid (H‚ÇÇSO‚ÇÑ,
              HNO‚ÇÉ) ‚Üí L√†m ch·∫øt c√¢y, ƒÉn m√≤n c√¥ng tr√¨nh.
            </div>
            <div class="card" style="border-left-color: #fd7e14">
              <strong>Hi·ªáu ·ª©ng nh√† k√≠nh:</strong> CO‚ÇÇ tƒÉng cao ‚Üí Gi·ªØ nhi·ªát m·∫∑t
              tr·ªùi ‚Üí Tr√°i ƒê·∫•t n√≥ng l√™n.
            </div>
          </div>

          <div
            class="simulation-container"
            style="
              background: linear-gradient(to bottom, #87ceeb, #e0f7fa);
              color: #333;
            "
          >
            <h4>M√¥ ph·ªèng t√°c ƒë·ªông m√¥i tr∆∞·ªùng</h4>
            <div
              id="environment-scene"
              style="
                width: 100%;
                height: 200px;
                position: relative;
                overflow: hidden;
                border-bottom: 5px solid #4caf50;
              "
            >
              <!-- Factory -->
              <div
                style="
                  position: absolute;
                  bottom: 0;
                  left: 20px;
                  width: 60px;
                  height: 80px;
                  background: #555;
                "
              >
                <div
                  style="
                    position: absolute;
                    top: -30px;
                    left: 10px;
                    width: 20px;
                    height: 30px;
                    background: #555;
                  "
                ></div>
              </div>
              <!-- Tree -->
              <div
                id="tree-sim"
                style="
                  position: absolute;
                  bottom: 0;
                  right: 50px;
                  font-size: 80px;
                  transition: filter 2s;
                "
              >
                üå≥
              </div>
              <!-- Sky Overlay -->
              <div
                id="sky-overlay"
                style="
                  position: absolute;
                  top: 0;
                  left: 0;
                  width: 100%;
                  height: 100%;
                  pointer-events: none;
                  background: rgba(0, 0, 0, 0);
                  transition: background 2s;
                "
              ></div>
              <!-- Rain Container -->
              <canvas
                id="rainCanvas"
                width="400"
                height="200"
                style="
                  position: absolute;
                  top: 0;
                  left: 0;
                  pointer-events: none;
                "
              ></canvas>
            </div>

            <div class="controls" style="background: rgba(0, 0, 0, 0.1)">
              <label style="font-weight: bold">M·ª©c ƒë·ªô √¥ nhi·ªÖm:</label>
              <input
                type="range"
                id="pollution-slider"
                min="0"
                max="100"
                value="0"
                style="width: 150px"
              />
              <span id="pollution-level-text">S·∫°ch</span>
            </div>
            <p style="font-size: 0.9rem; margin-top: 10px">
              K√©o thanh tr∆∞·ª£t ƒë·ªÉ xem M∆∞a Acid v√† B·∫ßu tr·ªùi thay ƒë·ªïi!
            </p>
          </div>
        </div>

        <h3 style="margin-top: 2rem; text-align: center">
          Bi·ªán ph√°p b·∫£o v·ªá m√¥i tr∆∞·ªùng
        </h3>
        <div class="infographic-grid">
          <div class="info-card">
            <span class="info-icon">üö≤</span>
            <h4>Giao th√¥ng xanh</h4>
            <p>ƒêi xe ƒë·∫°p, xe bu√Ωt, xe ƒëi·ªán ƒë·ªÉ gi·∫£m kh√≥i b·ª•i.</p>
          </div>
          <div class="info-card">
            <span class="info-icon">üå≥</span>
            <h4>Tr·ªìng c√¢y xanh</h4>
            <p>C√¢y xanh h·∫•p th·ª• CO‚ÇÇ, cung c·∫•p O‚ÇÇ v√† l·ªçc b·ª•i.</p>
          </div>
          <div class="info-card">
            <span class="info-icon">‚òÄÔ∏è</span>
            <h4>NƒÉng l∆∞·ª£ng s·∫°ch</h4>
            <p>S·ª≠ d·ª•ng ƒëi·ªán gi√≥, ƒëi·ªán m·∫∑t tr·ªùi thay cho than ƒë√°.</p>
          </div>
        </div>
      </section>

      <!-- 4. MODULE 4: EXPERIMENTS & MODELS -->
      <section id="thinghiem">
        <h2 class="section-title">4. Th√≠ Nghi·ªám & M√¥ Ph·ªèng Chuy√™n S√¢u</h2>

        <div class="content-grid">
          <!-- Experiment 1: Glowing Splint -->
          <div>
            <h3>Th√≠ nghi·ªám 1: T√≠nh ch·∫•t c·ªßa Oxygen</h3>
            <p>
              <strong>M·ª•c ƒë√≠ch:</strong> Ch·ª©ng minh oxygen duy tr√¨ s·ª± ch√°y m·∫°nh.
            </p>
            <p>
              <strong>C√°ch ti·∫øn h√†nh:</strong> ƒê∆∞a que ƒë√≥m c√≤n t√†n ƒë·ªè v√†o l·ªç
              ch·ª©a kh√≠ oxygen tinh khi·∫øt.
            </p>

            <div
              class="simulation-container"
              style="height: 300px; background: #222"
            >
              <div
                id="jar-container"
                style="
                  position: relative;
                  width: 100px;
                  height: 150px;
                  border: 3px solid rgba(255, 255, 255, 0.5);
                  border-top: none;
                  margin-top: 50px;
                "
              >
                <span
                  style="
                    position: absolute;
                    bottom: 5px;
                    width: 100%;
                    text-align: center;
                    color: rgba(255, 255, 255, 0.5);
                  "
                  >Kh√≠ O‚ÇÇ</span
                >
              </div>
              <div
                id="splint"
                style="
                  position: absolute;
                  top: 50px;
                  width: 6px;
                  height: 80px;
                  background: #8b4513;
                  transition: top 1s;
                "
              >
                <!-- Ember (T√†n ƒë·ªè) -->
                <div
                  id="ember"
                  style="
                    position: absolute;
                    bottom: 0;
                    left: 0;
                    width: 6px;
                    height: 6px;
                    background: red;
                    box-shadow: 0 0 5px red;
                    border-radius: 50%;
                  "
                ></div>
                <!-- Flame (Ng·ªçn l·ª≠a) -->
                <div
                  id="splint-flame"
                  style="
                    position: absolute;
                    bottom: -15px;
                    left: -7px;
                    width: 20px;
                    height: 30px;
                    background: orange;
                    border-radius: 50% 50% 20% 20%;
                    box-shadow: 0 0 10px orange;
                    opacity: 0;
                    transition: opacity 0.2s;
                  "
                ></div>
              </div>

              <div class="controls">
                <button class="btn" id="btn-splint-run">
                  Th·ª±c hi·ªán th√≠ nghi·ªám
                </button>
                <button class="btn btn-secondary" id="btn-splint-reset">
                  L√†m l·∫°i
                </button>
              </div>
              <div id="splint-status">
                Tr·∫°ng th√°i: Que ƒë√≥m t√†n ƒë·ªè b√™n ngo√†i kh√¥ng kh√≠.
              </div>
            </div>
          </div>

          <!-- Experiment 2: Candle and Water -->
          <div>
            <h3>Th√≠ nghi·ªám 2: X√°c ƒë·ªãnh t·ªâ l·ªá Oxygen</h3>
            <p>
              <strong>M·ª•c ƒë√≠ch:</strong> Ch·ª©ng minh O‚ÇÇ chi·∫øm kho·∫£ng 1/5 th·ªÉ t√≠ch
              kh√¥ng kh√≠.
            </p>
            <p>
              <strong>C√°ch ti·∫øn h√†nh:</strong> ƒê·ªët n·∫øn trong ch·∫≠u n∆∞·ªõc, √∫p ·ªëng
              th·ªßy tinh l√™n.
            </p>

            <div
              class="simulation-container"
              style="height: 300px; background: #ddd; color: #000"
            >
              <canvas
                id="candleCanvas"
                width="300"
                height="200"
                style="border-bottom: 2px solid #0066cc"
              ></canvas>

              <div class="controls">
                <button class="btn" id="btn-candle-run">B·∫Øt ƒë·∫ßu</button>
                <button class="btn btn-secondary" id="btn-candle-reset">
                  L√†m l·∫°i
                </button>
              </div>
              <div
                id="candle-result"
                style="font-weight: bold; min-height: 24px"
              ></div>
            </div>
          </div>
        </div>

        <!-- Cycle Simulation -->
        <div style="margin-top: 3rem">
          <h3>M√¥ ph·ªèng Chu tr√¨nh Oxygen - Carbon Dioxide</h3>
          <div
            class="simulation-container"
            style="background: white; color: #333; border: 1px solid #ddd"
          >
            <svg width="600" height="300" viewBox="0 0 600 300" id="cycle-svg">
              <!-- Tree -->
              <g transform="translate(50, 100)">
                <rect x="40" y="100" width="20" height="100" fill="#8B4513" />
                <circle cx="50" cy="80" r="50" fill="#228B22" />
                <circle cx="30" cy="100" r="40" fill="#228B22" />
                <circle cx="70" cy="100" r="40" fill="#228B22" />
                <text x="50" y="230" text-anchor="middle" font-weight="bold">
                  TH·ª∞C V·∫¨T
                </text>
                <text x="50" y="250" text-anchor="middle" font-size="12">
                  (Quang h·ª£p)
                </text>
              </g>

              <!-- Human/Animal -->
              <g transform="translate(450, 120)">
                <circle cx="50" cy="30" r="20" fill="#FFDAB9" />
                <rect x="30" y="50" width="40" height="60" fill="#000080" />
                <line
                  x1="30"
                  y1="60"
                  x2="10"
                  y2="90"
                  stroke="#FFDAB9"
                  stroke-width="5"
                />
                <line
                  x1="70"
                  y1="60"
                  x2="90"
                  y2="90"
                  stroke="#FFDAB9"
                  stroke-width="5"
                />
                <line
                  x1="40"
                  y1="110"
                  x2="40"
                  y2="150"
                  stroke="#000"
                  stroke-width="5"
                />
                <line
                  x1="60"
                  y1="110"
                  x2="60"
                  y2="150"
                  stroke="#000"
                  stroke-width="5"
                />
                <text x="50" y="210" text-anchor="middle" font-weight="bold">
                  CON NG∆Ø·ªúI
                </text>
                <text x="50" y="230" text-anchor="middle" font-size="12">
                  (H√¥ h·∫•p)
                </text>
              </g>

              <!-- Arrows O2 -->
              <path
                d="M120 100 Q 275 20 430 100"
                fill="none"
                stroke="#28a745"
                stroke-width="3"
                marker-end="url(#arrowhead-green)"
              />
              <circle cx="120" cy="100" r="5" fill="#28a745">
                <animateMotion
                  dur="2s"
                  repeatCount="indefinite"
                  path="M120 100 Q 275 20 430 100"
                />
              </circle>
              <text
                x="275"
                y="50"
                text-anchor="middle"
                fill="#28a745"
                font-weight="bold"
              >
                OXYGEN (O‚ÇÇ)
              </text>

              <!-- Arrows CO2 -->
              <path
                d="M430 180 Q 275 260 120 180"
                fill="none"
                stroke="#666"
                stroke-width="3"
                marker-end="url(#arrowhead-grey)"
                stroke-dasharray="5,5"
              />
              <circle cx="430" cy="180" r="5" fill="#666">
                <animateMotion
                  dur="2s"
                  repeatCount="indefinite"
                  path="M430 180 Q 275 260 120 180"
                />
              </circle>
              <text
                x="275"
                y="250"
                text-anchor="middle"
                fill="#666"
                font-weight="bold"
              >
                CARBON DIOXIDE (CO‚ÇÇ)
              </text>

              <!-- Definitions -->
              <defs>
                <marker
                  id="arrowhead-green"
                  markerWidth="10"
                  markerHeight="7"
                  refX="0"
                  refY="3.5"
                  orient="auto"
                >
                  <polygon points="0 0, 10 3.5, 0 7" fill="#28a745" />
                </marker>
                <marker
                  id="arrowhead-grey"
                  markerWidth="10"
                  markerHeight="7"
                  refX="0"
                  refY="3.5"
                  orient="auto"
                >
                  <polygon points="0 0, 10 3.5, 0 7" fill="#666" />
                </marker>
              </defs>
            </svg>
          </div>
        </div>
      </section>

      <!-- 5. MODULE 5: EXERCISES -->
      <section id="baitap">
        <h2 class="section-title">5. B√†i T·∫≠p Luy·ªán T·∫≠p</h2>
        <p style="margin-bottom: 2rem">
          H√£y suy nghƒ© k·ªπ tr∆∞·ªõc khi xem g·ª£i √Ω nh√©!
        </p>

        <div class="exercise-group">
          <h3>Ph·∫ßn 1: Oxygen</h3>

          <div class="exercise-item">
            <div class="exercise-header">
              <span
                >C√¢u 1: N√™u c√°c t√≠nh ch·∫•t v·∫≠t l√≠ c∆° b·∫£n c·ªßa kh√≠ oxygen?</span
              >
              <button class="btn btn-secondary js-hint-btn" data-target="hint1">
                Xem g·ª£i √Ω
              </button>
            </div>
            <div class="exercise-body">
              <div id="hint1" class="hint-box">
                <strong>G·ª£i √Ω:</strong> H√£y nh·ªõ v·ªÅ m√†u s·∫Øc (c√≥ nh√¨n th·∫•y
                kh√¥ng?), m√πi v·ªã, tr·∫°ng th√°i t·ªìn t·∫°i ·ªü nhi·ªát ƒë·ªô th∆∞·ªùng, v√† t·ªâ
                tr·ªçng so v·ªõi kh√¥ng kh√≠ (n·∫∑ng hay nh·∫π?). Nh·ªõ v·ªÅ kh·∫£ nƒÉng tan
                trong n∆∞·ªõc c·ªßa n√≥ (c√° th·ªü ƒë∆∞·ª£c d∆∞·ªõi n∆∞·ªõc nh∆∞ng oxygen tan nhi·ªÅu
                hay √≠t?).
              </div>
            </div>
          </div>

          <div class="exercise-item">
            <div class="exercise-header">
              <span
                >C√¢u 2: V√¨ sao th·ª£ l·∫∑n ho·∫∑c l√≠nh c·ª©u h·ªèa ph·∫£i ƒëeo b√¨nh n√©n kh√≠
                oxygen?</span
              >
              <button class="btn btn-secondary js-hint-btn" data-target="hint2">
                Xem g·ª£i √Ω
              </button>
            </div>
            <div class="exercise-body">
              <div id="hint2" class="hint-box">
                <strong>G·ª£i √Ω:</strong>
                <ul>
                  <li>
                    M√¥i tr∆∞·ªùng d∆∞·ªõi n∆∞·ªõc con ng∆∞·ªùi c√≥ th·ªü ƒë∆∞·ª£c tr·ª±c ti·∫øp kh√¥ng?
                  </li>
                  <li>
                    Trong ƒë√°m ch√°y, kh√≥i b·ª•i nhi·ªÅu v√† n·ªìng ƒë·ªô oxygen thay ƒë·ªïi
                    nh∆∞ th·∫ø n√†o?
                  </li>
                  <li>Con ng∆∞·ªùi c·∫ßn kh√≠ g√¨ ƒë·ªÉ duy tr√¨ s·ª± s·ªëng?</li>
                </ul>
              </div>
            </div>
          </div>

          <div class="exercise-item">
            <div class="exercise-header">
              <span
                >C√¢u 3: Gi·∫£i th√≠ch hi·ªán t∆∞·ª£ng khi qu·∫°t v√†o b·∫øp than ƒëang ch√°y
                th√¨ l·ª≠a b√πng to h∆°n?</span
              >
              <button class="btn btn-secondary js-hint-btn" data-target="hint3">
                Xem g·ª£i √Ω
              </button>
            </div>
            <div class="exercise-body">
              <div id="hint3" class="hint-box">
                <strong>G·ª£i √Ω:</strong> Qu·∫°t gi√≥ cung c·∫•p th√™m kh√≠ g√¨ v√†o b·∫øp?
                Kh√≠ ƒë√≥ c√≥ vai tr√≤ g√¨ ƒë·ªëi v·ªõi s·ª± ch√°y? (G·ª£i √Ω: ƒê√¢y l√† m·ªôt trong 3
                c·∫°nh c·ªßa tam gi√°c l·ª≠a).
              </div>
            </div>
          </div>
        </div>

        <div class="exercise-group" style="margin-top: 2rem">
          <h3>Ph·∫ßn 2: Kh√¥ng kh√≠ & √î nhi·ªÖm</h3>

          <div class="exercise-item">
            <div class="exercise-header">
              <span
                >C√¢u 4: Ch·∫•t kh√≠ n√†o chi·∫øm t·ªâ l·ªá l·ªõn nh·∫•t trong kh√¥ng kh√≠ v√† vai
                tr√≤ c·ªßa n√≥?</span
              >
              <button class="btn btn-secondary js-hint-btn" data-target="hint4">
                Xem g·ª£i √Ω
              </button>
            </div>
            <div class="exercise-body">
              <div id="hint4" class="hint-box">
                <strong>G·ª£i √Ω:</strong> Nh√¨n l·∫°i bi·ªÉu ƒë·ªì h√¨nh tr√≤n ·ªü M·ª•c 2. Kh√≠
                n√†y chi·∫øm 78%. N√≥ kh√¥ng duy tr√¨ s·ª± ch√°y nh∆∞ng r·∫•t quan tr·ªçng cho
                c√¢y tr·ªìng (h·ªç ƒë·∫≠u).
              </div>
            </div>
          </div>

          <div class="exercise-item">
            <div class="exercise-header">
              <span
                >C√¢u 5: T·∫°i sao tr·ªìng nhi·ªÅu c√¢y xanh l√† bi·ªán ph√°p h·ªØu hi·ªáu ƒë·ªÉ
                l√†m s·∫°ch kh√¥ng kh√≠?</span
              >
              <button class="btn btn-secondary js-hint-btn" data-target="hint5">
                Xem g·ª£i √Ω
              </button>
            </div>
            <div class="exercise-body">
              <div id="hint5" class="hint-box">
                <strong>G·ª£i √Ω:</strong> H√£y nghƒ© v·ªÅ qu√° tr√¨nh quang h·ª£p c·ªßa c√¢y
                xanh. C√¢y l·∫•y kh√≠ g√¨ v√†o (kh√≠ g√¢y hi·ªáu ·ª©ng nh√† k√≠nh) v√† th·∫£i ra
                kh√≠ g√¨ (kh√≠ c·∫ßn cho s·ª± s·ªëng)? Ngo√†i ra l√° c√¢y c√≤n c√≥ t√°c d·ª•ng g√¨
                v·ªõi b·ª•i?
              </div>
            </div>
          </div>
        </div>
      </section>
    </div>

    <footer>
      <div class="footer-waves"></div>
      <div class="footer-grid">
        <div class="footer-brand" data-aos="fade-right">
          <h2>EDUMATTER</h2>
          <p style="color: #94a3b8; line-height: 1.8">
            Ki·∫øn t·∫°o m√¥i tr∆∞·ªùng h·ªçc t·∫≠p c·∫£m x√∫c, n∆°i tri th·ª©c ƒë∆∞·ª£c s·ªë h√≥a v√†
            truy·ªÅn t·∫£i ƒë·∫ßy c·∫£m h·ª©ng.
          </p>
          <div style="display: flex; gap: 15px; margin-top: 30px">
            <a href="#" class="icon-btn"><i class="fab fa-facebook"></i></a>
            <a href="#" class="icon-btn"><i class="fab fa-github"></i></a>
            <a href="#" class="icon-btn"><i class="fab fa-youtube"></i></a>
          </div>
        </div>
        <div class="footer-links" data-aos="fade-up">
          <h4>Li√™n h·ªá nhanh</h4>
          <div class="contact-item">
            <i class="fas fa-envelope"></i>
            <span>ducnt21042010@gmail.com</span>
          </div>
          <div class="contact-item">
            <i class="fas fa-phone"></i>
            <span>034 226 6204</span>
          </div>
          <div class="contact-item">
            <i class="fas fa-location-dot"></i>
            <span>THPT T√¥n ƒê·ª©c Th·∫Øng, ƒê·ªìng Nai</span>
          </div>
        </div>
        <div class="footer-links" data-aos="fade-left">
          <h4>ƒê·ªôi ng≈© DNT</h4>
          <p style="color: #94a3b8">
            "S√°ng t·∫°o kh√¥ng ng·ª´ng - V∆∞∆°n t·∫ßm tri th·ª©c"
          </p>
          <div
            style="
              margin-top: 20px;
              padding: 15px;
              background: rgba(255, 255, 255, 0.05);
              border-radius: 15px;
            "
          >
            <p style="font-size: 0.8rem; color: #fff">
              D·ª± √°n ƒë∆∞·ª£c ph√°t tri·ªÉn b·ªüi c√°c th√†nh vi√™n ƒëam m√™ c√¥ng ngh·ªá t·∫°i Vi·ªát
              Nam.
            </p>
          </div>
        </div>
      </div>
      <div class="copyright">
        <p>
          ¬© 2026 EDUMATTER Educational Ecosystem. Designed with
          <i class="fas fa-heart" style="color: #ef4444"></i> by DNT Team.
        </p>
      </div>
    </footer>

    <!-- JAVASCRIPT LOGIC -->
    <script>
      document.addEventListener("DOMContentLoaded", () => {
        "use strict";

        // ==========================================
        // 1. GLOBAL UTILS & HEADER PARTICLES
        // ==========================================

        // Sticky Nav Active Link Highlight
        const navbar = document.getElementById("navbar");
        const sections = document.querySelectorAll("section");
        const navLinks = document.querySelectorAll(".sticky-nav a");

        window.addEventListener("scroll", () => {
          let current = "";
          sections.forEach((section) => {
            const sectionTop = section.offsetTop;
            // Offset 150px for better activation timing
            if (window.scrollY >= sectionTop - 150) {
              current = section.getAttribute("id");
            }
          });

          navLinks.forEach((a) => {
            a.classList.remove("active");
            if (a.getAttribute("href").includes(current)) {
              a.classList.add("active");
            }
          });
        });

        // Header Background Particles
        const headerCanvas = document.getElementById("header-particles");
        if (headerCanvas) {
          const hCtx = headerCanvas.getContext("2d");
          headerCanvas.width = window.innerWidth;
          headerCanvas.height = 300;

          const hParticles = [];
          for (let i = 0; i < 50; i++) {
            hParticles.push({
              x: Math.random() * headerCanvas.width,
              y: Math.random() * headerCanvas.height,
              r: Math.random() * 3 + 1,
              dx: (Math.random() - 0.5) * 1,
              dy: (Math.random() - 0.5) * 1,
            });
          }

          function animateHeader() {
            hCtx.clearRect(0, 0, headerCanvas.width, headerCanvas.height);
            hCtx.fillStyle = "rgba(255,255,255,0.3)";
            hParticles.forEach((p) => {
              hCtx.beginPath();
              hCtx.arc(p.x, p.y, p.r, 0, Math.PI * 2);
              hCtx.fill();
              p.x += p.dx;
              p.y += p.dy;
              if (p.x < 0 || p.x > headerCanvas.width) p.dx *= -1;
              if (p.y < 0 || p.y > headerCanvas.height) p.dy *= -1;
            });
            requestAnimationFrame(animateHeader);
          }
          animateHeader();

          // Resize handling for header particles
          window.addEventListener("resize", () => {
            headerCanvas.width = window.innerWidth;
          });
        }

        // ==========================================
        // 2. FIRE TRIANGLE LOGIC
        // ==========================================
        const fireState = {
          fuel: true,
          oxygen: true,
          heat: true,
        };

        const fireButtons = document.querySelectorAll(".js-fire-btn");
        fireButtons.forEach((btn) => {
          btn.addEventListener("click", (e) => {
            const factor = e.target.getAttribute("data-factor");
            toggleFireFactor(factor, e.target);
          });
        });

        function toggleFireFactor(factor, btn) {
          fireState[factor] = !fireState[factor];

          // Visual Update
          const side = document.getElementById(`side-${factor}`);

          if (fireState[factor]) {
            side.classList.add("triangle-active");
            side.setAttribute("stroke-opacity", "1");
            btn.style.opacity = "1";
            btn.innerText = `T·∫Øt ${getFactorName(factor)}`;
            btn.classList.remove("btn-danger");
            btn.classList.add("btn-secondary");
          } else {
            side.classList.remove("triangle-active");
            side.setAttribute("stroke-opacity", "0.2");
            btn.style.opacity = "0.6";
            btn.innerText = `B·∫≠t ${getFactorName(factor)}`;
            btn.classList.remove("btn-secondary");
            btn.classList.add("btn-danger");
          }

          checkFire();
        }

        function getFactorName(f) {
          if (f === "fuel") return "Ch·∫•t Ch√°y";
          if (f === "oxygen") return "Oxygen";
          return "Nhi·ªát ƒê·ªô";
        }

        function checkFire() {
          const fireEl = document.getElementById("fire-element");
          const statusEl = document.getElementById("fire-status");

          if (fireState.fuel && fireState.oxygen && fireState.heat) {
            fireEl.classList.add("burning");
            statusEl.innerText = "TR·∫†NG TH√ÅI: ƒêANG CH√ÅY";
            statusEl.style.color = "#ff4500";
          } else {
            fireEl.classList.remove("burning");
            statusEl.innerText = "TR·∫†NG TH√ÅI: L·ª¨A T·∫ÆT (Thi·∫øu y·∫øu t·ªë)";
            statusEl.style.color = "#888";
          }
        }

        // ==========================================
        // 3. AIR COMPOSITION CHARTS & SIMS
        // ==========================================

        // 3a. Pie Chart
        const airCanvas = document.getElementById("airChartCanvas");
        if (airCanvas) {
          const airCtx = airCanvas.getContext("2d");
          const airData = [
            { label: "Nitrogen", value: 0.78, color: "#0066cc" },
            { label: "Oxygen", value: 0.21, color: "#dc3545" },
            { label: "Kh√°c", value: 0.01, color: "#28a745" },
          ];

          function drawPieChart() {
            airCtx.clearRect(0, 0, airCanvas.width, airCanvas.height);
            let startAngle = 0;
            const cx = airCanvas.width / 2;
            const cy = airCanvas.height / 2;
            const radius = 100;

            airData.forEach((slice) => {
              const sliceAngle = slice.value * 2 * Math.PI;
              airCtx.beginPath();
              airCtx.moveTo(cx, cy);
              airCtx.arc(cx, cy, radius, startAngle, startAngle + sliceAngle);
              airCtx.closePath();
              airCtx.fillStyle = slice.color;
              airCtx.fill();

              // Labels
              const midAngle = startAngle + sliceAngle / 2;
              const tx = cx + Math.cos(midAngle) * (radius + 30);
              const ty = cy + Math.sin(midAngle) * (radius + 30);
              airCtx.fillStyle = "#333";
              airCtx.font = "14px Arial";
              airCtx.fillText(slice.value * 100 + "%", tx - 10, ty);

              startAngle += sliceAngle;
            });
          }
          drawPieChart();

          // Tooltip interaction
          airCanvas.addEventListener("mousemove", () => {
            const tooltip = document.getElementById("chart-tooltip");
            if (tooltip)
              tooltip.innerText =
                "Th√†nh ph·∫ßn kh√¥ng kh√≠ (Nitrogen 78%, Oxygen 21%, Kh√°c 1%)";
          });
        }

        // 3b. Gas Particles
        const gasCanvas = document.getElementById("gasParticleCanvas");
        if (gasCanvas) {
          const gasCtx = gasCanvas.getContext("2d");
          const gasParticles = [];

          // Create 78 blue dots, 21 red dots, 1 green dot
          for (let i = 0; i < 78; i++)
            gasParticles.push(createGasParticle("blue"));
          for (let i = 0; i < 21; i++)
            gasParticles.push(createGasParticle("red"));
          gasParticles.push(createGasParticle("green"));

          function createGasParticle(color) {
            return {
              x: Math.random() * gasCanvas.width,
              y: Math.random() * gasCanvas.height,
              vx: (Math.random() - 0.5) * 2,
              vy: (Math.random() - 0.5) * 2,
              color: color,
            };
          }

          function animateGas() {
            gasCtx.clearRect(0, 0, gasCanvas.width, gasCanvas.height);
            gasParticles.forEach((p) => {
              p.x += p.vx;
              p.y += p.vy;

              if (p.x < 0 || p.x > gasCanvas.width) p.vx *= -1;
              if (p.y < 0 || p.y > gasCanvas.height) p.vy *= -1;

              gasCtx.beginPath();
              gasCtx.arc(p.x, p.y, 3, 0, Math.PI * 2);
              gasCtx.fillStyle = p.color;
              gasCtx.fill();
            });
            requestAnimationFrame(animateGas);
          }
          animateGas();
        }

        // 3c. Fog Simulation
        const fogBtn = document.getElementById("btn-fog");
        if (fogBtn) {
          fogBtn.addEventListener("click", (e) => {
            startFogSim(e.target);
          });
        }

        function startFogSim(btn) {
          const fog = document.getElementById("fog-overlay");
          const temp = document.getElementById("temp-display");

          btn.disabled = true;

          // Step 1: Normal
          fog.style.background = "rgba(255,255,255,0)";
          temp.innerText = "25¬∞C";

          // Step 2: Cool down
          setTimeout(() => {
            temp.innerText = "15¬∞C (Tr·ªùi l·∫°nh d·∫ßn)";
          }, 1000);

          // Step 3: Fog forms
          setTimeout(() => {
            temp.innerText = "5¬∞C (H∆°i n∆∞·ªõc ng∆∞ng t·ª•)";
            fog.style.background = "rgba(255,255,255,0.8)"; // Dense fog
          }, 2000);

          // Step 4: Reset
          setTimeout(() => {
            temp.innerText = "25¬∞C (N·∫Øng l√™n)";
            fog.style.background = "rgba(255,255,255,0)";
            btn.disabled = false;
          }, 5000);
        }

        // ==========================================
        // 4. POLLUTION & ENVIRONMENT
        // ==========================================
        const pollutionSlider = document.getElementById("pollution-slider");
        const pollutionText = document.getElementById("pollution-level-text");
        const skyOverlay = document.getElementById("sky-overlay");
        const treeSim = document.getElementById("tree-sim");
        const rainCanvas = document.getElementById("rainCanvas");

        if (rainCanvas && pollutionSlider) {
          const rainCtx = rainCanvas.getContext("2d");
          const drops = [];

          for (let i = 0; i < 50; i++) {
            drops.push({
              x: Math.random() * 400,
              y: Math.random() * 200,
              speed: 2 + Math.random() * 3,
            });
          }

          function animateRain() {
            rainCtx.clearRect(0, 0, 400, 200);
            const val = parseInt(pollutionSlider.value);

            // Rain Color changes based on pollution
            const r = 100 + val;
            const g = 100 + val;
            const b = 255 - val;

            rainCtx.strokeStyle = `rgb(${r}, ${g}, ${b})`;
            rainCtx.lineWidth = 1;

            drops.forEach((d) => {
              d.y += d.speed;
              if (d.y > 200) d.y = 0;

              rainCtx.beginPath();
              rainCtx.moveTo(d.x, d.y);
              rainCtx.lineTo(d.x, d.y + 10);
              rainCtx.stroke();
            });
            requestAnimationFrame(animateRain);
          }
          animateRain();

          pollutionSlider.addEventListener("input", (e) => {
            const val = parseInt(e.target.value);

            // Text
            if (val < 30) pollutionText.innerText = "S·∫°ch";
            else if (val < 70) pollutionText.innerText = "√î nhi·ªÖm nh·∫π";
            else pollutionText.innerText = "√î nhi·ªÖm n·∫∑ng (M∆∞a Acid!)";

            // Sky darkens
            skyOverlay.style.background = `rgba(100, 100, 100, ${val / 200})`;

            // Tree dies
            if (val > 80) {
              treeSim.style.filter = "grayscale(100%) sepia(50%)"; // Dead brown
              treeSim.style.transform = "scale(0.9) rotate(5deg)";
            } else {
              treeSim.style.filter = "none";
              treeSim.style.transform = "scale(1)";
            }
          });
        }

        // ==========================================
        // 5. EXPERIMENTS
        // ==========================================

        // 5a. Glowing Splint
        const btnSplintRun = document.getElementById("btn-splint-run");
        const btnSplintReset = document.getElementById("btn-splint-reset");
        let splintTimeouts = [];

        if (btnSplintRun && btnSplintReset) {
          btnSplintRun.addEventListener("click", runSplintExperiment);
          btnSplintReset.addEventListener("click", resetSplintExperiment);
        }

        function clearSplintTimeouts() {
          splintTimeouts.forEach((id) => clearTimeout(id));
          splintTimeouts = [];
        }

        function runSplintExperiment() {
          // Clear any previous running animations
          clearSplintTimeouts();
          resetSplintUI();

          const splint = document.getElementById("splint");
          const flame = document.getElementById("splint-flame");
          const status = document.getElementById("splint-status");
          const ember = document.getElementById("ember");
          const btn = document.getElementById("btn-splint-run");

          btn.disabled = true;

          // Step 1
          status.innerText = "B∆∞·ªõc 1: ƒê·ªët que ƒë√≥m ch√°y trong kh√¥ng kh√≠.";
          flame.style.opacity = "1";

          splintTimeouts.push(
            setTimeout(() => {
              status.innerText = "B∆∞·ªõc 2: Th·ªïi t·∫Øt ng·ªçn l·ª≠a, ch·ªâ c√≤n t√†n ƒë·ªè.";
              flame.style.opacity = "0";
              ember.style.opacity = "1";

              splintTimeouts.push(
                setTimeout(() => {
                  status.innerText = "B∆∞·ªõc 3: ƒê∆∞a t√†n ƒë·ªè v√†o b√¨nh kh√≠ O‚ÇÇ...";
                  splint.style.top = "120px"; // Move into jar

                  splintTimeouts.push(
                    setTimeout(() => {
                      status.innerText =
                        "Hi·ªán t∆∞·ª£ng: Que ƒë√≥m b√πng ch√°y tr·ªü l·∫°i!";
                      status.style.color = "red";
                      status.style.fontWeight = "bold";
                      flame.style.opacity = "1"; // Reignite
                      flame.style.transform = "scale(1.5)"; // Burn bigger
                      btn.disabled = false;
                    }, 1000),
                  );
                }, 2000),
              );
            }, 2000),
          );
        }

        function resetSplintUI() {
          const splint = document.getElementById("splint");
          const flame = document.getElementById("splint-flame");
          const status = document.getElementById("splint-status");
          const btn = document.getElementById("btn-splint-run");

          splint.style.top = "50px";
          flame.style.opacity = "0";
          flame.style.transform = "scale(1)";
          status.innerText = "Tr·∫°ng th√°i: S·∫µn s√†ng.";
          status.style.color = "inherit";
          if (btn) btn.disabled = false;
        }

        function resetSplintExperiment() {
          clearSplintTimeouts();
          resetSplintUI();
        }

        // 5b. Candle Experiment (Canvas Animation)
        const cCanvas = document.getElementById("candleCanvas");
        const btnCandleRun = document.getElementById("btn-candle-run");
        const btnCandleReset = document.getElementById("btn-candle-reset");

        if (cCanvas && btnCandleRun && btnCandleReset) {
          const cCtx = cCanvas.getContext("2d");
          let candleAnimId;
          let waterLevel = 180; // Ground level y
          let flameSize = 20;
          let isSimulatingCandle = false;

          function drawCandleScene() {
            cCtx.clearRect(0, 0, 300, 200);

            // Draw Jar
            cCtx.strokeStyle = "#aaa";
            cCtx.lineWidth = 2;
            cCtx.strokeRect(100, 20, 100, 180); // The glass jar

            // Draw Water
            cCtx.fillStyle = "rgba(0, 100, 255, 0.5)";
            cCtx.fillRect(100, waterLevel, 100, 200 - waterLevel); // Inside jar water
            cCtx.fillRect(0, 180, 100, 20); // Outside left
            cCtx.fillRect(200, 180, 100, 20); // Outside right

            // Draw Candle
            cCtx.fillStyle = "#f0e68c";
            cCtx.fillRect(140, 140, 20, 40); // Candle body

            // Draw Flame
            if (flameSize > 0) {
              cCtx.beginPath();
              cCtx.moveTo(150, 140);
              cCtx.quadraticCurveTo(160, 140, 150, 140 - flameSize);
              cCtx.quadraticCurveTo(140, 140, 150, 140);
              cCtx.fillStyle = "orange";
              cCtx.fill();
            }
          }
          drawCandleScene(); // Initial render

          btnCandleRun.addEventListener("click", startCandleSim);
          btnCandleReset.addEventListener("click", resetCandleSim);

          function startCandleSim() {
            if (isSimulatingCandle) return;
            isSimulatingCandle = true;
            // Reset variables but not the scene immediately to avoid flicker
            waterLevel = 180;
            flameSize = 20;
            document.getElementById("candle-result").innerText =
              "N·∫øn ƒëang ch√°y, ti√™u th·ª• Oxygen...";

            let frame = 0;

            function loop() {
              frame++;

              // 1. Burning phase
              if (frame < 100) {
                flameSize = 20 + Math.random() * 2;
              }

              // 2. Oxygen low -> Flame shrinks
              else if (frame < 150) {
                flameSize -= 0.4;
                if (flameSize < 0) flameSize = 0;
              }

              // 3. Flame out -> Water rises
              else if (frame < 250) {
                flameSize = 0;
                if (waterLevel > 148) {
                  // Target: ~1/5 of jar height
                  waterLevel -= 0.5;
                }
              } else {
                document.getElementById("candle-result").innerText =
                  "N·∫øn t·∫Øt. N∆∞·ªõc d√¢ng l√™n ~1/5 b√¨nh. => Oxygen chi·∫øm ~21% th·ªÉ t√≠ch.";
                isSimulatingCandle = false;
                cancelAnimationFrame(candleAnimId);
                return; // Stop animation
              }

              drawCandleScene();
              candleAnimId = requestAnimationFrame(loop);
            }
            loop();
          }

          function resetCandleSim() {
            cancelAnimationFrame(candleAnimId);
            waterLevel = 180;
            flameSize = 20;
            isSimulatingCandle = false;
            document.getElementById("candle-result").innerText = "";
            drawCandleScene();
          }
        }

        // ==========================================
        // 6. EXERCISES INTERACTION
        // ==========================================
        const hintButtons = document.querySelectorAll(".js-hint-btn");
        hintButtons.forEach((btn) => {
          btn.addEventListener("click", (e) => {
            const targetId = e.target.getAttribute("data-target");
            toggleHint(targetId);
          });
        });

        function toggleHint(id) {
          const el = document.getElementById(id);
          if (el.style.display === "block") {
            el.style.display = "none";
          } else {
            el.style.display = "block";
            el.classList.add("show");
          }
        }
      });
    </script>
  </body>
</html>
