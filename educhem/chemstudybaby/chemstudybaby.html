<!DOCTYPE html>
<html lang="vi">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="icon" href="../favicon/educhem.svg" type="image/svg+xml" />
    <title>EDUCHEM - THCS | ChemVerse Edition</title>

    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
    />
    <link
      href="https://fonts.googleapis.com/css2?family=Be+Vietnam+Pro:wght@300;400;500;600;700;900&family=Orbitron:wght@500;700;900&display=swap"
      rel="stylesheet"
    />
    <script src="https://cdn.tailwindcss.com"></script>
    <script
      crossorigin
      src="https://unpkg.com/react@18/umd/react.production.min.js"
    ></script>
    <script
      crossorigin
      src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"
    ></script>
    <script src="https://unpkg.com/framer-motion@10.12.16/dist/framer-motion.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

    <script>
      tailwind.config = {
        theme: {
          extend: {
            fontFamily: {
              sans: ["Be Vietnam Pro", "sans-serif"],
              tech: ["Orbitron", "sans-serif"],
            },
            colors: {
              bg: "#050511",
              card: "#0f1126",
              accent: "#00f2ff", // Cyan
              primary: "#7000ff", // Purple
              secondary: "#ff0055", // Pink
              success: "#0aff60", // Green Neon
            },
            animation: {
              "spin-slow": "spin 10s linear infinite",
            },
          },
        },
      };
    </script>

    <style>
      body {
        background-color: #050511;
        color: #ffffff;
        overflow-x: hidden;
      }

      /* Grid Background */
      .chem-grid {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background-image: linear-gradient(
            rgba(0, 242, 255, 0.03) 1px,
            transparent 1px
          ),
          linear-gradient(90deg, rgba(0, 242, 255, 0.03) 1px, transparent 1px);
        background-size: 50px 50px;
        z-index: -2;
        mask-image: radial-gradient(
          circle at center,
          black 40%,
          transparent 100%
        );
      }

      /* Floating Hexagons */
      .floating-hex {
        position: fixed;
        opacity: 0.1;
        z-index: -1;
        animation: float linear infinite;
        color: #7000ff;
      }
      @keyframes float {
        0% {
          transform: translateY(100vh) rotate(0deg);
          opacity: 0;
        }
        20% {
          opacity: 0.2;
        }
        80% {
          opacity: 0.2;
        }
        100% {
          transform: translateY(-20vh) rotate(360deg);
          opacity: 0;
        }
      }

      /* Scrollbar */
      ::-webkit-scrollbar {
        width: 6px;
      }
      ::-webkit-scrollbar-track {
        background: #050511;
      }
      ::-webkit-scrollbar-thumb {
        background: linear-gradient(to bottom, #7000ff, #00f2ff);
        border-radius: 10px;
      }
    </style>
  </head>
  <body>
    <div id="root"></div>

    <script type="text/babel">
      const { useState, useEffect, useMemo } = React;
      const { motion, AnimatePresence } = window.Motion;

      // --- DỮ LIỆU BÀI HỌC THCS (Lấy từ Code 2 chuyển sang) ---
      const thcsCourses = [
        // LỚP 7
        {
          id: "7_1",
          grade: 7,
          title: "Nguyên tử & Nguyên tố",
          desc: "Nguyên tử, electron, nguyên tố & kí hiệu hóa học.",
          icon: "fa-atom",
          link: "nguyen_tu_nguyen_to_hoa_hoc/nguyen_tu_nguyen_to_hoa_hoc.html",
          color: "from-blue-400 to-cyan-300",
        },
        {
          id: "7_2",
          grade: 7,
          title: "Đơn chất • Hợp chất",
          desc: "Phân biệt công thức hóa học, phân tử khối.",
          icon: "fa-cubes",
          link: "phan_tu_don_chat_hop_chat/phan_tu_don_chat_hop_chat.html",
          color: "from-cyan-400 to-teal-300",
        },
        // LỚP 8
        {
          id: "8_1",
          grade: 8,
          title: "Acid • Base • Oxide • Muối",
          desc: "Phân loại – tính chất – phản ứng – độ mạnh pH.",
          icon: "fa-vial",
          link: "acid_base_oxide_salt_pH/acid_base_oxide_salt_pH.html",
          color: "from-orange-400 to-red-400",
        },
        {
          id: "8_2",
          grade: 8,
          title: "Phản ứng hóa học",
          desc: "Dấu hiệu – bản chất – định luật – cân bằng phương trình.",
          icon: "fa-bolt",
          link: "phan_ung_hoa_hoc/phan_ung_hoa_hoc.html",
          color: "from-yellow-400 to-orange-300",
        },
        // LỚP 9
        {
          id: "9_1",
          grade: 9,
          title: "Kim loại & Phi kim",
          desc: "Tính chất vật lý, hóa học, dãy hoạt động hóa học.",
          icon: "fa-gem",
          link: "kimloai/kimloai.html",
          color: "from-purple-400 to-pink-400",
        },
        {
          id: "9_2",
          grade: 9,
          title: "Hydrocarbon & Nhiên liệu",
          desc: "Metan, Etilen, Axetilen, Benzen & Dầu mỏ.",
          icon: "fa-fire",
          link: "hop_chat_huu_co_hydrocarbon_va_nguon_nhien_lieu/hop_chat_huu_co_hydrocarbon_va_nguon_nhien_lieu.html",
          color: "from-red-500 to-rose-500",
        },
        {
          id: "9_3",
          grade: 9,
          title: "Ethylic Alcohol & Acetic Acid",
          desc: "Cấu tạo phân tử, tính chất, điều chế và ứng dụng.",
          icon: "fa-flask",
          link: "ethylic_alcohol_acetic_acid/ethylic_alcohol_acetic_acid.html",
          color: "from-emerald-400 to-green-500",
        },
        {
          id: "9_4",
          grade: 9,
          title: "Hợp chất thiên nhiên & Polymer",
          desc: "Chất béo, Glucozơ, Protein, Tinh bột & Polymer.",
          icon: "fa-dna",
          link: "huu_co/huu_co.html",
          color: "from-indigo-400 to-blue-500",
        },
      ];

      // --- COMPONENTS ---

      const Background = () => (
        <>
          <div className="chem-grid"></div>
          {[...Array(15)].map((_, i) => (
            <i
              key={i}
              className="fas fa-hexagon floating-hex"
              style={{
                left: `${Math.random() * 100}%`,
                fontSize: `${Math.random() * 30 + 10}px`,
                animationDuration: `${Math.random() * 10 + 10}s`,
                animationDelay: `${Math.random() * 5}s`,
              }}
            ></i>
          ))}
          <div className="fixed top-[-20%] left-[-10%] w-[500px] h-[500px] bg-primary/20 rounded-full blur-[120px] pointer-events-none"></div>
          <div className="fixed bottom-[-20%] right-[-10%] w-[600px] h-[600px] bg-accent/10 rounded-full blur-[120px] pointer-events-none"></div>
        </>
      );

      // Component Thẻ bài học
      const CourseCard = ({ course, isDone, onToggleDone }) => {
        return (
          <motion.div
            layout
            initial={{ opacity: 0, scale: 0.9 }}
            animate={{ opacity: 1, scale: 1 }}
            exit={{ opacity: 0, scale: 0.9 }}
            whileHover={{ y: -8 }}
            className="group relative h-full"
          >
            {/* Glow Effect */}
            <div
              className={`absolute -inset-0.5 bg-gradient-to-r ${
                isDone ? "from-success to-green-400" : course.color
              } rounded-2xl opacity-20 group-hover:opacity-60 blur transition duration-500`}
            ></div>

            <div
              className={`relative h-full bg-card/90 backdrop-blur-xl border ${
                isDone ? "border-success/40" : "border-white/10"
              } rounded-xl p-6 flex flex-col overflow-hidden hover:border-white/30 transition-all shadow-xl`}
            >
              {/* Done Marker (Check Button) */}
              <button
                onClick={(e) => {
                  e.stopPropagation();
                  onToggleDone(course.id);
                }}
                className={`absolute top-4 right-4 z-20 w-8 h-8 rounded-full flex items-center justify-center border transition-all duration-300 ${
                  isDone
                    ? "bg-success text-black border-success"
                    : "bg-white/5 border-white/20 text-white/30 hover:text-white hover:border-white"
                }`}
                title={isDone ? "Đánh dấu chưa học" : "Đánh dấu đã học"}
              >
                <i className="fas fa-check text-sm"></i>
              </button>

              {/* Icon & Grade */}
              <div className="flex justify-between items-start mb-4">
                <div
                  className={`w-12 h-12 rounded-xl bg-gradient-to-br ${course.color} flex items-center justify-center text-white text-xl shadow-lg group-hover:rotate-12 transition-transform duration-300`}
                >
                  <i className={`fas ${course.icon}`}></i>
                </div>
                <span className="mt-1 px-2 py-0.5 rounded-full bg-white/5 border border-white/10 text-[10px] font-bold text-gray-400 uppercase tracking-wider">
                  Lớp {course.grade}
                </span>
              </div>

              {/* Content */}
              <div
                className="flex-grow cursor-pointer"
                onClick={() => (window.location.href = course.link)}
              >
                <h3
                  className={`text-lg font-bold mb-2 leading-tight transition-colors ${
                    isDone
                      ? "text-success"
                      : "text-white group-hover:text-accent"
                  }`}
                >
                  {course.title}
                </h3>
                <p className="text-sm text-gray-400 font-light leading-relaxed">
                  {course.desc}
                </p>
              </div>

              {/* Footer */}
              <div
                className="mt-5 pt-4 border-t border-white/5 flex items-center justify-between cursor-pointer"
                onClick={() => (window.location.href = course.link)}
              >
                <span
                  className={`text-xs font-medium ${
                    isDone ? "text-success" : "text-accent"
                  }`}
                >
                  {isDone ? "Đã hoàn thành" : "Vào học ngay"}
                </span>
                <i
                  className={`fas fa-arrow-right text-xs transform group-hover:translate-x-1 transition-transform ${
                    isDone ? "text-success" : "text-white/50"
                  }`}
                ></i>
              </div>
            </div>
          </motion.div>
        );
      };

      // Component Thanh tiến độ
      const ProgressBar = ({ percent }) => (
        <div className="w-full max-w-md mx-auto mb-10">
          <div className="flex justify-between text-xs font-tech text-gray-400 mb-2 uppercase tracking-widest">
            <span>Tiến độ học tập</span>
            <span className={percent === 100 ? "text-success" : "text-accent"}>
              {percent}%
            </span>
          </div>
          <div className="h-2 w-full bg-white/10 rounded-full overflow-hidden relative">
            <motion.div
              initial={{ width: 0 }}
              animate={{ width: `${percent}%` }}
              transition={{ duration: 1, ease: "easeOut" }}
              className={`h-full absolute top-0 left-0 ${
                percent === 100
                  ? "bg-success shadow-[0_0_10px_#0aff60]"
                  : "bg-gradient-to-r from-primary to-accent shadow-[0_0_10px_rgba(0,242,255,0.5)]"
              }`}
            ></motion.div>
          </div>
        </div>
      );

      // Ứng dụng chính
      const App = () => {
        const [activeTab, setActiveTab] = useState("all");
        const [completed, setCompleted] = useState([]);

        // Load progress from localStorage on mount
        useEffect(() => {
          const saved = JSON.parse(
            localStorage.getItem("chemstudy_thcs_progress") || "[]"
          );
          setCompleted(saved);
        }, []);

        // Save progress whenever it changes
        useEffect(() => {
          localStorage.setItem(
            "chemstudy_thcs_progress",
            JSON.stringify(completed)
          );
        }, [completed]);

        const toggleDone = (id) => {
          setCompleted((prev) =>
            prev.includes(id)
              ? prev.filter((item) => item !== id)
              : [...prev, id]
          );
        };

        const filteredCourses = useMemo(() => {
          if (activeTab === "all") return thcsCourses;
          return thcsCourses.filter((c) => c.grade === parseInt(activeTab));
        }, [activeTab]);

        // Calculate Progress based on filtered view or global? Let's do Global for the big bar
        const progressPercent = Math.round(
          (completed.length / thcsCourses.length) * 100
        );

        const tabs = [
          { id: "all", label: "Tổng quan" },
          { id: "7", label: "Lớp 7" },
          { id: "8", label: "Lớp 8" },
          { id: "9", label: "Lớp 9" },
        ];

        return (
          <div className="min-h-screen relative flex flex-col font-sans selection:bg-accent/30 selection:text-white">
            <Background />

            {/* HEADER */}
            <header className="fixed w-full z-50 top-0 left-0 border-b border-white/10 bg-[#050511]/80 backdrop-blur-md">
              <div className="max-w-7xl mx-auto px-4 h-20 flex items-center justify-between">
                {/* Logo */}
                <div
                  className="flex items-center gap-3 cursor-pointer group"
                  onClick={() => (window.location.href = "../../index.html")}
                >
                  <div className="relative w-10 h-10 flex items-center justify-center">
                    <i className="fas fa-flask text-3xl text-secondary group-hover:rotate-12 transition-transform duration-500"></i>
                    <div className="absolute inset-0 bg-secondary blur-xl opacity-40"></div>
                  </div>
                  <div>
                    <h1 className="font-tech font-bold text-2xl tracking-wider text-white">
                      EDU{" "}
                      <span className="text-transparent bg-clip-text bg-gradient-to-r from-secondary to-primary">
                        CHEM
                      </span>
                    </h1>
                    <p className="text-[10px] text-gray-400 uppercase tracking-[0.2em]">
                      THCS Edition
                    </p>
                  </div>
                </div>

                {/* Nav */}
                <nav className="hidden md:flex items-center gap-2">
                  <a
                    href="#"
                    className="px-5 py-2.5 rounded-lg text-sm font-semibold bg-white/10 text-white border border-white/20 shadow-[0_0_15px_rgba(255,255,255,0.1)]"
                  >
                    THCS
                  </a>
                  <a
                    href="../thpt/thpt.html"
                    className="px-5 py-2.5 rounded-lg text-sm font-semibold text-gray-400 hover:text-white hover:bg-white/5 transition-all"
                  >
                    THPT
                  </a>
                  <a
                    href="../dien_dan/dien_dan.html"
                    className="px-5 py-2.5 rounded-lg text-sm font-semibold text-gray-400 hover:text-white hover:bg-white/5 transition-all"
                  >
                    Diễn đàn
                  </a>
                </nav>

                {/* Mobile Menu Icon */}
                <button className="md:hidden text-white">
                  <i className="fas fa-bars"></i>
                </button>
              </div>
            </header>

            {/* MAIN */}
            <main className="flex-grow pt-32 pb-20 px-4 max-w-7xl mx-auto w-full z-10">
              {/* Hero */}
              <div className="text-center mb-8 relative">
                <motion.div
                  initial={{ opacity: 0, y: 20 }}
                  animate={{ opacity: 1, y: 0 }}
                  transition={{ duration: 0.8 }}
                >
                  <h2 className="text-4xl md:text-6xl font-tech font-bold text-white mb-4 leading-tight">
                    Phòng Lab{" "}
                    <span className="text-transparent bg-clip-text bg-gradient-to-r from-secondary via-primary to-accent">
                      Tương Lai
                    </span>
                  </h2>
                  <p className="text-gray-400 text-lg max-w-2xl mx-auto font-light mb-8">
                    Hóa học THCS: Từ Nguyên tử đến Polime.
                  </p>
                </motion.div>

                {/* Progress Bar */}
                <ProgressBar percent={progressPercent} />
              </div>

              {/* Tabs */}
              <div className="flex justify-center mb-12">
                <div className="bg-white/5 p-1.5 rounded-full border border-white/10 backdrop-blur-md flex flex-wrap justify-center gap-1 shadow-2xl">
                  {tabs.map((tab) => (
                    <button
                      key={tab.id}
                      onClick={() => setActiveTab(tab.id)}
                      className={`relative px-6 py-2 rounded-full text-sm font-bold transition-all duration-300 z-10 ${
                        activeTab === tab.id
                          ? "text-white"
                          : "text-gray-400 hover:text-white"
                      }`}
                    >
                      {activeTab === tab.id && (
                        <motion.div
                          layoutId="activeTab"
                          className="absolute inset-0 bg-gradient-to-r from-secondary to-primary rounded-full -z-10 shadow-lg"
                          transition={{
                            type: "spring",
                            bounce: 0.2,
                            duration: 0.6,
                          }}
                        />
                      )}
                      {tab.label}
                    </button>
                  ))}
                </div>
              </div>

              {/* Grid */}
              <motion.div
                layout
                className="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6"
              >
                <AnimatePresence mode="popLayout">
                  {filteredCourses.map((course) => (
                    <CourseCard
                      key={course.id}
                      course={course}
                      isDone={completed.includes(course.id)}
                      onToggleDone={toggleDone}
                    />
                  ))}
                </AnimatePresence>
              </motion.div>

              {filteredCourses.length === 0 && (
                <div className="text-center py-20 opacity-50">
                  <p>Không tìm thấy bài học phù hợp.</p>
                </div>
              )}
            </main>
          </div>
        );
      };

      const root = ReactDOM.createRoot(document.getElementById("root"));
      root.render(<App />);
    </script>
  </body>
</html>
