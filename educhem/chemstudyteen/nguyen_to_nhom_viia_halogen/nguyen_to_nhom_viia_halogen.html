<!doctype html>
<html lang="vi">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Ch∆∞∆°ng Halogen - H√≥a h·ªçc 10</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
      .tab-content {
        display: none;
      }
      .tab-content.active {
        display: block;
      }
      .fade-in {
        animation: fadeIn 0.3s ease-in-out;
      }
      @keyframes fadeIn {
        from {
          opacity: 0;
        }
        to {
          opacity: 1;
        }
      }
      /* Custom scrollbar for theory section */
      .custom-scroll::-webkit-scrollbar {
        width: 8px;
      }
      .custom-scroll::-webkit-scrollbar-track {
        background: #f1f1f1;
      }
      .custom-scroll::-webkit-scrollbar-thumb {
        background: #888;
        border-radius: 4px;
      }
      .custom-scroll::-webkit-scrollbar-thumb:hover {
        background: #555;
      }

      .chem-equation {
        font-family: "Times New Roman", serif;
        font-style: italic;
      }
    </style>
  </head>
  <body class="bg-gray-50 min-h-screen text-gray-800 font-sans">
    <!-- Header -->
    <header class="bg-blue-700 text-white p-4 shadow-md sticky top-0 z-50">
      <div
        class="container mx-auto flex flex-col md:flex-row justify-between items-center"
      >
        <h1 class="text-2xl font-bold uppercase tracking-wider">
          Ch∆∞∆°ng Halogen - H√≥a H·ªçc 10
        </h1>
        <p class="text-sm opacity-90 italic mt-2 md:mt-0">
          Ngu·ªìn d·ªØ li·ªáu: PDF "T·ª± h·ªçc L√Ω thuy·∫øt v√† B√†i t·∫≠p Ch∆∞∆°ng 5"
        </p>
      </div>
    </header>

    <!-- Navigation Tabs -->
    <nav class="bg-white shadow-sm sticky top-[72px] z-40 overflow-x-auto">
      <div class="container mx-auto min-w-max">
        <div class="flex space-x-1 p-2" id="tabs-container">
          <!-- Tabs will be generated by JS -->
        </div>
      </div>
    </nav>

    <!-- Main Content -->
    <main class="container mx-auto p-4 md:p-6 mb-20">
      <!-- TAB 1: L√ù THUY·∫æT -->
      <div id="tab-theory" class="tab-content active fade-in">
        <div class="grid grid-cols-1 lg:grid-cols-4 gap-6">
          <!-- Table of Contents -->
          <div
            class="lg:col-span-1 bg-white p-4 rounded-lg shadow h-fit sticky top-32"
          >
            <h3 class="font-bold text-lg mb-3 text-blue-700 border-b pb-2">
              M·ª•c l·ª•c
            </h3>
            <ul class="space-y-2 text-sm" id="toc-list">
              <!-- JS generated TOC -->
            </ul>
          </div>

          <!-- Content -->
          <div
            class="lg:col-span-3 bg-white p-6 rounded-lg shadow custom-scroll h-[80vh] overflow-y-auto"
            id="theory-content"
          >
            <h2 class="text-2xl font-bold text-blue-800 mb-6">
              A. T√ìM T·∫ÆT L√ù THUY·∫æT
            </h2>

            <div id="section-I" class="mb-8">
              <h3 class="text-xl font-bold text-blue-600 mb-3">
                I. ƒê·∫∑c ƒëi·ªÉm c·∫•u t·∫°o
              </h3>
              <ul class="list-disc pl-5 space-y-2">
                <li>
                  Nguy√™n t·ª≠ halogen c√≥ 7e l·ªõp ngo√†i c√πng
                  <span class="chem-equation">ns<sup>2</sup>np<sup>5</sup></span
                  >.
                </li>
                <li>B√°n k√≠nh nguy√™n t·ª≠ nh·ªè, c√≥ ƒë·ªô √¢m ƒëi·ªán l·ªõn ‚áí d·ªÖ nh·∫≠n e.</li>
                <li>Halogen c√≥ t√≠nh oxi h√≥a m·∫°nh v√† l√† phi kim ƒëi·ªÉn h√¨nh.</li>
                <li>
                  Ion halogenua X‚Åª c√≥ m·ª©c oxi h√≥a th·∫•p nh·∫•t n√™n th·ªÉ hi·ªán t√≠nh
                  kh·ª≠.
                </li>
              </ul>
              <div
                class="mt-4 bg-yellow-50 p-4 rounded border border-yellow-200"
              >
                <p class="font-bold text-center">Xu h∆∞·ªõng bi·∫øn ƒë·ªïi:</p>
                <div class="flex justify-around items-center mt-2 text-center">
                  <div>
                    <p class="chem-equation font-bold">I‚ÇÇ < Br‚ÇÇ < Cl‚ÇÇ < F‚ÇÇ</p>
                    <p class="text-sm text-red-600">T√≠nh oxi h√≥a tƒÉng d·∫ßn</p>
                  </div>
                  <div>
                    <p class="chem-equation font-bold">
                      2I‚Åª > 2Br‚Åª > 2Cl‚Åª > 2F‚Åª
                    </p>
                    <p class="text-sm text-blue-600">T√≠nh kh·ª≠ gi·∫£m d·∫ßn</p>
                  </div>
                </div>
              </div>
            </div>

            <div id="section-II" class="mb-8">
              <h3 class="text-xl font-bold text-blue-600 mb-3">II. L√≠ t√≠nh</h3>
              <div class="overflow-x-auto">
                <table
                  class="min-w-full border-collapse border border-gray-300 text-sm"
                >
                  <thead class="bg-gray-100">
                    <tr>
                      <th class="border border-gray-300 p-2">Halogen</th>
                      <th class="border border-gray-300 p-2 text-green-700">
                        F‚ÇÇ
                      </th>
                      <th class="border border-gray-300 p-2 text-green-600">
                        Cl‚ÇÇ
                      </th>
                      <th class="border border-gray-300 p-2 text-red-700">
                        Br‚ÇÇ
                      </th>
                      <th class="border border-gray-300 p-2 text-purple-800">
                        I‚ÇÇ
                      </th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td class="font-semibold border border-gray-300 p-2">
                        Tr·∫°ng th√°i
                      </td>
                      <td class="border border-gray-300 p-2">Kh√≠</td>
                      <td class="border border-gray-300 p-2">Kh√≠</td>
                      <td class="border border-gray-300 p-2">L·ªèng</td>
                      <td class="border border-gray-300 p-2">R·∫Øn</td>
                    </tr>
                    <tr>
                      <td class="font-semibold border border-gray-300 p-2">
                        M√†u s·∫Øc
                      </td>
                      <td class="border border-gray-300 p-2">Xanh nh·∫°t</td>
                      <td class="border border-gray-300 p-2">V√†ng l·ª•c</td>
                      <td class="border border-gray-300 p-2">ƒê·ªè n√¢u</td>
                      <td class="border border-gray-300 p-2">T√≠m than</td>
                    </tr>
                  </tbody>
                </table>
              </div>
              <p class="mt-2 text-sm italic">
                Nh·∫≠n x√©t: Gi·ªØa c√°c ph√¢n t·ª≠ X‚ÇÇ ch·ªâ c√≥ l·ª±c h√∫t Van der Waals y·∫øu
                n√™n d·ªÖ bay h∆°i ho·∫∑c thƒÉng hoa (I‚ÇÇ).
              </p>
            </div>

            <div id="section-III" class="mb-8">
              <h3 class="text-xl font-bold text-blue-600 mb-3">
                III. T√≠nh ch·∫•t h√≥a h·ªçc
              </h3>
              <p class="mb-2">
                T√≠nh ch·∫•t quan tr·ªçng nh·∫•t:
                <strong>T√≠nh oxi h√≥a m·∫°nh</strong> (gi·∫£m d·∫ßn t·ª´ F‚ÇÇ ƒë·∫øn I‚ÇÇ).
              </p>
              <p class="mb-2">
                C√°c b·∫≠c oxi h√≥a ƒë·∫∑c tr∆∞ng: -1, 0, +1, +3, +5, +7 (ri√™ng F ch·ªâ c√≥
                -1, 0).
              </p>

              <div class="space-y-4 mt-4">
                <div class="bg-gray-50 p-3 rounded">
                  <h4 class="font-bold text-gray-700">
                    1. T√°c d·ª•ng v·ªõi kim lo·∫°i ‚Üí Mu·ªëi halogenua
                  </h4>
                  <ul class="list-disc pl-5 mt-1 text-sm">
                    <li>
                      <strong>F‚ÇÇ:</strong> Oxi h√≥a ƒë∆∞·ª£c t·∫•t c·∫£ c√°c kim lo·∫°i.
                      <br />
                      <span class="chem-equation">2Au + 3F‚ÇÇ ‚Üí 2AuF‚ÇÉ</span>
                    </li>
                    <li>
                      <strong>Cl‚ÇÇ:</strong> Oxi h√≥a h·∫ßu h·∫øt kim lo·∫°i (tr·ª´ Au,
                      Pt), c·∫ßn ƒëun n√≥ng. <br />
                      <span class="chem-equation">2Fe + 3Cl‚ÇÇ ‚Üí 2FeCl‚ÇÉ</span>
                    </li>
                    <li>
                      <strong>Br‚ÇÇ:</strong> Oxi h√≥a nhi·ªÅu kim lo·∫°i (tr·ª´ Au, Pt),
                      c·∫ßn ƒëun n√≥ng.
                    </li>
                    <li>
                      <strong>I‚ÇÇ:</strong> Ph·∫£n ·ª©ng khi ƒëun n√≥ng ho·∫∑c c√≥ x√∫c
                      t√°c. <br />
                      <span class="chem-equation">2Al + 3I‚ÇÇ ‚Üí 2AlI‚ÇÉ</span>
                    </li>
                  </ul>
                </div>

                <div class="bg-gray-50 p-3 rounded">
                  <h4 class="font-bold text-gray-700">
                    2. T√°c d·ª•ng v·ªõi Hiƒëro ‚Üí Kh√≠ hiƒërohalogenua
                  </h4>
                  <table class="w-full text-sm mt-2 border border-gray-200">
                    <tr class="bg-gray-100">
                      <th class="p-1 border">Ch·∫•t</th>
                      <th class="p-1 border">ƒêi·ªÅu ki·ªán</th>
                      <th class="p-1 border">PT</th>
                    </tr>
                    <tr>
                      <td class="p-1 border">F‚ÇÇ</td>
                      <td class="p-1 border">B√≥ng t·ªëi, -252¬∞C</td>
                      <td class="p-1 border">N·ªï m·∫°nh</td>
                    </tr>
                    <tr>
                      <td class="p-1 border">Cl‚ÇÇ</td>
                      <td class="p-1 border">Chi·∫øu s√°ng</td>
                      <td class="p-1 border">N·ªï</td>
                    </tr>
                    <tr>
                      <td class="p-1 border">Br‚ÇÇ</td>
                      <td class="p-1 border">Nhi·ªát ƒë·ªô cao</td>
                      <td class="p-1 border">Ch·∫≠m</td>
                    </tr>
                    <tr>
                      <td class="p-1 border">I‚ÇÇ</td>
                      <td class="p-1 border">Cao, x√∫c t√°c</td>
                      <td class="p-1 border">Thu·∫≠n ngh·ªãch</td>
                    </tr>
                  </table>
                </div>

                <div class="bg-gray-50 p-3 rounded">
                  <h4 class="font-bold text-gray-700">
                    3. V·ª´a oxi h√≥a - v·ª´a kh·ª≠ (T√°c d·ª•ng v·ªõi n∆∞·ªõc & ki·ªÅm)
                  </h4>
                  <ul class="list-disc pl-5 mt-1 text-sm">
                    <li>
                      <strong>V·ªõi n∆∞·ªõc:</strong>
                      <ul class="pl-4 list-circle">
                        <li>
                          <span class="chem-equation"
                            >F‚ÇÇ + 2H‚ÇÇO ‚Üí 4HF + O‚ÇÇ</span
                          >
                          (H∆°i n∆∞·ªõc b·ªëc ch√°y)
                        </li>
                        <li>
                          <span class="chem-equation"
                            >Cl‚ÇÇ + H‚ÇÇO ‚áå HCl + HClO</span
                          >
                          (T√≠nh t·∫©y m√†u)
                        </li>
                        <li>
                          <span class="chem-equation"
                            >Br‚ÇÇ + H‚ÇÇO ‚áå HBr + HBrO</span
                          >
                          (Ch·∫≠m h∆°n Clo)
                        </li>
                        <li>I‚ÇÇ h·∫ßu nh∆∞ kh√¥ng ph·∫£n ·ª©ng.</li>
                      </ul>
                    </li>
                    <li>
                      <strong>V·ªõi NaOH:</strong> <br />
                      <span class="chem-equation"
                        >Cl‚ÇÇ + 2NaOH ‚Üí NaCl + NaClO + H‚ÇÇO</span
                      >
                      (N∆∞·ªõc Javen)<br />
                      <span class="chem-equation"
                        >3Cl‚ÇÇ + 6NaOH (70¬∞C) ‚Üí 5NaCl + NaClO‚ÇÉ + 3H‚ÇÇO</span
                      >
                    </li>
                  </ul>
                </div>
              </div>
            </div>

            <div id="section-IV" class="mb-8">
              <h3 class="text-xl font-bold text-blue-600 mb-3">IV. H·ª£p ch·∫•t</h3>
              <h4 class="font-bold text-gray-700">
                1. Hiƒërohalogenua (HX) v√† Axit
              </h4>
              <ul class="list-disc pl-5 text-sm mb-2">
                <li>
                  T√≠nh axit: <strong>HF < HCl < HBr < HI</strong> (HF l√† axit
                  y·∫øu, c√≤n l·∫°i l√† axit m·∫°nh).
                </li>
                <li>
                  T√≠nh kh·ª≠: <strong>HF < HCl < HBr < HI</strong> (HF kh√¥ng c√≥
                  t√≠nh kh·ª≠).
                </li>
                <li>
                  <strong>HF</strong> c√≥ t√≠nh ch·∫•t ƒë·∫∑c bi·ªát: ƒÇn m√≤n th·ªßy tinh
                  (<span class="chem-equation">4HF + SiO‚ÇÇ ‚Üí SiF‚ÇÑ + 2H‚ÇÇO</span>).
                </li>
              </ul>

              <h4 class="font-bold text-gray-700 mt-3">
                2. Nh·∫≠n bi·∫øt Ion Halogenua (b·∫±ng AgNO‚ÇÉ)
              </h4>
              <ul class="list-disc pl-5 text-sm">
                <li><strong>F‚Åª:</strong> Kh√¥ng k·∫øt t·ªßa (AgF tan).</li>
                <li>
                  <strong>Cl‚Åª:</strong> K·∫øt t·ªßa tr·∫Øng (<span
                    class="chem-equation"
                    >AgCl</span
                  >).
                </li>
                <li>
                  <strong>Br‚Åª:</strong> K·∫øt t·ªßa v√†ng nh·∫°t (<span
                    class="chem-equation"
                    >AgBr</span
                  >).
                </li>
                <li>
                  <strong>I‚Åª:</strong> K·∫øt t·ªßa v√†ng ƒë·∫≠m (<span
                    class="chem-equation"
                    >AgI</span
                  >).
                </li>
              </ul>
            </div>
          </div>
        </div>
      </div>

      <!-- TAB 2: M√î PH·ªéNG -->
      <div id="tab-simulation" class="tab-content fade-in">
        <h2 class="text-2xl font-bold text-center text-blue-800 mb-6">
          M√¥ Ph·ªèng Xu H∆∞·ªõng Bi·∫øn ƒê·ªïi
        </h2>
        <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
          <!-- Simulation 1: Oxidizing Power -->
          <div
            class="bg-white p-6 rounded-lg shadow-lg border-t-4 border-red-500"
          >
            <h3 class="text-xl font-bold mb-4">1. Xu h∆∞·ªõng t√≠nh Oxi h√≥a</h3>
            <div
              class="relative h-64 bg-gray-50 rounded border p-4 flex items-end justify-around"
            >
              <div
                class="w-16 bg-red-600 rounded-t transition-all duration-1000 hover:opacity-80 flex items-end justify-center text-white font-bold"
                style="height: 95%"
              >
                F‚ÇÇ
              </div>
              <div
                class="w-16 bg-green-500 rounded-t transition-all duration-1000 hover:opacity-80 flex items-end justify-center text-white font-bold"
                style="height: 75%"
              >
                Cl‚ÇÇ
              </div>
              <div
                class="w-16 bg-yellow-600 rounded-t transition-all duration-1000 hover:opacity-80 flex items-end justify-center text-white font-bold"
                style="height: 50%"
              >
                Br‚ÇÇ
              </div>
              <div
                class="w-16 bg-purple-700 rounded-t transition-all duration-1000 hover:opacity-80 flex items-end justify-center text-white font-bold"
                style="height: 25%"
              >
                I‚ÇÇ
              </div>

              <div class="absolute left-2 top-2 text-sm text-gray-500">
                M·∫°nh nh·∫•t
              </div>
              <div class="absolute right-2 bottom-2 text-sm text-gray-500">
                Y·∫øu nh·∫•t
              </div>
            </div>
            <div class="mt-4 bg-gray-100 p-3 rounded text-sm">
              <strong>Gi·∫£i th√≠ch theo PDF:</strong> "T√≠nh oxi h√≥a gi·∫£m d·∫ßn t·ª´ F‚ÇÇ
              (ch·∫•t oxi h√≥a m·∫°nh nh·∫•t) ƒë·∫øn I‚ÇÇ (ch·∫•t oxi h√≥a trung b√¨nh)."
            </div>
          </div>

          <!-- Simulation 2: Physical State & Color -->
          <div
            class="bg-white p-6 rounded-lg shadow-lg border-t-4 border-blue-500"
          >
            <h3 class="text-xl font-bold mb-4">2. Tr·∫°ng th√°i & M√†u s·∫Øc</h3>
            <div class="grid grid-cols-2 gap-4">
              <div
                class="text-center p-4 border rounded hover:bg-gray-50 cursor-pointer"
                onclick="showStateInfo('F2')"
              >
                <div
                  class="w-12 h-12 mx-auto rounded-full bg-green-100 border-2 border-green-200 flex items-center justify-center font-bold mb-2"
                >
                  F‚ÇÇ
                </div>
                <p class="font-bold">Flo</p>
              </div>
              <div
                class="text-center p-4 border rounded hover:bg-gray-50 cursor-pointer"
                onclick="showStateInfo('Cl2')"
              >
                <div
                  class="w-12 h-12 mx-auto rounded-full bg-yellow-200 border-2 border-yellow-300 flex items-center justify-center font-bold mb-2"
                >
                  Cl‚ÇÇ
                </div>
                <p class="font-bold">Clo</p>
              </div>
              <div
                class="text-center p-4 border rounded hover:bg-gray-50 cursor-pointer"
                onclick="showStateInfo('Br2')"
              >
                <div
                  class="w-12 h-12 mx-auto rounded-full bg-red-700 border-2 border-red-800 flex items-center justify-center font-bold text-white mb-2"
                >
                  Br‚ÇÇ
                </div>
                <p class="font-bold">Brom</p>
              </div>
              <div
                class="text-center p-4 border rounded hover:bg-gray-50 cursor-pointer"
                onclick="showStateInfo('I2')"
              >
                <div
                  class="w-12 h-12 mx-auto rounded-full bg-purple-900 border-2 border-black flex items-center justify-center font-bold text-white mb-2"
                >
                  I‚ÇÇ
                </div>
                <p class="font-bold">Iot</p>
              </div>
            </div>
            <div
              id="state-info"
              class="mt-4 bg-blue-50 p-3 rounded text-sm min-h-[80px]"
            >
              B·∫•m v√†o nguy√™n t·ªë ƒë·ªÉ xem th√¥ng tin chi ti·∫øt t·ª´ PDF.
            </div>
          </div>
        </div>
      </div>

      <!-- TAB 3: TH√ç NGHI·ªÜM ·∫¢O -->
      <div id="tab-lab" class="tab-content fade-in">
        <h2 class="text-2xl font-bold text-center text-purple-800 mb-6">
          Ph√≤ng Th√≠ Nghi·ªám ·∫¢o
        </h2>

        <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
          <!-- Experiment 1: Identify Halides -->
          <div class="bg-white p-6 rounded-lg shadow-lg">
            <h3 class="text-lg font-bold mb-4 border-b pb-2">
              TN1: Nh·∫≠n bi·∫øt Ion Halogenua (AgNO‚ÇÉ)
            </h3>
            <div class="mb-4">
              <label class="block text-sm font-medium text-gray-700 mb-1"
                >Ch·ªçn dung d·ªãch mu·ªëi:</label
              >
              <select id="halide-select" class="w-full p-2 border rounded">
                <option value="NaF">NaF (Natri Florua)</option>
                <option value="NaCl">NaCl (Natri Clorua)</option>
                <option value="NaBr">NaBr (Natri Bromua)</option>
                <option value="NaI">NaI (Natri Iotua)</option>
              </select>
            </div>
            <button
              onclick="runAgNO3Lab()"
              class="bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700 w-full mb-4"
            >
              Nh·ªè AgNO‚ÇÉ v√†o
            </button>

            <div
              class="h-32 bg-gray-100 border rounded flex items-center justify-center relative overflow-hidden"
            >
              <!-- Test Tube -->
              <div
                class="w-8 h-24 border-2 border-gray-400 border-t-0 rounded-b-lg bg-blue-50 relative mx-auto"
              >
                <div
                  id="precipitate"
                  class="absolute bottom-0 w-full transition-all duration-1000 h-0"
                ></div>
              </div>
              <div
                id="dropper"
                class="absolute top-2 left-1/2 transform -translate-x-1/2 opacity-0 transition-opacity duration-500"
              >
                üíß
              </div>
            </div>
            <div
              id="lab1-result"
              class="mt-3 text-sm font-semibold text-center min-h-[40px]"
            ></div>
          </div>

          <!-- Experiment 2: Iodine Sublimation -->
          <div class="bg-white p-6 rounded-lg shadow-lg">
            <h3 class="text-lg font-bold mb-4 border-b pb-2">
              TN2: S·ª± thƒÉng hoa c·ªßa Iot
            </h3>
            <div class="flex flex-col items-center">
              <div
                class="w-full h-40 bg-gray-100 border rounded relative flex items-end justify-center mb-4"
              >
                <!-- Beaker -->
                <div
                  class="w-20 h-24 border-2 border-gray-400 border-t-0 bg-white relative"
                >
                  <!-- Solid Iodine -->
                  <div class="w-full h-2 bg-gray-800 absolute bottom-0"></div>
                  <!-- Vapor -->
                  <div
                    id="iodine-vapor"
                    class="w-full absolute bottom-2 bg-purple-500 opacity-0 transition-all duration-2000 blur-md"
                  ></div>
                </div>
                <!-- Heat Source -->
                <div
                  id="flame"
                  class="absolute bottom-[-10px] text-2xl opacity-0 transition-opacity"
                >
                  üî•
                </div>
              </div>
              <button
                id="heat-btn"
                onclick="runIodineLab()"
                class="bg-red-600 text-white px-4 py-2 rounded hover:bg-red-700 w-full"
              >
                ƒêun n√≥ng
              </button>
              <div class="mt-3 text-sm bg-gray-50 p-2 rounded w-full">
                <strong>PDF:</strong> "I‚ÇÇ ·ªü tr·∫°ng th√°i r·∫Øn d·ªÖ thƒÉng hoa (bi·∫øn
                th√†nh h∆°i m√†u t√≠m) khi ƒëun n√≥ng."
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- TAB 4: TR·∫ÆC NGHI·ªÜM -->
      <div id="tab-quiz" class="tab-content fade-in">
        <h2 class="text-2xl font-bold text-center text-green-800 mb-6">
          B√†i T·∫≠p Tr·∫Øc Nghi·ªám
        </h2>
        <div class="bg-white p-6 rounded-lg shadow max-w-3xl mx-auto">
          <div class="flex justify-between items-center mb-4">
            <span class="text-sm text-gray-500" id="quiz-progress"
              >C√¢u 1 / 10</span
            >
            <span class="text-sm font-bold text-blue-600" id="quiz-score"
              >ƒêi·ªÉm: 0</span
            >
          </div>

          <div id="quiz-container">
            <h3 class="text-lg font-bold mb-4" id="quiz-question">
              Loading...
            </h3>
            <div class="space-y-3" id="quiz-options">
              <!-- Options generated by JS -->
            </div>
            <div id="quiz-feedback" class="mt-4 p-3 rounded hidden"></div>
          </div>

          <div class="mt-6 flex justify-between">
            <button
              onclick="prevQuestion()"
              class="px-4 py-2 border rounded hover:bg-gray-100 disabled:opacity-50"
              id="btn-prev"
              disabled
            >
              Tr∆∞·ªõc
            </button>
            <button
              onclick="nextQuestion()"
              class="px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700"
              id="btn-next"
            >
              Sau
            </button>
          </div>
        </div>
      </div>

      <!-- TAB 5: T·ª∞ LU·∫¨N -->
      <div id="tab-essay" class="tab-content fade-in">
        <h2 class="text-2xl font-bold text-center text-orange-800 mb-6">
          B√†i T·∫≠p T·ª± Lu·∫≠n
        </h2>
        <div class="grid grid-cols-1 gap-6 max-w-4xl mx-auto">
          <div class="bg-white p-6 rounded-lg shadow">
            <h3 class="font-bold text-lg border-b pb-2 mb-3 text-blue-700">
              D·∫°ng 1: Ho√†n th√†nh ph∆∞∆°ng tr√¨nh
            </h3>
            <div class="space-y-4 font-mono text-sm">
              <p>
                <strong>C√¢u 1:</strong> Vi·∫øt ph∆∞∆°ng tr√¨nh h√≥a h·ªçc v√† ghi r√µ ƒëi·ªÅu
                ki·ªán (n·∫øu c√≥):
              </p>
              <ol class="list-decimal pl-5 space-y-2">
                <li>Fe + Cl‚ÇÇ ‚Üí ?</li>
                <li>Cl‚ÇÇ + NaOH (th∆∞·ªùng) ‚Üí ?</li>
                <li>Cl‚ÇÇ + NaOH (70¬∞C) ‚Üí ?</li>
                <li>MnO‚ÇÇ + HCl (ƒë·∫∑c) ‚Üí ?</li>
                <li>KMnO‚ÇÑ + HCl (ƒë·∫∑c) ‚Üí ?</li>
              </ol>
            </div>
          </div>

          <div class="bg-white p-6 rounded-lg shadow">
            <h3 class="font-bold text-lg border-b pb-2 mb-3 text-blue-700">
              D·∫°ng 2: Chu·ªói ph·∫£n ·ª©ng
            </h3>
            <p class="font-mono text-sm break-words">
              KMnO‚ÇÑ ‚Üí Cl‚ÇÇ ‚Üí HCl ‚Üí FeCl‚ÇÉ ‚Üí AgCl <br />
              Cl‚ÇÇ ‚Üí Br‚ÇÇ ‚Üí I‚ÇÇ ‚Üí ZnI‚ÇÇ
            </p>
          </div>

          <div class="bg-white p-6 rounded-lg shadow">
            <h3 class="font-bold text-lg border-b pb-2 mb-3 text-blue-700">
              D·∫°ng 3: Nh·∫≠n bi·∫øt
            </h3>
            <p class="mb-2">
              B·∫±ng ph∆∞∆°ng ph√°p h√≥a h·ªçc, h√£y nh·∫≠n bi·∫øt c√°c l·ªç m·∫•t nh√£n ch·ª©a c√°c
              dung d·ªãch sau:
            </p>
            <p class="font-bold">NaCl, NaBr, NaI, HCl, NaOH</p>
          </div>
        </div>
      </div>

      <!-- TAB 6: ƒê√ÅP √ÅN -->
      <div id="tab-answers" class="tab-content fade-in">
        <h2 class="text-2xl font-bold text-center text-gray-800 mb-6">
          ƒê√°p √Ån & Gi·∫£i Th√≠ch
        </h2>
        <div class="bg-white p-6 rounded-lg shadow max-w-4xl mx-auto">
          <div class="mb-8">
            <h3 class="text-xl font-bold text-green-700 mb-3 border-b">
              ƒê√°p √°n Tr·∫Øc Nghi·ªám
            </h3>
            <div
              class="grid grid-cols-5 gap-2 text-center text-sm"
              id="mc-answers-grid"
            >
              <!-- Grid filled by JS -->
            </div>
          </div>

          <div class="mb-8">
            <h3 class="text-xl font-bold text-orange-700 mb-3 border-b">
              G·ª£i √Ω T·ª± Lu·∫≠n
            </h3>
            <div class="space-y-4">
              <div class="bg-orange-50 p-3 rounded">
                <h4 class="font-bold">D·∫°ng 1: Ho√†n th√†nh ph∆∞∆°ng tr√¨nh</h4>
                <ul class="list-disc pl-5 text-sm">
                  <li>2Fe + 3Cl‚ÇÇ ‚Üí 2FeCl‚ÇÉ (t¬∞)</li>
                  <li>Cl‚ÇÇ + 2NaOH ‚Üí NaCl + NaClO + H‚ÇÇO</li>
                  <li>3Cl‚ÇÇ + 6NaOH ‚Üí 5NaCl + NaClO‚ÇÉ + 3H‚ÇÇO (70¬∞C)</li>
                  <li>MnO‚ÇÇ + 4HCl ‚Üí MnCl‚ÇÇ + Cl‚ÇÇ + 2H‚ÇÇO</li>
                </ul>
              </div>
              <div class="bg-orange-50 p-3 rounded">
                <h4 class="font-bold">D·∫°ng 3: Nh·∫≠n bi·∫øt</h4>
                <ul class="list-disc pl-5 text-sm">
                  <li>
                    D√πng qu·ª≥ t√≠m: HCl (ƒë·ªè), NaOH (xanh), Mu·ªëi (kh√¥ng ƒë·ªïi).
                  </li>
                  <li>
                    D√πng AgNO‚ÇÉ nh·∫≠n bi·∫øt mu·ªëi: NaCl (Tr·∫Øng), NaBr (V√†ng nh·∫°t),
                    NaI (V√†ng ƒë·∫≠m).
                  </li>
                </ul>
              </div>
            </div>
          </div>
        </div>
      </div>
    </main>

    <script>
      // --- DATA FROM PDF ---

      const tocData = [
        "I. ƒê·∫∑c ƒëi·ªÉm c·∫•u t·∫°o",
        "II. L√≠ t√≠nh",
        "III. T√≠nh oxi h√≥a",
        "IV. ƒêi·ªÅu ch·∫ø",
        "V. H·ª£p ch·∫•t",
      ];

      const quizQuestions = [
        {
          q: "C·∫•u h√¨nh electron l·ªõp ngo√†i c√πng c·ªßa c√°c nguy√™n t·ª≠ halogen l√†:",
          options: ["ns¬≤np‚Å¥", "ns¬≤np‚Åµ", "ns¬≤np¬≥", "ns¬≤np‚Å∂"],
          correct: 1,
          explain:
            "Theo PDF m·ª•c I: Nguy√™n t·ª≠ halogen c√≥ 7e l·ªõp ngo√†i c√πng ns¬≤np‚Åµ.",
        },
        {
          q: "Ch·∫•t n√†o sau ƒë√¢y c√≥ t√≠nh oxi h√≥a m·∫°nh nh·∫•t?",
          options: ["F‚ÇÇ", "Cl‚ÇÇ", "Br‚ÇÇ", "I‚ÇÇ"],
          correct: 0,
          explain:
            "Theo PDF m·ª•c III: T√≠nh oxi h√≥a gi·∫£m d·∫ßn t·ª´ F‚ÇÇ ƒë·∫øn I‚ÇÇ. F‚ÇÇ m·∫°nh nh·∫•t.",
        },
        {
          q: "·ªû ƒëi·ªÅu ki·ªán th∆∞·ªùng, Brom ·ªü tr·∫°ng th√°i n√†o?",
          options: ["Kh√≠", "L·ªèng", "R·∫Øn", "Plasma"],
          correct: 1,
          explain:
            "Theo PDF m·ª•c II (B·∫£ng): Brom ·ªü tr·∫°ng th√°i l·ªèng, m√†u ƒë·ªè n√¢u.",
        },
        {
          q: "Dung d·ªãch AgNO‚ÇÉ kh√¥ng ph·∫£n ·ª©ng v·ªõi dung d·ªãch n√†o sau ƒë√¢y?",
          options: ["NaCl", "NaBr", "NaI", "NaF"],
          correct: 3,
          explain:
            "Theo PDF m·ª•c V.2: AgF tan, kh√¥ng t·∫°o k·∫øt t·ªßa. C√≤n l·∫°i t·∫°o k·∫øt t·ªßa.",
        },
        {
          q: "Khi ƒëun n√≥ng Iot, hi·ªán t∆∞·ª£ng v·∫≠t l√Ω n√†o x·∫£y ra?",
          options: ["N√≥ng ch·∫£y", "S√¥i", "ThƒÉng hoa", "ƒê√¥ng ƒë·∫∑c"],
          correct: 2,
          explain: "Theo PDF m·ª•c II: I‚ÇÇ ·ªü tr·∫°ng th√°i r·∫Øn d·ªÖ thƒÉng hoa.",
        },
        {
          q: "Ph·∫£n ·ª©ng: Cl‚ÇÇ + 2NaOH ‚Üí NaCl + NaClO + H‚ÇÇO t·∫°o ra dung d·ªãch c√≥ t√™n l√†:",
          options: [
            "N∆∞·ªõc Clorua v√¥i",
            "N∆∞·ªõc Javen",
            "Kali clorat",
            "N∆∞·ªõc mu·ªëi",
          ],
          correct: 1,
          explain: "Theo PDF m·ª•c III.2.b: Cl‚ÇÇ + 2NaOH ‚Üí N∆∞·ªõc Javen.",
        },
        {
          q: "Trong ph·∫£n ·ª©ng v·ªõi n∆∞·ªõc: Cl‚ÇÇ + H‚ÇÇO ‚áå HCl + HClO. Clo ƒë√≥ng vai tr√≤ g√¨?",
          options: [
            "Ch·∫•t oxi h√≥a",
            "Ch·∫•t kh·ª≠",
            "V·ª´a oxi h√≥a v·ª´a kh·ª≠",
            "M√¥i tr∆∞·ªùng",
          ],
          correct: 2,
          explain:
            "Theo PDF m·ª•c III.2: Clo v·ª´a th·ªÉ hi·ªán t√≠nh oxi h√≥a, v·ª´a th·ªÉ hi·ªán t√≠nh kh·ª≠.",
        },
        {
          q: "Axit n√†o sau ƒë√¢y ƒÉn m√≤n ƒë∆∞·ª£c th·ªßy tinh?",
          options: ["HCl", "HBr", "HF", "HI"],
          correct: 2,
          explain:
            "Theo PDF m·ª•c V.1: HF c√≥ t√≠nh ch·∫•t ƒë·∫∑c bi·ªát l√† ƒÉn m√≤n th·ªßy tinh.",
        },
        {
          q: "Mu·ªëi AgCl c√≥ m√†u g√¨?",
          options: ["Tr·∫Øng", "V√†ng nh·∫°t", "V√†ng ƒë·∫≠m", "ƒêen"],
          correct: 0,
          explain: "Theo PDF m·ª•c V.2: AgCl k·∫øt t·ªßa tr·∫Øng.",
        },
        {
          q: "ƒê·ªÉ ƒëi·ªÅu ch·∫ø kh√≠ Cl‚ÇÇ trong ph√≤ng th√≠ nghi·ªám, ng∆∞·ªùi ta d√πng ch·∫•t n√†o t√°c d·ª•ng v·ªõi HCl ƒë·∫∑c?",
          options: ["NaCl", "MnO‚ÇÇ ho·∫∑c KMnO‚ÇÑ", "NaOH", "H‚ÇÇO"],
          correct: 1,
          explain:
            "Theo PDF m·ª•c IV.2: D√πng ch·∫•t oxi h√≥a m·∫°nh nh∆∞ MnO‚ÇÇ, KMnO‚ÇÑ t√°c d·ª•ng v·ªõi HCl ƒë·∫∑c.",
        },
      ];

      // --- APP STATE ---
      let currentTab = "theory";
      let currentQuestionIdx = 0;
      let userScore = 0;
      let answered = new Array(quizQuestions.length).fill(false);

      // --- INIT ---
      document.addEventListener("DOMContentLoaded", () => {
        renderTabs();
        renderTOC();
        loadQuestion(0);
        renderAnswersGrid();
      });

      // --- RENDER FUNCTIONS ---
      function renderTabs() {
        const tabs = [
          { id: "theory", label: "L√Ω thuy·∫øt" },
          { id: "simulation", label: "M√¥ ph·ªèng" },
          { id: "lab", label: "Th√≠ nghi·ªám ·∫£o" },
          { id: "quiz", label: "Tr·∫Øc nghi·ªám" },
          { id: "essay", label: "T·ª± lu·∫≠n" },
          { id: "answers", label: "ƒê√°p √°n" },
        ];

        const container = document.getElementById("tabs-container");
        container.innerHTML = tabs
          .map(
            (t) => `
                <button onclick="switchTab('${t.id}')" 
                    class="px-4 py-2 rounded-lg text-sm font-medium transition-colors whitespace-nowrap
                    ${currentTab === t.id ? "bg-blue-600 text-white" : "bg-gray-100 text-gray-600 hover:bg-gray-200"}">
                    ${t.label}
                </button>
            `,
          )
          .join("");
      }

      function switchTab(tabId) {
        document.querySelectorAll(".tab-content").forEach((el) => {
          el.classList.remove("active");
          if (el.id === `tab-${tabId}`) el.classList.add("active");
        });
        currentTab = tabId;
        renderTabs();
      }

      function renderTOC() {
        const list = document.getElementById("toc-list");
        list.innerHTML = tocData
          .map(
            (item) => `
                <li class="hover:text-blue-600 cursor-pointer p-1 rounded hover:bg-gray-50 transition"
                    onclick="scrollToSection('${item.split(".")[0]}')">
                    ${item}
                </li>
            `,
          )
          .join("");
      }

      function scrollToSection(roman) {
        const el = document.getElementById(`section-${roman}`);
        if (el) el.scrollIntoView({ behavior: "smooth" });
      }

      // --- SIMULATION LOGIC ---
      function showStateInfo(element) {
        const infoBox = document.getElementById("state-info");
        const data = {
          F2: { state: "Kh√≠", color: "Xanh nh·∫°t", note: "Oxi h√≥a m·∫°nh nh·∫•t." },
          Cl2: {
            state: "Kh√≠",
            color: "V√†ng l·ª•c",
            note: "ƒê·ªôc, tan trong n∆∞·ªõc.",
          },
          Br2: { state: "L·ªèng", color: "ƒê·ªè n√¢u", note: "D·ªÖ bay h∆°i, ƒë·ªôc." },
          I2: {
            state: "R·∫Øn",
            color: "T√≠m than",
            note: "D·ªÖ thƒÉng hoa khi ƒëun n√≥ng.",
          },
        };

        const info = data[element];
        infoBox.innerHTML = `
                <p><strong>Nguy√™n t·ªë:</strong> ${element}</p>
                <p><strong>Tr·∫°ng th√°i (PDF):</strong> ${info.state}</p>
                <p><strong>M√†u s·∫Øc (PDF):</strong> ${info.color}</p>
                <p><strong>Ghi ch√∫:</strong> ${info.note}</p>
            `;
      }

      // --- LAB LOGIC ---
      function runAgNO3Lab() {
        const chemical = document.getElementById("halide-select").value;
        const tube = document.getElementById("precipitate");
        const dropper = document.getElementById("dropper");
        const resultText = document.getElementById("lab1-result");

        // Reset
        tube.style.height = "0";
        tube.style.backgroundColor = "transparent";
        dropper.style.opacity = "1";
        resultText.innerText = "";

        // Animation
        setTimeout(() => {
          dropper.style.top = "20%"; // Drop moves down

          setTimeout(() => {
            dropper.style.opacity = "0"; // Drop disappears
            dropper.style.top = "2px"; // Reset drop pos

            // Reaction
            if (chemical === "NaF") {
              tube.style.height = "10%";
              tube.style.backgroundColor = "transparent";
              resultText.innerHTML =
                '<span class="text-gray-500">Kh√¥ng hi·ªán t∆∞·ª£ng (AgF tan)</span>';
            } else if (chemical === "NaCl") {
              tube.style.height = "30%";
              tube.style.backgroundColor = "white";
              resultText.innerHTML =
                '<span class="text-gray-800">K·∫øt t·ªßa TR·∫ÆNG (AgCl)</span>';
            } else if (chemical === "NaBr") {
              tube.style.height = "30%";
              tube.style.backgroundColor = "#fef3c7"; // Light yellow
              resultText.innerHTML =
                '<span class="text-yellow-600">K·∫øt t·ªßa V√ÄNG NH·∫†T (AgBr)</span>';
            } else if (chemical === "NaI") {
              tube.style.height = "30%";
              tube.style.backgroundColor = "#fcd34d"; // Yellow
              resultText.innerHTML =
                '<span class="text-yellow-800">K·∫øt t·ªßa V√ÄNG (AgI)</span>';
            }
          }, 500);
        }, 100);
      }

      function runIodineLab() {
        const flame = document.getElementById("flame");
        const vapor = document.getElementById("iodine-vapor");
        const btn = document.getElementById("heat-btn");

        flame.style.opacity = "1";
        btn.disabled = true;
        btn.innerText = "ƒêang ƒëun...";

        setTimeout(() => {
          vapor.style.height = "80%";
          vapor.style.opacity = "0.7";

          setTimeout(() => {
            flame.style.opacity = "0";
            vapor.style.opacity = "0";
            vapor.style.height = "0";
            btn.disabled = false;
            btn.innerText = "ƒêun n√≥ng";
          }, 3000);
        }, 1000);
      }

      // --- QUIZ LOGIC ---
      function loadQuestion(idx) {
        currentQuestionIdx = idx;
        const qData = quizQuestions[idx];

        document.getElementById("quiz-progress").innerText =
          `C√¢u ${idx + 1} / ${quizQuestions.length}`;
        document.getElementById("quiz-question").innerText = qData.q;

        const optionsHtml = qData.options
          .map(
            (opt, i) => `
                <div class="p-3 border rounded cursor-pointer hover:bg-gray-50 ${answered[idx] ? (i === qData.correct ? "bg-green-100 border-green-500" : "") : ""}" 
                     onclick="checkAnswer(${i})" id="opt-${i}">
                    <span class="font-bold mr-2">${String.fromCharCode(65 + i)}.</span> ${opt}
                </div>
            `,
          )
          .join("");

        document.getElementById("quiz-options").innerHTML = optionsHtml;

        const fb = document.getElementById("quiz-feedback");
        if (answered[idx]) {
          fb.classList.remove("hidden");
          fb.className =
            "mt-4 p-3 rounded bg-blue-50 text-blue-800 border border-blue-200";
          fb.innerHTML = `<strong>Gi·∫£i th√≠ch:</strong> ${qData.explain}`;
        } else {
          fb.classList.add("hidden");
        }

        document.getElementById("btn-prev").disabled = idx === 0;
        document.getElementById("btn-next").innerText =
          idx === quizQuestions.length - 1 ? "Ho√†n th√†nh" : "Sau";
      }

      function checkAnswer(selectedIndex) {
        if (answered[currentQuestionIdx]) return;

        answered[currentQuestionIdx] = true;
        const correctIndex = quizQuestions[currentQuestionIdx].correct;

        // Highlight correct/incorrect
        const opts = document.getElementById("quiz-options").children;
        if (selectedIndex === correctIndex) {
          opts[selectedIndex].classList.add("bg-green-100", "border-green-500");
          userScore++;
        } else {
          opts[selectedIndex].classList.add("bg-red-100", "border-red-500");
          opts[correctIndex].classList.add("bg-green-100", "border-green-500");
        }

        document.getElementById("quiz-score").innerText = `ƒêi·ªÉm: ${userScore}`;

        // Show feedback
        const fb = document.getElementById("quiz-feedback");
        fb.classList.remove("hidden");
        fb.className =
          "mt-4 p-3 rounded " +
          (selectedIndex === correctIndex ? "bg-green-50" : "bg-red-50");
        fb.innerHTML = `
                <p class="${selectedIndex === correctIndex ? "text-green-700" : "text-red-700"} font-bold mb-1">
                    ${selectedIndex === correctIndex ? "Ch√≠nh x√°c!" : "Ch∆∞a ƒë√∫ng!"}
                </p>
                <p class="text-sm text-gray-700"><strong>Gi·∫£i th√≠ch:</strong> ${quizQuestions[currentQuestionIdx].explain}</p>
            `;
      }

      function nextQuestion() {
        if (currentQuestionIdx < quizQuestions.length - 1) {
          loadQuestion(currentQuestionIdx + 1);
        } else {
          alert(
            `B·∫°n ƒë√£ ho√†n th√†nh b√†i ki·ªÉm tra! ƒêi·ªÉm s·ªë: ${userScore}/${quizQuestions.length}`,
          );
        }
      }

      function prevQuestion() {
        if (currentQuestionIdx > 0) {
          loadQuestion(currentQuestionIdx - 1);
        }
      }

      function renderAnswersGrid() {
        const grid = document.getElementById("mc-answers-grid");
        grid.innerHTML = quizQuestions
          .map(
            (q, i) => `
                <div class="p-1 border bg-gray-50 rounded">
                    <span class="font-bold text-gray-500">${i + 1}.</span> 
                    <span class="text-blue-600 font-bold">${String.fromCharCode(65 + q.correct)}</span>
                </div>
            `,
          )
          .join("");
      }
    </script>
  </body>
</html>
