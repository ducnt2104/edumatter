<!DOCTYPE html>
<html lang="vi" class="scroll-smooth">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>ChemStudy Teen - Ch∆∞∆°ng 3: H·ª£p ch·∫•t ch·ª©a Nitrogen</title>
    <link rel="icon" href="../../../favicon/educhem.svg" type="image/svg+xml" />

    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Font Awesome -->
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
    />
    <!-- Google Fonts -->
    <link
      href="https://fonts.googleapis.com/css2?family=Nunito:wght@400;600;700;800&display=swap"
      rel="stylesheet"
    />

    <script>
      tailwind.config = {
        darkMode: "class",
        theme: {
          extend: {
            fontFamily: {
              sans: ["Nunito", "sans-serif"],
            },
            colors: {
              chemPrimary: "#4F46E5", // Indigo 600
              chemSecondary: "#EC4899", // Pink 500
              chemDark: "#0F172A", // Slate 900
              chemLight: "#F8FAFC", // Slate 50
              chemAccent: "#10B981", // Emerald 500
            },
            animation: {
              float: "float 3s ease-in-out infinite",
              "spin-slow": "spin 8s linear infinite",
              "pulse-fast": "pulse 1.5s cubic-bezier(0.4, 0, 0.6, 1) infinite",
            },
            keyframes: {
              float: {
                "0%, 100%": { transform: "translateY(0)" },
                "50%": { transform: "translateY(-10px)" },
              },
            },
          },
        },
      };
    </script>

    <style>
      /* Custom Styles & CSS 3D Simulations */
      body {
        transition: background-color 0.3s, color 0.3s;
      }

      /* 3D Molecule Container */
      .molecule-container {
        perspective: 800px;
        width: 200px;
        height: 200px;
        margin: 0 auto;
        position: relative;
      }
      .molecule {
        width: 100%;
        height: 100%;
        position: absolute;
        transform-style: preserve-3d;
        animation: rotate3D 12s infinite linear;
      }

      /* 3D Atoms - Spherical Gradient Look */
      .atom {
        position: absolute;
        border-radius: 50%;
        /* Glossy 3D Sphere Effect */
        box-shadow: inset -3px -3px 8px rgba(0, 0, 0, 0.4),
          2px 2px 5px rgba(0, 0, 0, 0.3);
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 10px;
        font-weight: 800;
        color: rgba(255, 255, 255, 0.9);
        text-shadow: 0 1px 2px rgba(0, 0, 0, 0.5);
        backface-visibility: visible;
      }

      /* Atom Colors with Radial Gradients */
      /* Nitrogen: Blue */
      .atom-n,
      .ani-n {
        background: radial-gradient(circle at 35% 35%, #93c5fd, #1d4ed8);
      }
      /* Carbon: Dark Grey/Black */
      .atom-c,
      .ani-c1,
      .ani-c2,
      .ani-c3,
      .ani-c4,
      .ani-c5,
      .ani-c6 {
        background: radial-gradient(circle at 35% 35%, #94a3b8, #0f172a);
      }
      /* Hydrogen: White/Light Grey */
      .atom-h1,
      .atom-h2 {
        background: radial-gradient(circle at 35% 35%, #ffffff, #94a3b8);
        color: #333;
        text-shadow: none;
      }

      /* Methylamine Positioning */
      .atom-n {
        width: 40px;
        height: 40px;
        left: 80px;
        top: 80px;
        transform: translateZ(0);
      }
      .atom-h1 {
        width: 20px;
        height: 20px;
        left: 60px;
        top: 110px;
        transform: translateZ(25px);
      }
      .atom-h2 {
        width: 20px;
        height: 20px;
        right: 60px;
        top: 110px;
        transform: translateZ(-15px);
      }
      .atom-c {
        width: 35px;
        height: 35px;
        left: 82px;
        top: 45px;
        transform: translateZ(-25px);
      }

      /* Aniline Positioning - Benzene Ring + NH2 */
      /* Ring roughly hexagonal */
      .ani-c1 {
        width: 30px;
        height: 30px;
        left: 85px;
        top: 40px;
        transform: translateZ(0);
      }
      .ani-c2 {
        width: 30px;
        height: 30px;
        left: 120px;
        top: 60px;
        transform: translateZ(0);
      }
      .ani-c3 {
        width: 30px;
        height: 30px;
        left: 120px;
        top: 100px;
        transform: translateZ(0);
      }
      .ani-c4 {
        width: 30px;
        height: 30px;
        left: 85px;
        top: 120px;
        transform: translateZ(0);
      }
      .ani-c5 {
        width: 30px;
        height: 30px;
        left: 50px;
        top: 100px;
        transform: translateZ(0);
      }
      .ani-c6 {
        width: 30px;
        height: 30px;
        left: 50px;
        top: 60px;
        transform: translateZ(0);
      }
      /* Amine group attached to C1 */
      .ani-n {
        width: 35px;
        height: 35px;
        left: 82px;
        top: 5px;
        transform: translateZ(0);
      }

      @keyframes rotate3D {
        from {
          transform: rotateY(0deg) rotateX(15deg);
        }
        to {
          transform: rotateY(360deg) rotateX(15deg);
        }
      }

      /* 3D Smoke Particles */
      .smoke {
        position: absolute;
        /* Soft spherical puff look */
        background: radial-gradient(
          circle,
          rgba(255, 255, 255, 0.9) 0%,
          rgba(255, 255, 255, 0.4) 50%,
          rgba(255, 255, 255, 0) 70%
        );
        border-radius: 50%;
        animation: rise 2.5s infinite ease-out;
      }
      @keyframes rise {
        0% {
          opacity: 0;
          transform: translateY(0) scale(0.5);
        }
        20% {
          opacity: 0.8;
        }
        100% {
          opacity: 0;
          transform: translateY(-80px) scale(2.5);
        }
      }

      /* 3D Gold Particle for Electrophoresis */
      .particle-3d {
        background: radial-gradient(circle at 30% 30%, #fde047, #a16207);
        box-shadow: inset -2px -2px 6px rgba(0, 0, 0, 0.3),
          2px 2px 8px rgba(234, 179, 8, 0.4);
      }

      /* Protein Folding Animation */
      .protein-chain {
        stroke-dasharray: 1000;
        stroke-dashoffset: 1000;
        animation: dash 5s linear alternate infinite;
      }
      @keyframes dash {
        to {
          stroke-dashoffset: 0;
        }
      }

      /* Scrollbar */
      ::-webkit-scrollbar {
        width: 8px;
      }
      ::-webkit-scrollbar-track {
        background: transparent;
      }
      ::-webkit-scrollbar-thumb {
        background: #cbd5e1;
        border-radius: 4px;
      }
      ::-webkit-scrollbar-thumb:hover {
        background: #94a3b8;
      }
      .dark ::-webkit-scrollbar-thumb {
        background: #475569;
      }
      .dark ::-webkit-scrollbar-thumb:hover {
        background: #64748b;
      }

      /* Custom Range Slider */
      input[type="range"] {
        -webkit-appearance: none;
        background: transparent;
      }
      input[type="range"]::-webkit-slider-thumb {
        -webkit-appearance: none;
        height: 20px;
        width: 20px;
        border-radius: 50%;
        background: #4f46e5;
        cursor: pointer;
        margin-top: -8px;
        box-shadow: 0 0 5px rgba(0, 0, 0, 0.3);
      }
      input[type="range"]::-webkit-slider-runnable-track {
        width: 100%;
        height: 6px;
        cursor: pointer;
        background: #cbd5e1;
        border-radius: 3px;
      }
    </style>
  </head>
  <body
    class="bg-chemLight text-slate-800 dark:bg-chemDark dark:text-slate-200 transition-colors duration-300"
  >
    <!-- NAVIGATION BAR -->
    <nav
      class="sticky top-0 z-50 bg-white/90 dark:bg-slate-800/90 backdrop-blur-md shadow-sm border-b border-slate-200 dark:border-slate-700"
    >
      <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
        <div class="flex items-center justify-between h-16">
          <!-- Left: Back & Logo -->
          <div class="flex items-center gap-4">
            <a
              href="../chemstudyteen.html"
              class="p-2 rounded-full hover:bg-slate-100 dark:hover:bg-slate-700 transition"
              title="Quay v·ªÅ"
            >
              <i
                class="fas fa-arrow-left text-xl text-chemPrimary dark:text-indigo-400"
              ></i>
            </a>
            <div class="flex items-center gap-2">
              <div
                class="w-8 h-8 bg-gradient-to-br from-indigo-500 to-pink-500 rounded-lg flex items-center justify-center text-white font-bold text-lg"
              >
                C
              </div>
              <span class="font-bold text-xl tracking-tight"
                >ChemStudy
                <span class="text-chemPrimary dark:text-indigo-400"
                  >Teen</span
                ></span
              >
            </div>
          </div>

          <!-- Center: Tabs -->
          <div
            class="hidden md:flex space-x-1 bg-slate-100 dark:bg-slate-700 p-1 rounded-xl"
          >
            <button
              onclick="switchTab('amine')"
              class="tab-btn px-4 py-1.5 rounded-lg text-sm font-semibold transition bg-white shadow text-indigo-600 dark:bg-slate-600 dark:text-white"
              data-tab="amine"
            >
              Amine
            </button>
            <button
              onclick="switchTab('amino')"
              class="tab-btn px-4 py-1.5 rounded-lg text-sm font-semibold text-slate-600 hover:text-indigo-600 transition dark:text-slate-300 dark:hover:text-white"
              data-tab="amino"
            >
              Amino Acid
            </button>
            <button
              onclick="switchTab('protein')"
              class="tab-btn px-4 py-1.5 rounded-lg text-sm font-semibold text-slate-600 hover:text-indigo-600 transition dark:text-slate-300 dark:hover:text-white"
              data-tab="protein"
            >
              Peptide & Protein
            </button>
            <button
              onclick="switchTab('practice')"
              class="tab-btn px-4 py-1.5 rounded-lg text-sm font-semibold text-slate-600 hover:text-indigo-600 transition dark:text-slate-300 dark:hover:text-white"
              data-tab="practice"
            >
              Luy·ªán T·∫≠p
            </button>
          </div>

          <!-- Right: Theme Toggle -->
          <button
            onclick="toggleTheme()"
            class="p-2 rounded-full hover:bg-slate-100 dark:hover:bg-slate-700 transition text-slate-600 dark:text-yellow-400"
          >
            <i class="fas fa-moon dark:hidden"></i>
            <i class="fas fa-sun hidden dark:inline"></i>
          </button>
        </div>
      </div>
      <!-- Mobile Tab Indicator -->
      <div
        class="md:hidden flex overflow-x-auto p-2 space-x-2 bg-white dark:bg-slate-800 border-b border-slate-200 dark:border-slate-700 scrollbar-hide"
      >
        <button
          onclick="switchTab('amine')"
          class="flex-shrink-0 px-4 py-2 rounded-full text-xs font-bold bg-indigo-100 text-indigo-700 dark:bg-indigo-900 dark:text-indigo-200"
        >
          Amine
        </button>
        <button
          onclick="switchTab('amino')"
          class="flex-shrink-0 px-4 py-2 rounded-full text-xs font-bold text-slate-600 dark:text-slate-300"
        >
          Amino Acid
        </button>
        <button
          onclick="switchTab('protein')"
          class="flex-shrink-0 px-4 py-2 rounded-full text-xs font-bold text-slate-600 dark:text-slate-300"
        >
          Protein
        </button>
        <button
          onclick="switchTab('practice')"
          class="flex-shrink-0 px-4 py-2 rounded-full text-xs font-bold text-slate-600 dark:text-slate-300"
        >
          Luy·ªán T·∫≠p
        </button>
      </div>
    </nav>

    <!-- MAIN CONTENT -->
    <main
      class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8 min-h-[calc(100vh-64px)]"
    >
      <!-- SECTION 1: AMINE -->
      <div id="amine" class="tab-content block animate-fade-in-up">
        <header class="mb-8 text-center">
          <h1
            class="text-4xl font-extrabold text-transparent bg-clip-text bg-gradient-to-r from-indigo-600 to-purple-600 dark:from-indigo-400 dark:to-purple-400 mb-2"
          >
            I. AMINE
          </h1>
          <p class="text-slate-600 dark:text-slate-400">
            D·∫´n xu·∫•t c·ªßa Ammonia (NH<sub>3</sub>) khi thay th·∫ø H b·∫±ng g·ªëc
            hydrocarbon.
          </p>
        </header>

        <!-- 1. Structure & Classification + 3D Models -->
        <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-6 mb-12">
          <!-- Theory Card -->
          <div
            class="bg-white dark:bg-slate-800 rounded-2xl p-6 shadow-lg border border-slate-100 dark:border-slate-700"
          >
            <h2 class="text-xl font-bold mb-4 flex items-center gap-2">
              <i class="fas fa-atom text-pink-500"></i> C·∫•u tr√∫c & Ph√¢n lo·∫°i
            </h2>
            <ul class="space-y-3 text-sm">
              <li
                class="flex items-center justify-between p-3 bg-slate-50 dark:bg-slate-700/50 rounded-lg"
              >
                <span><b>B·∫≠c 1:</b> R-NH<sub>2</sub></span>
                <span
                  class="text-xs bg-blue-100 text-blue-700 px-2 py-1 rounded"
                  >CH<sub>3</sub>NH<sub>2</sub></span
                >
              </li>
              <li
                class="flex items-center justify-between p-3 bg-slate-50 dark:bg-slate-700/50 rounded-lg"
              >
                <span><b>B·∫≠c 2:</b> R-NH-R'</span>
                <span
                  class="text-xs bg-green-100 text-green-700 px-2 py-1 rounded"
                  >(CH<sub>3</sub>)<sub>2</sub>NH</span
                >
              </li>
              <li
                class="flex items-center justify-between p-3 bg-slate-50 dark:bg-slate-700/50 rounded-lg"
              >
                <span><b>B·∫≠c 3:</b> R-N(R')-R''</span>
                <span
                  class="text-xs bg-purple-100 text-purple-700 px-2 py-1 rounded"
                  >(CH<sub>3</sub>)<sub>3</sub>N</span
                >
              </li>
            </ul>
            <div
              class="mt-4 p-3 bg-yellow-50 dark:bg-yellow-900/20 border-l-4 border-yellow-400 text-xs text-yellow-800 dark:text-yellow-200"
            >
              <i class="fas fa-lightbulb mr-1"></i> <b>L∆∞u √Ω:</b> B·∫≠c Amine t√≠nh
              b·∫±ng s·ªë g·ªëc hydrocarbon li√™n k·∫øt v·ªõi N.
            </div>
          </div>

          <!-- Simulation 1a: Methylamine 3D -->
          <div
            class="bg-white dark:bg-slate-800 rounded-2xl p-6 shadow-lg border border-slate-100 dark:border-slate-700 flex flex-col items-center justify-center relative overflow-hidden group"
          >
            <div
              class="absolute top-2 right-2 text-xs text-slate-400 font-mono"
            >
              3D Model
            </div>
            <h3 class="font-bold text-center mb-6">
              Methylamine (CH<sub>3</sub>NH<sub>2</sub>)
            </h3>
            <div class="molecule-container">
              <div class="molecule">
                <div class="atom atom-n">N</div>
                <div class="atom atom-h1">H</div>
                <div class="atom atom-h2">H</div>
                <div class="atom atom-c">C</div>
              </div>
            </div>
            <p class="mt-4 text-xs text-center text-slate-500 italic">
              M√¥ h√¨nh r·ªóng: N (Xanh), C (ƒêen), H (Tr·∫Øng)
            </p>
          </div>

          <!-- Simulation 1b: Aniline 3D (New) -->
          <div
            class="bg-white dark:bg-slate-800 rounded-2xl p-6 shadow-lg border border-slate-100 dark:border-slate-700 flex flex-col items-center justify-center relative overflow-hidden group"
          >
            <div
              class="absolute top-2 right-2 text-xs text-indigo-400 font-mono font-bold"
            >
              M·ªõi!
            </div>
            <h3 class="font-bold text-center mb-6">
              Anilin (C<sub>6</sub>H<sub>5</sub>NH<sub>2</sub>)
            </h3>
            <div class="molecule-container">
              <div class="molecule">
                <!-- Benzene Ring approx -->
                <div class="atom ani-c1">C</div>
                <div class="atom ani-c2">C</div>
                <div class="atom ani-c3">C</div>
                <div class="atom ani-c4">C</div>
                <div class="atom ani-c5">C</div>
                <div class="atom ani-c6">C</div>
                <!-- NH2 Group -->
                <div class="atom ani-n">N</div>
              </div>
            </div>
            <p class="mt-4 text-xs text-center text-slate-500 italic">
              V√≤ng Benzen ph·∫≥ng & Nh√≥m Amino
            </p>
          </div>
        </div>

        <!-- 2. Properties Lab -->
        <h2 class="text-2xl font-bold mb-6 border-l-4 border-indigo-500 pl-4">
          Ph√≤ng Th√≠ Nghi·ªám ·∫¢o: T√≠nh ch·∫•t H√≥a h·ªçc
        </h2>
        <div class="grid lg:grid-cols-3 gap-6 mb-12">
          <!-- Simulation 2: Litmus Test -->
          <div
            class="bg-white dark:bg-slate-800 rounded-xl p-4 shadow-md hover:shadow-lg transition"
          >
            <div class="flex justify-between items-center mb-2">
              <h3 class="font-bold">1. Th·ª≠ qu·ª≥ t√≠m</h3>
              <span
                class="text-xs bg-gray-200 dark:bg-gray-700 px-2 py-1 rounded"
                >Sim #2</span
              >
            </div>
            <div
              class="h-40 bg-slate-100 dark:bg-slate-900 rounded-lg relative flex items-end justify-center overflow-hidden group"
            >
              <!-- Beaker -->
              <div
                class="w-20 h-24 border-2 border-slate-400 border-t-0 rounded-b-xl relative bg-blue-50/50 backdrop-blur-sm z-10 flex items-center justify-center shadow-inner"
              >
                <span class="text-xs font-bold text-slate-500"
                  >CH<sub>3</sub>NH<sub>2</sub></span
                >
              </div>
              <!-- Litmus Paper -->
              <div
                id="litmus"
                class="absolute top-4 left-1/2 -translate-x-1/2 w-8 h-20 bg-pink-400 cursor-pointer transition-all duration-700 hover:top-20 z-0 shadow-sm flex items-end justify-center pb-2 border border-black/10"
              >
                <span class="text-[10px] text-white font-bold drop-shadow"
                  >Qu·ª≥</span
                >
              </div>
              <div
                class="absolute top-2 right-2 text-xs text-slate-400 pointer-events-none"
              >
                Di chu·ªôt v√†o gi·∫•y qu·ª≥
              </div>
            </div>
            <p
              class="mt-2 text-xs text-slate-600 dark:text-slate-400 text-center"
            >
              Hi·ªán t∆∞·ª£ng: Qu·ª≥ chuy·ªÉn <b>Xanh</b>
            </p>
          </div>

          <!-- Simulation 3: Smoke Test -->
          <div
            class="bg-white dark:bg-slate-800 rounded-xl p-4 shadow-md hover:shadow-lg transition"
          >
            <div class="flex justify-between items-center mb-2">
              <h3 class="font-bold">2. T·∫°o kh√≥i tr·∫Øng</h3>
              <span
                class="text-xs bg-gray-200 dark:bg-gray-700 px-2 py-1 rounded"
                >Sim #3</span
              >
            </div>
            <div
              class="h-40 bg-slate-900 rounded-lg relative flex items-center justify-center overflow-hidden"
            >
              <div
                class="absolute left-4 top-1/2 w-16 h-2 bg-gradient-to-r from-transparent to-slate-400 border-b-2 border-slate-500 transform -rotate-12"
              ></div>
              <div class="absolute left-2 top-10 text-white text-xs">
                ƒê≈©a HCl
              </div>

              <div
                class="absolute right-4 top-1/2 w-16 h-2 bg-gradient-to-l from-transparent to-slate-400 border-b-2 border-slate-500 transform rotate-12"
              ></div>
              <div class="absolute right-2 top-10 text-white text-xs">
                ƒê≈©a NH<sub>3</sub>
              </div>

              <button
                onclick="triggerSmoke()"
                class="absolute bottom-2 px-3 py-1 bg-indigo-600 hover:bg-indigo-700 text-white text-xs rounded shadow z-20"
              >
                Th·ª≠ nghi·ªám
              </button>

              <div
                id="smoke-container"
                class="absolute inset-0 pointer-events-none flex justify-center items-center opacity-0 transition-opacity duration-300 z-10"
              >
                <!-- Particles generated by JS -->
              </div>
            </div>
            <p
              class="mt-2 text-xs text-slate-600 dark:text-slate-400 text-center"
            >
              Hi·ªán t∆∞·ª£ng: <b>Kh√≥i tr·∫Øng</b> (Mu·ªëi r·∫Øn)
            </p>
          </div>

          <!-- Simulation 4: Bromine Water Test -->
          <div
            class="bg-white dark:bg-slate-800 rounded-xl p-4 shadow-md hover:shadow-lg transition"
          >
            <div class="flex justify-between items-center mb-2">
              <h3 class="font-bold">3. Anilin + Br<sub>2</sub></h3>
              <span
                class="text-xs bg-gray-200 dark:bg-gray-700 px-2 py-1 rounded"
                >Sim #4</span
              >
            </div>
            <div
              class="h-40 bg-white dark:bg-slate-900 rounded-lg relative flex flex-col items-center justify-end pb-4 border border-slate-200 dark:border-slate-700"
            >
              <div
                class="w-12 h-32 border border-slate-300 rounded-b-xl relative overflow-hidden bg-slate-50 shadow-inner"
              >
                <div
                  id="bromine-solution"
                  class="absolute bottom-0 w-full h-10 bg-orange-300 transition-colors duration-1000"
                ></div>
                <div
                  id="precipitate"
                  class="absolute bottom-0 w-full h-0 bg-white opacity-90 transition-all duration-1000 bg-[url('data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI0IiBoZWlnaHQ9IjQiPgo8cmVjdCB3aWR0aD0iNCIgaGVpZ2h0PSI0IiBmaWxsPSIjZmZmIi8+Cjwvc3ZnPg==')]"
                ></div>
              </div>
              <button
                onclick="triggerBromine()"
                class="absolute top-2 right-2 px-2 py-1 bg-orange-500 hover:bg-orange-600 text-white text-xs rounded"
              >
                + N∆∞·ªõc Brom
              </button>
            </div>
            <p
              class="mt-2 text-xs text-slate-600 dark:text-slate-400 text-center"
            >
              Hi·ªán t∆∞·ª£ng: <b>K·∫øt t·ªßa tr·∫Øng</b>
            </p>
          </div>
        </div>

        <!-- Reaction Reference Cards -->
        <div class="grid md:grid-cols-2 gap-4">
          <div
            class="p-4 bg-indigo-50 dark:bg-indigo-900/30 rounded-lg border-l-4 border-indigo-500"
          >
            <h4 class="font-bold text-indigo-700 dark:text-indigo-300">
              Ph·∫£n ·ª©ng v·ªõi HNO<sub>2</sub>
            </h4>
            <p class="text-sm mt-1">
              <b>Amin b√©o b·∫≠c 1:</b> R-NH<sub>2</sub> + HNO<sub>2</sub> &rarr;
              R-OH + N<sub>2</sub>&uarr; + H<sub>2</sub>O
            </p>
            <p class="text-sm mt-1">
              <b>Amin th∆°m b·∫≠c 1:</b> T·∫°o mu·ªëi Diazoni Ar-N<sub>2</sub
              ><sup>+</sup> (d√πng nhi·ªát ƒë·ªô th·∫•p 0-5¬∞C)
            </p>
          </div>
          <div
            class="p-4 bg-pink-50 dark:bg-pink-900/30 rounded-lg border-l-4 border-pink-500"
          >
            <h4 class="font-bold text-pink-700 dark:text-pink-300">
              Ph·∫£n ·ª©ng ch√°y
            </h4>
            <p class="text-sm mt-1">
              C<sub>n</sub>H<sub>2n+3</sub>N + O<sub>2</sub> &rarr; CO<sub
                >2</sub
              >
              + H<sub>2</sub>O + N<sub>2</sub>
            </p>
            <div
              class="mt-2 w-full bg-gray-200 rounded-full h-1.5 dark:bg-gray-700"
            >
              <div
                class="bg-pink-500 h-1.5 rounded-full"
                style="width: 70%"
              ></div>
            </div>
            <p class="text-xs text-right mt-1 text-slate-500">
              Sim #5: T·ªèa nhi·ªát m·∫°nh
            </p>
          </div>
        </div>
      </div>

      <!-- SECTION 2: AMINO ACID -->
      <div id="amino" class="tab-content hidden animate-fade-in-up">
        <header class="mb-8 text-center">
          <h1
            class="text-4xl font-extrabold text-transparent bg-clip-text bg-gradient-to-r from-emerald-600 to-teal-600 mb-2"
          >
            II. AMINO ACID
          </h1>
          <p class="text-slate-600 dark:text-slate-400">
            H·ª£p ch·∫•t h·ªØu c∆° t·∫°p ch·ª©c: ch·ª©a nh√≥m -NH<sub>2</sub> v√† -COOH.
          </p>
        </header>

        <!-- Simulation 6: Zwitterion & pH -->
        <div
          class="bg-white dark:bg-slate-800 rounded-2xl p-8 shadow-xl mb-8 border border-slate-200 dark:border-slate-700"
        >
          <div
            class="flex flex-col md:flex-row items-center justify-between gap-8"
          >
            <div class="w-full md:w-1/2">
              <h2 class="text-2xl font-bold mb-4">
                Tr·∫°ng th√°i ƒêi·ªán ly & pH (Sim #6)
              </h2>
              <p class="text-sm text-slate-500 mb-6">
                K√©o thanh tr∆∞·ª£t pH ƒë·ªÉ xem s·ª± thay ƒë·ªïi c·∫•u tr√∫c ion c·ªßa Glycin.
              </p>

              <div class="mb-2 flex justify-between font-bold text-sm">
                <span class="text-red-500">Axit (pH &lt; 6)</span>
                <span class="text-purple-500">pH = 6 (pI)</span>
                <span class="text-blue-500">Ki·ªÅm (pH &gt; 6)</span>
              </div>
              <input
                type="range"
                min="1"
                max="14"
                value="6"
                id="phSlider"
                class="w-full h-2 bg-gradient-to-r from-red-400 via-purple-400 to-blue-400 rounded-lg appearance-none cursor-pointer"
              />
              <div
                class="text-center mt-2 font-mono font-bold text-xl text-slate-700 dark:text-slate-200"
              >
                pH: <span id="phValue">6</span>
              </div>
            </div>

            <div
              class="w-full md:w-1/2 flex items-center justify-center bg-slate-50 dark:bg-slate-900 rounded-xl p-8 min-h-[200px] relative transition-colors duration-500"
              id="phBox"
            >
              <div
                id="aminoMolecule"
                class="text-2xl md:text-3xl font-mono font-bold transition-all duration-500 flex items-center gap-1"
              >
                <span id="groupNH" class="text-indigo-600 transition-all"
                  ><sup>+</sup>H<sub>3</sub>N</span
                >
                <span class="text-slate-400">-CH<sub>2</sub>-</span>
                <span id="groupCOO" class="text-pink-600 transition-all"
                  >COO<sup>-</sup></span
                >
              </div>
              <div
                id="chargeLabel"
                class="absolute bottom-4 text-sm font-bold text-slate-500"
              >
                L∆∞·ª°ng c·ª±c (Trung h√≤a)
              </div>
            </div>
          </div>
        </div>

        <div class="grid md:grid-cols-2 gap-8 mb-8">
          <!-- Simulation 7: Electrophoresis -->
          <div class="bg-white dark:bg-slate-800 rounded-2xl p-6 shadow-lg">
            <h3 class="font-bold text-lg mb-4 flex items-center gap-2">
              <i class="fas fa-bolt text-yellow-500"></i> M√¥ ph·ªèng ƒêi·ªán di (Sim
              #7)
            </h3>
            <div
              class="relative w-full h-32 bg-slate-900 rounded-lg overflow-hidden flex items-center justify-center border-4 border-slate-700 shadow-inner"
            >
              <div
                class="absolute left-0 top-0 bottom-0 w-10 bg-red-600/80 flex items-center justify-center text-white font-bold text-xl"
              >
                +
              </div>
              <div
                class="absolute right-0 top-0 bottom-0 w-10 bg-blue-600/80 flex items-center justify-center text-white font-bold text-xl"
              >
                -
              </div>

              <!-- Particle 3D -->
              <div
                id="particle"
                class="particle-3d w-10 h-10 rounded-full flex items-center justify-center text-[10px] font-bold text-yellow-900 transition-transform duration-1000 ease-in-out border border-yellow-300"
              >
                Gly
              </div>

              <div
                class="absolute inset-0 pointer-events-none bg-[linear-gradient(90deg,transparent_49%,rgba(255,255,255,0.1)_50%,transparent_51%)] bg-[length:20px_100%]"
              ></div>
            </div>
            <div class="flex justify-center gap-2 mt-4">
              <button
                onclick="runElectrophoresis('acid')"
                class="px-3 py-1 bg-red-100 text-red-700 rounded hover:bg-red-200 text-xs font-bold"
              >
                Axit (pH &lt; 6)
              </button>
              <button
                onclick="runElectrophoresis('neutral')"
                class="px-3 py-1 bg-purple-100 text-purple-700 rounded hover:bg-purple-200 text-xs font-bold"
              >
                pI (pH = 6)
              </button>
              <button
                onclick="runElectrophoresis('base')"
                class="px-3 py-1 bg-blue-100 text-blue-700 rounded hover:bg-blue-200 text-xs font-bold"
              >
                Ki·ªÅm (pH &gt; 6)
              </button>
            </div>
          </div>

          <!-- Simulation 7b: Copper Complex (New) -->
          <div class="bg-white dark:bg-slate-800 rounded-2xl p-6 shadow-lg">
            <div class="flex justify-between items-center mb-4">
              <h3 class="font-bold text-lg flex items-center gap-2">
                <i class="fas fa-vial text-blue-500"></i> T·∫°o ph·ª©c ƒë·ªìng (Sim
                #7b)
              </h3>
              <span
                class="text-[10px] text-white bg-red-500 px-2 py-0.5 rounded-full font-bold"
                >M·ªõi</span
              >
            </div>
            <div class="flex gap-4">
              <div class="flex-1 flex flex-col items-center">
                <div
                  class="w-16 h-32 border-2 border-slate-300 border-t-0 rounded-b-xl bg-slate-50 relative overflow-hidden shadow-inner"
                >
                  <div
                    id="complex-sol"
                    class="absolute bottom-0 w-full h-16 bg-transparent transition-colors duration-1000"
                  ></div>
                </div>
                <span class="text-xs mt-2">Dung d·ªãch Glycin</span>
              </div>
              <div class="flex flex-col justify-center gap-2">
                <div
                  class="text-xs bg-blue-100 text-blue-800 px-2 py-1 rounded text-center"
                >
                  + Cu(OH)<sub>2</sub>
                </div>
                <button
                  onclick="runCopperComplex()"
                  class="px-3 py-1 bg-blue-600 text-white text-xs rounded shadow hover:bg-blue-700"
                >
                  Th√≠ nghi·ªám
                </button>
              </div>
            </div>
            <p
              class="mt-4 text-xs text-slate-500 italic text-center"
              id="complex-text"
            >
              Alpha-amino acid ph·∫£n ·ª©ng t·∫°o dung d·ªãch m√†u xanh th·∫´m.
            </p>
          </div>
        </div>

        <!-- Key Knowledge Blocks -->
        <div class="grid md:grid-cols-2 lg:grid-cols-4 gap-4">
          <div
            class="p-4 bg-white dark:bg-slate-800 rounded-xl shadow border-t-4 border-indigo-500"
          >
            <h4 class="font-bold mb-2">Glycin (Gly)</h4>
            <p class="text-sm">M = 75</p>
            <p class="text-xs text-slate-500">
              NH<sub>2</sub>-CH<sub>2</sub>-COOH
            </p>
          </div>
          <div
            class="p-4 bg-white dark:bg-slate-800 rounded-xl shadow border-t-4 border-pink-500"
          >
            <h4 class="font-bold mb-2">Alanin (Ala)</h4>
            <p class="text-sm">M = 89</p>
            <p class="text-xs text-slate-500">
              CH<sub>3</sub>-CH(NH<sub>2</sub>)-COOH
            </p>
          </div>
          <div
            class="p-4 bg-white dark:bg-slate-800 rounded-xl shadow border-t-4 border-emerald-500"
          >
            <h4 class="font-bold mb-2">Valin (Val)</h4>
            <p class="text-sm">M = 117</p>
            <p class="text-xs text-slate-500">
              (CH<sub>3</sub>)<sub>2</sub>CH-...
            </p>
          </div>
          <div
            class="p-4 bg-white dark:bg-slate-800 rounded-xl shadow border-t-4 border-orange-500"
          >
            <h4 class="font-bold mb-2">Glutamic Acid</h4>
            <p class="text-sm">M = 147 (2 nh√≥m COOH)</p>
            <p class="text-xs text-slate-500">L√†m qu·ª≥ h√≥a ƒë·ªè</p>
          </div>
        </div>
      </div>

      <!-- SECTION 3: PEPTIDE & PROTEIN -->
      <div id="protein" class="tab-content hidden animate-fade-in-up">
        <header class="mb-8 text-center">
          <h1
            class="text-4xl font-extrabold text-transparent bg-clip-text bg-gradient-to-r from-pink-600 to-rose-600 mb-2"
          >
            III. PEPTIDE & PROTEIN
          </h1>
          <p class="text-slate-600 dark:text-slate-400">
            C∆° s·ªü c·ªßa s·ª± s·ªëng - Polyme sinh h·ªçc.
          </p>
        </header>

        <!-- Simulation 8: Peptide Bond Formation -->
        <div
          class="bg-gradient-to-br from-indigo-50 to-blue-50 dark:from-slate-800 dark:to-slate-900 rounded-2xl p-6 shadow-inner mb-8 border border-indigo-100 dark:border-slate-700"
        >
          <h3
            class="font-bold text-xl text-indigo-800 dark:text-indigo-300 mb-4 text-center"
          >
            M√¥ ph·ªèng ph·∫£n ·ª©ng tr√πng ng∆∞ng (Sim #8)
          </h3>
          <div
            class="flex flex-wrap items-center justify-center gap-2 md:gap-4 text-lg md:text-2xl font-mono"
            id="condensation-demo"
          >
            <div
              class="bg-white dark:bg-slate-700 p-2 rounded shadow text-blue-600"
            >
              H-NH-CH<sub>2</sub>-<span
                class="text-red-500 font-bold group-hover:scale-110 inline-block transition"
                >CO-OH</span
              >
            </div>
            <i class="fas fa-plus text-slate-400"></i>
            <div
              class="bg-white dark:bg-slate-700 p-2 rounded shadow text-green-600"
            >
              <span class="text-red-500 font-bold">H</span
              >-NH-CH(CH<sub>3</sub>)-COOH
            </div>
            <i class="fas fa-arrow-right text-slate-600"></i>
            <button
              onclick="animateCondensation()"
              class="bg-indigo-600 hover:bg-indigo-700 text-white px-4 py-2 rounded-lg text-sm font-sans shadow-lg animate-pulse"
            >
              T·∫°o li√™n k·∫øt
            </button>
          </div>
          <div
            id="condensation-result"
            class="hidden mt-6 text-center animate-fade-in-up"
          >
            <div
              class="inline-block bg-white dark:bg-slate-800 p-4 rounded-xl shadow-lg border-2 border-indigo-200"
            >
              <span class="text-blue-600">H<sub>2</sub>N-CH<sub>2</sub>-</span>
              <span
                class="bg-yellow-200 dark:bg-yellow-900 px-1 py-0.5 rounded text-red-600 font-extrabold"
                >-CO-NH-</span
              >
              <span class="text-green-600">-CH(CH<sub>3</sub>)-COOH</span>
              <span class="ml-4 text-slate-500">+ H<sub>2</sub>O</span>
            </div>
            <p class="mt-2 text-sm text-slate-500">
              Li√™n k·∫øt Peptide b·ªÅn v·ªØng ƒë∆∞·ª£c h√¨nh th√†nh
            </p>
          </div>
        </div>

        <div class="grid lg:grid-cols-3 gap-6">
          <!-- Simulation 9: Biuret Reaction -->
          <div class="bg-white dark:bg-slate-800 p-6 rounded-2xl shadow-lg">
            <h3 class="font-bold text-lg mb-4 flex items-center gap-2">
              <i class="fas fa-vial text-purple-500"></i> Ph·∫£n ·ª©ng m√†u Biure
              (Sim #9)
            </h3>
            <div class="flex gap-4">
              <div class="flex-1 flex flex-col items-center">
                <div
                  class="w-16 h-32 border-2 border-slate-300 border-t-0 rounded-b-xl bg-slate-50 relative overflow-hidden shadow-inner"
                >
                  <div
                    id="protein-sol"
                    class="absolute bottom-0 w-full h-16 bg-blue-50 transition-colors duration-1000"
                  ></div>
                </div>
                <span class="text-xs mt-2">L√≤ng tr·∫Øng tr·ª©ng</span>
              </div>
              <div class="flex flex-col justify-center gap-2">
                <i class="fas fa-plus text-slate-400"></i>
                <div
                  class="text-xs bg-blue-100 text-blue-800 px-2 py-1 rounded text-center"
                >
                  Cu(OH)<sub>2</sub>
                </div>
                <button
                  onclick="runBiuret()"
                  class="px-3 py-1 bg-purple-600 text-white text-xs rounded shadow hover:bg-purple-700"
                >
                  Th√≠ nghi·ªám
                </button>
              </div>
            </div>
            <p
              class="mt-4 text-xs text-slate-500 italic text-center"
              id="biuret-text"
            >
              ƒêi·ªÅu ki·ªán: Peptide c√≥ t·ª´ 2 li√™n k·∫øt peptide tr·ªü l√™n.
            </p>
          </div>

          <!-- Simulation 10: Denaturation -->
          <div class="bg-white dark:bg-slate-800 p-6 rounded-2xl shadow-lg">
            <h3 class="font-bold text-lg mb-4 flex items-center gap-2">
              <i class="fas fa-fire-alt text-orange-500"></i> S·ª± ƒë√¥ng t·ª• nhi·ªát
              (Sim #10)
            </h3>
            <div
              class="relative h-32 bg-slate-100 dark:bg-slate-900 rounded-lg flex items-center justify-center overflow-hidden border border-slate-200 dark:border-slate-700"
            >
              <svg width="200" height="100" class="absolute">
                <!-- Simple representation of protein chain -->
                <path
                  id="proteinPath"
                  d="M10,50 Q50,10 90,50 T170,50"
                  fill="none"
                  stroke="#EC4899"
                  stroke-width="4"
                  stroke-linecap="round"
                  class="protein-chain"
                />
              </svg>
              <div
                id="egg-white"
                class="absolute inset-0 bg-white/0 transition-colors duration-1000"
              ></div>
            </div>
            <div class="mt-4 flex items-center gap-4">
              <span class="text-xs font-bold text-blue-500">L·∫°nh</span>
              <input
                type="range"
                id="heatSlider"
                min="0"
                max="100"
                value="0"
                class="w-full h-2 bg-gradient-to-r from-blue-300 to-red-500 rounded-lg appearance-none cursor-pointer"
                oninput="denatureProtein(this.value)"
              />
              <span class="text-xs font-bold text-red-500">N√≥ng</span>
            </div>
            <p class="mt-2 text-xs text-center text-slate-500">
              K√©o thanh nhi·ªát ƒë·ªô ƒë·ªÉ xem s·ª± ƒë√¥ng t·ª•
            </p>
          </div>

          <!-- Simulation 10b: Salting Out (New) -->
          <div class="bg-white dark:bg-slate-800 p-6 rounded-2xl shadow-lg">
            <div class="flex justify-between items-center mb-4">
              <h3 class="font-bold text-lg flex items-center gap-2">
                <i class="fas fa-snowflake text-cyan-500"></i> ƒê√¥ng t·ª• b·∫±ng mu·ªëi
                (Sim #10b)
              </h3>
              <span
                class="text-[10px] text-white bg-red-500 px-2 py-0.5 rounded-full font-bold"
                >M·ªõi</span
              >
            </div>
            <div
              class="relative h-32 bg-blue-50 dark:bg-slate-900 rounded-lg flex items-end justify-center overflow-hidden border border-slate-200 dark:border-slate-700 shadow-inner"
            >
              <!-- Beaker content -->
              <div
                id="salt-precipitate"
                class="w-full h-0 bg-white opacity-90 transition-all duration-1000"
              ></div>
              <div
                class="absolute inset-0 flex items-center justify-center pointer-events-none"
              >
                <span class="text-xs text-slate-400">Dung d·ªãch Protein</span>
              </div>
            </div>
            <div class="flex justify-center gap-2 mt-4">
              <button
                onclick="runSaltingOut(true)"
                class="px-3 py-1 bg-cyan-600 text-white rounded hover:bg-cyan-700 text-xs font-bold"
              >
                + NaCl b√£o h√≤a
              </button>
              <button
                onclick="runSaltingOut(false)"
                class="px-3 py-1 bg-slate-200 text-slate-700 rounded hover:bg-slate-300 text-xs font-bold"
              >
                + N∆∞·ªõc
              </button>
            </div>
            <p class="mt-2 text-xs text-center text-slate-500 italic">
              Hi·ªán t∆∞·ª£ng ƒë√¥ng t·ª• thu·∫≠n ngh·ªãch
            </p>
          </div>
        </div>

        <!-- More Mini Sims Grid -->
        <div class="grid grid-cols-2 md:grid-cols-4 gap-4 mt-8">
          <div
            class="p-4 bg-yellow-50 dark:bg-yellow-900/20 rounded-xl text-center cursor-pointer hover:scale-105 transition shadow-sm group"
          >
            <div class="text-2xl mb-2 group-hover:rotate-12 transition">üß™</div>
            <h5 class="text-xs font-bold">Xanthoproteic (Sim #11)</h5>
            <p class="text-[10px] text-slate-500">
              HNO<sub>3</sub> ƒë·∫∑c -> M√†u v√†ng
            </p>
          </div>
          <div
            class="p-4 bg-green-50 dark:bg-green-900/20 rounded-xl text-center cursor-pointer hover:scale-105 transition shadow-sm group"
          >
            <div class="text-2xl mb-2 group-hover:scale-125 transition">‚úÇÔ∏è</div>
            <h5 class="text-xs font-bold">Th·ªßy ph√¢n (Sim #12)</h5>
            <p class="text-[10px] text-slate-500">C·∫Øt m·∫°ch Peptide</p>
          </div>
          <div
            class="p-4 bg-red-50 dark:bg-red-900/20 rounded-xl text-center cursor-pointer hover:scale-105 transition shadow-sm group"
          >
            <div class="text-2xl mb-2 animate-bounce">üî•</div>
            <h5 class="text-xs font-bold">ƒê·ªët ch√°y (Sim #13)</h5>
            <p class="text-[10px] text-slate-500">Kh√©t m√πi t√≥c ch√°y</p>
          </div>
          <div
            class="p-4 bg-purple-50 dark:bg-purple-900/20 rounded-xl text-center cursor-pointer hover:scale-105 transition shadow-sm group"
          >
            <div class="text-2xl mb-2">üß¨</div>
            <h5 class="text-xs font-bold">Enzyme (Sim #14)</h5>
            <p class="text-[10px] text-slate-500">X√∫c t√°c ch·ªçn l·ªçc</p>
          </div>
        </div>
      </div>

      <!-- SECTION 4: PRACTICE -->
      <div id="practice" class="tab-content hidden animate-fade-in-up">
        <header class="mb-8 text-center">
          <h1
            class="text-4xl font-extrabold text-transparent bg-clip-text bg-gradient-to-r from-orange-500 to-red-500 mb-2"
          >
            LUY·ªÜN T·∫¨P
          </h1>
          <p class="text-slate-600 dark:text-slate-400">
            C·ªßng c·ªë ki·∫øn th·ª©c qua c√°c c√¢u h·ªèi tr·∫Øc nghi·ªám.
          </p>
        </header>

        <div
          class="max-w-3xl mx-auto bg-white dark:bg-slate-800 rounded-2xl shadow-xl overflow-hidden"
        >
          <div id="quiz-container" class="p-8">
            <!-- Quiz Logic Injected Here -->
          </div>
          <div
            id="quiz-result"
            class="hidden p-8 text-center bg-emerald-50 dark:bg-emerald-900/20"
          >
            <div class="text-5xl mb-4">üèÜ</div>
            <h2 class="text-2xl font-bold text-emerald-600 mb-2">K·∫øt qu·∫£</h2>
            <p class="text-slate-600 dark:text-slate-300">
              B·∫°n ƒë√£ tr·∫£ l·ªùi ƒë√∫ng
              <span
                id="score"
                class="font-bold text-emerald-600 text-xl"
              ></span>
              c√¢u h·ªèi.
            </p>
            <button
              onclick="resetQuiz()"
              class="mt-6 px-6 py-2 bg-emerald-600 hover:bg-emerald-700 text-white rounded-lg shadow font-bold transition"
            >
              L√†m l·∫°i
            </button>
          </div>
        </div>
      </div>
    </main>

    <!-- Script Section -->
    <script>
      // --- State Management ---
      const tabs = ["amine", "amino", "protein", "practice"];

      function switchTab(tabId) {
        // Hide all
        document
          .querySelectorAll(".tab-content")
          .forEach((el) => el.classList.add("hidden"));
        document.querySelectorAll(".tab-btn").forEach((el) => {
          el.classList.remove(
            "bg-white",
            "shadow",
            "text-indigo-600",
            "dark:bg-slate-600",
            "dark:text-white"
          );
          el.classList.add("text-slate-600", "dark:text-slate-300");
        });

        // Show target
        document.getElementById(tabId).classList.remove("hidden");

        // Highlight button
        const activeBtn = document.querySelector(`button[data-tab="${tabId}"]`);
        if (activeBtn) {
          activeBtn.classList.add(
            "bg-white",
            "shadow",
            "text-indigo-600",
            "dark:bg-slate-600",
            "dark:text-white"
          );
          activeBtn.classList.remove("text-slate-600", "dark:text-slate-300");
        }
      }

      function toggleTheme() {
        document.documentElement.classList.toggle("dark");
        const isDark = document.documentElement.classList.contains("dark");
        localStorage.setItem("theme", isDark ? "dark" : "light");
      }

      // Check local storage for theme
      if (
        localStorage.getItem("theme") === "dark" ||
        (!("theme" in localStorage) &&
          window.matchMedia("(prefers-color-scheme: dark)").matches)
      ) {
        document.documentElement.classList.add("dark");
      }

      // --- Simulations Logic ---

      // Sim 2: Litmus
      document
        .getElementById("litmus")
        .addEventListener("mouseover", function () {
          this.style.backgroundColor = "#3b82f6"; // Blue
        });
      document
        .getElementById("litmus")
        .addEventListener("mouseout", function () {
          this.style.backgroundColor = "#f472b6"; // Pink reset
        });

      // Sim 3: Smoke
      function triggerSmoke() {
        const container = document.getElementById("smoke-container");
        container.innerHTML = "";
        container.style.opacity = "1";

        for (let i = 0; i < 30; i++) {
          const particle = document.createElement("div");
          particle.classList.add("smoke");
          particle.style.width = Math.random() * 20 + 10 + "px";
          particle.style.height = particle.style.width;
          particle.style.left = Math.random() * 100 + "%";
          particle.style.animationDelay = Math.random() * 2 + "s";
          container.appendChild(particle);
        }

        setTimeout(() => {
          container.style.opacity = "0";
        }, 4000);
      }

      // Sim 4: Bromine
      function triggerBromine() {
        const liquid = document.getElementById("bromine-solution");
        const precipitate = document.getElementById("precipitate");

        liquid.style.backgroundColor = "#fed7aa"; // Faded orange
        precipitate.style.height = "40px"; // Precipitate appears

        setTimeout(() => {
          liquid.style.backgroundColor = "#fff"; // Clear
        }, 1500);
      }

      // Sim 6: pH Slider Zwitterion
      const phSlider = document.getElementById("phSlider");
      phSlider.addEventListener("input", (e) => {
        const val = parseInt(e.target.value);
        const molecule = document.getElementById("aminoMolecule");
        const nh = document.getElementById("groupNH");
        const coo = document.getElementById("groupCOO");
        const label = document.getElementById("chargeLabel");
        const phVal = document.getElementById("phValue");
        const phBox = document.getElementById("phBox");

        phVal.innerText = val;

        if (val < 6) {
          // Cation
          nh.innerHTML = `<sup>+</sup>H<sub>3</sub>N`;
          coo.innerHTML = `COOH`;
          nh.className = "text-indigo-600 font-bold scale-110";
          coo.className = "text-slate-800";
          label.innerText = "D·∫°ng Cation (+1)";
          label.className = "absolute bottom-4 text-sm font-bold text-red-500";
          phBox.className =
            "w-full md:w-1/2 flex items-center justify-center bg-red-50 dark:bg-red-900/20 rounded-xl p-8 min-h-[200px] relative transition-colors duration-500";
        } else if (val > 6) {
          // Anion
          nh.innerHTML = `H<sub>2</sub>N`;
          coo.innerHTML = `COO<sup>-</sup>`;
          nh.className = "text-slate-800";
          coo.className = "text-pink-600 font-bold scale-110";
          label.innerText = "D·∫°ng Anion (-1)";
          label.className = "absolute bottom-4 text-sm font-bold text-blue-500";
          phBox.className =
            "w-full md:w-1/2 flex items-center justify-center bg-blue-50 dark:bg-blue-900/20 rounded-xl p-8 min-h-[200px] relative transition-colors duration-500";
        } else {
          // Zwitterion
          nh.innerHTML = `<sup>+</sup>H<sub>3</sub>N`;
          coo.innerHTML = `COO<sup>-</sup>`;
          nh.className = "text-indigo-600";
          coo.className = "text-pink-600";
          label.innerText = "D·∫°ng L∆∞·ª°ng c·ª±c (Trung h√≤a)";
          label.className =
            "absolute bottom-4 text-sm font-bold text-purple-500";
          phBox.className =
            "w-full md:w-1/2 flex items-center justify-center bg-slate-50 dark:bg-slate-900 rounded-xl p-8 min-h-[200px] relative transition-colors duration-500";
        }
      });

      // Sim 7: Electrophoresis
      function runElectrophoresis(type) {
        const p = document.getElementById("particle");
        p.style.transform = "translateX(0)"; // Reset

        setTimeout(() => {
          if (type === "acid") {
            p.style.transform = "translateX(120px)";
            p.innerText = "Gly+";
            p.style.borderColor = "red";
          } else if (type === "base") {
            p.style.transform = "translateX(-120px)";
            p.innerText = "Gly-";
            p.style.borderColor = "blue";
          } else {
            p.style.transform = "translateX(0)";
            p.innerText = "Gly¬±";
            p.style.borderColor = "yellow";
          }
        }, 100);
      }

      // Sim 7b: Copper Complex
      function runCopperComplex() {
        const sol = document.getElementById("complex-sol");
        sol.style.backgroundColor = "#1e3a8a"; // Dark Blue
        const text = document.getElementById("complex-text");
        text.innerText =
          "Hi·ªán t∆∞·ª£ng: Dung d·ªãch chuy·ªÉn m√†u Xanh th·∫´m (Ph·ª©c ƒë·ªìng)";
        text.classList.add("text-blue-600", "font-bold");
      }

      // Sim 8: Condensation
      function animateCondensation() {
        document.getElementById("condensation-demo").classList.add("hidden");
        document
          .getElementById("condensation-result")
          .classList.remove("hidden");
      }

      // Sim 9: Biuret
      function runBiuret() {
        const sol = document.getElementById("protein-sol");
        sol.style.backgroundColor = "#A855F7"; // Purple
        document.getElementById("biuret-text").innerText =
          "Hi·ªán t∆∞·ª£ng: Dung d·ªãch chuy·ªÉn m√†u T√çM ƒë·∫∑c tr∆∞ng.";
        document.getElementById("biuret-text").className =
          "mt-4 text-sm font-bold text-purple-600 text-center animate-pulse";
      }

      // Sim 10: Denaturation
      function denatureProtein(val) {
        const path = document.getElementById("proteinPath");
        const egg = document.getElementById("egg-white");

        // Randomize path based on heat
        const distortion = val / 2;
        path.style.transform = `scale(${1 + val / 100}) rotate(${val}deg)`;
        path.style.opacity = `${1 - val / 150}`;

        // Opacity of white background (Cooked egg)
        egg.style.backgroundColor = `rgba(255, 255, 255, ${val / 100})`;
      }

      // Sim 10b: Salting Out
      function runSaltingOut(isAddSalt) {
        const ppt = document.getElementById("salt-precipitate");
        if (isAddSalt) {
          ppt.style.height = "60%"; // Precipitate forms
        } else {
          ppt.style.height = "0%"; // Dissolves
        }
      }

      // --- Quiz System ---
      const questions = [
        {
          q: "Ch·∫•t n√†o sau ƒë√¢y l√† ch·∫•t kh√≠ ·ªü ƒëi·ªÅu ki·ªán th∆∞·ªùng, c√≥ m√πi khai?",
          options: ["Anilin", "Metylamin", "Glycin", "Alanin"],
          ans: 1,
        },
        {
          q: "Hi·ªán t∆∞·ª£ng khi nh√∫ng ƒë≈©a th·ªßy tinh t·∫©m HCl ƒë·∫∑c v√†o l·ªç ƒë·ª±ng Metylamin ƒë·∫∑c?",
          options: [
            "C√≥ k·∫øt t·ªßa tr·∫Øng",
            "C√≥ kh√≠ tho√°t ra",
            "C√≥ kh√≥i tr·∫Øng bay l√™n",
            "Dung d·ªãch h√≥a xanh",
          ],
          ans: 2,
        },
        {
          q: "Amino acid l√† h·ª£p ch·∫•t h·ªØu c∆° t·∫°p ch·ª©c, ph√¢n t·ª≠ ch·ª©a ƒë·ªìng th·ªùi c√°c nh√≥m?",
          options: [
            "-NH2 v√† -CHO",
            "-NH2 v√† -COOH",
            "-OH v√† -COOH",
            "-NH2 v√† -OH",
          ],
          ans: 1,
        },
        {
          q: "Ph·∫£n ·ª©ng m√†u Biure d√πng ƒë·ªÉ nh·∫≠n bi·∫øt?",
          options: [
            "Amine b·∫≠c 1",
            "Amino acid",
            "Peptide c√≥ ‚â• 2 li√™n k·∫øt peptide",
            "Lipid",
          ],
          ans: 2,
        },
        {
          q: "Dung d·ªãch n√†o sau ƒë√¢y l√†m qu·ª≥ t√≠m chuy·ªÉn m√†u h·ªìng?",
          options: ["Metylamin", "Glycin", "Axit Glutamic", "Lysin"],
          ans: 2,
        },
      ];

      function loadQuiz() {
        const container = document.getElementById("quiz-container");
        container.innerHTML = "";

        questions.forEach((q, idx) => {
          const qDiv = document.createElement("div");
          qDiv.className = "mb-6 border-b border-slate-200 pb-4 last:border-0";
          qDiv.innerHTML = `
                    <p class="font-bold text-lg mb-3 text-slate-800 dark:text-slate-200">C√¢u ${
                      idx + 1
                    }: ${q.q}</p>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-3">
                        ${q.options
                          .map(
                            (opt, i) => `
                            <button onclick="checkAnswer(this, ${idx}, ${i})" class="quiz-opt-${idx} text-left px-4 py-3 rounded-lg border border-slate-200 hover:bg-slate-50 dark:border-slate-600 dark:hover:bg-slate-700 transition">
                                ${["A", "B", "C", "D"][i]}. ${opt}
                            </button>
                        `
                          )
                          .join("")}
                    </div>
                `;
          container.appendChild(qDiv);
        });

        const btn = document.createElement("button");
        btn.className =
          "w-full py-3 bg-indigo-600 text-white font-bold rounded-lg shadow hover:bg-indigo-700 mt-4";
        btn.innerText = "N·ªôp b√†i";
        btn.onclick = showResult;
        container.appendChild(btn);
      }

      let userAnswers = new Array(questions.length).fill(null);

      function checkAnswer(btn, qIdx, optIdx) {
        userAnswers[qIdx] = optIdx;
        // Visual feedback select
        document.querySelectorAll(`.quiz-opt-${qIdx}`).forEach((el) => {
          el.classList.remove(
            "bg-indigo-100",
            "border-indigo-500",
            "dark:bg-indigo-900"
          );
        });
        btn.classList.add(
          "bg-indigo-100",
          "border-indigo-500",
          "dark:bg-indigo-900"
        );
      }

      function showResult() {
        let score = 0;
        userAnswers.forEach((ans, i) => {
          if (ans === questions[i].ans) score++;
        });

        document.getElementById("quiz-container").classList.add("hidden");
        document.getElementById("quiz-result").classList.remove("hidden");
        document.getElementById(
          "score"
        ).innerText = `${score}/${questions.length}`;
      }

      function resetQuiz() {
        userAnswers.fill(null);
        document.getElementById("quiz-container").classList.remove("hidden");
        document.getElementById("quiz-result").classList.add("hidden");
        loadQuiz();
      }

      // Init
      loadQuiz();
    </script>
  </body>
</html>
