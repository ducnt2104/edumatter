<!doctype html>
<html lang="vi" class="scroll-smooth">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Chương 4: Polymer & Vật Liệu Polymer – ChemStudy Expert</title>
    <link rel="icon" href="../../../favicon/educhem.avg" />

    <!-- TAILWIND CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>

    <!-- FONT AWESOME CDN -->
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
    />

    <!-- GOOGLE FONTS -->
    <link
      href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@300;400;600;700&family=Inter:wght@300;400;500;600&display=swap"
      rel="stylesheet"
    />

    <!-- CONFIG TAILWIND -->
    <script>
      tailwind.config = {
        darkMode: "class",
        theme: {
          extend: {
            fontFamily: {
              display: ["Space Grotesk", "sans-serif"],
              body: ["Inter", "sans-serif"],
            },
            colors: {
              chem: {
                primary: "#3b82f6" /* Blue-500 */,
                secondary: "#10b981" /* Emerald-500 */,
                accent: "#8b5cf6" /* Violet-500 */,
                dark: "#0f172a" /* Slate-900 */,
                light: "#f8fafc" /* Slate-50 */,
              },
            },
            animation: {
              "spin-slow": "spin 8s linear infinite",
              float: "floating 3s ease-in-out infinite",
              "pulse-slow": "pulse 3s cubic-bezier(0.4, 0, 0.6, 1) infinite",
              "bounce-slight": "bounceSlight 2s infinite",
            },
            keyframes: {
              floating: {
                "0%, 100%": { transform: "translateY(0)" },
                "50%": { transform: "translateY(-10px)" },
              },
              bounceSlight: {
                "0%, 100%": { transform: "translateY(0)" },
                "50%": { transform: "translateY(-5px)" },
              },
            },
          },
        },
      };
    </script>

    <style>
      /* CUSTOM CSS - GLASSMORPHISM & UTILITIES */
      body {
        font-family: "Inter", sans-serif;
        background-color: #f0f9ff;
        background-image:
          radial-gradient(
            at 0% 0%,
            rgba(59, 130, 246, 0.1) 0px,
            transparent 50%
          ),
          radial-gradient(
            at 100% 0%,
            rgba(16, 185, 129, 0.1) 0px,
            transparent 50%
          );
        transition: background-color 0.5s ease;
      }

      .dark body {
        background-color: #020617;
        background-image:
          radial-gradient(
            at 0% 0%,
            rgba(59, 130, 246, 0.15) 0px,
            transparent 50%
          ),
          radial-gradient(
            at 100% 100%,
            rgba(139, 92, 246, 0.15) 0px,
            transparent 50%
          );
      }

      /* Glassmorphism Classes */
      .glass-card {
        background: rgba(255, 255, 255, 0.7);
        backdrop-filter: blur(12px);
        -webkit-backdrop-filter: blur(12px);
        border: 1px solid rgba(255, 255, 255, 0.3);
        transition: all 0.3s ease;
      }

      .dark .glass-card {
        background: rgba(30, 41, 59, 0.6);
        border: 1px solid rgba(255, 255, 255, 0.05);
      }

      .glass-card:hover {
        transform: translateY(-5px);
        box-shadow: 0 10px 30px -10px rgba(0, 0, 0, 0.15);
      }

      .glass-nav {
        background: rgba(255, 255, 255, 0.85);
        backdrop-filter: blur(16px);
        border-bottom: 1px solid rgba(0, 0, 0, 0.05);
      }

      .dark .glass-nav {
        background: rgba(15, 23, 42, 0.85);
        border-bottom: 1px solid rgba(255, 255, 255, 0.05);
      }

      /* Text Gradients */
      .text-gradient {
        background-clip: text;
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        background-image: linear-gradient(to right, #3b82f6, #8b5cf6, #ec4899);
      }

      /* Simulation Specific Styles */
      .monomer {
        transition: all 0.5s ease;
      }

      .polymer-chain {
        stroke-dasharray: 1000;
        stroke-dashoffset: 1000;
        animation: dash 5s linear forwards;
      }

      @keyframes dash {
        to {
          stroke-dashoffset: 0;
        }
      }

      /* Flame Animation for Burning Test */
      .flame-container {
        position: relative;
        width: 40px;
        height: 60px;
      }
      .flame {
        position: absolute;
        bottom: 0;
        left: 50%;
        transform: translateX(-50%);
        width: 30px;
        height: 50px;
        background: linear-gradient(to top, #ff4500, #ff8c00, #ffd700);
        border-radius: 50% 50% 20% 20%;
        filter: blur(2px);
        animation: flicker 0.1s infinite alternate;
        opacity: 0.8;
      }
      @keyframes flicker {
        0% {
          transform: translateX(-50%) scale(1);
        }
        100% {
          transform: translateX(-50%) scale(1.1) skewX(2deg);
        }
      }

      /* Footer Specifics from Prompt */
      :root {
        --footer-bg: #0f172a;
        --footer-text: #e2e8f0;
        --p-primary: #3b82f6;
      }
      html.dark :root {
        --footer-bg: #020617;
      }

      footer {
        background: var(--footer-bg);
        color: var(--footer-text);
        padding: 100px 5% 40px;
        position: relative;
        overflow: hidden;
      }

      .footer-waves {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 60px;
        background: var(--footer-bg);
        clip-path: polygon(
          0% 45%,
          16% 44%,
          33% 50%,
          54% 60%,
          70% 61%,
          84% 59%,
          100% 52%,
          100% 100%,
          0% 100%
        );
      }

      .footer-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
        gap: 60px;
        max-width: 1200px;
        margin: 0 auto;
      }

      .icon-btn {
        color: #94a3b8;
        font-size: 1.2rem;
        transition: 0.3s;
      }
      .icon-btn:hover {
        color: white;
        transform: scale(1.1);
      }

      .contact-item {
        margin-bottom: 15px;
        display: flex;
        align-items: center;
        gap: 15px;
        color: #94a3b8;
      }
      .contact-item i {
        color: var(--p-primary);
      }

      /* Draggable Styles */
      .draggable {
        cursor: grab;
      }
      .draggable:active {
        cursor: grabbing;
      }
      .drag-over {
        background-color: rgba(59, 130, 246, 0.2) !important;
        border-style: solid !important;
        border-color: #3b82f6 !important;
      }
    </style>
  </head>
  <body
    class="text-slate-800 dark:text-slate-200 antialiased selection:bg-blue-500 selection:text-white transition-colors duration-300"
  >
    <!-- ================= HEADER ================= -->
    <header
      class="fixed top-0 w-full z-50 glass-nav transition-all duration-300"
    >
      <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
        <div class="flex justify-between items-center h-20">
          <!-- Logo Block -->
          <div
            class="flex items-center gap-3 cursor-pointer group"
            onclick="window.scrollTo(0, 0)"
          >
            <div
              class="w-10 h-10 rounded-full bg-gradient-to-br from-blue-500 to-green-500 flex items-center justify-center text-white font-bold text-xl shadow-lg group-hover:shadow-blue-500/50 transition-all"
            >
              <i
                class="fas fa-atom text-xl md:text-2xl group-hover:animate-spin-slow"
              ></i>
            </div>
            <span
              class="font-display font-bold text-2xl tracking-tight bg-clip-text text-transparent bg-gradient-to-r from-blue-600 to-emerald-600 dark:from-blue-400 dark:to-emerald-400"
            >
              ChemStudy Expert
            </span>
          </div>

          <!-- Desktop Menu -->
          <nav class="hidden md:flex space-x-8">
            <a
              href="#overview"
              class="text-sm font-medium hover:text-blue-500 transition-colors"
              >Đại cương</a
            >
            <a
              href="#materials"
              class="text-sm font-medium hover:text-blue-500 transition-colors"
              >Vật liệu</a
            >
            <a
              href="#lab"
              class="text-sm font-medium hover:text-blue-500 transition-colors"
              >Thí nghiệm</a
            >
            <a
              href="#quiz"
              class="text-sm font-medium hover:text-blue-500 transition-colors"
              >Bài tập</a
            >
          </nav>

          <!-- Controls -->
          <div class="flex items-center gap-4">
            <button
              id="theme-toggle"
              class="p-2 rounded-full hover:bg-slate-200 dark:hover:bg-slate-700 transition-colors focus:outline-none"
              aria-label="Toggle Dark Mode"
            >
              <i class="fas fa-moon dark:hidden text-slate-600"></i>
              <i class="fas fa-sun hidden dark:block text-yellow-400"></i>
            </button>
            <!-- Mobile Menu Button -->
            <button
              class="md:hidden text-2xl text-slate-600 dark:text-slate-300"
              onclick="
                document
                  .getElementById('mobile-menu')
                  .classList.toggle('hidden')
              "
            >
              <i class="fas fa-bars"></i>
            </button>
          </div>
        </div>
      </div>
      <!-- Mobile Menu -->
      <div
        id="mobile-menu"
        class="hidden md:hidden bg-white/95 dark:bg-slate-900/95 backdrop-blur-md border-t border-slate-200 dark:border-slate-800"
      >
        <div class="px-2 pt-2 pb-3 space-y-1 sm:px-3">
          <a
            href="#overview"
            class="block px-3 py-2 rounded-md text-base font-medium hover:bg-blue-50 dark:hover:bg-slate-800"
            >Đại cương</a
          >
          <a
            href="#materials"
            class="block px-3 py-2 rounded-md text-base font-medium hover:bg-blue-50 dark:hover:bg-slate-800"
            >Vật liệu</a
          >
          <a
            href="#lab"
            class="block px-3 py-2 rounded-md text-base font-medium hover:bg-blue-50 dark:hover:bg-slate-800"
            >Thí nghiệm</a
          >
        </div>
      </div>
    </header>

    <main class="pt-24 pb-20 px-4 sm:px-6 lg:px-8 max-w-7xl mx-auto space-y-24">
      <!-- ================= HERO SECTION ================= -->
      <section class="text-center py-16 lg:py-24 relative">
        <div
          class="absolute top-10 left-10 w-20 h-20 bg-blue-400/20 rounded-full blur-2xl animate-pulse-slow"
        ></div>
        <div
          class="absolute bottom-10 right-10 w-32 h-32 bg-green-400/20 rounded-full blur-3xl animate-pulse-slow delay-700"
        ></div>

        <span
          class="inline-block py-1 px-3 rounded-full bg-indigo-100 dark:bg-indigo-900/30 text-indigo-600 dark:text-indigo-300 text-sm font-semibold mb-6 animate-bounce-slight"
        >
          Hóa học 12 - Chương 4
        </span>
        <h1
          class="text-5xl md:text-7xl font-display font-bold mb-6 leading-tight"
        >
          Kỷ nguyên <br />
          <span class="text-gradient">POLYMER & VẬT LIỆU MỚI</span>
        </h1>
        <p
          class="text-lg md:text-xl text-slate-600 dark:text-slate-400 max-w-2xl mx-auto mb-10 leading-relaxed"
        >
          Khám phá những "gã khổng lồ" của thế giới phân tử. Từ túi nilon hàng
          ngày đến vật liệu siêu bền cho tàu vũ trụ.
        </p>
        <a
          href="#overview"
          class="inline-flex items-center gap-2 px-8 py-4 bg-gradient-to-r from-blue-600 to-purple-600 text-white rounded-full font-bold shadow-xl shadow-blue-500/30 hover:scale-105 hover:shadow-blue-500/50 transition-all duration-300"
        >
          <span>Bắt đầu bài học</span>
          <i class="fas fa-arrow-down animate-bounce"></i>
        </a>
      </section>

      <!-- ================= I. ĐẠI CƯƠNG VỀ POLYMER ================= -->
      <section id="overview" class="scroll-mt-28">
        <div class="flex items-center gap-4 mb-8">
          <div
            class="p-3 bg-blue-100 dark:bg-blue-900/50 rounded-xl text-blue-600 dark:text-blue-400"
          >
            <i class="fas fa-cubes text-2xl"></i>
          </div>
          <h2 class="text-3xl font-display font-bold">
            I. Đại cương về Polymer
          </h2>
        </div>

        <!-- Theory Cards -->
        <div class="grid grid-cols-1 lg:grid-cols-2 gap-8 mb-8">
          <div class="glass-card rounded-2xl p-6 lg:p-8">
            <h3
              class="text-xl font-bold mb-4 flex items-center gap-2 text-blue-600"
            >
              <i class="fas fa-book"></i> Lý thuyết trọng tâm
            </h3>
            <ul
              class="space-y-4 text-slate-700 dark:text-slate-300 text-sm leading-relaxed"
            >
              <li>
                <strong class="text-indigo-600 dark:text-indigo-400"
                  >Định nghĩa:</strong
                >
                Polymer là hợp chất có khối lượng phân tử rất lớn, gồm nhiều đơn
                vị nhỏ (mắt xích) liên kết với nhau. <br />
                <span class="text-xs text-slate-500"
                  >M = n * Mmắt xích (n: hệ số polymer hóa)</span
                >
              </li>
              <li>
                <strong class="text-indigo-600 dark:text-indigo-400"
                  >Phân loại theo nguồn gốc:</strong
                >
                <ul
                  class="list-disc ml-5 mt-1 text-xs text-slate-500 dark:text-slate-400"
                >
                  <li>Thiên nhiên: Tinh bột, Cellulose, Cao su thiên nhiên.</li>
                  <li>Tổng hợp: PE, PVC, Nylon-6,6.</li>
                  <li>Bán tổng hợp (Nhân tạo): Tơ visco, Tơ acetate.</li>
                </ul>
              </li>
              <li>
                <strong class="text-indigo-600 dark:text-indigo-400"
                  >Cấu trúc mạch:</strong
                >
                <ul
                  class="list-disc ml-5 mt-1 text-xs text-slate-500 dark:text-slate-400"
                >
                  <li>Không nhánh: Amylose, PE.</li>
                  <li>Phân nhánh: Amylopectin, Glycogen.</li>
                  <li>Mạng lưới: Cao su lưu hóa, Nhựa Bakelite.</li>
                </ul>
              </li>
            </ul>
          </div>

          <!-- SIMULATION 1: Addition Polymerization -->
          <div
            class="glass-card rounded-2xl p-6 lg:p-8 relative overflow-hidden"
          >
            <div
              class="absolute inset-0 bg-gradient-to-br from-blue-50/50 to-indigo-50/50 dark:from-blue-900/10 dark:to-indigo-900/10"
            ></div>
            <div class="relative z-10">
              <h3
                class="text-xl font-bold mb-4 flex items-center justify-between"
              >
                <span
                  ><i class="fas fa-link"></i> Mô phỏng: Phản ứng Trùng
                  Hợp</span
                >
                <span
                  class="text-xs bg-green-100 text-green-700 px-2 py-1 rounded"
                  >PE (Polyethylene)</span
                >
              </h3>
              <p class="text-sm mb-4 text-slate-600 dark:text-slate-400">
                Quan sát liên kết đôi bị bẻ gãy và nối đuôi nhau tạo thành
                chuỗi.
              </p>

              <!-- Canvas for Animation -->
              <div
                class="h-48 bg-white dark:bg-slate-800 rounded-xl border border-slate-200 dark:border-slate-700 mb-4 relative overflow-hidden flex items-center justify-center"
                id="poly-add-container"
              >
                <div
                  id="monomers-group"
                  class="flex gap-4 items-center absolute transition-all duration-1000"
                >
                  <!-- Monomers inserted by JS -->
                </div>
                <div
                  id="polymer-chain-visual"
                  class="hidden w-full flex items-center justify-center"
                >
                  <svg width="100%" height="50" viewBox="0 0 300 50">
                    <path
                      d="M10,25 L290,25"
                      stroke="#3b82f6"
                      stroke-width="4"
                      fill="none"
                      class="polymer-chain"
                    />
                    <!-- Repeating Units -->
                    <circle cx="30" cy="25" r="5" fill="#3b82f6" />
                    <circle cx="50" cy="25" r="5" fill="#3b82f6" />
                    <circle cx="70" cy="25" r="5" fill="#3b82f6" />
                    <circle cx="90" cy="25" r="5" fill="#3b82f6" />
                    <text
                      x="150"
                      y="45"
                      font-size="10"
                      fill="currentColor"
                      text-anchor="middle"
                    >
                      Polyethylene (-CH₂-CH₂-)n
                    </text>
                  </svg>
                </div>
              </div>

              <div class="flex gap-3">
                <button
                  onclick="startPolymerization('add')"
                  class="px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white text-sm font-bold rounded-lg shadow-lg shadow-blue-500/30 transition-all active:scale-95"
                >
                  <i class="fas fa-play mr-2"></i> Kích hoạt (t°, p, xt)
                </button>
                <button
                  onclick="resetPolymerization('add')"
                  class="px-4 py-2 bg-slate-200 hover:bg-slate-300 dark:bg-slate-700 text-slate-700 dark:text-slate-300 text-sm font-bold rounded-lg transition-all"
                >
                  <i class="fas fa-redo"></i>
                </button>
              </div>
              <div class="mt-2 text-xs text-slate-500 italic">
                PT: nCH₂=CH₂ → (-CH₂-CH₂-)n
              </div>
            </div>
          </div>
        </div>

        <!-- SIMULATION 2: Condensation Polymerization -->
        <div class="glass-card rounded-2xl p-6 lg:p-8 mb-8">
          <h3
            class="text-xl font-bold mb-4 flex items-center gap-2 text-purple-600"
          >
            <i class="fas fa-water"></i> Mô phỏng: Phản ứng Trùng Ngưng
            (Nylon-6,6)
          </h3>
          <div class="grid grid-cols-1 md:grid-cols-2 gap-8 items-center">
            <div>
              <p class="text-sm mb-4 text-slate-600 dark:text-slate-400">
                Các monomer kết hợp với nhau đồng thời
                <span class="text-blue-500 font-bold">tách ra phân tử nhỏ</span>
                (thường là nước).
              </p>
              <div
                class="bg-purple-50 dark:bg-purple-900/20 p-4 rounded-xl border border-purple-100 dark:border-purple-800 mb-4"
              >
                <div
                  class="text-xs font-mono text-purple-700 dark:text-purple-300 break-all"
                >
                  nH₂N[CH₂]₆NH₂ + nHOOC[CH₂]₄COOH <br />
                  → (-HN[CH₂]₆NH-CO[CH₂]₄CO-)n + 2nH₂O
                </div>
              </div>
              <button
                onclick="startPolymerization('cond')"
                class="w-full px-4 py-3 bg-purple-600 hover:bg-purple-700 text-white text-sm font-bold rounded-lg shadow-lg shadow-purple-500/30 transition-all flex items-center justify-center gap-2"
              >
                <span>Tổng hợp Nylon-6,6</span>
                <i class="fas fa-flask"></i>
              </button>
            </div>

            <!-- Animation Container -->
            <div
              class="h-40 bg-white dark:bg-slate-800 rounded-xl border border-slate-200 dark:border-slate-700 relative flex items-center justify-center overflow-hidden"
              id="cond-anim-area"
            >
              <!-- Initial State -->
              <div
                id="cond-initial"
                class="flex items-center gap-8 transition-all duration-700"
              >
                <div class="flex flex-col items-center">
                  <div
                    class="w-12 h-12 bg-pink-400 rounded-lg flex items-center justify-center text-white font-bold text-xs shadow-md"
                  >
                    Acid
                  </div>
                  <span class="text-xs mt-1">-COOH</span>
                </div>
                <div class="text-slate-400">+</div>
                <div class="flex flex-col items-center">
                  <div
                    class="w-12 h-12 bg-indigo-400 rounded-lg flex items-center justify-center text-white font-bold text-xs shadow-md"
                  >
                    Amine
                  </div>
                  <span class="text-xs mt-1">-NH₂</span>
                </div>
              </div>

              <!-- Water Drop (Hidden) -->
              <div
                id="water-molecule"
                class="absolute opacity-0 top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 bg-blue-400 w-6 h-6 rounded-full flex items-center justify-center text-[8px] text-white shadow-lg z-20"
              >
                H₂O
              </div>

              <!-- Final State (Hidden) -->
              <div id="cond-final" class="absolute opacity-0 flex items-center">
                <div
                  class="w-24 h-12 bg-gradient-to-r from-pink-400 to-indigo-400 rounded-lg flex items-center justify-center text-white font-bold text-xs shadow-md border-2 border-white dark:border-slate-600"
                >
                  Amide Bond
                </div>
              </div>
            </div>
          </div>
        </div>
      </section>

      <!-- ================= II. CÁC LOẠI VẬT LIỆU POLYMER ================= -->
      <section id="materials" class="scroll-mt-28">
        <div class="flex items-center gap-4 mb-8">
          <div
            class="p-3 bg-orange-100 dark:bg-orange-900/50 rounded-xl text-orange-600 dark:text-orange-400"
          >
            <i class="fas fa-shapes text-2xl"></i>
          </div>
          <h2 class="text-3xl font-display font-bold">
            II. Các loại Vật liệu Polymer
          </h2>
        </div>

        <!-- Material Tabs & Content -->
        <div class="glass-card rounded-2xl overflow-hidden mb-8">
          <div
            class="flex overflow-x-auto border-b border-slate-200 dark:border-slate-700"
          >
            <button
              class="px-6 py-4 font-bold text-sm bg-blue-50 dark:bg-blue-900/30 text-blue-600 border-b-2 border-blue-600 whitespace-nowrap"
            >
              Chất dẻo
            </button>
            <button
              class="px-6 py-4 font-bold text-sm text-slate-500 hover:text-slate-700 dark:hover:text-slate-300 whitespace-nowrap"
            >
              Tơ (Sợi)
            </button>
            <button
              class="px-6 py-4 font-bold text-sm text-slate-500 hover:text-slate-700 dark:hover:text-slate-300 whitespace-nowrap"
            >
              Cao su
            </button>
            <button
              class="px-6 py-4 font-bold text-sm text-slate-500 hover:text-slate-700 dark:hover:text-slate-300 whitespace-nowrap"
            >
              Composite
            </button>
          </div>
          <div class="p-6 lg:p-8">
            <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
              <div>
                <h3 class="text-lg font-bold mb-2">Chất dẻo & Mã tái chế</h3>
                <p class="text-sm text-slate-600 dark:text-slate-400 mb-4">
                  Chất dẻo có tính biến dạng khi chịu nhiệt/áp lực. Hãy phân
                  loại đúng mã tái chế để bảo vệ môi trường (3R).
                </p>

                <!-- Game: Recycling Sort -->
                <div
                  class="bg-slate-50 dark:bg-slate-800/50 p-4 rounded-xl border border-slate-200 dark:border-slate-700"
                >
                  <div class="flex justify-between items-center mb-3">
                    <span class="text-xs font-bold uppercase text-slate-500"
                      >Kéo mã vào đúng ô</span
                    >
                    <span
                      id="recycle-score"
                      class="text-xs font-bold text-green-500"
                      >0/4</span
                    >
                  </div>

                  <div class="grid grid-cols-2 gap-2 mb-4">
                    <div
                      class="drop-zone h-20 border-2 border-dashed border-slate-300 rounded-lg flex flex-col items-center justify-center text-xs text-center p-1"
                      data-id="1"
                    >
                      <i class="fas fa-wine-bottle mb-1 text-slate-400"></i>
                      Chai nước (PET)
                    </div>
                    <div
                      class="drop-zone h-20 border-2 border-dashed border-slate-300 rounded-lg flex flex-col items-center justify-center text-xs text-center p-1"
                      data-id="3"
                    >
                      <i class="fas fa-pipe-collar mb-1 text-slate-400"></i> Ống
                      nước (PVC)
                    </div>
                    <div
                      class="drop-zone h-20 border-2 border-dashed border-slate-300 rounded-lg flex flex-col items-center justify-center text-xs text-center p-1"
                      data-id="2"
                    >
                      <i class="fas fa-jug-detergent mb-1 text-slate-400"></i>
                      Bình gội đầu (HDPE)
                    </div>
                    <div
                      class="drop-zone h-20 border-2 border-dashed border-slate-300 rounded-lg flex flex-col items-center justify-center text-xs text-center p-1"
                      data-id="6"
                    >
                      <i class="fas fa-box-open mb-1 text-slate-400"></i> Hộp
                      xốp (PS)
                    </div>
                  </div>

                  <div class="flex gap-2 justify-center" id="recycle-items">
                    <div
                      class="draggable w-8 h-8 bg-white dark:bg-slate-700 rounded shadow flex items-center justify-center font-bold text-xs border cursor-grab"
                      draggable="true"
                      data-id="1"
                    >
                      1
                    </div>
                    <div
                      class="draggable w-8 h-8 bg-white dark:bg-slate-700 rounded shadow flex items-center justify-center font-bold text-xs border cursor-grab"
                      draggable="true"
                      data-id="3"
                    >
                      3
                    </div>
                    <div
                      class="draggable w-8 h-8 bg-white dark:bg-slate-700 rounded shadow flex items-center justify-center font-bold text-xs border cursor-grab"
                      draggable="true"
                      data-id="2"
                    >
                      2
                    </div>
                    <div
                      class="draggable w-8 h-8 bg-white dark:bg-slate-700 rounded shadow flex items-center justify-center font-bold text-xs border cursor-grab"
                      draggable="true"
                      data-id="6"
                    >
                      6
                    </div>
                  </div>
                </div>
              </div>

              <!-- SIMULATION 3: Vulcanization -->
              <div>
                <h3 class="text-lg font-bold mb-2 text-orange-600">
                  Cao su Lưu hóa
                </h3>
                <p class="text-sm text-slate-600 dark:text-slate-400 mb-4">
                  Thêm Lưu huỳnh (S) tạo cầu nối Disulfide (-S-S-) giúp cao su
                  bền và đàn hồi hơn.
                </p>

                <div
                  class="glass-card p-4 rounded-xl bg-orange-50/50 dark:bg-orange-900/10"
                >
                  <div
                    class="h-32 relative bg-white dark:bg-slate-800 rounded border border-slate-200 dark:border-slate-700 overflow-hidden mb-4"
                    id="rubber-view"
                  >
                    <!-- Rubber Chains -->
                    <svg width="100%" height="100%" viewBox="0 0 200 100">
                      <path
                        d="M10,20 Q50,0 90,20 T170,20"
                        fill="none"
                        stroke="#94a3b8"
                        stroke-width="3"
                      />
                      <path
                        d="M10,50 Q50,30 90,50 T170,50"
                        fill="none"
                        stroke="#94a3b8"
                        stroke-width="3"
                      />
                      <path
                        d="M10,80 Q50,60 90,80 T170,80"
                        fill="none"
                        stroke="#94a3b8"
                        stroke-width="3"
                      />

                      <!-- Sulfur Bridges (Hidden initially) -->
                      <line
                        x1="90"
                        y1="20"
                        x2="90"
                        y2="50"
                        stroke="#f59e0b"
                        stroke-width="4"
                        stroke-dasharray="2"
                        class="sulfur-bridge opacity-0 transition-opacity duration-500"
                      />
                      <line
                        x1="50"
                        y1="50"
                        x2="50"
                        y2="80"
                        stroke="#f59e0b"
                        stroke-width="4"
                        stroke-dasharray="2"
                        class="sulfur-bridge opacity-0 transition-opacity duration-500"
                      />
                      <text
                        x="100"
                        y="40"
                        font-size="8"
                        fill="#f59e0b"
                        class="sulfur-bridge opacity-0"
                      >
                        -S-S-
                      </text>
                    </svg>
                  </div>

                  <div class="flex items-center gap-3">
                    <span class="text-xs font-bold">Lượng S:</span>
                    <input
                      type="range"
                      min="0"
                      max="100"
                      value="0"
                      class="flex-1 h-2 bg-slate-200 rounded-lg appearance-none cursor-pointer accent-orange-500"
                      oninput="updateVulcanization(this.value)"
                    />
                    <span
                      id="elasticity-val"
                      class="text-xs font-bold text-orange-600 w-12 text-right"
                      >0%</span
                    >
                  </div>
                  <div
                    class="mt-2 text-xs text-slate-500 text-center"
                    id="rubber-status"
                  >
                    Trạng thái: Cao su thường (Kém đàn hồi)
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </section>

      <!-- ================= III. THÍ NGHIỆM ẢO (LAB) ================= -->
      <section id="lab" class="scroll-mt-28">
        <div class="flex items-center gap-4 mb-8">
          <div
            class="p-3 bg-red-100 dark:bg-red-900/50 rounded-xl text-red-600 dark:text-red-400"
          >
            <i class="fas fa-fire-burner text-2xl"></i>
          </div>
          <h2 class="text-3xl font-display font-bold">
            III. Thí nghiệm: Nhận biết Polymer
          </h2>
        </div>

        <div
          class="glass-card rounded-2xl p-6 lg:p-8 border-t-4 border-red-500"
        >
          <div class="flex flex-col md:flex-row gap-8">
            <!-- Control Panel -->
            <div class="md:w-1/3 space-y-4">
              <h3 class="text-xl font-bold mb-2">Đốt cháy vật liệu</h3>
              <p class="text-sm text-slate-600 dark:text-slate-400 mb-4">
                Kéo từng mẫu vật liệu vào ngọn lửa để quan sát hiện tượng cháy,
                màu khói và mùi đặc trưng.
              </p>

              <div class="grid grid-cols-2 gap-3" id="lab-samples">
                <div
                  class="sample-item p-3 bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-lg cursor-grab active:cursor-grabbing hover:shadow-md transition text-center"
                  draggable="true"
                  data-material="cotton"
                >
                  <i class="fas fa-tshirt text-slate-400 mb-1 block"></i>
                  <span class="text-xs font-bold">Sợi Bông</span>
                </div>
                <div
                  class="sample-item p-3 bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-lg cursor-grab active:cursor-grabbing hover:shadow-md transition text-center"
                  draggable="true"
                  data-material="wool"
                >
                  <i class="fas fa-mitten text-slate-400 mb-1 block"></i>
                  <span class="text-xs font-bold">Sợi Len</span>
                </div>
                <div
                  class="sample-item p-3 bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-lg cursor-grab active:cursor-grabbing hover:shadow-md transition text-center"
                  draggable="true"
                  data-material="pvc"
                >
                  <i class="fas fa-ruler text-slate-400 mb-1 block"></i>
                  <span class="text-xs font-bold">Nhựa PVC</span>
                </div>
                <div
                  class="sample-item p-3 bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-lg cursor-grab active:cursor-grabbing hover:shadow-md transition text-center"
                  draggable="true"
                  data-material="pe"
                >
                  <i class="fas fa-bag-shopping text-slate-400 mb-1 block"></i>
                  <span class="text-xs font-bold">Túi PE</span>
                </div>
              </div>

              <div
                id="lab-result-box"
                class="hidden p-4 bg-slate-100 dark:bg-slate-800 rounded-lg border-l-4 border-yellow-500"
              >
                <h4 class="font-bold text-sm mb-1" id="result-title">
                  Kết quả
                </h4>
                <p
                  class="text-xs text-slate-600 dark:text-slate-300"
                  id="result-desc"
                ></p>
              </div>
            </div>

            <!-- Visual Area -->
            <div
              class="md:w-2/3 bg-slate-900 rounded-2xl relative h-64 flex items-end justify-center overflow-hidden border border-slate-700"
              id="lab-zone"
            >
              <!-- Bunsen Burner -->
              <div class="absolute bottom-0 flex flex-col items-center">
                <!-- Flame -->
                <div class="flame-container mb-1">
                  <div class="flame"></div>
                  <div
                    class="flame"
                    style="
                      width: 20px;
                      height: 35px;
                      background: #fff;
                      opacity: 0.5;
                      animation-delay: 0.05s;
                    "
                  ></div>
                </div>
                <!-- Burner Base -->
                <div class="w-4 h-12 bg-slate-600"></div>
                <div class="w-16 h-4 bg-slate-500 rounded-t"></div>
              </div>

              <!-- Smoke Effect (Hidden) -->
              <div
                id="smoke-effect"
                class="absolute bottom-20 left-1/2 -translate-x-1/2 w-20 h-40 pointer-events-none hidden transition-opacity duration-1000 opacity-0"
              >
                <!-- JS generates smoke particles here -->
              </div>

              <div class="absolute top-4 right-4 text-xs text-slate-500">
                Kéo vật liệu vào ngọn lửa
              </div>
            </div>
          </div>
        </div>
      </section>

      <!-- ================= IV. BÀI TẬP CỦNG CỐ ================= -->
      <section id="quiz" class="scroll-mt-28">
        <div class="flex items-center gap-4 mb-8">
          <div
            class="p-3 bg-purple-100 dark:bg-purple-900/50 rounded-xl text-purple-600 dark:text-purple-400"
          >
            <i class="fas fa-clipboard-check text-2xl"></i>
          </div>
          <h2 class="text-3xl font-display font-bold">IV. Bài tập Củng cố</h2>
        </div>

        <div
          class="glass-card rounded-2xl p-6 lg:p-10 max-w-3xl mx-auto shadow-2xl relative"
        >
          <div class="absolute top-0 left-0 w-full h-1 bg-slate-200">
            <div
              class="h-full bg-gradient-to-r from-blue-500 to-purple-500 transition-all duration-300"
              style="width: 0%"
              id="quiz-progress-bar"
            ></div>
          </div>

          <!-- Quiz Interface -->
          <div id="quiz-ui">
            <div class="mb-6 flex justify-between items-end">
              <span
                class="text-sm font-bold text-slate-500 uppercase tracking-wider"
                id="question-counter"
                >Câu hỏi 1/5</span
              >
              <span
                class="text-xs bg-purple-100 text-purple-600 px-2 py-1 rounded"
                id="question-type"
                >Nhận biết</span
              >
            </div>

            <h3
              class="text-xl md:text-2xl font-bold mb-6"
              id="question-content"
            >
              ...
            </h3>

            <div class="space-y-3" id="answers-area">
              <!-- Buttons generated by JS -->
            </div>

            <div
              id="feedback-area"
              class="mt-6 hidden p-4 rounded-xl text-sm animate-pulse-slow"
            >
              <!-- Feedback text -->
            </div>

            <div class="mt-6 flex justify-end">
              <button
                id="next-q-btn"
                class="hidden px-6 py-3 bg-blue-600 hover:bg-blue-700 text-white font-bold rounded-full transition shadow-lg shadow-blue-500/30"
              >
                Câu tiếp theo <i class="fas fa-arrow-right ml-2"></i>
              </button>
            </div>
          </div>

          <!-- Result Interface (Hidden) -->
          <div id="result-ui" class="hidden text-center py-10">
            <div
              class="w-24 h-24 bg-green-100 dark:bg-green-900/30 text-green-500 rounded-full flex items-center justify-center mx-auto mb-6 text-5xl shadow-lg"
            >
              <i class="fas fa-medal"></i>
            </div>
            <h2 class="text-3xl font-bold mb-2 text-slate-800 dark:text-white">
              Hoàn thành xuất sắc!
            </h2>
            <p class="text-slate-600 dark:text-slate-400 mb-8">
              Bạn đã hiểu rõ về thế giới Polymer.
            </p>
            <div class="inline-flex gap-4">
              <button
                onclick="resetQuiz()"
                class="px-6 py-3 bg-slate-200 dark:bg-slate-700 text-slate-800 dark:text-white font-bold rounded-full hover:bg-slate-300 dark:hover:bg-slate-600 transition"
              >
                Làm lại
              </button>
            </div>
          </div>
        </div>
      </section>

      <!-- ================= NAVIGATION BUTTONS ================= -->
      <section class="text-center space-x-4 mb-20">
        <button
          onclick="window.location.href = 'bai_tap.html'"
          style="
            display: inline-flex;
            align-items: center;
            gap: 10px;
            padding: 14px 30px;
            font-size: 1rem;
            font-weight: 600;
            border-radius: 999px;
            border: none;
            cursor: pointer;
            color: #fff;
            background: linear-gradient(135deg, #3b82f6, #6366f1);
            box-shadow: 0 10px 30px rgba(59, 130, 246, 0.35);
            transition: 0.3s ease;
          "
          onmouseover="
            this.style.transform = 'translateY(-3px) scale(1.03)';
            this.style.boxShadow = '0 18px 45px rgba(99,102,241,.55)';
          "
          onmouseout="
            this.style.transform = 'translateY(0) scale(1)';
            this.style.boxShadow = '0 10px 30px rgba(59,130,246,.35)';
          "
        >
          <i class="fas fa-pen-to-square"></i>
          Bài tập củng cố
        </button>

        <button
          onclick="window.location.href = '../chemstudyteen.html'"
          style="
            display: inline-flex;
            align-items: center;
            gap: 10px;
            padding: 14px 30px;
            font-size: 1rem;
            font-weight: 600;
            border-radius: 999px;
            border: none;
            cursor: pointer;
            color: #fff;
            background: linear-gradient(135deg, #22c55e, #16a34a);
            box-shadow: 0 10px 30px rgba(34, 197, 94, 0.35);
            transition: 0.3s ease;
          "
          onmouseover="
            this.style.transform = 'translateY(-3px)';
            this.style.boxShadow = '0 18px 45px rgba(22,163,74,.55)';
          "
          onmouseout="
            this.style.transform = 'translateY(0)';
            this.style.boxShadow = '0 10px 30px rgba(34,197,94,.35)';
          "
        >
          <i class="fas fa-arrow-left"></i>
          Quay về CS Expert
        </button>
      </section>
    </main>

    <!-- ================= FOOTER ================= -->
    <footer>
      <div class="footer-waves"></div>
      <div class="footer-grid">
        <div class="footer-brand" data-aos="fade-right">
          <h2>EDUMATTER</h2>
          <p style="color: #94a3b8; line-height: 1.8">
            Kiến tạo môi trường học tập cảm xúc, nơi tri thức được số hóa và
            truyền tải đầy cảm hứng.
          </p>
          <div style="display: flex; gap: 15px; margin-top: 30px">
            <a href="https://www.facebook.com/ducnt214" class="icon-btn"
              ><i class="fab fa-facebook" alt="facebook"></i
            ></a>
            <a href="https://github.com/ducnt2104" class="icon-btn" alt="github"
              ><i class="fab fa-github"></i
            ></a>
            <a
              href="https://www.tiktok.com/@ktbtcthm210"
              class="icon-btn"
              alt="tiktok"
              ><i class="fab fa-tiktok"></i
            ></a>
          </div>
        </div>
        <div class="footer-links" data-aos="fade-up">
          <h3>Liên hệ nhanh</h3>
          <div class="contact-item">
            <i class="fas fa-envelope"></i>
            <span>ducnt21042010@gmail.com</span>
          </div>
          <div class="contact-item">
            <i class="fas fa-phone"></i>
            <span>034 226 6204</span>
          </div>
          <div class="contact-item">
            <i class="fas fa-location-dot"></i>
            <span>THPT Tôn Đức Thắng, Đồng Nai</span>
          </div>
        </div>
        <div class="footer-links" data-aos="fade-left">
          <h4>Đội ngũ DNT</h4>
          <p style="color: #94a3b8">
            "Sáng tạo không ngừng - Vươn tầm tri thức"
          </p>
          <div
            style="
              margin-top: 20px;
              padding: 15px;
              background: rgba(255, 255, 255, 0.05);
              border-radius: 15px;
            "
          >
            <p style="font-size: 0.8rem; color: #fff">
              Dự án được phát triển bởi các thành viên đam mê công nghệ tại Việt
              Nam.
            </p>
          </div>
        </div>
      </div>
      <div class="copyright">
        <p>
          © 2024 EDUMATTER Educational Ecosystem. Designed with
          <i class="fas fa-heart" style="color: #ef4444"></i> by DNT Team.
        </p>
      </div>
    </footer>

    <!-- ================= JAVASCRIPT LOGIC ================= -->
    <script>
      // --- 1. CONFIG & UTILS ---
      const html = document.documentElement;
      const toggleBtn = document.getElementById("theme-toggle");

      // Theme Logic
      if (
        localStorage.getItem("theme") === "dark" ||
        (!localStorage.getItem("theme") &&
          window.matchMedia("(prefers-color-scheme: dark)").matches)
      ) {
        html.classList.add("dark");
      }

      toggleBtn.addEventListener("click", () => {
        html.classList.toggle("dark");
        localStorage.setItem(
          "theme",
          html.classList.contains("dark") ? "dark" : "light",
        );
      });

      // --- 2. POLYMERIZATION SIMULATIONS ---

      // A. Addition (Trùng hợp)
      function startPolymerization(type) {
        if (type === "add") {
          const container = document.getElementById("monomers-group");
          const chainVisual = document.getElementById("polymer-chain-visual");
          container.innerHTML = "";
          container.classList.remove("opacity-0");
          chainVisual.classList.add("hidden");

          // Create 4 monomers
          for (let i = 0; i < 4; i++) {
            const m = document.createElement("div");
            m.className =
              "monomer w-16 h-16 rounded-full border-4 border-blue-500 flex items-center justify-center font-bold text-xs bg-white dark:bg-slate-800 shadow-lg";
            m.innerHTML = "C=C";
            container.appendChild(m);
          }

          // Animation Sequence
          setTimeout(() => {
            // 1. Break Bonds
            Array.from(container.children).forEach((m) => {
              m.innerHTML = "•C-C•"; // Radical
              m.classList.add("bg-yellow-100", "text-yellow-700");
            });

            setTimeout(() => {
              // 2. Combine
              container.classList.add("opacity-0"); // Fade out monomers
              setTimeout(() => {
                container.innerHTML = ""; // Clear
                chainVisual.classList.remove("hidden"); // Show chain SVG
              }, 500);
            }, 1500);
          }, 1000);
        }
        // B. Condensation (Trùng ngưng)
        else if (type === "cond") {
          const init = document.getElementById("cond-initial");
          const water = document.getElementById("water-molecule");
          const final = document.getElementById("cond-final");

          // Reset
          init.style.opacity = "1";
          init.classList.remove("scale-90");
          water.style.opacity = "0";
          water.style.top = "50%";
          final.style.opacity = "0";

          // Step 1: Approach
          init.classList.add("scale-90"); // Squeeze together

          setTimeout(() => {
            // Step 2: Water Release
            water.style.opacity = "1";
            water.style.top = "10%"; // Float up

            setTimeout(() => {
              // Step 3: Link
              init.style.opacity = "0";
              final.style.opacity = "1";
            }, 800);
          }, 1000);
        }
      }

      function resetPolymerization(type) {
        if (type === "add") {
          document
            .getElementById("monomers-group")
            .classList.remove("opacity-0");
          document.getElementById("monomers-group").innerHTML =
            '<div class="text-sm text-slate-500">Sẵn sàng...</div>';
          document
            .getElementById("polymer-chain-visual")
            .classList.add("hidden");
        }
      }

      // --- 3. RECYCLING GAME ---
      const draggables = document.querySelectorAll(".draggable");
      const dropZones = document.querySelectorAll(".drop-zone");
      let recycleScore = 0;

      draggables.forEach((d) => {
        d.addEventListener("dragstart", (e) => {
          e.dataTransfer.setData("text/plain", d.getAttribute("data-id"));
          d.classList.add("opacity-50");
        });
        d.addEventListener("dragend", () => {
          d.classList.remove("opacity-50");
        });
      });

      dropZones.forEach((zone) => {
        zone.addEventListener("dragover", (e) => {
          e.preventDefault();
          zone.classList.add("drag-over");
        });
        zone.addEventListener("dragleave", () => {
          zone.classList.remove("drag-over");
        });
        zone.addEventListener("drop", (e) => {
          e.preventDefault();
          zone.classList.remove("drag-over");
          const id = e.dataTransfer.getData("text/plain");
          const targetId = zone.getAttribute("data-id");

          if (id === targetId) {
            // Correct
            const item = document.querySelector(`.draggable[data-id="${id}"]`);
            item.draggable = false;
            item.classList.add("bg-green-500", "text-white");
            item.classList.remove(
              "bg-white",
              "dark:bg-slate-700",
              "cursor-grab",
            );
            zone.appendChild(item);
            recycleScore++;
            document.getElementById("recycle-score").innerText =
              `${recycleScore}/4`;
          }
        });
      });

      // --- 4. VULCANIZATION SIMULATION ---
      function updateVulcanization(val) {
        const bridges = document.querySelectorAll(".sulfur-bridge");
        const status = document.getElementById("rubber-status");
        const elasticity = document.getElementById("elasticity-val");

        // Show bridges based on value
        bridges.forEach((b) => {
          b.style.opacity = val > 20 ? val / 100 : 0;
        });

        elasticity.innerText = val + "%";

        if (val < 20) {
          status.innerText = "Cao su thường: Mềm, dễ dính, kém đàn hồi.";
          status.className = "mt-2 text-xs text-slate-500 text-center";
        } else if (val < 60) {
          status.innerText = "Cao su lưu hóa: Đàn hồi tốt, chịu nhiệt.";
          status.className =
            "mt-2 text-xs text-orange-600 font-bold text-center";
        } else {
          status.innerText = "Ebonit: Cứng, cách điện tốt (quá nhiều S).";
          status.className =
            "mt-2 text-xs text-slate-800 dark:text-slate-300 font-bold text-center";
        }
      }

      // --- 5. VIRTUAL LAB: BURNING TEST ---
      const labZone = document.getElementById("lab-zone");
      const smoke = document.getElementById("smoke-effect");
      const resultBox = document.getElementById("lab-result-box");
      const resultTitle = document.getElementById("result-title");
      const resultDesc = document.getElementById("result-desc");

      document.querySelectorAll(".sample-item").forEach((item) => {
        item.addEventListener("dragstart", (e) => {
          e.dataTransfer.setData(
            "material",
            item.getAttribute("data-material"),
          );
        });
      });

      labZone.addEventListener("dragover", (e) => e.preventDefault());
      labZone.addEventListener("drop", (e) => {
        e.preventDefault();
        const mat = e.dataTransfer.getData("material");
        runBurnTest(mat);
      });

      function runBurnTest(material) {
        // Reset
        smoke.classList.remove("hidden", "opacity-0");
        smoke.style.opacity = "1";
        resultBox.classList.remove("hidden");

        // Data
        const data = {
          cotton: {
            t: "Sợi Bông (Cellulose)",
            d: "Cháy nhanh, ngọn lửa sáng, tro xám trắng mịn, không mùi khét.",
            color: "rgba(200,200,200,0.5)",
          },
          wool: {
            t: "Sợi Len (Protein)",
            d: "Cháy chậm, xèo xèo, mùi khét như tóc cháy, tro đen xốp dễ bóp vụn.",
            color: "rgba(50,50,50,0.8)",
          },
          pvc: {
            t: "Nhựa PVC",
            d: "Cháy tạo khói đen đặc, có mùi sốc (HCl), để lại tro cứng.",
            color: "rgba(0,0,0,0.9)",
          },
          pe: {
            t: "Nhựa PE",
            d: "Cháy sáng, chảy thành giọt lỏng, mùi nến cháy, khi nguội đóng rắn.",
            color: "rgba(255,255,255,0.6)",
          },
        };

        const info = data[material];

        // Visuals
        smoke.style.background = `radial-gradient(circle, ${info.color} 0%, transparent 70%)`;
        smoke.style.filter = "blur(10px)";

        // Text
        resultTitle.innerText = info.t;
        resultDesc.innerText = info.d;

        // Animation reset
        setTimeout(() => {
          smoke.style.opacity = "0";
        }, 3000);
      }

      // --- 6. QUIZ LOGIC ---
      const questions = [
        {
          q: "Loại polymer nào sau đây được điều chế bằng phản ứng trùng ngưng?",
          a: ["PVC", "Cao su buna", "Polystyrene (PS)", "Nylon-6,6"],
          correct: 3,
          type: "Nhận biết",
          expl: "Nylon-6,6 được điều chế từ Hexamethylenediamine và Adipic acid (tách nước).",
        },
        {
          q: "Cao su buna được điều chế từ monomer nào?",
          a: ["Buta-1,3-diene", "Isoprene", "Styrene", "Vinyl chloride"],
          correct: 0,
          type: "Nhận biết",
          expl: "Trùng hợp Buta-1,3-diene (xúc tác Na) thu được cao su Buna.",
        },
        {
          q: "Tại sao không nên dùng xà phòng có độ kiềm cao để giặt vải lụa, len?",
          a: [
            "Làm phai màu vải",
            "Gây thủy phân liên kết amide (-CO-NH-) làm hỏng vải",
            "Làm vải bị co rút",
            "Không ảnh hưởng gì",
          ],
          correct: 1,
          type: "Vận dụng",
          expl: "Len, lụa là protein (polyamide thiên nhiên), dễ bị thủy phân trong môi trường kiềm.",
        },
        {
          q: "Polymer nào sau đây là chất dẻo nhiệt rắn?",
          a: [
            "Polyethylene (PE)",
            "Nhựa Bakelite (PPF)",
            "Poly(vinyl chloride)",
            "Polystyrene",
          ],
          correct: 1,
          type: "Thông hiểu",
          expl: "Nhựa Bakelite có cấu trúc mạng lưới không gian, không nóng chảy mà bị phân hủy nhiệt.",
        },
        {
          q: "Mã tái chế số 1 (PET) thường dùng cho vật dụng nào?",
          a: [
            "Ống nước",
            "Hộp xốp đựng thức ăn",
            "Chai đựng nước ngọt, nước khoáng",
            "Túi nilon đi chợ",
          ],
          correct: 2,
          type: "Thực tế",
          expl: "PET (Polyethylene Terephthalate) trong suốt, bền cơ học, dùng làm chai lọ đồ uống.",
        },
      ];

      let currentQ = 0;
      let score = 0;

      function loadQuiz() {
        const q = questions[currentQ];
        document.getElementById("question-counter").innerText =
          `Câu hỏi ${currentQ + 1}/${questions.length}`;
        document.getElementById("question-type").innerText = q.type;
        document.getElementById("question-content").innerText = q.q;

        const area = document.getElementById("answers-area");
        area.innerHTML = "";

        q.a.forEach((opt, idx) => {
          const btn = document.createElement("button");
          btn.className =
            "w-full text-left p-4 rounded-xl bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 hover:bg-blue-50 dark:hover:bg-slate-700 transition flex items-center gap-3 group";
          btn.innerHTML = `
                    <div class="w-6 h-6 rounded-full border-2 border-slate-300 flex items-center justify-center group-hover:border-blue-500 transition">
                        <div class="w-3 h-3 bg-blue-500 rounded-full opacity-0 transition"></div>
                    </div>
                    <span class="font-medium">${opt}</span>
                `;
          btn.onclick = () => checkAnswer(idx, btn);
          area.appendChild(btn);
        });

        // Update bar
        document.getElementById("quiz-progress-bar").style.width =
          `${(currentQ / questions.length) * 100}%`;
      }

      function checkAnswer(idx, btn) {
        const q = questions[currentQ];
        const allBtns = document.getElementById("answers-area").children;
        const feedback = document.getElementById("feedback-area");
        const nextBtn = document.getElementById("next-q-btn");

        // Disable clicks
        for (let b of allBtns) b.disabled = true;

        if (idx === q.correct) {
          score++;
          btn.classList.add(
            "bg-green-100",
            "border-green-500",
            "dark:bg-green-900",
          );
          feedback.innerHTML = `<span class="text-green-600 font-bold"><i class="fas fa-check"></i> Chính xác!</span> <span class="text-slate-600 dark:text-slate-300">${q.expl}</span>`;
          feedback.className =
            "mt-6 p-4 rounded-xl text-sm bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 block";
        } else {
          btn.classList.add("bg-red-100", "border-red-500", "dark:bg-red-900");
          allBtns[q.correct].classList.add(
            "bg-green-100",
            "border-green-500",
            "dark:bg-green-900",
          ); // Show correct
          feedback.innerHTML = `<span class="text-red-600 font-bold"><i class="fas fa-times"></i> Sai rồi!</span> <span class="text-slate-600 dark:text-slate-300">${q.expl}</span>`;
          feedback.className =
            "mt-6 p-4 rounded-xl text-sm bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 block";
        }

        nextBtn.classList.remove("hidden");
        nextBtn.onclick = nextQuestion;
      }

      function nextQuestion() {
        currentQ++;
        document.getElementById("feedback-area").classList.add("hidden");
        document.getElementById("next-q-btn").classList.add("hidden");

        if (currentQ < questions.length) {
          loadQuiz();
        } else {
          showResult();
        }
      }

      function showResult() {
        document.getElementById("quiz-ui").classList.add("hidden");
        document.getElementById("result-ui").classList.remove("hidden");
        document.getElementById("quiz-progress-bar").style.width = "100%";
      }

      function resetQuiz() {
        currentQ = 0;
        score = 0;
        document.getElementById("result-ui").classList.add("hidden");
        document.getElementById("quiz-ui").classList.remove("hidden");
        loadQuiz();
      }

      // Init Quiz
      loadQuiz();
    </script>
  </body>
</html>
