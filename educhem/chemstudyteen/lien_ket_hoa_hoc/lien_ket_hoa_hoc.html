<!DOCTYPE html>
<html lang="vi">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>H√≥a H·ªçc 10 - Ch∆∞∆°ng 3: Li√™n K·∫øt H√≥a H·ªçc</title>
    <link rel="icon" href="../../../favicon/educhem.svg" type="image/svg+xml" />

    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>

    <!-- Fonts & Icons -->
    <link
      href="https://fonts.googleapis.com/css2?family=Nunito:wght@400;600;700;800&display=swap"
      rel="stylesheet"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
    />

    <!-- Three.js (Cho m√¥ ph·ªèng tinh th·ªÉ) -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/controls/OrbitControls.js"></script>

    <!-- Chart.js (Cho bi·ªÉu ƒë·ªì nhi·ªát ƒë·ªô s√¥i) -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

    <!-- MathJax -->
    <script>
      MathJax = {
        tex: {
          inlineMath: [
            ["$", "$"],
            ["\\(", "\\)"],
          ],
        },
      };
    </script>
    <script
      id="MathJax-script"
      async
      src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"
    ></script>

    <script>
      tailwind.config = {
        darkMode: "class",
        theme: {
          extend: {
            colors: {
              primary: "#4f46e5",
              secondary: "#06b6d4",
              dark: "#0f172a",
              card: "#1e293b",
            },
            fontFamily: {
              sans: ["Nunito", "sans-serif"],
            },
          },
        },
      };
    </script>

    <style>
      /* Custom Animations & Styles */
      body {
        transition: background-color 0.3s, color 0.3s;
      }
      .sim-container {
        position: relative;
        overflow: hidden;
        border-radius: 1rem;
        background: #f1f5f9;
        transition: background 0.3s;
        border: 1px solid #e2e8f0;
      }
      .dark .sim-container {
        background: #0f172a;
        border: 1px solid #334155;
      }
      .electron-orbit {
        fill: none;
        stroke: #94a3b8;
        stroke-dasharray: 4;
        opacity: 0.5;
      }
      .atom-core {
        transition: all 0.5s ease;
      }
      .electron-dot {
        transition: all 0.5s ease;
      }

      /* Range Slider Styling */
      input[type="range"] {
        -webkit-appearance: none;
        width: 100%;
        background: transparent;
      }
      input[type="range"]::-webkit-slider-thumb {
        -webkit-appearance: none;
        height: 20px;
        width: 20px;
        border-radius: 50%;
        background: #4f46e5;
        cursor: pointer;
        margin-top: -8px;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
      }
      input[type="range"]::-webkit-slider-runnable-track {
        width: 100%;
        height: 4px;
        cursor: pointer;
        background: #cbd5e1;
        border-radius: 2px;
      }
      .dark input[type="range"]::-webkit-slider-thumb {
        background: #06b6d4;
      }
      .dark input[type="range"]::-webkit-slider-runnable-track {
        background: #475569;
      }

      /* Water Molecule Animation */
      @keyframes float {
        0% {
          transform: translateY(0px) rotate(0deg);
        }
        50% {
          transform: translateY(-10px) rotate(5deg);
        }
        100% {
          transform: translateY(0px) rotate(0deg);
        }
      }
      .water-molecule {
        animation: float 4s ease-in-out infinite;
      }

      /* Card Hover Effect */
      .hover-card {
        transition: transform 0.2s, box-shadow 0.2s;
      }
      .hover-card:hover {
        transform: translateY(-2px);
        box-shadow: 0 10px 20px -5px rgba(0, 0, 0, 0.1);
      }

      /* Tag Styles */
      .tag-basic {
        background-color: #dbeafe;
        color: #1e40af;
        padding: 2px 8px;
        border-radius: 4px;
        font-size: 0.75rem;
        font-weight: 700;
        text-transform: uppercase;
      }
      .dark .tag-basic {
        background-color: #1e3a8a;
        color: #bfdbfe;
      }
      .tag-deep {
        background-color: #fce7f3;
        color: #9d174d;
        padding: 2px 8px;
        border-radius: 4px;
        font-size: 0.75rem;
        font-weight: 700;
        text-transform: uppercase;
      }
      .dark .tag-deep {
        background-color: #831843;
        color: #fbcfe8;
      }
    </style>
  </head>
  <body class="bg-gray-50 text-gray-800 dark:bg-gray-900 dark:text-gray-100">
    <!-- HEADER -->
    <header
      class="fixed w-full top-0 z-50 bg-white/90 dark:bg-gray-800/90 backdrop-blur shadow-md transition-colors duration-300"
    >
      <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
        <div class="flex justify-between items-center h-16">
          <!-- Back Button & Logo -->
          <div class="flex items-center gap-4">
            <a
              href="../chemstudyteen.html"
              class="p-2 rounded-full hover:bg-gray-100 dark:hover:bg-gray-700 transition"
              title="Quay l·∫°i"
            >
              <i
                class="fas fa-arrow-left text-xl text-primary dark:text-secondary"
              ></i>
            </a>
            <div class="flex flex-col">
              <h1
                class="font-extrabold text-lg sm:text-2xl bg-clip-text text-transparent bg-gradient-to-r from-primary to-purple-600 dark:from-secondary dark:to-blue-500 truncate"
              >
                ChemStudy Teen: H√≥a H·ªçc - Ch·ªß ƒë·ªÅ: Li√™n K·∫øt H√≥a H·ªçc
              </h1>
            </div>
          </div>

          <!-- Controls -->
          <div class="flex items-center gap-3">
            <button
              onclick="toggleTheme()"
              class="p-2 rounded-full hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-600 dark:text-gray-300 transition focus:outline-none"
            >
              <i class="fas fa-moon dark:hidden"></i>
              <i class="fas fa-sun hidden dark:block text-yellow-400"></i>
            </button>
          </div>
        </div>
      </div>
    </header>

    <!-- NAVIGATION TABS -->
    <nav
      class="fixed top-16 w-full z-40 bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700 shadow-sm overflow-x-auto"
    >
      <div class="max-w-7xl mx-auto px-4 flex space-x-8 min-w-max">
        <button
          onclick="scrollToSection('octet')"
          class="nav-btn py-4 px-1 border-b-2 border-transparent font-medium text-sm hover:text-primary dark:hover:text-secondary whitespace-nowrap active-nav"
        >
          I. Quy T·∫Øc Octet
        </button>
        <button
          onclick="scrollToSection('ion')"
          class="nav-btn py-4 px-1 border-b-2 border-transparent font-medium text-sm hover:text-primary dark:hover:text-secondary whitespace-nowrap"
        >
          II. Li√™n K·∫øt Ion
        </button>
        <button
          onclick="scrollToSection('covalent')"
          class="nav-btn py-4 px-1 border-b-2 border-transparent font-medium text-sm hover:text-primary dark:hover:text-secondary whitespace-nowrap"
        >
          III. C·ªông H√≥a Tr·ªã
        </button>
        <button
          onclick="scrollToSection('weak')"
          class="nav-btn py-4 px-1 border-b-2 border-transparent font-medium text-sm hover:text-primary dark:hover:text-secondary whitespace-nowrap"
        >
          IV. Li√™n K·∫øt Y·∫øu
        </button>
      </div>
    </nav>

    <!-- MAIN CONTENT -->
    <main class="max-w-6xl mx-auto px-4 pt-36 pb-12 space-y-24">
      <!-- SECTION I: OCTET -->
      <section id="octet" class="scroll-mt-40">
        <div class="flex items-center gap-3 mb-6">
          <div
            class="w-10 h-10 rounded-lg bg-green-500 text-white flex items-center justify-center text-xl font-bold"
          >
            I
          </div>
          <h2 class="text-3xl font-bold text-gray-900 dark:text-white">
            Quy T·∫Øc Octet
          </h2>
        </div>

        <div class="grid lg:grid-cols-2 gap-8">
          <!-- Theory Content -->
          <div class="space-y-6">
            <div
              class="bg-white dark:bg-gray-800 p-6 rounded-2xl shadow-lg border border-gray-100 dark:border-gray-700"
            >
              <span class="tag-basic mb-2 inline-block">C∆° b·∫£n</span>
              <h3 class="text-xl font-bold text-gray-800 dark:text-white mb-2">
                1. Li√™n k·∫øt h√≥a h·ªçc
              </h3>
              <p class="text-gray-600 dark:text-gray-300">
                Li√™n k·∫øt ho√° h·ªçc l√† l·ª±c h√∫t gi·ªØa c√°c nguy√™n t·ª≠ ‚Üí gi√∫p t·∫°o th√†nh
                ph√¢n t·ª≠ hay tinh th·ªÉ b·ªÅn v·ªØng.
              </p>
              <p class="text-gray-600 dark:text-gray-300 mt-2">
                Nguy√™n t·ª≠ li√™n k·∫øt v√¨ t·ª± th√¢n n√≥ kh√¥ng b·ªÅn, c·∫ßn ƒë·∫°t c·∫•u h√¨nh b·ªÅn
                nh∆∞ kh√≠ hi·∫øm.
              </p>

              <div
                class="mt-4 pt-4 border-t border-gray-100 dark:border-gray-700"
              >
                <span class="tag-deep mb-2 inline-block">S√¢u</span>
                <p class="text-sm text-gray-500 dark:text-gray-400">
                  T√≠nh b·ªÅn c·ªßa kh√≠ hi·∫øm ƒë·∫øn t·ª´: 8 electron l·ªõp ngo√†i c√πng (tr·ª´
                  He ‚Äì 2e) ‚Üí tr·∫°ng th√°i nƒÉng l∆∞·ª£ng th·∫•p.
                </p>
              </div>
            </div>

            <div
              class="bg-white dark:bg-gray-800 p-6 rounded-2xl shadow-lg border border-gray-100 dark:border-gray-700"
            >
              <span class="tag-basic mb-2 inline-block">C∆° b·∫£n</span>
              <h3 class="text-xl font-bold text-gray-800 dark:text-white mb-2">
                2. Quy t·∫Øc Octet
              </h3>
              <p class="text-gray-600 dark:text-gray-300">
                Nguy√™n t·ª≠ c√≥ xu h∆∞·ªõng nh·∫≠n, nh∆∞·ªùng ho·∫∑c chia s·∫ª electron ƒë·ªÉ ƒë·∫°t
                <strong>8 electron</strong> ·ªü l·ªõp ngo√†i c√πng.
              </p>

              <div
                class="mt-4 pt-4 border-t border-gray-100 dark:border-gray-700"
              >
                <span class="tag-deep mb-2 inline-block">S√¢u</span>
                <p class="text-sm text-gray-500 dark:text-gray-400 mb-2">
                  Quy t·∫Øc n√†y kh√¥ng tuy·ªát ƒë·ªëi:
                </p>
                <ul
                  class="list-disc list-inside text-sm text-gray-500 dark:text-gray-400 space-y-1"
                >
                  <li><strong>Thi·∫øu Octet:</strong> $BeCl_2$, $BF_3$.</li>
                  <li>
                    <strong>M·ªü r·ªông Octet:</strong> $PCl_5$, $SF_6$ (c√≥ orbital
                    d tr·ªëng).
                  </li>
                  <li><strong>S·ªë l·∫ª e:</strong> $NO$, $NO_2$.</li>
                </ul>
                <p class="text-xs italic mt-2 text-gray-400">
                  B·∫£n ch·∫•t: b·ªÅn v·ªØng ƒë·∫°t ƒë∆∞·ª£c khi v√πng electron ho√° tr·ªã ·ªïn ƒë·ªãnh,
                  kh√¥ng ch·ªâ ‚Äúƒë√∫ng 8 e‚Äù.
                </p>
              </div>
            </div>
          </div>

          <!-- Simulations -->
          <div class="space-y-6">
            <!-- Sim 1: Complete Octet -->
            <div
              class="bg-white dark:bg-gray-800 p-6 rounded-2xl shadow-lg hover-card border border-gray-100 dark:border-gray-700"
            >
              <h3
                class="text-lg font-bold text-primary dark:text-secondary mb-3"
              >
                <i class="fas fa-gamepad mr-2"></i>M√¥ ph·ªèng 1: ƒê·∫°t c·∫•u h√¨nh b·ªÅn
                (Neon)
              </h3>
              <div
                class="sim-container h-48 flex flex-col items-center justify-center relative"
                id="octet-sim"
              >
                <svg width="180" height="180" viewBox="0 0 200 200">
                  <circle
                    cx="100"
                    cy="100"
                    r="25"
                    fill="#ef4444"
                    class="atom-core"
                  />
                  <text
                    x="100"
                    y="105"
                    text-anchor="middle"
                    fill="white"
                    font-size="14"
                    font-weight="bold"
                  >
                    O
                  </text>
                  <circle cx="100" cy="100" r="65" class="electron-orbit" />
                  <g id="valence-electrons">
                    <!-- Initial 6e -->
                  </g>
                </svg>
                <div
                  id="octet-status"
                  class="absolute top-2 right-2 text-xs font-bold px-2 py-1 rounded bg-gray-200 text-gray-600"
                >
                  6/8 e
                </div>
              </div>
              <div class="mt-3 flex gap-2 justify-center">
                <button
                  onclick="addElectron()"
                  class="px-3 py-1 bg-primary text-white rounded text-sm hover:bg-primary-dark transition shadow"
                >
                  + Th√™m e
                </button>
                <button
                  onclick="resetOctet()"
                  class="px-3 py-1 bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-white rounded text-sm hover:bg-gray-300 transition"
                >
                  Reset
                </button>
              </div>
            </div>

            <!-- Sim 2: Exceptions Visualization -->
            <div
              class="bg-white dark:bg-gray-800 p-6 rounded-2xl shadow-lg hover-card border border-gray-100 dark:border-gray-700"
            >
              <h3
                class="text-lg font-bold text-yellow-600 dark:text-yellow-400 mb-3"
              >
                <i class="fas fa-exclamation-triangle mr-2"></i>M√¥ ph·ªèng 2:
                Ngo·∫°i l·ªá Octet
              </h3>
              <div class="flex gap-2 mb-4">
                <button
                  onclick="showException('becl2')"
                  class="flex-1 py-1 text-xs bg-gray-100 dark:bg-gray-700 rounded hover:bg-gray-200 dark:hover:bg-gray-600"
                >
                  BeCl‚ÇÇ (Thi·∫øu)
                </button>
                <button
                  onclick="showException('pcl5')"
                  class="flex-1 py-1 text-xs bg-gray-100 dark:bg-gray-700 rounded hover:bg-gray-200 dark:hover:bg-gray-600"
                >
                  PCl‚ÇÖ (M·ªü r·ªông)
                </button>
              </div>
              <div
                class="sim-container h-40 flex items-center justify-center"
                id="exception-viz"
              >
                <!-- SVG injected by JS -->
              </div>
              <p
                id="exception-desc"
                class="text-xs text-center mt-2 text-gray-500 italic"
              >
                Ch·ªçn ph√¢n t·ª≠ ƒë·ªÉ xem c·∫•u tr√∫c e
              </p>
            </div>
          </div>
        </div>
      </section>

      <!-- SECTION II: IONIC BOND -->
      <section id="ion" class="scroll-mt-40">
        <div class="flex items-center gap-3 mb-6">
          <div
            class="w-10 h-10 rounded-lg bg-red-500 text-white flex items-center justify-center text-xl font-bold"
          >
            II
          </div>
          <h2 class="text-3xl font-bold text-gray-900 dark:text-white">
            Li√™n K·∫øt Ion
          </h2>
        </div>

        <div class="grid lg:grid-cols-2 gap-8">
          <!-- Theory -->
          <div class="space-y-6">
            <div
              class="bg-white dark:bg-gray-800 p-6 rounded-2xl shadow-lg border border-gray-100 dark:border-gray-700"
            >
              <span class="tag-basic mb-2 inline-block">C∆° b·∫£n</span>
              <h3 class="text-xl font-bold text-gray-800 dark:text-white mb-2">
                1. Ion v√† s·ª± h√¨nh th√†nh
              </h3>
              <ul
                class="list-disc list-inside text-gray-600 dark:text-gray-300 space-y-1"
              >
                <li>Kim lo·∫°i nh∆∞·ªùng e ‚Üí <strong>Cation (+)</strong></li>
                <li>Phi kim nh·∫≠n e ‚Üí <strong>Anion (-)</strong></li>
                <li>
                  L·ª±c h√∫t tƒ©nh ƒëi·ªán gi·ªØa ion tr√°i d·∫•u ‚Üí
                  <strong>Li√™n k·∫øt ion</strong>
                </li>
              </ul>
              <div
                class="bg-blue-50 dark:bg-blue-900/20 p-3 rounded-lg mt-3 font-mono text-sm"
              >
                <p>Na ‚Üí Na‚Å∫ + 1e</p>
                <p>Cl + 1e ‚Üí Cl‚Åª</p>
                <p class="font-bold text-blue-600 dark:text-blue-400">
                  Na‚Å∫ + Cl‚Åª ‚Üí NaCl
                </p>
              </div>

              <div
                class="mt-4 pt-4 border-t border-gray-100 dark:border-gray-700"
              >
                <span class="tag-deep mb-2 inline-block">S√¢u</span>
                <p class="text-sm text-gray-500 dark:text-gray-400">
                  Li√™n k·∫øt ion m·∫°nh hay y·∫øu ph·ª• thu·ªôc: (1) ƒëi·ªán t√≠ch ion, (2)
                  b√°n k√≠nh ion, (3) h·∫±ng s·ªë ƒëi·ªán m√¥i m√¥i tr∆∞·ªùng.
                </p>
              </div>
            </div>

            <div
              class="bg-white dark:bg-gray-800 p-6 rounded-2xl shadow-lg border border-gray-100 dark:border-gray-700"
            >
              <span class="tag-basic mb-2 inline-block">C∆° b·∫£n</span>
              <h3 class="text-xl font-bold text-gray-800 dark:text-white mb-2">
                2. Tinh th·ªÉ Ion
              </h3>
              <p class="text-gray-600 dark:text-gray-300">
                T·ªìn t·∫°i d·∫°ng m·∫°ng tinh th·ªÉ (kh√¥ng ph·∫£i ph√¢n t·ª≠ r·ªùi r·∫°c). Ion s·∫Øp
                x·∫øp t·ªëi ∆∞u ƒë·ªÉ h√∫t l·ªõn nh·∫•t, ƒë·∫©y nh·ªè nh·∫•t.
              </p>
              <div class="grid grid-cols-2 gap-2 mt-3 text-sm">
                <div class="bg-gray-100 dark:bg-gray-700 p-2 rounded">
                  üî• N√≥ng ch·∫£y cao
                </div>
                <div class="bg-gray-100 dark:bg-gray-700 p-2 rounded">
                  üî® Gi√≤n, d·ªÖ v·ª°
                </div>
                <div class="bg-gray-100 dark:bg-gray-700 p-2 rounded">
                  üíß Tan trong n∆∞·ªõc
                </div>
                <div class="bg-gray-100 dark:bg-gray-700 p-2 rounded">
                  ‚ö° D·∫´n ƒëi·ªán (l·ªèng)
                </div>
              </div>
              <div
                class="mt-4 pt-4 border-t border-gray-100 dark:border-gray-700"
              >
                <span class="tag-deep mb-2 inline-block">S√¢u</span>
                <p class="text-sm text-gray-500 dark:text-gray-400">
                  <strong>NƒÉng l∆∞·ª£ng m·∫°ng tinh th·ªÉ (Lattice Energy)</strong> l√†
                  th∆∞·ªõc ƒëo ƒë·ªô b·ªÅn li√™n k·∫øt ion.
                </p>
              </div>
            </div>
          </div>

          <!-- Simulations -->
          <div class="space-y-6">
            <!-- Sim 1: Electron Transfer -->
            <div
              class="bg-white dark:bg-gray-800 p-6 rounded-2xl shadow-lg border border-gray-100 dark:border-gray-700"
            >
              <h3 class="text-lg font-bold text-red-500 mb-3">
                <i class="fas fa-exchange-alt mr-2"></i>M√¥ ph·ªèng 1: Chuy·ªÉn e (Na
                + Cl)
              </h3>
              <div
                class="sim-container h-40 flex items-center justify-center"
                id="ionic-transfer-sim"
              >
                <svg width="300" height="120" viewBox="0 0 300 120">
                  <g id="atom-na" transform="translate(50, 60)">
                    <circle
                      r="20"
                      fill="#fca5a5"
                      stroke="#ef4444"
                      stroke-width="2"
                    />
                    <text
                      y="5"
                      text-anchor="middle"
                      fill="#7f1d1d"
                      font-weight="bold"
                      font-size="12"
                    >
                      Na
                    </text>
                    <circle
                      id="moving-electron"
                      cx="28"
                      cy="0"
                      r="4"
                      fill="#fbbf24"
                    />
                  </g>
                  <g id="atom-cl" transform="translate(250, 60)">
                    <circle
                      r="30"
                      fill="#86efac"
                      stroke="#22c55e"
                      stroke-width="2"
                    />
                    <text
                      y="5"
                      text-anchor="middle"
                      fill="#14532d"
                      font-weight="bold"
                      font-size="12"
                    >
                      Cl
                    </text>
                  </g>
                  <text
                    x="150"
                    y="110"
                    text-anchor="middle"
                    font-size="12"
                    class="fill-gray-600 dark:fill-gray-300"
                    id="ionic-status"
                  >
                    Nh·∫•n n√∫t ƒë·ªÉ b·∫Øt ƒë·∫ßu
                  </text>
                </svg>
              </div>
              <button
                onclick="startIonicTransfer()"
                class="mt-3 w-full py-1 bg-red-500 hover:bg-red-600 text-white rounded font-bold text-sm transition"
              >
                B·∫Øt ƒë·∫ßu ph·∫£n ·ª©ng
              </button>
            </div>

            <!-- Sim 2: 3D Lattice -->
            <div
              class="bg-black rounded-2xl shadow-lg overflow-hidden relative group h-64"
            >
              <div
                class="absolute top-2 left-2 z-10 bg-black/50 p-2 rounded text-white text-xs backdrop-blur"
              >
                <h3 class="font-bold">
                  <i class="fas fa-cube mr-2"></i>M√¥ ph·ªèng 2: Tinh th·ªÉ NaCl
                </h3>
                <p class="text-gray-300">Xoay ƒë·ªÉ xem c·∫•u tr√∫c 3D</p>
              </div>
              <div id="lattice-canvas" class="w-full h-full cursor-move"></div>
            </div>

            <!-- Sim 3: Coulomb Force -->
            <div
              class="bg-white dark:bg-gray-800 p-6 rounded-2xl shadow-lg border border-gray-100 dark:border-gray-700"
            >
              <h3 class="text-lg font-bold text-blue-600 mb-3">
                <i class="fas fa-magnet mr-2"></i>M√¥ ph·ªèng 3: L·ª±c h√∫t tƒ©nh ƒëi·ªán
              </h3>
              <p class="text-xs text-gray-500 mb-3">
                L·ª±c h√∫t t·ªâ l·ªá thu·∫≠n v·ªõi ƒëi·ªán t√≠ch ion ($Q$) v√† t·ªâ l·ªá ngh·ªãch v·ªõi
                b√°n k√≠nh ($r$).
              </p>

              <div class="flex items-center gap-4 mb-2">
                <label class="text-xs font-bold w-20">ƒêi·ªán t√≠ch Q:</label>
                <input
                  type="range"
                  min="1"
                  max="3"
                  value="1"
                  step="1"
                  id="charge-slider"
                  oninput="updateCoulomb()"
                />
              </div>
              <div class="flex items-center gap-4 mb-4">
                <label class="text-xs font-bold w-20">Kho·∫£ng c√°ch r:</label>
                <input
                  type="range"
                  min="1"
                  max="3"
                  value="2"
                  step="0.5"
                  id="dist-slider"
                  oninput="updateCoulomb()"
                />
              </div>

              <div
                class="sim-container h-24 flex items-center justify-center gap-8 relative"
                id="coulomb-viz"
              >
                <div
                  id="ion-plus"
                  class="w-8 h-8 rounded-full bg-red-500 text-white flex items-center justify-center text-xs font-bold transition-all duration-300"
                >
                  +1
                </div>
                <div
                  id="force-arrow"
                  class="h-1 bg-gray-400 transition-all duration-300 flex items-center justify-center text-[10px] text-white font-bold relative"
                >
                  <span
                    class="absolute -top-4 text-gray-500 dark:text-gray-400"
                    id="force-val"
                    >F</span
                  >
                </div>
                <div
                  id="ion-minus"
                  class="w-8 h-8 rounded-full bg-blue-500 text-white flex items-center justify-center text-xs font-bold transition-all duration-300"
                >
                  -1
                </div>
              </div>
            </div>
          </div>
        </div>
      </section>

      <!-- SECTION III: COVALENT BOND -->
      <section id="covalent" class="scroll-mt-40">
        <div class="flex items-center gap-3 mb-6">
          <div
            class="w-10 h-10 rounded-lg bg-blue-500 text-white flex items-center justify-center text-xl font-bold"
          >
            III
          </div>
          <h2 class="text-3xl font-bold text-gray-900 dark:text-white">
            Li√™n K·∫øt C·ªông H√≥a Tr·ªã
          </h2>
        </div>

        <div class="grid lg:grid-cols-2 gap-8">
          <!-- Theory -->
          <div class="space-y-6">
            <div
              class="bg-white dark:bg-gray-800 p-6 rounded-2xl shadow-lg border border-gray-100 dark:border-gray-700"
            >
              <span class="tag-basic mb-2 inline-block">C∆° b·∫£n</span>
              <h3 class="text-xl font-bold text-gray-800 dark:text-white mb-2">
                1. S·ª± h√¨nh th√†nh
              </h3>
              <p class="text-gray-600 dark:text-gray-300">
                Hai nguy√™n t·ª≠ chia s·∫ª electron ƒë·ªÉ ƒë·∫°t octet. M·ªôt c·∫∑p e chung = 1
                li√™n k·∫øt ƒë∆°n.
              </p>
              <div
                class="mt-4 pt-4 border-t border-gray-100 dark:border-gray-700"
              >
                <span class="tag-deep mb-2 inline-block">S√¢u</span>
                <p class="text-sm text-gray-500 dark:text-gray-400">
                  Li√™n k·∫øt h√¨nh th√†nh khi orbital nguy√™n t·ª≠ xen ph·ªß (overlap).
                  Xen ph·ªß c√†ng m·∫°nh ‚Üí li√™n k·∫øt c√†ng b·ªÅn.
                </p>
              </div>
            </div>

            <div
              class="bg-white dark:bg-gray-800 p-6 rounded-2xl shadow-lg border border-gray-100 dark:border-gray-700"
            >
              <span class="tag-basic mb-2 inline-block">C∆° b·∫£n</span>
              <h3 class="text-xl font-bold text-gray-800 dark:text-white mb-2">
                2. Li√™n k·∫øt cho - nh·∫≠n
              </h3>
              <p class="text-gray-600 dark:text-gray-300 text-sm">
                M·ªôt nguy√™n t·ª≠ cho c·∫£ c·∫∑p e li√™n k·∫øt, nguy√™n t·ª≠ kia nh·∫≠n, sau ƒë√≥
                d√πng chung. VD: $NH_4^+, H_3O^+$.
              </p>
              <div
                class="mt-4 pt-4 border-t border-gray-100 dark:border-gray-700"
              >
                <span class="tag-deep mb-2 inline-block">S√¢u</span>
                <p class="text-sm text-gray-500 dark:text-gray-400">
                  V·ªÅ nƒÉng l∆∞·ª£ng gi·ªëng h·ªát li√™n k·∫øt th∆∞·ªùng, ch·ªâ kh√°c ngu·ªìn g·ªëc
                  c·∫∑p e.
                </p>
              </div>
            </div>

            <div
              class="bg-white dark:bg-gray-800 p-6 rounded-2xl shadow-lg border border-gray-100 dark:border-gray-700"
            >
              <h3 class="text-xl font-bold text-gray-800 dark:text-white mb-2">
                3. Ph√¢n lo·∫°i theo ƒë·ªô √¢m ƒëi·ªán ($\Delta EN$)
              </h3>
              <ul class="text-sm space-y-2">
                <li
                  class="flex justify-between border-b border-dashed border-gray-300 pb-1"
                >
                  <span>$0 \le \Delta EN < 0.4$</span>
                  <span class="font-bold text-gray-500"
                    >Kh√¥ng ph√¢n c·ª±c ($Cl_2$)</span
                  >
                </li>
                <li
                  class="flex justify-between border-b border-dashed border-gray-300 pb-1"
                >
                  <span>$0.4 \le \Delta EN < 1.7$</span>
                  <span class="font-bold text-blue-500">Ph√¢n c·ª±c ($HCl$)</span>
                </li>
                <li class="flex justify-between">
                  <span>$\Delta EN \ge 1.7$</span>
                  <span class="font-bold text-red-500"
                    >Li√™n k·∫øt ION ($NaCl$)</span
                  >
                </li>
              </ul>
              <p class="text-xs italic mt-2 text-gray-400">
                Gi√° tr·ªã x·∫•p x·ªâ, ƒë√∫ng 99% tr∆∞·ªùng h·ª£p ph·ªï th√¥ng.
              </p>
            </div>

            <div
              class="bg-white dark:bg-gray-800 p-6 rounded-2xl shadow-lg border border-gray-100 dark:border-gray-700"
            >
              <h3 class="text-xl font-bold text-gray-800 dark:text-white mb-2">
                4. Li√™n k·∫øt $\sigma$ v√† $\pi$
              </h3>
              <div class="grid grid-cols-2 gap-4 text-sm">
                <div>
                  <strong class="text-blue-600"
                    >Li√™n k·∫øt Sigma ($\sigma$)</strong
                  >
                  <p class="text-gray-500">
                    Xen ph·ªß tr·ª•c (ƒë·ªëi ƒë·∫ßu). C√≥ ·ªü m·ªçi li√™n k·∫øt. M·∫°nh, linh ƒë·ªông
                    (xoay ƒë∆∞·ª£c).
                  </p>
                </div>
                <div>
                  <strong class="text-purple-600">Li√™n k·∫øt Pi ($\pi$)</strong>
                  <p class="text-gray-500">
                    Xen ph·ªß b√™n (song song). Ch·ªâ ·ªü li√™n k·∫øt ƒë√¥i/ba. Y·∫øu h∆°n, c·∫£n
                    tr·ªü quay.
                  </p>
                </div>
              </div>
            </div>
          </div>

          <!-- Simulations -->
          <div class="space-y-6">
            <!-- Sim 1: Polarity Slider -->
            <div
              class="bg-white dark:bg-gray-800 p-6 rounded-2xl shadow-lg border border-gray-100 dark:border-gray-700"
            >
              <h3
                class="text-lg font-bold text-primary dark:text-secondary mb-3"
              >
                <i class="fas fa-sliders-h mr-2"></i>M√¥ ph·ªèng 1: ƒê·ªô ph√¢n c·ª±c
              </h3>
              <div class="relative pt-6 pb-2">
                <input
                  type="range"
                  min="0"
                  max="3.5"
                  step="0.1"
                  value="0"
                  id="polarity-slider"
                  oninput="updatePolarity(this.value)"
                />
                <div
                  class="flex justify-between text-xs mt-2 text-gray-500 font-mono"
                >
                  <span>0</span>
                  <span>0.4</span>
                  <span>1.7</span>
                  <span>3.5</span>
                </div>
              </div>
              <div class="mt-4 text-center">
                <div
                  class="text-2xl font-bold text-gray-800 dark:text-white"
                  id="en-value"
                >
                  0.0
                </div>
                <div
                  class="text-lg font-bold transition-colors duration-300"
                  id="bond-type"
                >
                  C·ªông h√≥a tr·ªã kh√¥ng c·ª±c
                </div>
              </div>
            </div>

            <!-- Sim 2: Orbital Overlap -->
            <div
              class="bg-white dark:bg-gray-800 p-6 rounded-2xl shadow-lg border border-gray-100 dark:border-gray-700"
            >
              <div class="flex justify-between items-center mb-3">
                <h3 class="text-lg font-bold text-primary dark:text-secondary">
                  <i class="fas fa-atom mr-2"></i>M√¥ ph·ªèng 2: Xen ph·ªß Orbital
                </h3>
                <div class="flex gap-2 text-xs">
                  <button
                    onclick="showOrbital('sigma')"
                    class="px-2 py-1 bg-blue-100 text-blue-700 rounded hover:bg-blue-200"
                  >
                    Sigma ($\sigma$)
                  </button>
                  <button
                    onclick="showOrbital('pi')"
                    class="px-2 py-1 bg-purple-100 text-purple-700 rounded hover:bg-purple-200"
                  >
                    Pi ($\pi$)
                  </button>
                </div>
              </div>
              <div
                class="sim-container h-48 flex items-center justify-center bg-gray-50 dark:bg-gray-900"
                id="orbital-viz"
              >
                <svg
                  width="250"
                  height="150"
                  viewBox="0 0 300 200"
                  id="svg-orbital"
                ></svg>
              </div>
              <p
                class="mt-2 text-xs text-center text-gray-500 italic"
                id="orbital-desc"
              ></p>
            </div>

            <!-- Sim 3: Bond Strength -->
            <div
              class="bg-white dark:bg-gray-800 p-6 rounded-2xl shadow-lg border border-gray-100 dark:border-gray-700"
            >
              <h3 class="text-lg font-bold text-green-600 mb-3">
                <i class="fas fa-dumbbell mr-2"></i>M√¥ ph·ªèng 3: NƒÉng l∆∞·ª£ng li√™n
                k·∫øt (C-C)
              </h3>
              <p class="text-xs text-gray-500 mb-3">
                So s√°nh ƒë·ªô b·ªÅn: ƒê∆°n < ƒê√¥i < Ba (Kh√¥ng ph·∫£i b·ªôi s·ªë tuy·∫øn t√≠nh)
              </p>
              <div class="space-y-3">
                <!-- Single -->
                <div
                  class="relative group cursor-pointer"
                  onclick="showBondInfo(1)"
                >
                  <div class="flex items-center gap-2">
                    <span class="text-xs font-bold w-12">ƒê∆°n:</span>
                    <div
                      class="h-2 bg-gray-300 rounded w-1/3 transition-all group-hover:bg-blue-400"
                    ></div>
                    <span class="text-xs text-gray-500">~350 kJ/mol</span>
                  </div>
                </div>
                <!-- Double -->
                <div
                  class="relative group cursor-pointer"
                  onclick="showBondInfo(2)"
                >
                  <div class="flex items-center gap-2">
                    <span class="text-xs font-bold w-12">ƒê√¥i:</span>
                    <div
                      class="h-2 bg-gray-400 rounded w-2/3 transition-all group-hover:bg-blue-500"
                    ></div>
                    <span class="text-xs text-gray-500">~610 kJ/mol</span>
                  </div>
                </div>
                <!-- Triple -->
                <div
                  class="relative group cursor-pointer"
                  onclick="showBondInfo(3)"
                >
                  <div class="flex items-center gap-2">
                    <span class="text-xs font-bold w-12">Ba:</span>
                    <div
                      class="h-2 bg-gray-500 rounded w-full transition-all group-hover:bg-blue-600"
                    ></div>
                    <span class="text-xs text-gray-500">~840 kJ/mol</span>
                  </div>
                </div>
              </div>
              <p
                id="bond-info-text"
                class="text-xs text-center mt-3 text-primary font-bold min-h-[1rem]"
              >
                Click v√†o thanh ƒë·ªÉ xem chi ti·∫øt
              </p>
            </div>
          </div>
        </div>
      </section>

      <!-- SECTION IV: WEAK INTERACTIONS -->
      <section id="weak" class="scroll-mt-40">
        <div class="flex items-center gap-3 mb-6">
          <div
            class="w-10 h-10 rounded-lg bg-purple-500 text-white flex items-center justify-center text-xl font-bold"
          >
            IV
          </div>
          <h2 class="text-3xl font-bold text-gray-900 dark:text-white">
            Li√™n K·∫øt Y·∫øu
          </h2>
        </div>

        <div class="grid lg:grid-cols-2 gap-8">
          <!-- Theory -->
          <div class="space-y-6">
            <div
              class="bg-white dark:bg-gray-800 p-6 rounded-2xl shadow-lg border border-gray-100 dark:border-gray-700"
            >
              <span class="tag-basic mb-2 inline-block">C∆° b·∫£n</span>
              <h3 class="text-xl font-bold text-gray-800 dark:text-white mb-2">
                1. Li√™n k·∫øt Hydrogen (H-bond)
              </h3>
              <p class="text-gray-600 dark:text-gray-300">
                X·∫£y ra khi H li√™n k·∫øt v·ªõi nguy√™n t·ª≠ c√≥ ƒë·ªô √¢m ƒëi·ªán l·ªõn (F, O, N).
                $H(\delta^+)$ h√∫t c·∫∑p e t·ª± do c·ªßa nguy√™n t·ª≠ kia.
              </p>
              <p class="text-sm font-bold mt-2 text-purple-600">
                V√≠ d·ª• m·∫°nh nh·∫•t: $HF, H_2O, NH_3$.
              </p>

              <div class="mt-3 bg-purple-50 dark:bg-purple-900/20 p-3 rounded">
                <strong>T√≠nh ch·∫•t:</strong>
                <ul class="list-disc list-inside text-sm mt-1">
                  <li>L√†m nhi·ªát ƒë·ªô s√¥i tƒÉng m·∫°nh (b·∫•t th∆∞·ªùng).</li>
                  <li>T·∫°o m·∫°ng l∆∞·ªõi trong n∆∞·ªõc ƒë√°, c·∫•u tr√∫c DNA.</li>
                </ul>
              </div>

              <div
                class="mt-4 pt-4 border-t border-gray-100 dark:border-gray-700"
              >
                <span class="tag-deep mb-2 inline-block">S√¢u</span>
                <p class="text-sm text-gray-500 dark:text-gray-400">
                  Kh√¥ng ph·∫£i li√™n k·∫øt ho√° tr·ªã, l√† t∆∞∆°ng t√°c tƒ©nh ƒëi·ªán ƒë·ªãnh
                  h∆∞·ªõng. M·∫°nh h∆°n Van der Waals nh∆∞ng y·∫øu h∆°n C·ªông ho√° tr·ªã.
                </p>
              </div>
            </div>

            <div
              class="bg-white dark:bg-gray-800 p-6 rounded-2xl shadow-lg border border-gray-100 dark:border-gray-700"
            >
              <span class="tag-basic mb-2 inline-block">C∆° b·∫£n</span>
              <h3 class="text-xl font-bold text-gray-800 dark:text-white mb-2">
                2. T∆∞∆°ng t√°c Van der Waals
              </h3>
              <p class="text-gray-600 dark:text-gray-300 text-sm">
                Xu·∫•t hi·ªán gi·ªØa m·ªçi ph√¢n t·ª≠ (k·ªÉ c·∫£ kh√≠ hi·∫øm). Nh·ªè nh∆∞ng quan
                tr·ªçng khi s·ªë l∆∞·ª£ng l·ªõn (polymer, protein).
              </p>

              <div class="mt-3 grid grid-cols-1 gap-2 text-xs font-mono">
                <div class="p-2 bg-gray-100 dark:bg-gray-700 rounded">
                  1. L·ª±c ƒë·ªãnh h∆∞·ªõng (dipole-dipole)
                </div>
                <div class="p-2 bg-gray-100 dark:bg-gray-700 rounded">
                  2. L·ª±c c·∫£m ·ª©ng (dipole-induced)
                </div>
                <div class="p-2 bg-gray-100 dark:bg-gray-700 rounded">
                  3. L·ª±c khu·∫øch t√°n (London)
                </div>
              </div>

              <div
                class="mt-4 pt-4 border-t border-gray-100 dark:border-gray-700"
              >
                <span class="tag-deep mb-2 inline-block">S√¢u</span>
                <p class="text-sm text-gray-500 dark:text-gray-400">
                  L·ª±c London tƒÉng khi: Ph√¢n t·ª≠ l·ªõn, D·ªÖ ph√¢n c·ª±c, Nhi·ªÅu e (ƒë√°m
                  m√¢y e d·ªÖ "nh·∫£y" t·∫°o dipole t·∫°m th·ªùi).
                </p>
              </div>
            </div>
          </div>

          <!-- Simulations -->
          <div class="space-y-6">
            <!-- Sim 1: H-Bond Water -->
            <div
              class="bg-white dark:bg-gray-800 p-6 rounded-2xl shadow-lg border border-gray-100 dark:border-gray-700"
            >
              <h3 class="text-lg font-bold text-purple-600 mb-3">
                <i class="fas fa-tint mr-2"></i>M√¥ ph·ªèng 1: M·∫°ng l∆∞·ªõi n∆∞·ªõc
                (H-bond)
              </h3>
              <div
                class="sim-container h-48 relative overflow-hidden bg-blue-50 dark:bg-blue-900/20"
              >
                <!-- Molecules -->
                <div class="water-molecule absolute top-8 left-12">
                  <div class="relative">
                    <div
                      class="w-8 h-8 bg-red-500 rounded-full flex items-center justify-center text-white text-xs font-bold shadow-md"
                    >
                      O
                    </div>
                    <div
                      class="absolute -bottom-2 -left-2 w-4 h-4 bg-white border border-gray-300 rounded-full flex items-center justify-center text-[8px]"
                    >
                      H
                    </div>
                    <div
                      class="absolute -bottom-2 -right-2 w-4 h-4 bg-white border border-gray-300 rounded-full flex items-center justify-center text-[8px]"
                    >
                      H
                    </div>
                  </div>
                </div>
                <div
                  class="water-molecule absolute bottom-8 right-12"
                  style="animation-delay: 1.5s"
                >
                  <div class="relative">
                    <div
                      class="w-8 h-8 bg-red-500 rounded-full flex items-center justify-center text-white text-xs font-bold shadow-md"
                    >
                      O
                    </div>
                    <div
                      class="absolute -top-2 -left-2 w-4 h-4 bg-white border border-gray-300 rounded-full flex items-center justify-center text-[8px]"
                    >
                      H
                    </div>
                    <div
                      class="absolute -top-2 -right-2 w-4 h-4 bg-white border border-gray-300 rounded-full flex items-center justify-center text-[8px]"
                    >
                      H
                    </div>
                  </div>
                </div>
                <!-- Bond Line -->
                <svg class="absolute inset-0 w-full h-full pointer-events-none">
                  <line
                    x1="80"
                    y1="70"
                    x2="220"
                    y2="150"
                    stroke="#a855f7"
                    stroke-width="2"
                    stroke-dasharray="5,3"
                  >
                    <animate
                      attributeName="opacity"
                      values="0;1;0"
                      dur="2s"
                      repeatCount="indefinite"
                    />
                  </line>
                  <text
                    x="150"
                    y="100"
                    fill="#a855f7"
                    font-size="10"
                    font-weight="bold"
                    text-anchor="middle"
                  >
                    Li√™n k·∫øt H
                  </text>
                </svg>
              </div>
            </div>

            <!-- Sim 2: VDW Dipole -->
            <div
              class="bg-white dark:bg-gray-800 p-6 rounded-2xl shadow-lg border border-gray-100 dark:border-gray-700"
            >
              <h3
                class="text-lg font-bold text-gray-700 dark:text-gray-300 mb-3"
              >
                <i class="fas fa-wind mr-2"></i>M√¥ ph·ªèng 2: L∆∞·ª°ng c·ª±c t·∫°m th·ªùi
                (VDW)
              </h3>
              <div
                class="sim-container h-32 flex items-center justify-center relative"
              >
                <div
                  class="w-24 h-24 rounded-full bg-gray-200 dark:bg-gray-700 relative overflow-hidden shadow-inner flex items-center justify-center"
                >
                  <div
                    id="vdw-dipole"
                    class="absolute inset-0 transition-opacity duration-1000 opacity-0 bg-gradient-to-r from-blue-400/60 to-red-400/60"
                  ></div>
                  <span class="relative z-10 text-xs font-mono font-bold"
                    >He Atom</span
                  >
                </div>
              </div>
              <p class="text-center text-xs text-gray-400 mt-2">
                ƒê√°m m√¢y e dao ƒë·ªông t·∫°o c·ª±c √¢m/d∆∞∆°ng t·∫°m th·ªùi
              </p>
            </div>

            <!-- Sim 3: Boiling Point Chart -->
            <div
              class="bg-white dark:bg-gray-800 p-6 rounded-2xl shadow-lg border border-gray-100 dark:border-gray-700"
            >
              <h3 class="text-lg font-bold text-orange-500 mb-3">
                <i class="fas fa-chart-bar mr-2"></i>M√¥ ph·ªèng 3: ·∫¢nh h∆∞·ªüng nhi·ªát
                ƒë·ªô s√¥i
              </h3>
              <p class="text-xs text-gray-500 mb-2">
                So s√°nh $H_2O$ (c√≥ lk Hydrogen) v√† $H_2S$ (ch·ªâ c√≥ VDW).
              </p>
              <div class="relative h-40 w-full">
                <canvas id="bpChart"></canvas>
              </div>
            </div>
          </div>
        </div>
      </section>
    </main>

    <!-- JAVASCRIPT LOGIC -->
    <script>
      // --- THEME TOGGLE ---
      function toggleTheme() {
        document.documentElement.classList.toggle("dark");
        localStorage.setItem(
          "theme",
          document.documentElement.classList.contains("dark") ? "dark" : "light"
        );
        if (bpChart) bpChart.update(); // Update chart colors
      }

      // Load saved theme
      if (
        localStorage.getItem("theme") === "dark" ||
        (!("theme" in localStorage) &&
          window.matchMedia("(prefers-color-scheme: dark)").matches)
      ) {
        document.documentElement.classList.add("dark");
      }

      // --- SCROLL SPY ---
      function scrollToSection(id) {
        document.getElementById(id).scrollIntoView({ behavior: "smooth" });
      }

      window.addEventListener("scroll", () => {
        const sections = ["octet", "ion", "covalent", "weak"];
        const navBtns = document.querySelectorAll(".nav-btn");

        let current = "";
        sections.forEach((section) => {
          const element = document.getElementById(section);
          if (scrollY >= element.offsetTop - 200) {
            current = section;
          }
        });

        navBtns.forEach((btn) => {
          btn.classList.remove(
            "text-primary",
            "dark:text-secondary",
            "border-primary",
            "dark:border-secondary"
          );
          btn.classList.add("border-transparent");
          if (btn.getAttribute("onclick").includes(current)) {
            btn.classList.add(
              "text-primary",
              "dark:text-secondary",
              "border-primary"
            );
            btn.classList.remove("border-transparent");
          }
        });
      });

      // --- SECTION I: OCTET SIMS ---
      let octetCurrent = 6;
      function addElectron() {
        if (octetCurrent < 8) {
          octetCurrent++;
          renderOctet();
          if (octetCurrent === 8) {
            const status = document.getElementById("octet-status");
            status.innerHTML = "‚úÖ B·ªÅn v·ªØng!";
            status.className =
              "absolute top-2 right-2 text-xs font-bold px-2 py-1 rounded bg-green-500 text-white";
          }
        }
      }

      function resetOctet() {
        octetCurrent = 6;
        const status = document.getElementById("octet-status");
        status.innerHTML = "6/8 e";
        status.className =
          "absolute top-2 right-2 text-xs font-bold px-2 py-1 rounded bg-gray-200 text-gray-600";
        renderOctet();
      }

      function renderOctet() {
        const group = document.getElementById("valence-electrons");
        group.innerHTML = "";
        // Positions for electrons
        const positions = [
          { cx: 100, cy: 35 },
          { cx: 100, cy: 165 },
          { cx: 45, cy: 65 },
          { cx: 155, cy: 65 },
          { cx: 45, cy: 135 },
          { cx: 155, cy: 135 },
          { cx: 35, cy: 100 },
          { cx: 165, cy: 100 }, // Extra slots
        ];

        for (let i = 0; i < octetCurrent; i++) {
          const circle = document.createElementNS(
            "http://www.w3.org/2000/svg",
            "circle"
          );
          circle.setAttribute("cx", positions[i].cx);
          circle.setAttribute("cy", positions[i].cy);
          circle.setAttribute("r", 8);
          circle.setAttribute("fill", i < 6 ? "#3b82f6" : "#10b981");
          circle.classList.add("electron-dot");
          group.appendChild(circle);
        }
      }
      renderOctet(); // Init

      function showException(type) {
        const container = document.getElementById("exception-viz");
        const desc = document.getElementById("exception-desc");
        container.innerHTML = "";

        if (type === "becl2") {
          // BeCl2 SVG
          container.innerHTML = `
                <svg width="200" height="100" viewBox="0 0 200 100">
                    <line x1="60" y1="50" x2="140" y2="50" stroke="#94a3b8" stroke-width="2"/>
                    <circle cx="100" cy="50" r="15" fill="#f59e0b"/>
                    <text x="100" y="55" text-anchor="middle" fill="white" font-size="10" font-weight="bold">Be</text>
                    <circle cx="40" cy="50" r="12" fill="#22c55e"/>
                    <text x="40" y="54" text-anchor="middle" fill="white" font-size="8" font-weight="bold">Cl</text>
                    <circle cx="160" cy="50" r="12" fill="#22c55e"/>
                    <text x="160" y="54" text-anchor="middle" fill="white" font-size="8" font-weight="bold">Cl</text>
                </svg>
              `;
          desc.innerHTML = `Be ch·ªâ c√≥ 4e l·ªõp ngo√†i c√πng (Thi·∫øu Octet).`;
        } else {
          // PCl5 SVG
          container.innerHTML = `
                <svg width="200" height="150" viewBox="0 0 200 150">
                    <circle cx="100" cy="75" r="15" fill="#f97316"/>
                    <text x="100" y="80" text-anchor="middle" fill="white" font-size="10" font-weight="bold">P</text>
                    <!-- Cl atoms around -->
                    <circle cx="100" cy="30" r="10" fill="#22c55e"/><line x1="100" y1="60" x2="100" y2="40" stroke="#94a3b8"/>
                    <circle cx="100" cy="120" r="10" fill="#22c55e"/><line x1="100" y1="90" x2="100" y2="110" stroke="#94a3b8"/>
                    <circle cx="50" cy="75" r="10" fill="#22c55e"/><line x1="85" y1="75" x2="60" y2="75" stroke="#94a3b8"/>
                    <circle cx="150" cy="75" r="10" fill="#22c55e"/><line x1="115" y1="75" x2="140" y2="75" stroke="#94a3b8"/>
                    <circle cx="70" cy="45" r="10" fill="#22c55e" opacity="0.7"/><line x1="90" y1="65" x2="75" y2="50" stroke="#94a3b8"/>
                </svg>
              `;
          desc.innerHTML = `P c√≥ 10e l·ªõp ngo√†i c√πng (M·ªü r·ªông Octet).`;
        }
      }

      // --- SECTION II: ION SIMS ---
      function startIonicTransfer() {
        const e = document.getElementById("moving-electron");
        const status = document.getElementById("ionic-status");

        e.setAttribute("cx", 28); // Reset
        let pos = 28;
        const interval = setInterval(() => {
          pos += 4;
          e.setAttribute("cx", pos);
          if (pos >= 195) {
            // Arrived at Cl
            clearInterval(interval);
            status.textContent = "ƒê√£ t·∫°o Na‚Å∫ v√† Cl‚Åª!";
            status.setAttribute("fill", "#22c55e");
          }
        }, 16);
      }

      // Three.js Lattice
      function initLattice() {
        const container = document.getElementById("lattice-canvas");
        if (!container) return;

        const scene = new THREE.Scene();
        scene.background = new THREE.Color(0x111111);

        const camera = new THREE.PerspectiveCamera(
          50,
          container.clientWidth / container.clientHeight,
          0.1,
          1000
        );
        camera.position.z = 8;

        const renderer = new THREE.WebGLRenderer({
          alpha: true,
          antialias: true,
        });
        renderer.setSize(container.clientWidth, container.clientHeight);
        container.appendChild(renderer.domElement);

        const controls = new THREE.OrbitControls(camera, renderer.domElement);
        controls.enableDamping = true;
        controls.autoRotate = true;
        controls.autoRotateSpeed = 2.0;

        const group = new THREE.Group();
        const geo = new THREE.SphereGeometry(0.35, 16, 16);
        const matNa = new THREE.MeshPhongMaterial({
          color: 0xa855f7,
          shininess: 100,
        });
        const matCl = new THREE.MeshPhongMaterial({
          color: 0x22c55e,
          shininess: 100,
        });

        for (let x = -1; x <= 1; x++) {
          for (let y = -1; y <= 1; y++) {
            for (let z = -1; z <= 1; z++) {
              const isNa = (x + y + z) % 2 === 0;
              const sphere = new THREE.Mesh(geo, isNa ? matNa : matCl);
              sphere.position.set(x * 1.1, y * 1.1, z * 1.1);
              group.add(sphere);
            }
          }
        }
        scene.add(group);

        const light = new THREE.DirectionalLight(0xffffff, 1);
        light.position.set(5, 5, 5);
        scene.add(light);
        scene.add(new THREE.AmbientLight(0x404040));

        function animate() {
          requestAnimationFrame(animate);
          controls.update();
          renderer.render(scene, camera);
        }
        animate();

        window.addEventListener("resize", () => {
          camera.aspect = container.clientWidth / container.clientHeight;
          camera.updateProjectionMatrix();
          renderer.setSize(container.clientWidth, container.clientHeight);
        });
      }

      // Coulomb Sim
      function updateCoulomb() {
        const q = parseInt(document.getElementById("charge-slider").value);
        const r = parseFloat(document.getElementById("dist-slider").value);

        // F ~ q*q / r*r (Simplified)
        // Just visually represent force
        const force = (q * q) / (r * r);

        const plus = document.getElementById("ion-plus");
        const minus = document.getElementById("ion-minus");
        const arrow = document.getElementById("force-arrow");
        const val = document.getElementById("force-val");

        // Update Text
        plus.innerHTML = `+${q}`;
        minus.innerHTML = `-${q}`;

        // Update Distance UI (using margin/gap is tricky, let's use translate)
        // Base distance + slider factor
        const gap = r * 20;
        // Actually let's just animate width of arrow and margin
        document.getElementById("coulomb-viz").style.gap = `${r * 30}px`;

        // Update Force Arrow Thickness/Opacity
        const thickness = Math.min(12, Math.max(2, force * 8));
        arrow.style.height = `${thickness}px`;
        arrow.style.opacity = Math.min(1, force);

        val.innerHTML = `F ‚âà ${force.toFixed(2)}`;
      }

      // --- SECTION III: COVALENT SIMS ---
      function updatePolarity(val) {
        document.getElementById("en-value").innerText = val;
        const type = document.getElementById("bond-type");

        if (val < 0.4) {
          type.innerText = "C·ªông H√≥a Tr·ªã KH√îNG C·ª∞C";
          type.className = "text-lg font-bold text-gray-500";
        } else if (val < 1.7) {
          type.innerText = "C·ªông H√≥a Tr·ªã PH√ÇN C·ª∞C";
          type.className = "text-lg font-bold text-blue-600";
        } else {
          type.innerText = "LI√äN K·∫æT ION";
          type.className = "text-lg font-bold text-red-600";
        }
      }

      function showOrbital(type) {
        const svg = document.getElementById("svg-orbital");
        const desc = document.getElementById("orbital-desc");
        svg.innerHTML = "";

        if (type === "sigma") {
          svg.innerHTML = `
            <circle cx="80" cy="75" r="30" fill="#93c5fd" opacity="0.8"/>
            <circle cx="170" cy="75" r="30" fill="#93c5fd" opacity="0.8"/>
            <!-- Overlap -->
            <path d="M 110 75 A 10 25 0 0 0 140 75 A 10 25 0 0 0 110 75" fill="#2563eb" />
            <text x="125" y="80" fill="white" font-size="12" text-anchor="middle" font-weight="bold">œÉ</text>
            <line x1="40" y1="75" x2="210" y2="75" stroke="#94a3b8" stroke-dasharray="4"/>
          `;
          desc.innerHTML =
            "Xen ph·ªß tr·ª•c (ƒë·ªëi ƒë·∫ßu) ‚Üí B·ªÅn v·ªØng, e n·∫±m tr√™n ƒë∆∞·ªùng n·ªëi t√¢m.";
        } else {
          svg.innerHTML = `
            <ellipse cx="100" cy="50" rx="15" ry="30" fill="#d8b4fe" opacity="0.8"/>
            <ellipse cx="100" cy="100" rx="15" ry="30" fill="#d8b4fe" opacity="0.8"/>
            <ellipse cx="160" cy="50" rx="15" ry="30" fill="#d8b4fe" opacity="0.8"/>
            <ellipse cx="160" cy="100" rx="15" ry="30" fill="#d8b4fe" opacity="0.8"/>
            <!-- Overlap Regions -->
            <rect x="100" y="30" width="60" height="15" fill="#9333ea" opacity="0.5" rx="5"/>
            <rect x="100" y="105" width="60" height="15" fill="#9333ea" opacity="0.5" rx="5"/>
            <text x="130" y="42" fill="white" font-size="10" text-anchor="middle" font-weight="bold">œÄ</text>
            <text x="130" y="117" fill="white" font-size="10" text-anchor="middle" font-weight="bold">œÄ</text>
          `;
          desc.innerHTML =
            "Xen ph·ªß b√™n (song song) ‚Üí K√©m b·ªÅn h∆°n, e n·∫±m hai b√™n tr·ª•c.";
        }
      }

      function showBondInfo(n) {
        const txt = document.getElementById("bond-info-text");
        if (n === 1)
          txt.innerText =
            "Li√™n k·∫øt ƒë∆°n (sigma): D√†i nh·∫•t, nƒÉng l∆∞·ª£ng th·∫•p nh·∫•t (~350kJ).";
        if (n === 2)
          txt.innerText =
            "Li√™n k·∫øt ƒë√¥i (1 sigma + 1 pi): Ng·∫Øn h∆°n, nƒÉng l∆∞·ª£ng cao h∆°n (~610kJ).";
        if (n === 3)
          txt.innerText =
            "Li√™n k·∫øt ba (1 sigma + 2 pi): Ng·∫Øn nh·∫•t, b·ªÅn nh·∫•t (~840kJ).";
      }

      // --- SECTION IV: WEAK SIMS ---
      // VDW Animation
      setInterval(() => {
        const dipole = document.getElementById("vdw-dipole");
        dipole.style.opacity = Math.random() > 0.4 ? "1" : "0";
        dipole.style.background =
          Math.random() > 0.5
            ? "linear-gradient(to right, rgba(96, 165, 250, 0.6), rgba(248, 113, 113, 0.6))"
            : "linear-gradient(to left, rgba(96, 165, 250, 0.6), rgba(248, 113, 113, 0.6))";
      }, 1200);

      // Chart.js for Boiling Point
      let bpChart;
      function initChart() {
        const ctx = document.getElementById("bpChart");
        if (!ctx) return;

        bpChart = new Chart(ctx, {
          type: "bar",
          data: {
            labels: ["H‚ÇÇS (VDW)", "H‚ÇÇO (H-Bond)"],
            datasets: [
              {
                label: "Nhi·ªát ƒë·ªô s√¥i (¬∞C)",
                data: [-60, 100],
                backgroundColor: [
                  "rgba(156, 163, 175, 0.6)", // Gray for H2S
                  "rgba(59, 130, 246, 0.8)", // Blue for H2O
                ],
                borderColor: ["rgb(107, 114, 128)", "rgb(37, 99, 235)"],
                borderWidth: 1,
              },
            ],
          },
          options: {
            responsive: true,
            maintainAspectRatio: false,
            plugins: {
              legend: { display: false },
            },
            scales: {
              y: {
                beginAtZero: false,
                grid: {
                  color: document.documentElement.classList.contains("dark")
                    ? "#374151"
                    : "#e5e7eb",
                },
                ticks: {
                  color: document.documentElement.classList.contains("dark")
                    ? "#9ca3af"
                    : "#4b5563",
                },
              },
              x: {
                ticks: {
                  color: document.documentElement.classList.contains("dark")
                    ? "#9ca3af"
                    : "#4b5563",
                },
              },
            },
          },
        });
      }

      // INIT
      window.onload = function () {
        initLattice();
        updateCoulomb();
        showOrbital("sigma");
        updatePolarity(0);
        initChart();
      };
    </script>
  </body>
</html>
