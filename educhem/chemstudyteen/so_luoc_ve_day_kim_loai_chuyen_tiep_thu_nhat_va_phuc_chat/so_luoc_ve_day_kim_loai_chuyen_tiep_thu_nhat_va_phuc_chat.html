<!doctype html>
<html lang="vi" class="scroll-smooth">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Ch∆∞∆°ng 8: Kim Lo·∫°i Chuy·ªÉn Ti·∫øp & Ph·ª©c Ch·∫•t ‚Äì ChemStudy Expert</title>
    <link
      rel="shortcut icon"
      href="../../../favicon/educhem.avg"
      type="image/x-icon"
    />

    <!-- 1. TH∆Ø VI·ªÜN & FONTS -->
    <!-- TailwindCSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- FontAwesome CDN -->
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
    />
    <!-- Google Fonts -->
    <link
      href="https://fonts.googleapis.com/css2?family=Be+Vietnam+Pro:wght@300;400;500;600;700&family=Space+Grotesk:wght@500;700&display=swap"
      rel="stylesheet"
    />

    <!-- 2. TAILWIND CONFIG & CUSTOM CSS -->
    <script>
      tailwind.config = {
        darkMode: "class",
        theme: {
          extend: {
            fontFamily: {
              sans: ['"Be Vietnam Pro"', "sans-serif"],
              display: ['"Space Grotesk"', "sans-serif"],
            },
            colors: {
              chem: {
                primary: "#8b5cf6", // Violet 500
                secondary: "#06b6d4", // Cyan 500
                accent: "#f43f5e", // Rose 500
                dark: "#0f172a", // Slate 900
                light: "#f8fafc", // Slate 50
              },
            },
            animation: {
              float: "float 6s ease-in-out infinite",
              "spin-slow": "spin 15s linear infinite",
              orbit: "orbit 10s linear infinite",
              drop: "drop 1s infinite",
            },
            keyframes: {
              float: {
                "0%, 100%": { transform: "translateY(0)" },
                "50%": { transform: "translateY(-20px)" },
              },
              orbit: {
                "0%": {
                  transform: "rotate(0deg) translateX(50px) rotate(0deg)",
                },
                "100%": {
                  transform: "rotate(360deg) translateX(50px) rotate(-360deg)",
                },
              },
              drop: {
                "0%": { transform: "translateY(0)", opacity: 1 },
                "100%": { transform: "translateY(100px)", opacity: 0 },
              },
            },
          },
        },
      };
    </script>

    <style>
      /* CSS VARIABLES & RESET */
      :root {
        --footer-bg: #0f172a;
        --footer-text: #e2e8f0;
        --p-primary: #8b5cf6;
        --glass-border: 1px solid rgba(255, 255, 255, 0.2);
        --glass-shadow: 0 8px 32px 0 rgba(31, 38, 135, 0.15);
      }

      html.dark :root {
        --footer-bg: #020617;
        --glass-border: 1px solid rgba(255, 255, 255, 0.05);
      }

      body {
        font-family: "Be Vietnam Pro", sans-serif;
        overflow-x: hidden;
        transition:
          background-color 0.3s,
          color 0.3s;
      }

      /* GLASSMORPHISM UTILS */
      .glass-panel {
        background: rgba(255, 255, 255, 0.7);
        backdrop-filter: blur(16px);
        -webkit-backdrop-filter: blur(16px);
        border: var(--glass-border);
        box-shadow: var(--glass-shadow);
      }

      .dark .glass-panel {
        background: rgba(15, 23, 42, 0.7);
        border: 1px solid rgba(255, 255, 255, 0.08);
      }

      .glass-card {
        background: rgba(255, 255, 255, 0.6);
        backdrop-filter: blur(12px);
        border: 1px solid rgba(255, 255, 255, 0.3);
        transition: all 0.3s ease;
        border-radius: 1rem;
      }

      .dark .glass-card {
        background: rgba(30, 41, 59, 0.4);
        border: 1px solid rgba(255, 255, 255, 0.05);
      }

      .glass-card:hover {
        transform: translateY(-5px);
        box-shadow: 0 20px 40px -10px rgba(0, 0, 0, 0.15);
        background: rgba(255, 255, 255, 0.85);
      }

      .dark .glass-card:hover {
        background: rgba(30, 41, 59, 0.8);
        box-shadow: 0 20px 40px -10px rgba(0, 0, 0, 0.5);
        border-color: rgba(139, 92, 246, 0.3);
      }

      /* TEXT GRADIENTS */
      .text-gradient {
        background-clip: text;
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        background-image: linear-gradient(to right, #8b5cf6, #06b6d4, #f43f5e);
      }

      /* ANIMATED BACKGROUND */
      .bg-animated {
        background: linear-gradient(-45deg, #1e1b4b, #312e81, #4338ca, #3730a3);
        background-size: 400% 400%;
        animation: gradientBG 15s ease infinite;
      }

      .dark .bg-animated {
        background: linear-gradient(-45deg, #020617, #0f172a, #1e293b, #0f172a);
      }

      @keyframes gradientBG {
        0% {
          background-position: 0% 50%;
        }
        50% {
          background-position: 100% 50%;
        }
        100% {
          background-position: 0% 50%;
        }
      }

      /* SIMULATION SPECIFIC STYLES */
      .orbital-box {
        width: 40px;
        height: 40px;
        border: 2px solid #cbd5e1;
        display: flex;
        justify-content: center;
        align-items: center;
        font-size: 1.2rem;
        position: relative;
        background: rgba(255, 255, 255, 0.5);
      }
      .dark .orbital-box {
        border-color: #475569;
        background: rgba(0, 0, 0, 0.2);
      }
      .electron-up {
        color: #f43f5e;
        font-weight: bold;
      }
      .electron-down {
        color: #06b6d4;
        font-weight: bold;
        transform: rotate(180deg);
        display: inline-block;
      }

      /* 3D MOLECULE VIEWER */
      .scene {
        perspective: 800px;
        width: 100%;
        height: 300px;
        display: flex;
        justify-content: center;
        align-items: center;
        overflow: hidden;
      }
      .molecule {
        width: 50px;
        height: 50px;
        position: relative;
        transform-style: preserve-3d;
        animation: spinMolecule 15s linear infinite;
      }
      .atom {
        position: absolute;
        border-radius: 50%;
        display: flex;
        justify-content: center;
        align-items: center;
        font-weight: bold;
        color: white;
        box-shadow: inset -2px -2px 6px rgba(0, 0, 0, 0.3);
      }
      .atom-center {
        width: 40px;
        height: 40px;
        background: radial-gradient(circle at 30% 30%, #3b82f6, #1d4ed8);
        top: 5px;
        left: 5px;
        transform: translateZ(0);
      }
      .ligand {
        width: 30px;
        height: 30px;
        background: radial-gradient(circle at 30% 30%, #10b981, #047857);
        top: 10px;
        left: 10px;
      }
      .bond {
        position: absolute;
        height: 4px;
        background: #94a3b8;
        transform-origin: left center;
        top: 23px;
        left: 25px;
      }

      @keyframes spinMolecule {
        from {
          transform: rotateX(0) rotateY(0);
        }
        to {
          transform: rotateX(360deg) rotateY(360deg);
        }
      }

      /* FOOTER & UI COMPONENTS */
      footer {
        background: var(--footer-bg);
        color: var(--footer-text);
        padding: 100px 5% 40px;
        position: relative;
        overflow: hidden;
        transition:
          background-color 0.8s ease,
          color 0.8s ease;
      }
      .footer-waves {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 60px;
        background: var(--footer-bg);
        clip-path: polygon(
          0% 45%,
          16% 44%,
          33% 50%,
          54% 60%,
          70% 61%,
          84% 59%,
          100% 52%,
          100% 100%,
          0% 100%
        );
        transition: background-color 0.8s;
      }
      .footer-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
        gap: 60px;
        max-width: 1200px;
        margin: 0 auto;
      }
      .icon-btn {
        color: #94a3b8;
        font-size: 1.2rem;
        transition: 0.3s;
      }
      .icon-btn:hover {
        color: white;
        transform: scale(1.1);
      }
      .contact-item {
        margin-bottom: 15px;
        display: flex;
        align-items: center;
        gap: 15px;
        color: #94a3b8;
        transition: 0.3s;
      }
      .contact-item i {
        color: var(--p-primary);
      }
      .contact-item:hover {
        color: white;
        transform: translateX(5px);
      }
      .copyright {
        margin-top: 80px;
        text-align: center;
        padding-top: 30px;
        border-top: 1px solid rgba(255, 255, 255, 0.05);
        color: #475569;
        font-size: 0.9rem;
      }
    </style>
  </head>
  <body
    class="bg-slate-50 text-slate-800 dark:bg-slate-950 dark:text-slate-100 min-h-screen flex flex-col relative transition-colors duration-300"
  >
    <!-- BACKGROUND PARTICLES -->
    <div
      id="particles-js"
      class="fixed inset-0 pointer-events-none z-0 opacity-20"
    ></div>

    <!-- üîπ HEADER -->
    <header
      class="fixed top-0 w-full z-50 glass-panel border-b border-white/20 dark:border-white/5 transition-all duration-300"
      id="main-header"
    >
      <div
        class="container mx-auto px-4 h-20 flex items-center justify-between"
      >
        <!-- Logo Block -->
        <div
          class="flex items-center gap-3 cursor-pointer group"
          onclick="window.scrollTo({ top: 0, behavior: 'smooth' })"
        >
          <div
            class="w-10 h-10 rounded-full bg-gradient-to-br from-purple-500 to-cyan-500 flex items-center justify-center text-white font-bold text-xl shadow-lg group-hover:scale-110 transition-transform"
          >
            <i class="fas fa-atom text-xl group-hover:animate-spin"></i>
          </div>
          <span
            class="font-display font-bold text-xl md:text-2xl tracking-tight text-slate-800 dark:text-white"
          >
            ChemStudy <span class="text-purple-500">Expert</span>
          </span>
        </div>

        <!-- Desktop Menu -->
        <nav class="hidden md:flex items-center gap-6 font-medium text-sm">
          <a
            href="#kim-loai-chuyen-tiep"
            class="hover:text-purple-500 transition-colors py-2"
            >I. Kim Lo·∫°i Chuy·ªÉn Ti·∫øp</a
          >
          <a
            href="#phuc-chat"
            class="hover:text-cyan-500 transition-colors py-2"
            >II. Ph·ª©c Ch·∫•t</a
          >
          <a
            href="#thi-nghiem"
            class="hover:text-rose-500 transition-colors py-2"
            >Th√≠ Nghi·ªám ·∫¢o</a
          >
          <a
            href="#game-zone"
            class="px-4 py-2 rounded-full bg-gradient-to-r from-purple-500 to-cyan-600 text-white shadow-md hover:shadow-lg transform hover:-translate-y-0.5 transition-all"
          >
            <i class="fas fa-gamepad mr-2"></i>Luy·ªán t·∫≠p
          </a>
        </nav>

        <!-- Tools -->
        <div class="flex items-center gap-3">
          <button
            id="theme-toggle"
            class="w-10 h-10 rounded-full bg-slate-200 dark:bg-slate-800 flex items-center justify-center text-slate-600 dark:text-yellow-400 hover:bg-slate-300 dark:hover:bg-slate-700 transition-colors shadow-sm"
          >
            <i class="fas fa-sun text-lg dark:hidden"></i>
            <i class="fas fa-moon text-lg hidden dark:block"></i>
          </button>
          <!-- Mobile Menu Button -->
          <button
            class="md:hidden w-10 h-10 text-slate-800 dark:text-white"
            onclick="
              document.getElementById('mobile-menu').classList.toggle('hidden')
            "
          >
            <i class="fas fa-bars text-xl"></i>
          </button>
        </div>
      </div>

      <!-- Mobile Menu Dropdown -->
      <div
        id="mobile-menu"
        class="hidden md:hidden glass-panel border-t border-slate-200 dark:border-slate-800 p-4 absolute w-full left-0 top-20 shadow-xl"
      >
        <div class="flex flex-col gap-4">
          <a
            href="#kim-loai-chuyen-tiep"
            class="block p-2 hover:bg-slate-100 dark:hover:bg-slate-800 rounded"
            >I. Kim Lo·∫°i Chuy·ªÉn Ti·∫øp</a
          >
          <a
            href="#phuc-chat"
            class="block p-2 hover:bg-slate-100 dark:hover:bg-slate-800 rounded"
            >II. Ph·ª©c Ch·∫•t</a
          >
          <a
            href="#thi-nghiem"
            class="block p-2 hover:bg-slate-100 dark:hover:bg-slate-800 rounded"
            >Th√≠ Nghi·ªám</a
          >
          <a href="#game-zone" class="block p-2 text-purple-500 font-bold"
            >Luy·ªán t·∫≠p ngay</a
          >
        </div>
      </div>
    </header>

    <!-- üîπ HERO SECTION -->
    <section
      class="relative min-h-[95vh] flex items-center justify-center pt-20 overflow-hidden"
    >
      <div
        class="absolute inset-0 z-0 bg-animated opacity-10 dark:opacity-30"
      ></div>
      <div class="container mx-auto px-4 z-10 text-center relative">
        <!-- Animated 3D Orbitals -->
        <div
          class="absolute top-10 left-10 md:left-20 animate-float opacity-30 dark:opacity-50"
        >
          <svg
            width="100"
            height="100"
            viewBox="0 0 100 100"
            class="stroke-purple-500 fill-none stroke-2"
          >
            <circle cx="50" cy="50" r="20" />
            <ellipse
              cx="50"
              cy="50"
              rx="40"
              ry="15"
              transform="rotate(45 50 50)"
            />
            <ellipse
              cx="50"
              cy="50"
              rx="40"
              ry="15"
              transform="rotate(-45 50 50)"
            />
          </svg>
        </div>
        <div
          class="absolute bottom-20 right-10 md:right-20 animate-float opacity-30 dark:opacity-50"
          style="animation-delay: 2s"
        >
          <div class="text-6xl text-cyan-500 font-display font-bold">
            [Cu(NH‚ÇÉ)‚ÇÑ]¬≤‚Å∫
          </div>
        </div>

        <div
          class="inline-block px-4 py-2 rounded-full bg-purple-100 dark:bg-purple-900/30 text-purple-600 dark:text-purple-300 font-semibold text-sm mb-6 border border-purple-200 dark:border-purple-800 animate-pulse"
        >
          H√≥a H·ªçc L·ªõp 12 - Ch∆∞∆°ng 8
        </div>

        <h1
          class="font-display text-5xl md:text-7xl font-bold mb-6 tracking-tight leading-tight"
        >
          Kim Lo·∫°i <span class="text-gradient">Chuy·ªÉn Ti·∫øp</span> <br />
          & <span class="text-gradient">Ph·ª©c Ch·∫•t</span>
        </h1>

        <p
          class="text-lg md:text-xl text-slate-600 dark:text-slate-300 max-w-3xl mx-auto mb-10 leading-relaxed"
        >
          Kh√°m ph√° v·∫ª ƒë·∫πp c·ªßa s·ª± ƒëa s·∫Øc m√†u t·ª´ c√°c ion kim lo·∫°i chuy·ªÉn ti·∫øp.
          Hi·ªÉu s√¢u v·ªÅ li√™n k·∫øt ph·ªëi tr√≠ v√† c·∫•u tr√∫c kh√¥ng gian c·ªßa ph·ª©c ch·∫•t
          th√¥ng qua m√¥ h√¨nh 3D t∆∞∆°ng t√°c.
        </p>

        <button
          onclick="
            document
              .getElementById('kim-loai-chuyen-tiep')
              .scrollIntoView({ behavior: 'smooth' })
          "
          class="group relative px-8 py-4 bg-gradient-to-r from-purple-600 to-cyan-600 hover:from-purple-500 hover:to-cyan-500 text-white font-bold rounded-full text-lg shadow-xl hover:shadow-2xl transition-all transform hover:-translate-y-1"
        >
          <span
            ><i
              class="fas fa-atom mr-2 group-hover:rotate-180 transition-transform duration-700"
            ></i>
            V√†o B√†i H·ªçc</span
          >
          <div
            class="absolute inset-0 rounded-full bg-white/20 blur-md opacity-0 group-hover:opacity-100 transition-opacity"
          ></div>
        </button>
      </div>
    </section>

    <!-- MAIN CONTENT -->
    <main class="container mx-auto px-4 py-10 space-y-32">
      <!-- =========================================================
             SECTION I: KIM LO·∫†I CHUY·ªÇN TI·∫æP (TRANSITION METALS)
             ========================================================= -->
      <section id="kim-loai-chuyen-tiep" class="scroll-mt-28">
        <div class="flex items-center gap-4 mb-10">
          <div
            class="w-14 h-14 rounded-2xl bg-purple-600 text-white flex items-center justify-center text-3xl shadow-lg shadow-purple-600/30"
          >
            <i class="fas fa-layer-group"></i>
          </div>
          <h2 class="font-display text-3xl md:text-4xl font-bold">
            I. Kim Lo·∫°i Chuy·ªÉn Ti·∫øp D√£y Th·ª© Nh·∫•t
          </h2>
        </div>

        <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
          <!-- üß† A. L√ù THUY·∫æT: ƒê·∫°i c∆∞∆°ng -->
          <div class="space-y-6">
            <div class="glass-card p-6 border-l-4 border-purple-500">
              <h3
                class="font-display text-xl font-bold mb-4 flex items-center text-purple-600 dark:text-purple-400"
              >
                <i class="fas fa-book-open mr-2"></i> ƒê·ªãnh Nghƒ©a & V·ªã Tr√≠
              </h3>
              <ul
                class="space-y-3 text-slate-700 dark:text-slate-300 list-disc pl-5"
              >
                <li>
                  <strong class="text-slate-900 dark:text-white"
                    >ƒê·ªãnh nghƒ©a:</strong
                  >
                  C√≥ l·ªõp v·ªè electron d ho·∫∑c f ch∆∞a b√£o h√≤a ·ªü tr·∫°ng th√°i nguy√™n
                  t·ª≠ ho·∫∑c ion.
                </li>
                <li>
                  <strong class="text-slate-900 dark:text-white"
                    >D√£y th·ª© nh·∫•t:</strong
                  >
                  G·ªìm 9 nguy√™n t·ªë t·ª´ Scandium (Sc, Z=21) ƒë·∫øn Copper (Cu, Z=29).
                  Thu·ªôc chu k√¨ 4, nh√≥m B.
                </li>
                <li>
                  <strong class="text-slate-900 dark:text-white"
                    >C·∫•u h√¨nh e chung:</strong
                  >
                  <code>[Ar]3d¬π‚Åª¬π‚Å∞4s¬π‚Åª¬≤</code>. Electron cu·ªëi c√πng ƒëi·ªÅn v√†o ph√¢n
                  l·ªõp 3d (b√™n trong).
                </li>
                <li>
                  <strong class="text-slate-900 dark:text-white text-rose-500"
                    >Ngo·∫°i l·ªá:</strong
                  >
                  <br />Cr: <code>[Ar]3d‚Åµ4s¬π</code> (B√°n b√£o h√≤a b·ªÅn). <br />Cu:
                  <code>[Ar]3d¬π‚Å∞4s¬π</code> (B√£o h√≤a b·ªÅn).
                </li>
              </ul>
            </div>

            <!-- Interactive Config Builder -->
            <div
              class="glass-card p-6 border-t-4 border-cyan-500 relative overflow-hidden"
            >
              <div
                class="absolute top-0 right-0 px-3 py-1 bg-cyan-500 text-white text-xs font-bold rounded-bl-lg"
              >
                M√î PH·ªéNG
              </div>
              <h3 class="font-bold text-lg mb-4">X√¢y D·ª±ng C·∫•u H√¨nh Electron</h3>
              <p class="text-sm text-slate-500 mb-4">
                Ch·ªçn nguy√™n t·ªë ƒë·ªÉ xem s·ª± ph√¢n b·ªë electron v√†o orbital 3d v√† 4s.
              </p>

              <div class="flex flex-wrap gap-2 mb-4 justify-center">
                <button
                  onclick="setConfig('Sc')"
                  class="px-3 py-1 bg-slate-200 dark:bg-slate-700 rounded hover:bg-purple-500 hover:text-white transition"
                >
                  Sc (21)
                </button>
                <button
                  onclick="setConfig('Cr')"
                  class="px-3 py-1 bg-rose-200 dark:bg-rose-900/50 text-rose-700 dark:text-rose-300 font-bold rounded hover:bg-rose-500 hover:text-white transition"
                >
                  Cr (24)*
                </button>
                <button
                  onclick="setConfig('Fe')"
                  class="px-3 py-1 bg-slate-200 dark:bg-slate-700 rounded hover:bg-purple-500 hover:text-white transition"
                >
                  Fe (26)
                </button>
                <button
                  onclick="setConfig('Cu')"
                  class="px-3 py-1 bg-rose-200 dark:bg-rose-900/50 text-rose-700 dark:text-rose-300 font-bold rounded hover:bg-rose-500 hover:text-white transition"
                >
                  Cu (29)*
                </button>
              </div>

              <div
                class="bg-slate-100 dark:bg-slate-800 p-4 rounded-lg flex flex-col items-center"
              >
                <div
                  class="text-xl font-mono font-bold mb-4 text-purple-600"
                  id="config-text"
                >
                  [Ar]...
                </div>
                <div class="flex gap-4 items-end">
                  <div class="flex flex-col items-center">
                    <div class="flex gap-1" id="orbital-3d">
                      <!-- JS will inject 5 boxes here -->
                    </div>
                    <span class="text-sm font-bold mt-1">3d</span>
                  </div>
                  <div class="flex flex-col items-center">
                    <div class="orbital-box" id="orbital-4s"></div>
                    <span class="text-sm font-bold mt-1">4s</span>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <!-- üé® B. M√î H√åNH: M√†u S·∫Øc & Tr·∫°ng Th√°i Oxi H√≥a -->
          <div class="space-y-6">
            <div class="glass-card p-6">
              <h3 class="font-bold text-lg mb-2 text-cyan-600">
                M√†u S·∫Øc Ion Trong Dung D·ªãch
              </h3>
              <p class="text-sm text-slate-600 dark:text-slate-400 mb-4">
                Kim lo·∫°i chuy·ªÉn ti·∫øp c√≥ nhi·ªÅu tr·∫°ng th√°i oxi h√≥a v√† m√†u s·∫Øc ƒë·∫∑c
                tr∆∞ng do c√°c electron d ch∆∞a b√£o h√≤a.
              </p>

              <div class="grid grid-cols-2 gap-4">
                <!-- Cr3+ -->
                <div
                  class="p-4 rounded-lg bg-slate-50 dark:bg-slate-800 flex flex-col items-center cursor-pointer hover:bg-purple-50 transition border border-transparent hover:border-purple-300"
                  onclick="showFlaskColor('purple', 'Cr¬≥‚Å∫', 'Xanh t√≠m')"
                >
                  <div
                    class="w-12 h-16 bg-purple-600/80 rounded-b-xl rounded-t-sm mb-2 shadow-inner border border-white/20"
                  ></div>
                  <span class="font-bold">Cr¬≥‚Å∫</span>
                </div>
                <!-- Mn2+ -->
                <div
                  class="p-4 rounded-lg bg-slate-50 dark:bg-slate-800 flex flex-col items-center cursor-pointer hover:bg-pink-50 transition border border-transparent hover:border-pink-300"
                  onclick="showFlaskColor('pink', 'Mn¬≤‚Å∫', 'H·ªìng nh·∫°t')"
                >
                  <div
                    class="w-12 h-16 bg-pink-300/60 rounded-b-xl rounded-t-sm mb-2 shadow-inner border border-white/20"
                  ></div>
                  <span class="font-bold">Mn¬≤‚Å∫</span>
                </div>
                <!-- Fe3+ -->
                <div
                  class="p-4 rounded-lg bg-slate-50 dark:bg-slate-800 flex flex-col items-center cursor-pointer hover:bg-yellow-50 transition border border-transparent hover:border-yellow-300"
                  onclick="showFlaskColor('yellow', 'Fe¬≥‚Å∫', 'V√†ng nh·∫°t')"
                >
                  <div
                    class="w-12 h-16 bg-yellow-400/60 rounded-b-xl rounded-t-sm mb-2 shadow-inner border border-white/20"
                  ></div>
                  <span class="font-bold">Fe¬≥‚Å∫</span>
                </div>
                <!-- Cu2+ -->
                <div
                  class="p-4 rounded-lg bg-slate-50 dark:bg-slate-800 flex flex-col items-center cursor-pointer hover:bg-blue-50 transition border border-transparent hover:border-blue-300"
                  onclick="showFlaskColor('blue', 'Cu¬≤‚Å∫', 'Xanh lam')"
                >
                  <div
                    class="w-12 h-16 bg-blue-500/80 rounded-b-xl rounded-t-sm mb-2 shadow-inner border border-white/20"
                  ></div>
                  <span class="font-bold">Cu¬≤‚Å∫</span>
                </div>
              </div>

              <div
                id="flask-display"
                class="mt-4 p-3 bg-slate-100 dark:bg-slate-900 rounded text-center text-sm italic h-12 flex items-center justify-center transition-colors duration-500"
              >
                Ch·ªçn ion ƒë·ªÉ xem m√†u dung d·ªãch th·ª±c t·∫ø
              </div>
            </div>

            <div class="glass-card p-6 border-l-4 border-yellow-500">
              <h3 class="font-display text-lg font-bold mb-2 text-yellow-600">
                T√≠nh Ch·∫•t V·∫≠t L√Ω
              </h3>
              <ul class="text-sm space-y-2 list-disc pl-4">
                <li>
                  Nhi·ªát ƒë·ªô n√≥ng ch·∫£y/s√¥i cao, ƒë·ªô c·ª©ng l·ªõn (h∆°n nh√≥m IA, IIA).
                </li>
                <li>D·∫´n ƒëi·ªán/nhi·ªát t·ªët (Cu d·∫´n ƒëi·ªán t·ªët nh·∫•t d√£y).</li>
                <li>C√≥ t·ª´ t√≠nh (ƒë·∫∑c bi·ªát l√† Fe, Co, Ni).</li>
              </ul>
            </div>
          </div>
        </div>

        <!-- üß™ C. TH√ç NGHI·ªÜM: Chu·∫©n ƒë·ªô Fe2+ -->
        <div
          id="thi-nghiem"
          class="mt-12 glass-card p-8 border-t-4 border-rose-500 relative"
        >
          <div
            class="absolute top-0 left-0 px-4 py-1 bg-rose-500 text-white font-bold rounded-br-lg"
          >
            TH√ç NGHI·ªÜM ·∫¢O
          </div>
          <h3 class="font-display text-2xl font-bold mb-4 text-center mt-4">
            Chu·∫©n ƒê·ªô Fe¬≤‚Å∫ B·∫±ng KMnO‚ÇÑ (M√¥i tr∆∞·ªùng Acid)
          </h3>

          <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
            <!-- Left: Controls & Info -->
            <div class="col-span-1 space-y-4">
              <div class="bg-slate-50 dark:bg-slate-800 p-4 rounded-lg text-sm">
                <p class="font-bold mb-2">H√≥a ch·∫•t:</p>
                <ul class="list-disc pl-4 space-y-1">
                  <li>
                    B√¨nh tam gi√°c: FeSO‚ÇÑ + H‚ÇÇSO‚ÇÑ lo√£ng (Kh√¥ng m√†u/Xanh r·∫•t
                    nh·∫°t).
                  </li>
                  <li>Burette: KMnO‚ÇÑ (T√≠m ƒë·∫≠m).</li>
                </ul>
              </div>
              <div class="bg-slate-50 dark:bg-slate-800 p-4 rounded-lg text-sm">
                <p class="font-bold mb-2">ƒêi·ªÅu khi·ªÉn:</p>
                <button
                  id="titrate-btn"
                  onclick="toggleTitration()"
                  class="w-full py-2 bg-rose-500 hover:bg-rose-600 text-white rounded font-bold transition"
                >
                  <i class="fas fa-play mr-2"></i>B·∫Øt ƒë·∫ßu nh·ªè gi·ªçt
                </button>
                <button
                  onclick="resetTitration()"
                  class="w-full mt-2 py-2 bg-slate-300 hover:bg-slate-400 dark:bg-slate-700 dark:hover:bg-slate-600 rounded font-bold transition"
                >
                  <i class="fas fa-redo mr-2"></i>L√†m l·∫°i
                </button>
              </div>
              <div
                id="titration-status"
                class="font-bold text-center text-rose-600 min-h-[1.5rem]"
              ></div>
            </div>

            <!-- Center: Visual Simulation -->
            <div
              class="col-span-1 md:col-span-2 flex justify-center items-end bg-slate-200 dark:bg-slate-900 rounded-xl relative h-[400px] overflow-hidden border border-slate-300 dark:border-slate-700"
            >
              <!-- Burette -->
              <div
                class="absolute top-0 left-1/2 -translate-x-1/2 w-4 h-40 bg-slate-300/50 border-x border-slate-400 z-10 flex flex-col justify-end"
              >
                <div
                  class="w-full bg-purple-800 transition-all duration-300"
                  style="height: 100%"
                  id="kmno4-level"
                ></div>
              </div>
              <div
                class="absolute top-40 left-1/2 -translate-x-1/2 w-1 h-4 bg-slate-500"
              ></div>
              <!-- Tip -->

              <!-- Drop -->
              <div
                id="drop"
                class="absolute top-44 left-1/2 -translate-x-1/2 w-2 h-2 rounded-full bg-purple-800 opacity-0"
              ></div>

              <!-- Flask -->
              <div class="relative w-32 h-40 mb-10">
                <!-- Neck -->
                <div
                  class="absolute -top-10 left-1/2 -translate-x-1/2 w-8 h-20 bg-white/20 border-x border-white/40 z-0"
                ></div>
                <!-- Body -->
                <div
                  class="w-full h-full bg-white/10 rounded-b-full rounded-t-3xl border border-white/30 backdrop-blur-sm overflow-hidden relative"
                >
                  <!-- Liquid -->
                  <div
                    id="flask-liquid"
                    class="absolute bottom-0 w-full h-1/2 bg-cyan-50/30 transition-colors duration-500"
                  ></div>
                </div>
              </div>

              <!-- Equation Overlay -->
              <div
                class="absolute bottom-2 right-2 text-xs text-slate-500 font-mono bg-white/80 dark:bg-black/50 p-2 rounded"
              >
                MnO‚ÇÑ‚Åª + 5Fe¬≤‚Å∫ + 8H‚Å∫ ‚Üí Mn¬≤‚Å∫ + 5Fe¬≥‚Å∫ + 4H‚ÇÇO
              </div>
            </div>
          </div>
        </div>
      </section>

      <!-- =========================================================
             SECTION II: PH·ª®C CH·∫§T (COMPLEX COMPOUNDS)
             ========================================================= -->
      <section id="phuc-chat" class="scroll-mt-28">
        <div class="flex items-center gap-4 mb-10">
          <div
            class="w-14 h-14 rounded-2xl bg-cyan-600 text-white flex items-center justify-center text-3xl shadow-lg shadow-cyan-600/30"
          >
            <i class="fas fa-cubes-stacked"></i>
          </div>
          <h2 class="font-display text-3xl md:text-4xl font-bold">
            II. Ph·ª©c Ch·∫•t
          </h2>
        </div>

        <div class="grid grid-cols-1 lg:grid-cols-2 gap-8 mb-12">
          <!-- Theory -->
          <div class="glass-card p-6">
            <h3 class="font-bold text-xl mb-4 text-cyan-600">
              C·∫•u T·∫°o Ph·ª©c Ch·∫•t
            </h3>
            <div
              class="bg-slate-100 dark:bg-slate-800 p-4 rounded-lg mb-4 text-center"
            >
              <span class="text-2xl font-mono font-bold">
                [<span class="text-purple-500">M</span>(<span
                  class="text-green-500"
                  >L</span
                >)‚Çô]·µê‚Å∫
              </span>
            </div>
            <ul class="space-y-3 text-sm">
              <li class="flex items-start gap-2">
                <span class="font-bold text-purple-500 min-w-[120px]"
                  >Nguy√™n t·ª≠ trung t√¢m (M):</span
                >
                <span
                  >Ion kim lo·∫°i chuy·ªÉn ti·∫øp (c√≥ orbital tr·ªëng). VD: Cu¬≤‚Å∫,
                  Fe¬≥‚Å∫.</span
                >
              </li>
              <li class="flex items-start gap-2">
                <span class="font-bold text-green-500 min-w-[120px]"
                  >Ph·ªëi t·ª≠ (L):</span
                >
                <span>Ph√¢n t·ª≠/Ion c√≥ c·∫∑p e t·ª± do. VD: H‚ÇÇO, NH‚ÇÉ, Cl‚Åª, OH‚Åª.</span>
              </li>
              <li class="flex items-start gap-2">
                <span class="font-bold text-slate-500 min-w-[120px]"
                  >Li√™n k·∫øt:</span
                >
                <span>Li√™n k·∫øt cho - nh·∫≠n (Ph·ªëi t·ª≠ ‚Üí M).</span>
              </li>
            </ul>
          </div>

          <!-- 3D Geometry Simulation -->
          <div class="glass-card p-6 border-2 border-cyan-500/30">
            <div class="flex justify-between items-center mb-4">
              <h3 class="font-bold text-lg">M√¥ H√¨nh Kh√¥ng Gian 3D</h3>
              <select
                id="geometry-select"
                onchange="changeGeometry(this.value)"
                class="bg-slate-200 dark:bg-slate-700 rounded px-2 py-1 text-sm border-none focus:ring-2 focus:ring-cyan-500"
              >
                <option value="octahedral">B√°t di·ªán [ML‚ÇÜ]</option>
                <option value="tetrahedral">T·ª© di·ªán [ML‚ÇÑ]</option>
                <option value="square">Vu√¥ng ph·∫≥ng [ML‚ÇÑ]</option>
              </select>
            </div>

            <div class="bg-slate-900 rounded-xl relative">
              <div class="scene">
                <div class="molecule" id="molecule-3d">
                  <!-- Atoms injected by JS -->
                </div>
              </div>
              <div
                class="absolute bottom-2 left-2 text-xs text-slate-400"
                id="geo-desc"
              >
                [Cu(H‚ÇÇO)‚ÇÜ]¬≤‚Å∫ - D·∫°ng b√°t di·ªán
              </div>
            </div>
          </div>
        </div>

        <!-- Ligand Exchange Mechanism -->
        <div class="glass-card p-8 border-t-4 border-green-500">
          <h3
            class="font-display text-2xl font-bold mb-6 text-center text-green-600"
          >
            C∆° Ch·∫ø Ph·∫£n ·ª®ng Trao ƒê·ªïi Ph·ªëi T·ª≠
          </h3>

          <div class="flex flex-col items-center">
            <p
              class="text-center text-slate-600 dark:text-slate-400 max-w-2xl mb-6"
            >
              Quan s√°t qu√° tr√¨nh NH‚ÇÉ thay th·∫ø H‚ÇÇO trong ph·ª©c ch·∫•t c·ªßa ƒê·ªìng (II).
              <br />
              <code class="text-sm bg-slate-200 dark:bg-slate-800 px-2 rounded"
                >[Cu(H‚ÇÇO)‚ÇÜ]¬≤‚Å∫ (Xanh nh·∫°t) + 4NH‚ÇÉ ‚Üí [Cu(NH‚ÇÉ)‚ÇÑ(H‚ÇÇO)‚ÇÇ]¬≤‚Å∫ (Xanh
                th·∫´m) + 4H‚ÇÇO</code
              >
            </p>

            <div
              class="relative w-64 h-64 bg-slate-100 dark:bg-slate-800 rounded-full border-4 border-slate-300 dark:border-slate-600 flex items-center justify-center transition-colors duration-1000"
              id="exchange-container"
            >
              <!-- Central Ion -->
              <div
                class="w-12 h-12 rounded-full bg-blue-500 z-10 flex items-center justify-center text-white font-bold shadow-lg"
              >
                Cu
              </div>

              <!-- Ligands (H2O initially) -->
              <!-- Positioned absolutely around center -->
              <div
                class="ligand-anim absolute w-8 h-8 bg-cyan-200 rounded-full flex items-center justify-center text-[10px] font-bold text-cyan-800"
                style="transform: translate(0, -60px)"
              >
                H‚ÇÇO
              </div>
              <div
                class="ligand-anim absolute w-8 h-8 bg-cyan-200 rounded-full flex items-center justify-center text-[10px] font-bold text-cyan-800"
                style="transform: translate(0, 60px)"
              >
                H‚ÇÇO
              </div>
              <div
                class="ligand-anim absolute w-8 h-8 bg-cyan-200 rounded-full flex items-center justify-center text-[10px] font-bold text-cyan-800"
                style="transform: translate(-60px, 0)"
              >
                H‚ÇÇO
              </div>
              <div
                class="ligand-anim absolute w-8 h-8 bg-cyan-200 rounded-full flex items-center justify-center text-[10px] font-bold text-cyan-800"
                style="transform: translate(60px, 0)"
              >
                H‚ÇÇO
              </div>
              <!-- Axial ligands (don't change in simplified model usually, but equation says 4NH3) -->
            </div>

            <button
              onclick="startExchange()"
              class="mt-6 px-6 py-2 bg-green-500 text-white rounded-full font-bold hover:bg-green-600 transition shadow-lg"
            >
              <i class="fas fa-sync-alt mr-2"></i>Th√™m NH‚ÇÉ
            </button>
          </div>
        </div>
      </section>

      <!-- =========================================================
             SECTION F: GAME & LUY·ªÜN T·∫¨P
             ========================================================= -->
      <section id="game-zone" class="scroll-mt-28 mb-20">
        <div class="text-center mb-10">
          <span
            class="text-purple-500 font-bold tracking-wider text-sm uppercase"
            >Gamification</span
          >
          <h2 class="font-display text-4xl font-bold mt-2">
            ƒê·∫•u Tr∆∞·ªùng Ph·ª©c Ch·∫•t
          </h2>
        </div>

        <div
          class="max-w-3xl mx-auto glass-card p-8 border-t-4 border-indigo-500 shadow-2xl relative overflow-hidden"
        >
          <!-- Progress Bar -->
          <div
            class="absolute top-0 left-0 h-1 bg-indigo-500 transition-all duration-500"
            id="quiz-progress"
            style="width: 0%"
          ></div>

          <!-- Quiz Container -->
          <div id="quiz-container">
            <div
              id="quiz-question"
              class="text-xl font-bold mb-6 text-slate-800 dark:text-white min-h-[60px]"
            >
              S·∫µn s√†ng th·ª≠ th√°ch ki·∫øn th·ª©c ch∆∞∆°ng 8 ch∆∞a?
            </div>

            <div
              id="quiz-options"
              class="grid grid-cols-1 md:grid-cols-2 gap-4"
            >
              <!-- Options generated by JS -->
            </div>

            <div
              id="quiz-feedback"
              class="mt-6 hidden p-4 rounded-lg text-center font-bold"
            ></div>

            <div class="mt-8 flex justify-between items-center">
              <div class="text-sm font-bold text-slate-500">
                ƒêi·ªÉm:
                <span id="quiz-score" class="text-indigo-500 text-lg">0</span>
              </div>
              <button
                id="next-btn"
                onclick="nextQuestion()"
                class="px-6 py-2 bg-indigo-600 text-white rounded-full hover:bg-indigo-700 transition hidden"
              >
                C√¢u ti·∫øp theo <i class="fas fa-arrow-right ml-2"></i>
              </button>
              <button
                id="start-btn"
                onclick="startQuiz()"
                class="px-8 py-3 bg-gradient-to-r from-purple-500 to-cyan-600 text-white font-bold rounded-full shadow-lg hover:scale-105 transition"
              >
                B·∫Øt ƒê·∫ßu Ngay
              </button>
            </div>
          </div>
        </div>
      </section>

      <!-- NAVIGATION BUTTONS (REQUIRED) -->
      <section class="text-center space-x-4 mb-20">
        <button
          onclick="window.location.href = 'bai_tap.html'"
          style="
            display: inline-flex;
            align-items: center;
            gap: 10px;
            padding: 14px 30px;
            font-size: 1rem;
            font-weight: 600;
            border-radius: 999px;
            border: none;
            cursor: pointer;
            color: #fff;
            background: linear-gradient(135deg, #3b82f6, #6366f1);
            box-shadow: 0 10px 30px rgba(59, 130, 246, 0.35);
            transition: 0.3s ease;
          "
          onmouseover="
            this.style.transform = 'translateY(-3px) scale(1.03)';
            this.style.boxShadow = '0 18px 45px rgba(99,102,241,.55)';
          "
          onmouseout="
            this.style.transform = 'translateY(0) scale(1)';
            this.style.boxShadow = '0 10px 30px rgba(59,130,246,.35)';
          "
        >
          <i class="fas fa-pen-to-square"></i> B√†i t·∫≠p c·ªßng c·ªë
        </button>
        <button
          onclick="window.location.href = '../chemstudyteen.html'"
          style="
            display: inline-flex;
            align-items: center;
            gap: 10px;
            padding: 14px 30px;
            font-size: 1rem;
            font-weight: 600;
            border-radius: 999px;
            border: none;
            cursor: pointer;
            color: #fff;
            background: linear-gradient(135deg, #22c55e, #16a34a);
            box-shadow: 0 10px 30px rgba(34, 197, 94, 0.35);
            transition: 0.3s ease;
          "
          onmouseover="
            this.style.transform = 'translateY(-3px)';
            this.style.boxShadow = '0 18px 45px rgba(22,163,74,.55)';
          "
          onmouseout="
            this.style.transform = 'translateY(0)';
            this.style.boxShadow = '0 10px 30px rgba(34,197,94,.35)';
          "
        >
          <i class="fas fa-arrow-left"></i> Quay v·ªÅ CS Expert
        </button>
      </section>
    </main>

    <!-- üîπ FOOTER -->
    <footer>
      <div class="footer-waves"></div>
      <div class="footer-grid">
        <div class="footer-brand" data-aos="fade-right">
          <h2>EDUMATTER</h2>
          <p style="color: #94a3b8; line-height: 1.8">
            Ki·∫øn t·∫°o m√¥i tr∆∞·ªùng h·ªçc t·∫≠p c·∫£m x√∫c, n∆°i tri th·ª©c ƒë∆∞·ª£c s·ªë h√≥a v√†
            truy·ªÅn t·∫£i ƒë·∫ßy c·∫£m h·ª©ng.
          </p>
          <div style="display: flex; gap: 15px; margin-top: 30px">
            <a href="https://www.facebook.com/ducnt214" class="icon-btn"
              ><i class="fab fa-facebook"></i
            ></a>
            <a href="https://github.com/ducnt2104" class="icon-btn"
              ><i class="fab fa-github"></i
            ></a>
            <a href="https://www.tiktok.com/@ktbtcthm210" class="icon-btn"
              ><i class="fab fa-tiktok"></i
            ></a>
          </div>
        </div>
        <div class="footer-links" data-aos="fade-up">
          <h3>Li√™n h·ªá nhanh</h3>
          <div class="contact-item">
            <i class="fas fa-envelope"></i><span>ducnt21042010@gmail.com</span>
          </div>
          <div class="contact-item">
            <i class="fas fa-phone"></i><span>034 226 6204</span>
          </div>
          <div class="contact-item">
            <i class="fas fa-location-dot"></i
            ><span>THPT T√¥n ƒê·ª©c Th·∫Øng, ƒê·ªìng Nai</span>
          </div>
        </div>
        <div class="footer-links" data-aos="fade-left">
          <h4>ƒê·ªôi ng≈© DNT</h4>
          <p style="color: #94a3b8">
            "S√°ng t·∫°o kh√¥ng ng·ª´ng - V∆∞∆°n t·∫ßm tri th·ª©c"
          </p>
          <div
            style="
              margin-top: 20px;
              padding: 15px;
              background: rgba(255, 255, 255, 0.05);
              border-radius: 15px;
            "
          >
            <p style="font-size: 0.8rem; color: #fff">
              D·ª± √°n ƒë∆∞·ª£c ph√°t tri·ªÉn b·ªüi c√°c th√†nh vi√™n ƒëam m√™ c√¥ng ngh·ªá t·∫°i Vi·ªát
              Nam.
            </p>
          </div>
        </div>
      </div>
      <div class="copyright">
        <p>
          ¬© 2024 EDUMATTER Educational Ecosystem. Designed with
          <i class="fas fa-heart" style="color: #ef4444"></i> by DNT Team.
        </p>
      </div>
    </footer>

    <!-- 6. JAVASCRIPT LOGIC -->
    <script>
      // --- 1. GLOBAL CONFIG & THEME ---
      const themeToggle = document.getElementById("theme-toggle");
      const html = document.documentElement;
      if (
        localStorage.theme === "dark" ||
        (!("theme" in localStorage) &&
          window.matchMedia("(prefers-color-scheme: dark)").matches)
      ) {
        html.classList.add("dark");
      }
      themeToggle.addEventListener("click", () => {
        html.classList.toggle("dark");
        localStorage.theme = html.classList.contains("dark") ? "dark" : "light";
      });

      // --- 2. PARTICLES BACKGROUND ---
      function createParticles() {
        const container = document.getElementById("particles-js");
        for (let i = 0; i < 20; i++) {
          const p = document.createElement("div");
          const size = Math.random() * 8 + 4;
          p.className = "absolute rounded-full bg-purple-400 animate-float";
          p.style.width = `${size}px`;
          p.style.height = `${size}px`;
          p.style.left = `${Math.random() * 100}%`;
          p.style.top = `${Math.random() * 100}%`;
          p.style.animationDuration = `${Math.random() * 5 + 5}s`;
          p.style.opacity = Math.random() * 0.4;
          container.appendChild(p);
        }
      }
      createParticles();

      // --- 3. SIMULATION: ELECTRON CONFIG BUILDER ---
      const configs = {
        Sc: { z: 21, d: 1, s: 2, text: "[Ar]3d¬π4s¬≤" },
        Cr: { z: 24, d: 5, s: 1, text: "[Ar]3d‚Åµ4s¬π (B√°n b√£o h√≤a b·ªÅn)" },
        Fe: { z: 26, d: 6, s: 2, text: "[Ar]3d‚Å∂4s¬≤" },
        Cu: { z: 29, d: 10, s: 1, text: "[Ar]3d¬π‚Å∞4s¬π (B√£o h√≤a b·ªÅn)" },
      };

      function setConfig(el) {
        const data = configs[el];
        document.getElementById("config-text").innerText =
          `${el} (Z=${data.z}): ${data.text}`;

        // Render 3d
        const dContainer = document.getElementById("orbital-3d");
        dContainer.innerHTML = "";
        for (let i = 0; i < 5; i++) {
          const box = document.createElement("div");
          box.className = "orbital-box";
          let content = "";
          if (data.d > i) content += '<span class="electron-up">‚Üë</span>';
          if (data.d > i + 5) content += '<span class="electron-down">‚Üì</span>';
          box.innerHTML = content;
          dContainer.appendChild(box);
        }

        // Render 4s
        const sBox = document.getElementById("orbital-4s");
        let sContent = "";
        if (data.s >= 1) sContent += '<span class="electron-up">‚Üë</span>';
        if (data.s >= 2) sContent += '<span class="electron-down">‚Üì</span>';
        sBox.innerHTML = sContent;
      }
      // Initialize with Sc
      setConfig("Sc");

      // --- 4. INTERACTION: ION COLORS ---
      function showFlaskColor(color, ion, desc) {
        const display = document.getElementById("flask-display");
        const colors = {
          purple: "bg-purple-600",
          pink: "bg-pink-300",
          yellow: "bg-yellow-300",
          blue: "bg-blue-600",
        };

        // Remove old color classes
        Object.values(colors).forEach((c) => display.classList.remove(c));

        // Add new
        display.classList.add(colors[color]);
        display.innerHTML = `<span class="font-bold text-white drop-shadow-md text-lg">${ion}: ${desc}</span>`;

        if (color === "yellow" || color === "pink")
          display.classList.add("text-slate-800");
        else display.classList.remove("text-slate-800");
      }

      // --- 5. EXPERIMENT: TITRATION ---
      let isTitrating = false;
      let titrationInterval;
      let volumeAdded = 0;
      const equivalencePoint = 50; // Arbitrary units for animation duration

      function toggleTitration() {
        const btn = document.getElementById("titrate-btn");
        const drop = document.getElementById("drop");
        const status = document.getElementById("titration-status");
        const liquid = document.getElementById("flask-liquid");
        const kmno4 = document.getElementById("kmno4-level");

        if (isTitrating) {
          // STOP
          clearInterval(titrationInterval);
          isTitrating = false;
          btn.innerHTML = '<i class="fas fa-play mr-2"></i>Ti·∫øp t·ª•c';
          drop.classList.remove("animate-drop");
        } else {
          // START
          isTitrating = true;
          btn.innerHTML = '<i class="fas fa-pause mr-2"></i>D·ª´ng l·∫°i';
          drop.classList.add("animate-drop");
          status.innerText = "ƒêang nh·ªè KMnO‚ÇÑ...";

          titrationInterval = setInterval(() => {
            volumeAdded++;

            // Update Burette Level
            kmno4.style.height = `${100 - (volumeAdded / equivalencePoint) * 30}%`;

            // Near endpoint
            if (
              volumeAdded > equivalencePoint - 10 &&
              volumeAdded < equivalencePoint
            ) {
              status.innerText = "S·∫Øp ƒë·∫øn ƒëi·ªÉm t∆∞∆°ng ƒë∆∞∆°ng...";
              // Flash pink
              liquid.style.backgroundColor = "rgba(244, 114, 182, 0.4)";
              setTimeout(
                () =>
                  (liquid.style.backgroundColor = "rgba(236, 254, 255, 0.3)"),
                200,
              );
            }

            // Endpoint
            if (volumeAdded >= equivalencePoint) {
              clearInterval(titrationInterval);
              isTitrating = false;
              drop.classList.remove("animate-drop");
              btn.disabled = true;
              btn.innerHTML = "Ho√†n th√†nh";
              status.innerHTML =
                "<span class='font-bold text-green-500'>ƒê√É ƒê·∫†T ƒêI·ªÇM T∆Ø∆†NG ƒê∆Ø∆†NG!</span> Dung d·ªãch h√≥a h·ªìng b·ªÅn.";
              liquid.style.backgroundColor = "rgba(244, 114, 182, 0.6)"; // Persistent Pink
            }
          }, 100);
        }
      }

      function resetTitration() {
        clearInterval(titrationInterval);
        isTitrating = false;
        volumeAdded = 0;
        document.getElementById("titrate-btn").disabled = false;
        document.getElementById("titrate-btn").innerHTML =
          '<i class="fas fa-play mr-2"></i>B·∫Øt ƒë·∫ßu nh·ªè gi·ªçt';
        document.getElementById("drop").classList.remove("animate-drop");
        document.getElementById("flask-liquid").style.backgroundColor =
          "rgba(236, 254, 255, 0.3)";
        document.getElementById("kmno4-level").style.height = "100%";
        document.getElementById("titration-status").innerText = "";
      }

      // --- 6. SIMULATION: 3D GEOMETRY ---
      const geometries = {
        octahedral: {
          coords: [
            { x: 0, y: 0, z: 60 },
            { x: 0, y: 0, z: -60 },
            { x: 60, y: 0, z: 0 },
            { x: -60, y: 0, z: 0 },
            { x: 0, y: 60, z: 0 },
            { x: 0, y: -60, z: 0 },
          ],
          desc: "[Cu(H‚ÇÇO)‚ÇÜ]¬≤‚Å∫ - D·∫°ng B√°t di·ªán (Octahedral)",
        },
        tetrahedral: {
          coords: [
            { x: 50, y: 50, z: 50 },
            { x: -50, y: -50, z: 50 },
            { x: 50, y: -50, z: -50 },
            { x: -50, y: 50, z: -50 },
          ],
          desc: "[ZnCl‚ÇÑ]¬≤‚Åª - D·∫°ng T·ª© di·ªán (Tetrahedral)",
        },
        square: {
          coords: [
            { x: 60, y: 0, z: 0 },
            { x: -60, y: 0, z: 0 },
            { x: 0, y: 60, z: 0 },
            { x: 0, y: -60, z: 0 },
          ],
          desc: "[PtCl‚ÇÑ]¬≤‚Åª - D·∫°ng Vu√¥ng ph·∫≥ng (Square Planar)",
        },
      };

      function changeGeometry(type) {
        const container = document.getElementById("molecule-3d");
        const data = geometries[type];
        document.getElementById("geo-desc").innerText = data.desc;

        // Clear
        container.innerHTML = '<div class="atom atom-center shadow-lg">M</div>';

        // Add Ligands
        data.coords.forEach((pos) => {
          const ligand = document.createElement("div");
          ligand.className = "atom ligand shadow-md";
          ligand.innerHTML = "L";
          ligand.style.transform = `translate3d(${pos.x}px, ${pos.y}px, ${pos.z}px)`;

          // Draw Bond (Simplified visual)
          const bond = document.createElement("div");
          bond.className = "bond";
          // Calculate length and rotation is complex in CSS only without a library,
          // so we use a simplified straight line approximation or skip for lightweight code.
          // For this demo, we'll stick to placing atoms correctly.

          container.appendChild(ligand);
        });
      }
      changeGeometry("octahedral"); // Init

      // --- 7. ANIMATION: LIGAND EXCHANGE ---
      function startExchange() {
        const container = document.getElementById("exchange-container");
        const ligands = document.querySelectorAll(".ligand-anim");

        // 1. Change color of container (solution)
        container.style.backgroundColor = "#1e3a8a"; // Dark blue (simulating complex color)
        if (document.documentElement.classList.contains("dark"))
          container.style.backgroundColor = "#172554";

        // 2. Animate text change
        ligands.forEach((l, index) => {
          // Simulate "leaving" and "entering" by changing text and color
          l.style.transition = "all 1s ease";
          l.style.transform = l.style.transform + " scale(1.2)";
          l.style.opacity = "0"; // Old one disappears

          setTimeout(() => {
            l.innerText = "NH‚ÇÉ";
            l.className =
              "ligand-anim absolute w-8 h-8 bg-purple-200 rounded-full flex items-center justify-center text-[10px] font-bold text-purple-800 shadow-lg";
            l.style.opacity = "1";
            l.style.transform = l.style.transform.replace(" scale(1.2)", "");
          }, 1000);
        });
      }

      // --- 8. QUIZ LOGIC ---
      const questions = [
        {
          q: "Ion n√†o sau ƒë√¢y c√≥ c·∫•u h√¨nh electron [Ar]3d‚Åµ?",
          options: ["Fe¬≤‚Å∫", "Fe¬≥‚Å∫", "Cr¬≤‚Å∫", "Zn¬≤‚Å∫"],
          correct: 1,
          explain:
            "Fe (Z=26) l√† [Ar]3d‚Å∂4s¬≤. Fe¬≥‚Å∫ m·∫•t 2e ·ªü 4s v√† 1e ·ªü 3d ‚Üí [Ar]3d‚Åµ (B√°n b√£o h√≤a b·ªÅn).",
        },
        {
          q: "Hi·ªán t∆∞·ª£ng khi nh·ªè dung d·ªãch NH‚ÇÉ d∆∞ v√†o dung d·ªãch CuSO‚ÇÑ?",
          options: [
            "K·∫øt t·ªßa xanh kh√¥ng tan",
            "Dung d·ªãch m√†u v√†ng",
            "Dung d·ªãch xanh lam th·∫´m",
            "Kh√¥ng hi·ªán t∆∞·ª£ng",
          ],
          correct: 2,
          explain:
            "T·∫°o ph·ª©c ch·∫•t tan [Cu(NH‚ÇÉ)‚ÇÑ]¬≤‚Å∫ c√≥ m√†u xanh lam th·∫´m ƒë·∫∑c tr∆∞ng.",
        },
        {
          q: "Ph·ªëi t·ª≠ (Ligand) trong ph·ª©c ch·∫•t l√† g√¨?",
          options: [
            "Lu√¥n l√† ion d∆∞∆°ng",
            "Ch·∫•t nh·∫≠n c·∫∑p electron",
            "Ph√¢n t·ª≠/Ion c√≥ c·∫∑p electron t·ª± do",
            "Kim lo·∫°i chuy·ªÉn ti·∫øp",
          ],
          correct: 2,
          explain:
            "Ph·ªëi t·ª≠ ƒë√≥ng vai tr√≤ l√† ch·∫•t cho c·∫∑p electron (Lewis Base).",
        },
        {
          q: "Trong chu·∫©n ƒë·ªô Fe¬≤‚Å∫ b·∫±ng KMnO‚ÇÑ, vai tr√≤ c·ªßa H‚ÇÇSO‚ÇÑ l√† g√¨?",
          options: [
            "T·∫°o m√¥i tr∆∞·ªùng acid",
            "L√†m ch·∫•t x√∫c t√°c",
            "L√†m ch·∫•t ch·ªâ th·ªã",
            "Kh·ª≠ Fe¬≥‚Å∫",
          ],
          correct: 0,
          explain:
            "H‚Å∫ c·∫ßn thi·∫øt ƒë·ªÉ MnO‚ÇÑ‚Åª oxi h√≥a m·∫°nh, chuy·ªÉn v·ªÅ Mn¬≤‚Å∫ (kh√¥ng m√†u).",
        },
      ];

      let currentQ = 0;
      let score = 0;

      function startQuiz() {
        document.getElementById("start-btn").classList.add("hidden");
        loadQuestion();
      }

      function loadQuestion() {
        const q = questions[currentQ];
        document.getElementById("quiz-question").innerText =
          `C√¢u ${currentQ + 1}: ${q.q}`;
        const optionsDiv = document.getElementById("quiz-options");
        optionsDiv.innerHTML = "";

        document.getElementById("quiz-feedback").classList.add("hidden");
        document.getElementById("next-btn").classList.add("hidden");

        q.options.forEach((opt, index) => {
          const btn = document.createElement("button");
          btn.className =
            "p-4 text-left border rounded-lg hover:bg-purple-50 dark:hover:bg-purple-900/20 transition group";
          btn.onclick = () => checkAnswer(index, btn);
          btn.innerHTML = `<span class="font-bold text-purple-500 mr-2">${["A", "B", "C", "D"][index]}.</span> ${opt}`;
          optionsDiv.appendChild(btn);
        });

        document.getElementById("quiz-progress").style.width =
          `${(currentQ / questions.length) * 100}%`;
      }

      function checkAnswer(selected, btnElement) {
        const q = questions[currentQ];
        const feedback = document.getElementById("quiz-feedback");
        const allBtns = document.getElementById("quiz-options").children;

        for (let btn of allBtns) btn.disabled = true;
        feedback.classList.remove("hidden");

        if (selected === q.correct) {
          score += 10;
          document.getElementById("quiz-score").innerText = score;
          btnElement.classList.add(
            "bg-green-100",
            "border-green-500",
            "dark:bg-green-900",
          );
          feedback.className =
            "mt-6 p-4 rounded-lg text-center font-bold bg-green-100 text-green-700 dark:bg-green-900 dark:text-green-300";
          feedback.innerHTML = `<i class="fas fa-check-circle"></i> Ch√≠nh x√°c! ${q.explain}`;
        } else {
          btnElement.classList.add(
            "bg-rose-100",
            "border-rose-500",
            "dark:bg-rose-900",
          );
          allBtns[q.correct].classList.add(
            "bg-green-100",
            "border-green-500",
            "dark:bg-green-900",
          );
          feedback.className =
            "mt-6 p-4 rounded-lg text-center font-bold bg-rose-100 text-rose-700 dark:bg-rose-900 dark:text-rose-300";
          feedback.innerHTML = `<i class="fas fa-times-circle"></i> Sai r·ªìi. ƒê√°p √°n ƒë√∫ng l√†: ${q.options[q.correct]}. <br><span class="text-sm font-normal">${q.explain}</span>`;
        }

        if (currentQ < questions.length - 1) {
          document.getElementById("next-btn").classList.remove("hidden");
        } else {
          document.getElementById("next-btn").innerText = "Ho√†n Th√†nh";
          document.getElementById("next-btn").onclick = () => {
            alert(`K·∫øt th√∫c! B·∫°n ƒë·∫°t ${score}/${questions.length * 10} ƒëi·ªÉm.`);
            currentQ = 0;
            score = 0;
            document.getElementById("quiz-score").innerText = 0;
            document.getElementById("start-btn").classList.remove("hidden");
            document.getElementById("quiz-question").innerText =
              "S·∫µn s√†ng th·ª≠ th√°ch l·∫°i ch∆∞a?";
            document.getElementById("quiz-options").innerHTML = "";
            document.getElementById("quiz-feedback").classList.add("hidden");
            document.getElementById("next-btn").classList.add("hidden");
          };
          document.getElementById("next-btn").classList.remove("hidden");
        }
      }

      function nextQuestion() {
        currentQ++;
        loadQuestion();
      }
    </script>
  </body>
</html>
