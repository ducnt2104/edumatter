<!doctype html>
<html lang="vi" class="scroll-smooth">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Chương 5: Pin Điện & Điện Phân – ChemStudy Expert</title>
    <link rel="icon" href="../../../favicon/educhem.avg" />

    <!-- TAILWIND CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>

    <!-- FONT AWESOME CDN -->
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
    />

    <!-- GOOGLE FONTS -->
    <link
      href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@300;400;600;700&family=Inter:wght@300;400;500;600&display=swap"
      rel="stylesheet"
    />

    <!-- CONFIG TAILWIND -->
    <script>
      tailwind.config = {
        darkMode: "class",
        theme: {
          extend: {
            fontFamily: {
              display: ["Space Grotesk", "sans-serif"],
              body: ["Inter", "sans-serif"],
            },
            colors: {
              chem: {
                primary: "#3b82f6" /* Blue-500 */,
                secondary: "#10b981" /* Emerald-500 */,
                accent: "#8b5cf6" /* Violet-500 */,
                dark: "#0f172a" /* Slate-900 */,
                light: "#f8fafc" /* Slate-50 */,
                copper: "#b45309" /* Amber-700 (Copper color) */,
                zinc: "#94a3b8" /* Slate-400 (Zinc color) */,
                gold: "#eab308" /* Yellow-500 */,
              },
            },
            animation: {
              "spin-slow": "spin 8s linear infinite",
              float: "floating 3s ease-in-out infinite",
              "pulse-slow": "pulse 3s cubic-bezier(0.4, 0, 0.6, 1) infinite",
              "bounce-slight": "bounceSlight 2s infinite",
              "electron-flow": "dash 2s linear infinite",
              "bubble-rise": "rise 3s infinite ease-in",
            },
            keyframes: {
              floating: {
                "0%, 100%": { transform: "translateY(0)" },
                "50%": { transform: "translateY(-10px)" },
              },
              bounceSlight: {
                "0%, 100%": { transform: "translateY(0)" },
                "50%": { transform: "translateY(-5px)" },
              },
              dash: {
                to: {
                  strokeDashoffset: "0",
                },
              },
              rise: {
                "0%": { bottom: "0", opacity: "0", transform: "translateX(0)" },
                "50%": { opacity: "1" },
                "100%": {
                  bottom: "100%",
                  opacity: "0",
                  transform: "translateX(-5px)",
                },
              },
            },
          },
        },
      };
    </script>

    <style>
      /* CUSTOM CSS - GLASSMORPHISM & UTILITIES */
      body {
        font-family: "Inter", sans-serif;
        background-color: #f0f9ff;
        background-image:
          radial-gradient(
            at 0% 0%,
            rgba(59, 130, 246, 0.1) 0px,
            transparent 50%
          ),
          radial-gradient(
            at 100% 100%,
            rgba(16, 185, 129, 0.1) 0px,
            transparent 50%
          );
        transition: background-color 0.5s ease;
      }

      .dark body {
        background-color: #020617;
        background-image:
          radial-gradient(
            at 0% 0%,
            rgba(59, 130, 246, 0.15) 0px,
            transparent 50%
          ),
          radial-gradient(
            at 100% 0%,
            rgba(139, 92, 246, 0.15) 0px,
            transparent 50%
          );
      }

      /* Glassmorphism Classes */
      .glass-card {
        background: rgba(255, 255, 255, 0.7);
        backdrop-filter: blur(12px);
        -webkit-backdrop-filter: blur(12px);
        border: 1px solid rgba(255, 255, 255, 0.3);
        transition: all 0.3s ease;
      }

      .dark .glass-card {
        background: rgba(30, 41, 59, 0.6);
        border: 1px solid rgba(255, 255, 255, 0.05);
      }

      .glass-card:hover {
        transform: translateY(-5px);
        box-shadow: 0 10px 30px -10px rgba(0, 0, 0, 0.15);
      }

      .glass-nav {
        background: rgba(255, 255, 255, 0.85);
        backdrop-filter: blur(16px);
        border-bottom: 1px solid rgba(0, 0, 0, 0.05);
      }

      .dark .glass-nav {
        background: rgba(15, 23, 42, 0.85);
        border-bottom: 1px solid rgba(255, 255, 255, 0.05);
      }

      /* Text Gradients */
      .text-gradient {
        background-clip: text;
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        background-image: linear-gradient(to right, #3b82f6, #8b5cf6, #ec4899);
      }

      /* Simulation Specific Styles */
      .wire-path {
        stroke-dasharray: 10;
        stroke-dashoffset: 100;
      }

      .bubble {
        position: absolute;
        background: rgba(255, 255, 255, 0.8);
        border-radius: 50%;
        pointer-events: none;
      }

      .ion {
        transition: all 1s ease-in-out;
      }

      /* Electrode Styles */
      .electrode-zn {
        background: linear-gradient(90deg, #94a3b8, #cbd5e1, #94a3b8);
      }
      .electrode-cu {
        background: linear-gradient(90deg, #b45309, #d97706, #b45309);
      }

      /* Footer Specifics */
      :root {
        --footer-bg: #0f172a;
        --footer-text: #e2e8f0;
        --p-primary: #3b82f6;
      }
      html.dark :root {
        --footer-bg: #020617;
      }

      footer {
        background: var(--footer-bg);
        color: var(--footer-text);
        padding: 100px 5% 40px;
        position: relative;
        overflow: hidden;
      }

      .footer-waves {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 60px;
        background: var(--footer-bg);
        clip-path: polygon(
          0% 45%,
          16% 44%,
          33% 50%,
          54% 60%,
          70% 61%,
          84% 59%,
          100% 52%,
          100% 100%,
          0% 100%
        );
      }

      .footer-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
        gap: 60px;
        max-width: 1200px;
        margin: 0 auto;
      }

      .icon-btn {
        color: #94a3b8;
        font-size: 1.2rem;
        transition: 0.3s;
      }
      .icon-btn:hover {
        color: white;
        transform: scale(1.1);
      }

      .contact-item {
        margin-bottom: 15px;
        display: flex;
        align-items: center;
        gap: 15px;
        color: #94a3b8;
      }
      .contact-item i {
        color: var(--p-primary);
      }

      /* Draggable Styles */
      .draggable {
        cursor: grab;
        touch-action: none;
      }
      .draggable:active {
        cursor: grabbing;
      }
      .drop-zone {
        transition:
          background-color 0.3s,
          border-color 0.3s;
      }
      .drop-zone.drag-over {
        background-color: rgba(59, 130, 246, 0.2);
        border-color: #3b82f6;
      }

      /* Custom Scrollbar */
      ::-webkit-scrollbar {
        width: 8px;
      }
      ::-webkit-scrollbar-track {
        background: transparent;
      }
      ::-webkit-scrollbar-thumb {
        background: #94a3b8;
        border-radius: 4px;
      }
      ::-webkit-scrollbar-thumb:hover {
        background: #64748b;
      }
    </style>
  </head>
  <body
    class="text-slate-800 dark:text-slate-200 antialiased selection:bg-blue-500 selection:text-white transition-colors duration-300"
  >
    <!-- ================= HEADER ================= -->
    <header
      class="fixed top-0 w-full z-50 glass-nav transition-all duration-300"
    >
      <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
        <div class="flex justify-between items-center h-20">
          <!-- Logo Block -->
          <div
            class="flex items-center gap-3 cursor-pointer group"
            onclick="window.scrollTo(0, 0)"
          >
            <div
              class="w-10 h-10 rounded-full bg-gradient-to-br from-blue-500 to-green-500 flex items-center justify-center text-white font-bold text-xl shadow-lg group-hover:shadow-blue-500/50 transition-all"
            >
              <i
                class="fas fa-atom text-xl md:text-2xl group-hover:animate-spin-slow"
              ></i>
            </div>
            <span
              class="font-display font-bold text-2xl tracking-tight bg-clip-text text-transparent bg-gradient-to-r from-blue-600 to-emerald-600 dark:from-blue-400 dark:to-emerald-400"
            >
              ChemStudy Expert
            </span>
          </div>

          <!-- Desktop Menu -->
          <nav class="hidden md:flex space-x-8">
            <a
              href="#galvani"
              class="text-sm font-medium hover:text-blue-500 transition-colors"
              >Pin Galvani</a
            >
            <a
              href="#lemon"
              class="text-sm font-medium hover:text-blue-500 transition-colors"
              >Pin Chanh</a
            >
            <a
              href="#electrolysis"
              class="text-sm font-medium hover:text-blue-500 transition-colors"
              >Điện Phân</a
            >
            <a
              href="#quiz"
              class="text-sm font-medium hover:text-blue-500 transition-colors"
              >Bài Tập</a
            >
          </nav>

          <!-- Controls -->
          <div class="flex items-center gap-4">
            <button
              id="theme-toggle"
              class="p-2 rounded-full hover:bg-slate-200 dark:hover:bg-slate-700 transition-colors focus:outline-none"
              aria-label="Toggle Dark Mode"
            >
              <i class="fas fa-moon dark:hidden text-slate-600"></i>
              <i class="fas fa-sun hidden dark:block text-yellow-400"></i>
            </button>
            <!-- Mobile Menu Button -->
            <button
              class="md:hidden text-2xl text-slate-600 dark:text-slate-300"
              onclick="
                document
                  .getElementById('mobile-menu')
                  .classList.toggle('hidden')
              "
            >
              <i class="fas fa-bars"></i>
            </button>
          </div>
        </div>
      </div>
      <!-- Mobile Menu -->
      <div
        id="mobile-menu"
        class="hidden md:hidden bg-white/95 dark:bg-slate-900/95 backdrop-blur-md border-t border-slate-200 dark:border-slate-800"
      >
        <div class="px-2 pt-2 pb-3 space-y-1 sm:px-3">
          <a
            href="#galvani"
            class="block px-3 py-2 rounded-md text-base font-medium hover:bg-blue-50 dark:hover:bg-slate-800"
            >Pin Galvani</a
          >
          <a
            href="#lemon"
            class="block px-3 py-2 rounded-md text-base font-medium hover:bg-blue-50 dark:hover:bg-slate-800"
            >Pin Chanh</a
          >
          <a
            href="#electrolysis"
            class="block px-3 py-2 rounded-md text-base font-medium hover:bg-blue-50 dark:hover:bg-slate-800"
            >Điện Phân</a
          >
        </div>
      </div>
    </header>

    <main class="pt-24 pb-20 px-4 sm:px-6 lg:px-8 max-w-7xl mx-auto space-y-24">
      <!-- ================= HERO SECTION ================= -->
      <section class="text-center py-16 lg:py-24 relative">
        <div
          class="absolute top-10 left-10 w-24 h-24 bg-yellow-400/20 rounded-full blur-2xl animate-pulse-slow"
        ></div>
        <div
          class="absolute bottom-10 right-10 w-32 h-32 bg-blue-400/20 rounded-full blur-3xl animate-pulse-slow delay-700"
        ></div>

        <span
          class="inline-block py-1 px-3 rounded-full bg-indigo-100 dark:bg-indigo-900/30 text-indigo-600 dark:text-indigo-300 text-sm font-semibold mb-6 animate-bounce-slight"
        >
          Hóa học 12 - Chương 5
        </span>
        <h1
          class="text-5xl md:text-7xl font-display font-bold mb-6 leading-tight"
        >
          Pin Điện & <br />
          <span class="text-gradient">ĐIỆN PHÂN</span>
        </h1>
        <p
          class="text-lg md:text-xl text-slate-600 dark:text-slate-400 max-w-2xl mx-auto mb-10 leading-relaxed"
        >
          Khám phá sự chuyển hóa kỳ diệu giữa Hóa năng và Điện năng. Từ pin
          chanh đơn giản đến công nghệ điện phân tinh luyện kim loại.
        </p>
        <a
          href="#galvani"
          class="inline-flex items-center gap-2 px-8 py-4 bg-gradient-to-r from-blue-600 to-indigo-600 text-white rounded-full font-bold shadow-xl shadow-blue-500/30 hover:scale-105 hover:shadow-blue-500/50 transition-all duration-300"
        >
          <span>Bắt đầu bài học</span>
          <i class="fas fa-bolt animate-pulse"></i>
        </a>
      </section>

      <!-- ================= I. PIN GALVANI (DANIELL CELL) ================= -->
      <section id="galvani" class="scroll-mt-28">
        <div class="flex items-center gap-4 mb-8">
          <div
            class="p-3 bg-yellow-100 dark:bg-yellow-900/50 rounded-xl text-yellow-600 dark:text-yellow-400"
          >
            <i class="fas fa-battery-full text-2xl"></i>
          </div>
          <h2 class="text-3xl font-display font-bold">
            I. Pin Galvani (Nguồn điện hóa học)
          </h2>
        </div>

        <!-- Theory Cards -->
        <div class="grid grid-cols-1 lg:grid-cols-2 gap-8 mb-8">
          <div class="glass-card rounded-2xl p-6 lg:p-8">
            <h3
              class="text-xl font-bold mb-4 flex items-center gap-2 text-blue-600"
            >
              <i class="fas fa-book-open"></i> Kiến thức trọng tâm
            </h3>
            <ul
              class="space-y-4 text-slate-700 dark:text-slate-300 text-sm leading-relaxed"
            >
              <li>
                <strong class="text-indigo-600 dark:text-indigo-400"
                  >Cặp oxi hóa - khử:</strong
                >
                <div
                  class="ml-4 mt-1 text-xs text-slate-500 dark:text-slate-400"
                >
                  Dạng oxi hóa (Mⁿ⁺) và dạng khử (M) của cùng kim loại tạo thành
                  cặp Mⁿ⁺/M. Ví dụ: Zn²⁺/Zn, Cu²⁺/Cu.
                </div>
              </li>
              <li>
                <strong class="text-indigo-600 dark:text-indigo-400"
                  >Thế điện cực chuẩn (E⁰):</strong
                >
                <div
                  class="ml-4 mt-1 text-xs text-slate-500 dark:text-slate-400"
                >
                  Đo khả năng oxi hóa/khử trong điều kiện chuẩn (1M, 25°C). E⁰
                  càng lớn, tính oxi hóa càng mạnh.
                  <br />Dãy thế: Li⁺/Li (-3.04V) < Zn²⁺/Zn (-0.76V) < 2H⁺/H₂
                  (0V) < Cu²⁺/Cu (+0.34V).
                </div>
              </li>
              <li>
                <strong class="text-indigo-600 dark:text-indigo-400"
                  >Nguyên tắc Pin Galvani:</strong
                >
                <div
                  class="ml-4 mt-1 text-xs text-slate-500 dark:text-slate-400"
                >
                  Chuyển hóa năng lượng phản ứng oxi hóa - khử thành điện năng.
                  <br />- <strong>Anode (Cực âm -):</strong> Xảy ra quá trình
                  Oxi hóa (Zn → Zn²⁺ + 2e). <br />-
                  <strong>Cathode (Cực dương +):</strong> Xảy ra quá trình Khử
                  (Cu²⁺ + 2e → Cu).
                </div>
              </li>
            </ul>
          </div>

          <!-- SIMULATION: DANIELL CELL -->
          <div
            class="glass-card rounded-2xl p-6 lg:p-8 relative overflow-hidden flex flex-col"
          >
            <h3
              class="text-xl font-bold mb-4 flex items-center justify-between"
            >
              <span
                ><i class="fas fa-microscope"></i> Mô phỏng: Pin Daniell
                (Zn-Cu)</span
              >
              <div class="flex items-center gap-2">
                <div
                  class="px-3 py-1 rounded bg-slate-800 text-green-400 font-mono text-sm border border-slate-600"
                  id="voltmeter-display"
                >
                  0.00 V
                </div>
              </div>
            </h3>

            <!-- Visualization Area -->
            <div
              class="relative h-64 bg-white dark:bg-slate-900 rounded-xl border border-slate-200 dark:border-slate-700 mb-4 overflow-hidden select-none"
            >
              <!-- Beaker 1: Zinc -->
              <div
                class="absolute bottom-0 left-[10%] w-[35%] h-[70%] border-l-2 border-r-2 border-b-2 border-slate-400 bg-slate-100/50 rounded-b-lg"
              >
                <div
                  class="absolute bottom-0 w-full h-[90%] bg-blue-50/50 transition-all duration-1000"
                  id="zn-solution"
                ></div>
                <!-- Electrode Zn -->
                <div
                  class="absolute bottom-4 left-1/2 -translate-x-1/2 w-8 h-[120%] bg-gradient-to-r from-slate-300 to-slate-400 border border-slate-500 rounded-t shadow-md transition-all duration-300"
                  id="zn-electrode"
                >
                  <span
                    class="absolute top-2 left-1/2 -translate-x-1/2 text-[10px] font-bold text-slate-700"
                    >Zn(-)</span
                  >
                </div>
              </div>

              <!-- Beaker 2: Copper -->
              <div
                class="absolute bottom-0 right-[10%] w-[35%] h-[70%] border-l-2 border-r-2 border-b-2 border-slate-400 bg-slate-100/50 rounded-b-lg"
              >
                <div
                  class="absolute bottom-0 w-full h-[90%] bg-blue-500/20 transition-all duration-1000"
                  id="cu-solution"
                ></div>
                <!-- Electrode Cu -->
                <div
                  class="absolute bottom-4 left-1/2 -translate-x-1/2 w-8 h-[120%] bg-gradient-to-r from-orange-600 to-orange-400 border border-orange-800 rounded-t shadow-md transition-all duration-300"
                  id="cu-electrode"
                >
                  <span
                    class="absolute top-2 left-1/2 -translate-x-1/2 text-[10px] font-bold text-white"
                    >Cu(+)</span
                  >
                </div>
              </div>

              <!-- Salt Bridge -->
              <div
                class="absolute top-[30%] left-1/2 -translate-x-1/2 w-[40%] h-8 border-t-8 border-l-8 border-r-8 border-slate-300 rounded-t-xl z-0 opacity-80"
              ></div>

              <!-- Wire & Electron Flow -->
              <svg
                class="absolute top-0 left-0 w-full h-full pointer-events-none z-20"
              >
                <path
                  d="M85 60 V 20 H 265 V 60"
                  stroke="#fbbf24"
                  stroke-width="2"
                  fill="none"
                />
                <circle
                  cx="175"
                  cy="20"
                  r="15"
                  fill="#1e293b"
                  stroke="#cbd5e1"
                  stroke-width="2"
                />
                <text
                  x="175"
                  y="24"
                  text-anchor="middle"
                  fill="#fff"
                  font-size="10"
                  font-weight="bold"
                >
                  V
                </text>

                <!-- Electrons (Animated Circles) -->
                <g id="electron-group" class="opacity-0">
                  <circle r="3" fill="#ef4444">
                    <animateMotion
                      path="M85 60 V 20 H 265 V 60"
                      dur="2s"
                      repeatCount="indefinite"
                    />
                  </circle>
                  <circle r="3" fill="#ef4444">
                    <animateMotion
                      path="M85 60 V 20 H 265 V 60"
                      dur="2s"
                      begin="0.5s"
                      repeatCount="indefinite"
                    />
                  </circle>
                  <circle r="3" fill="#ef4444">
                    <animateMotion
                      path="M85 60 V 20 H 265 V 60"
                      dur="2s"
                      begin="1s"
                      repeatCount="indefinite"
                    />
                  </circle>
                  <text
                    x="175"
                    y="40"
                    text-anchor="middle"
                    fill="#ef4444"
                    font-size="10"
                  >
                    e⁻ flow
                  </text>
                </g>
              </svg>

              <!-- Microscopic Reactions (Text popups) -->
              <div
                id="reaction-zn"
                class="absolute bottom-10 left-[15%] text-[10px] font-bold text-slate-600 opacity-0 transition-opacity"
              >
                Zn → Zn²⁺ + 2e
              </div>
              <div
                id="reaction-cu"
                class="absolute bottom-10 right-[15%] text-[10px] font-bold text-orange-700 opacity-0 transition-opacity"
              >
                Cu²⁺ + 2e → Cu
              </div>
            </div>

            <!-- Controls -->
            <div class="flex gap-4">
              <button
                onclick="toggleGalvani(true)"
                class="flex-1 py-2 bg-green-600 hover:bg-green-700 text-white rounded-lg font-bold shadow-lg shadow-green-500/30 transition-all active:scale-95"
              >
                <i class="fas fa-play mr-2"></i> Bắt đầu
              </button>
              <button
                onclick="toggleGalvani(false)"
                class="flex-1 py-2 bg-red-500 hover:bg-red-600 text-white rounded-lg font-bold shadow-lg shadow-red-500/30 transition-all active:scale-95"
              >
                <i class="fas fa-stop mr-2"></i> Dừng
              </button>
            </div>
          </div>
        </div>
      </section>

      <!-- ================= LAB: LEMON BATTERY ================= -->
      <section id="lemon" class="scroll-mt-28">
        <div class="flex items-center gap-4 mb-8">
          <div
            class="p-3 bg-green-100 dark:bg-green-900/50 rounded-xl text-green-600 dark:text-green-400"
          >
            <i class="fas fa-lemon text-2xl"></i>
          </div>
          <h2 class="text-3xl font-display font-bold">
            II. Thí nghiệm ảo: Pin Chanh
          </h2>
        </div>

        <div
          class="glass-card rounded-2xl p-6 lg:p-8 border-t-4 border-green-500"
        >
          <div class="flex flex-col md:flex-row gap-8">
            <!-- Toolbox -->
            <div class="md:w-1/3 space-y-4">
              <h3 class="text-xl font-bold mb-2">Dụng cụ thí nghiệm</h3>
              <p class="text-sm text-slate-600 dark:text-slate-400 mb-4">
                Kéo các cực kim loại cắm vào quả chanh để tạo thành pin điện.
              </p>

              <div class="grid grid-cols-2 gap-4">
                <div
                  class="draggable p-4 bg-slate-200 dark:bg-slate-700 rounded-lg text-center cursor-grab shadow-sm border border-slate-400"
                  draggable="true"
                  id="drag-zn"
                >
                  <div
                    class="w-2 h-12 bg-slate-400 mx-auto mb-2 rounded shadow-inner"
                  ></div>
                  <span class="font-bold text-sm">Thanh Kẽm (Zn)</span>
                </div>
                <div
                  class="draggable p-4 bg-orange-100 dark:bg-orange-900/50 rounded-lg text-center cursor-grab shadow-sm border border-orange-400"
                  draggable="true"
                  id="drag-cu"
                >
                  <div
                    class="w-2 h-12 bg-orange-600 mx-auto mb-2 rounded shadow-inner"
                  ></div>
                  <span class="font-bold text-sm">Thanh Đồng (Cu)</span>
                </div>
              </div>

              <div
                id="lemon-status"
                class="hidden mt-4 p-3 bg-yellow-100 dark:bg-yellow-900/30 text-yellow-800 dark:text-yellow-200 rounded text-sm font-bold text-center"
              >
                Chưa kết nối mạch điện...
              </div>
            </div>

            <!-- Workspace -->
            <div
              class="md:w-2/3 bg-slate-100 dark:bg-slate-800 rounded-2xl relative h-80 flex items-center justify-center border border-slate-300 dark:border-slate-700 overflow-hidden"
              id="lemon-workspace"
            >
              <!-- The Lemon -->
              <div
                class="relative w-48 h-32 bg-yellow-400 rounded-[50%] shadow-xl flex items-center justify-center drop-zone"
                id="lemon-obj"
              >
                <div
                  class="absolute inset-0 bg-yellow-300 rounded-[50%] opacity-50 blur-sm"
                ></div>
                <!-- Pores -->
                <div
                  class="w-full h-full opacity-20 bg-[url('data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI0IiBoZWlnaHQ9IjQiPgo8cmVjdCB3aWR0aD0iNCIgaGVpZ2h0PSI0IiBmaWxsPSIjZmZmIi8+CjxyZWN0IHdpZHRoPSIxIiBoZWlnaHQ9IjEiIGZpbGw9IiMwMDAiIG9wYWNpdHk9IjAuMSIvPgo8L3N2Zz4=')]"
                ></div>

                <!-- Slots for electrodes -->
                <div
                  class="absolute top-2 left-8 w-4 h-4 bg-black/20 rounded-full"
                  id="slot-zn"
                ></div>
                <div
                  class="absolute top-2 right-8 w-4 h-4 bg-black/20 rounded-full"
                  id="slot-cu"
                ></div>
              </div>

              <!-- Voltmeter (Initially hidden wires) -->
              <div
                class="absolute top-4 right-4 bg-slate-800 p-2 rounded border border-slate-600 shadow-xl z-20"
              >
                <div
                  class="text-green-500 font-mono text-xl"
                  id="lemon-voltage"
                >
                  0.00 V
                </div>
              </div>

              <!-- Wires (Hidden) -->
              <svg
                class="absolute inset-0 w-full h-full pointer-events-none z-10 hidden"
                id="lemon-wires"
              >
                <path
                  d="M120 150 C 120 50, 450 50, 450 80"
                  stroke="#333"
                  stroke-width="3"
                  fill="none"
                />
                <!-- Left to meter -->
                <path
                  d="M220 150 C 220 50, 450 50, 450 80"
                  stroke="#b45309"
                  stroke-width="3"
                  fill="none"
                />
                <!-- Right to meter -->
              </svg>
            </div>
          </div>
        </div>
      </section>

      <!-- ================= III. ĐIỆN PHÂN (ELECTROLYSIS) ================= -->
      <section id="electrolysis" class="scroll-mt-28">
        <div class="flex items-center gap-4 mb-8">
          <div
            class="p-3 bg-purple-100 dark:bg-purple-900/50 rounded-xl text-purple-600 dark:text-purple-400"
          >
            <i class="fas fa-flask-vial text-2xl"></i>
          </div>
          <h2 class="text-3xl font-display font-bold">
            III. Điện Phân Dung Dịch CuSO₄
          </h2>
        </div>

        <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
          <!-- Simulation Panel -->
          <div class="lg:col-span-2 glass-card rounded-2xl p-6 lg:p-8">
            <h3 class="text-xl font-bold mb-4">
              Cơ chế Điện phân (Điện cực trơ)
            </h3>

            <div
              class="relative h-64 bg-slate-50 dark:bg-slate-900 rounded-xl border border-slate-200 dark:border-slate-700 overflow-hidden flex justify-center items-end pb-8"
            >
              <!-- Container -->
              <div
                class="w-64 h-48 border-l-4 border-r-4 border-b-4 border-slate-300 dark:border-slate-600 bg-blue-500/10 rounded-b-xl relative backdrop-blur-sm"
              >
                <!-- Solution -->
                <div
                  class="absolute inset-0 w-full h-full bg-blue-400/20 transition-colors duration-[5s]"
                  id="elec-solution"
                ></div>

                <!-- Anode (+) -->
                <div
                  class="absolute top-[-20px] left-10 w-4 h-40 bg-slate-700 rounded shadow-lg flex flex-col items-center justify-end pb-2"
                >
                  <span class="text-[8px] text-white font-bold mb-1"
                    >Anode(+)</span
                  >
                  <div
                    id="bubbles-anode"
                    class="absolute bottom-0 w-full h-full overflow-hidden pointer-events-none"
                  ></div>
                </div>

                <!-- Cathode (-) -->
                <div
                  class="absolute top-[-20px] right-10 w-4 h-40 bg-slate-700 rounded shadow-lg flex flex-col items-center justify-end pb-2 overflow-hidden"
                >
                  <span class="text-[8px] text-white font-bold mb-1 z-10"
                    >Cathode(-)</span
                  >
                  <!-- Copper plating layer -->
                  <div
                    class="absolute bottom-0 w-full bg-orange-600 transition-all duration-[5s] h-0"
                    id="cu-plating"
                  ></div>
                </div>
              </div>

              <!-- Power Source -->
              <div
                class="absolute top-4 left-1/2 -translate-x-1/2 bg-slate-800 px-4 py-2 rounded shadow-lg border border-slate-600 z-20"
              >
                <i class="fas fa-bolt text-yellow-400"></i> DC Source
              </div>

              <!-- Wires -->
              <svg class="absolute inset-0 pointer-events-none">
                <line
                  x1="160"
                  y1="40"
                  x2="230"
                  y2="40"
                  stroke="#ef4444"
                  stroke-width="2"
                />
                <!-- To Anode -->
                <line
                  x1="230"
                  y1="40"
                  x2="230"
                  y2="80"
                  stroke="#ef4444"
                  stroke-width="2"
                />

                <line
                  x1="450"
                  y1="40"
                  x2="380"
                  y2="40"
                  stroke="#3b82f6"
                  stroke-width="2"
                />
                <!-- To Cathode -->
                <line
                  x1="380"
                  y1="40"
                  x2="380"
                  y2="80"
                  stroke="#3b82f6"
                  stroke-width="2"
                />
              </svg>

              <!-- Labels for Ions (Animated via JS) -->
              <div
                id="ions-container"
                class="absolute inset-0 pointer-events-none overflow-hidden"
              >
                <!-- JS will inject ions here -->
              </div>
            </div>

            <div
              class="mt-4 flex justify-between items-center bg-slate-100 dark:bg-slate-800 p-3 rounded-lg"
            >
              <div class="text-xs font-mono">
                <div class="text-red-500">Anode(+): 2H₂O → 4H⁺ + O₂↑ + 4e</div>
                <div class="text-blue-500">Cathode(-): Cu²⁺ + 2e → Cu↓</div>
              </div>
              <button
                onclick="toggleElectrolysis()"
                id="btn-elec"
                class="px-6 py-2 bg-purple-600 hover:bg-purple-700 text-white font-bold rounded shadow-lg transition-transform active:scale-95"
              >
                Bật nguồn
              </button>
            </div>
          </div>

          <!-- Faraday Calculator -->
          <div class="glass-card rounded-2xl p-6 flex flex-col justify-between">
            <div>
              <h3 class="text-xl font-bold mb-4 flex items-center gap-2">
                <i class="fas fa-calculator text-green-500"></i> Định luật
                Faraday
              </h3>
              <p class="text-xs text-slate-500 mb-4">
                Tính khối lượng chất thoát ra ở điện cực: <br />
                <code>m = (A.I.t) / (n.F)</code>
              </p>

              <div class="space-y-3">
                <div>
                  <label class="text-xs font-bold block mb-1"
                    >Cường độ dòng điện I (A)</label
                  >
                  <input
                    type="number"
                    id="f-I"
                    value="2"
                    class="w-full p-2 rounded bg-white dark:bg-slate-900 border border-slate-300 dark:border-slate-700 text-sm"
                  />
                </div>
                <div>
                  <label class="text-xs font-bold block mb-1"
                    >Thời gian t (giây)</label
                  >
                  <input
                    type="number"
                    id="f-t"
                    value="1930"
                    class="w-full p-2 rounded bg-white dark:bg-slate-900 border border-slate-300 dark:border-slate-700 text-sm"
                  />
                </div>
                <div>
                  <label class="text-xs font-bold block mb-1"
                    >Kim loại (M)</label
                  >
                  <select
                    id="f-metal"
                    class="w-full p-2 rounded bg-white dark:bg-slate-900 border border-slate-300 dark:border-slate-700 text-sm"
                  >
                    <option value="Cu">Đồng (Cu) - M=64, n=2</option>
                    <option value="Ag">Bạc (Ag) - M=108, n=1</option>
                    <option value="Zn">Kẽm (Zn) - M=65, n=2</option>
                  </select>
                </div>
              </div>
            </div>

            <div
              class="mt-6 p-4 bg-green-50 dark:bg-green-900/30 rounded border border-green-200 dark:border-green-800 text-center"
            >
              <div class="text-xs text-slate-500 uppercase">
                Khối lượng thu được
              </div>
              <div
                class="text-2xl font-bold text-green-600 dark:text-green-400"
                id="f-result"
              >
                0.00 g
              </div>
            </div>
            <button
              onclick="calcFaraday()"
              class="mt-2 w-full py-2 bg-slate-800 text-white rounded hover:bg-slate-700 transition"
            >
              Tính toán
            </button>
          </div>
        </div>
      </section>

      <!-- ================= IV. BÀI TẬP CỦNG CỐ ================= -->
      <section id="quiz" class="scroll-mt-28">
        <div class="flex items-center gap-4 mb-8">
          <div
            class="p-3 bg-red-100 dark:bg-red-900/50 rounded-xl text-red-600 dark:text-red-400"
          >
            <i class="fas fa-question-circle text-2xl"></i>
          </div>
          <h2 class="text-3xl font-display font-bold">IV. Bài Tập Củng Cố</h2>
        </div>

        <div
          class="glass-card rounded-2xl p-6 lg:p-10 max-w-3xl mx-auto shadow-2xl relative overflow-hidden"
        >
          <!-- Progress Bar -->
          <div class="absolute top-0 left-0 w-full h-1 bg-slate-200">
            <div
              class="h-full bg-blue-500 transition-all duration-300"
              style="width: 0%"
              id="quiz-bar"
            ></div>
          </div>

          <div id="quiz-content">
            <div class="flex justify-between items-end mb-6">
              <span
                class="text-sm font-bold text-slate-500 uppercase tracking-wider"
                id="q-counter"
                >Câu 1/5</span
              >
              <span
                class="text-xs bg-blue-100 text-blue-600 px-2 py-1 rounded"
                id="q-type"
                >Lý thuyết</span
              >
            </div>

            <h3 class="text-xl md:text-2xl font-bold mb-6" id="q-text">
              Đang tải...
            </h3>

            <div class="space-y-3" id="q-options">
              <!-- Options injected via JS -->
            </div>

            <div
              id="q-feedback"
              class="hidden mt-6 p-4 rounded-xl text-sm animate-pulse-slow"
            ></div>

            <div class="mt-6 flex justify-end">
              <button
                id="q-next"
                class="hidden px-6 py-3 bg-blue-600 text-white font-bold rounded-full hover:bg-blue-700 transition shadow-lg"
              >
                Câu tiếp theo <i class="fas fa-arrow-right ml-2"></i>
              </button>
            </div>
          </div>

          <!-- Quiz Result (Hidden) -->
          <div id="quiz-result" class="hidden text-center py-10">
            <div
              class="w-20 h-20 bg-green-100 text-green-600 rounded-full flex items-center justify-center mx-auto mb-6 text-4xl shadow-inner"
            >
              <i class="fas fa-trophy"></i>
            </div>
            <h2 class="text-3xl font-bold mb-2">Hoàn thành!</h2>
            <p
              class="text-slate-600 dark:text-slate-400 mb-6"
              id="final-score-text"
            >
              Bạn đã làm rất tốt.
            </p>
            <button
              onclick="resetQuiz()"
              class="px-6 py-3 bg-slate-800 text-white rounded-full font-bold hover:scale-105 transition"
            >
              Làm lại
            </button>
          </div>
        </div>
      </section>

      <!-- ================= NAVIGATION BUTTONS ================= -->
      <section class="text-center space-x-4 mb-20">
        <button
          onclick="window.location.href = 'bai_tap.html'"
          style="
            display: inline-flex;
            align-items: center;
            gap: 10px;
            padding: 14px 30px;
            font-size: 1rem;
            font-weight: 600;
            border-radius: 999px;
            border: none;
            cursor: pointer;
            color: #fff;
            background: linear-gradient(135deg, #3b82f6, #6366f1);
            box-shadow: 0 10px 30px rgba(59, 130, 246, 0.35);
            transition: 0.3s ease;
          "
          onmouseover="
            this.style.transform = 'translateY(-3px) scale(1.03)';
            this.style.boxShadow = '0 18px 45px rgba(99,102,241,.55)';
          "
          onmouseout="
            this.style.transform = 'translateY(0) scale(1)';
            this.style.boxShadow = '0 10px 30px rgba(59,130,246,.35)';
          "
        >
          <i class="fas fa-pen-to-square"></i>
          Bài tập củng cố
        </button>

        <button
          onclick="window.location.href = '../chemstudyteen.html'"
          style="
            display: inline-flex;
            align-items: center;
            gap: 10px;
            padding: 14px 30px;
            font-size: 1rem;
            font-weight: 600;
            border-radius: 999px;
            border: none;
            cursor: pointer;
            color: #fff;
            background: linear-gradient(135deg, #22c55e, #16a34a);
            box-shadow: 0 10px 30px rgba(34, 197, 94, 0.35);
            transition: 0.3s ease;
          "
          onmouseover="
            this.style.transform = 'translateY(-3px)';
            this.style.boxShadow = '0 18px 45px rgba(22,163,74,.55)';
          "
          onmouseout="
            this.style.transform = 'translateY(0)';
            this.style.boxShadow = '0 10px 30px rgba(34,197,94,.35)';
          "
        >
          <i class="fas fa-arrow-left"></i>
          Quay về CS Expert
        </button>
      </section>
    </main>

    <!-- ================= FOOTER ================= -->
    <footer>
      <div class="footer-waves"></div>
      <div class="footer-grid">
        <div class="footer-brand" data-aos="fade-right">
          <h2>EDUMATTER</h2>
          <p style="color: #94a3b8; line-height: 1.8">
            Kiến tạo môi trường học tập cảm xúc, nơi tri thức được số hóa và
            truyền tải đầy cảm hứng.
          </p>
          <div style="display: flex; gap: 15px; margin-top: 30px">
            <a href="https://www.facebook.com/ducnt214" class="icon-btn"
              ><i class="fab fa-facebook" alt="facebook"></i
            ></a>
            <a href="https://github.com/ducnt2104" class="icon-btn" alt="github"
              ><i class="fab fa-github"></i
            ></a>
            <a
              href="https://www.tiktok.com/@ktbtcthm210"
              class="icon-btn"
              alt="tiktok"
              ><i class="fab fa-tiktok"></i
            ></a>
          </div>
        </div>
        <div class="footer-links" data-aos="fade-up">
          <h3>Liên hệ nhanh</h3>
          <div class="contact-item">
            <i class="fas fa-envelope"></i>
            <span>ducnt21042010@gmail.com</span>
          </div>
          <div class="contact-item">
            <i class="fas fa-phone"></i>
            <span>034 226 6204</span>
          </div>
          <div class="contact-item">
            <i class="fas fa-location-dot"></i>
            <span>THPT Tôn Đức Thắng, Đồng Nai</span>
          </div>
        </div>
        <div class="footer-links" data-aos="fade-left">
          <h4>Đội ngũ DNT</h4>
          <p style="color: #94a3b8">
            "Sáng tạo không ngừng - Vươn tầm tri thức"
          </p>
          <div
            style="
              margin-top: 20px;
              padding: 15px;
              background: rgba(255, 255, 255, 0.05);
              border-radius: 15px;
            "
          >
            <p style="font-size: 0.8rem; color: #fff">
              Dự án được phát triển bởi các thành viên đam mê công nghệ tại Việt
              Nam.
            </p>
          </div>
        </div>
      </div>
      <div class="copyright">
        <p>
          © 2024 EDUMATTER Educational Ecosystem. Designed with
          <i class="fas fa-heart" style="color: #ef4444"></i> by DNT Team.
        </p>
      </div>
    </footer>

    <!-- ================= JAVASCRIPT ================= -->
    <script>
      // --- 1. THEME & UTILS ---
      const html = document.documentElement;
      const toggleBtn = document.getElementById("theme-toggle");

      if (
        localStorage.getItem("theme") === "dark" ||
        (!localStorage.getItem("theme") &&
          window.matchMedia("(prefers-color-scheme: dark)").matches)
      ) {
        html.classList.add("dark");
      }

      toggleBtn.addEventListener("click", () => {
        html.classList.toggle("dark");
        localStorage.setItem(
          "theme",
          html.classList.contains("dark") ? "dark" : "light",
        );
      });

      // --- 2. PIN GALVANI SIMULATION ---
      let galvaniInterval;
      const voltmeter = document.getElementById("voltmeter-display");
      const electrons = document.getElementById("electron-group");
      const rZn = document.getElementById("reaction-zn");
      const rCu = document.getElementById("reaction-cu");
      const znElec = document.getElementById("zn-electrode");
      const cuElec = document.getElementById("cu-electrode");

      function toggleGalvani(start) {
        if (start) {
          // UI States
          voltmeter.innerText = "1.10 V";
          voltmeter.classList.add("text-green-400", "shadow-green-500/50");
          electrons.classList.remove("opacity-0");
          rZn.classList.remove("opacity-0");
          rCu.classList.remove("opacity-0");
          rZn.classList.add("animate-bounce");
          rCu.classList.add("animate-bounce");

          // Visual Decay/Growth Animation
          znElec.style.transform = "translateX(-50%) scaleX(0.8)"; // Shrink
          cuElec.style.transform = "translateX(-50%) scaleX(1.2)"; // Grow
        } else {
          // Reset
          voltmeter.innerText = "0.00 V";
          voltmeter.classList.remove("text-green-400", "shadow-green-500/50");
          electrons.classList.add("opacity-0");
          rZn.classList.add("opacity-0");
          rCu.classList.add("opacity-0");
          rZn.classList.remove("animate-bounce");
          rCu.classList.remove("animate-bounce");

          znElec.style.transform = "translateX(-50%) scaleX(1)";
          cuElec.style.transform = "translateX(-50%) scaleX(1)";
        }
      }

      // --- 3. LAB: LEMON BATTERY (DRAG & DROP) ---
      const dragZn = document.getElementById("drag-zn");
      const dragCu = document.getElementById("drag-cu");
      const lemonZone = document.getElementById("lemon-obj");
      const lemonStatus = document.getElementById("lemon-status");
      const wires = document.getElementById("lemon-wires");
      const lemonVolt = document.getElementById("lemon-voltage");

      let znPlaced = false;
      let cuPlaced = false;

      [dragZn, dragCu].forEach((item) => {
        item.addEventListener("dragstart", (e) => {
          e.dataTransfer.setData("type", e.target.id);
          item.classList.add("opacity-50");
        });
        item.addEventListener("dragend", () =>
          item.classList.remove("opacity-50"),
        );
      });

      lemonZone.addEventListener("dragover", (e) => {
        e.preventDefault();
        lemonZone.classList.add("scale-105");
      });

      lemonZone.addEventListener("dragleave", () =>
        lemonZone.classList.remove("scale-105"),
      );

      lemonZone.addEventListener("drop", (e) => {
        e.preventDefault();
        lemonZone.classList.remove("scale-105");
        const type = e.dataTransfer.getData("type");

        if (type === "drag-zn" && !znPlaced) {
          znPlaced = true;
          document.getElementById("slot-zn").style.background =
            "linear-gradient(to bottom, #94a3b8, #cbd5e1)";
          document.getElementById("slot-zn").style.height = "40px";
          document.getElementById("slot-zn").style.borderRadius = "2px";
          document.getElementById("slot-zn").style.top = "-20px";
          dragZn.classList.add("hidden"); // Hide original
        }

        if (type === "drag-cu" && !cuPlaced) {
          cuPlaced = true;
          document.getElementById("slot-cu").style.background =
            "linear-gradient(to bottom, #b45309, #d97706)";
          document.getElementById("slot-cu").style.height = "40px";
          document.getElementById("slot-cu").style.borderRadius = "2px";
          document.getElementById("slot-cu").style.top = "-20px";
          dragCu.classList.add("hidden");
        }

        checkLemonCircuit();
      });

      function checkLemonCircuit() {
        if (znPlaced && cuPlaced) {
          lemonStatus.classList.remove("hidden");
          lemonStatus.innerText = "Mạch kín! Đèn Vôn kế sáng.";
          lemonStatus.classList.add("bg-green-100", "text-green-800");
          wires.classList.remove("hidden");
          lemonVolt.innerText = "0.95 V";
          lemonVolt.classList.add("animate-pulse");
        }
      }

      // --- 4. ELECTROLYSIS SIMULATION ---
      let elecActive = false;
      let elecInterval;
      const btnElec = document.getElementById("btn-elec");
      const ionsContainer = document.getElementById("ions-container");
      const bubbleContainer = document.getElementById("bubbles-anode");
      const cuPlating = document.getElementById("cu-plating");

      function toggleElectrolysis() {
        elecActive = !elecActive;

        if (elecActive) {
          btnElec.innerText = "Tắt nguồn";
          btnElec.classList.add("bg-red-600", "hover:bg-red-700");
          btnElec.classList.remove("bg-purple-600", "hover:bg-purple-700");

          // Start animations
          cuPlating.style.height = "100%"; // Grow copper layer
          createBubbles();
          moveIons();
        } else {
          btnElec.innerText = "Bật nguồn";
          btnElec.classList.remove("bg-red-600", "hover:bg-red-700");
          btnElec.classList.add("bg-purple-600", "hover:bg-purple-700");

          // Reset
          cuPlating.style.height = "0";
          bubbleContainer.innerHTML = "";
          ionsContainer.innerHTML = "";
          clearInterval(elecInterval);
        }
      }

      function createBubbles() {
        // Simple visual effect for bubbles at anode
        elecInterval = setInterval(() => {
          const b = document.createElement("div");
          b.className = "absolute bg-white/70 rounded-full animate-bubble-rise";
          b.style.width = Math.random() * 6 + 2 + "px";
          b.style.height = b.style.width;
          b.style.left = Math.random() * 100 + "%";
          b.style.bottom = "0";
          bubbleContainer.appendChild(b);

          // Cleanup
          setTimeout(() => b.remove(), 3000);
        }, 200);
      }

      function moveIons() {
        // Visual Cu2+ moving right, SO4 moving left
        for (let i = 0; i < 10; i++) {
          // Cu2+ (Blue)
          let ionCu = document.createElement("div");
          ionCu.className =
            "absolute w-4 h-4 bg-blue-500 rounded-full flex items-center justify-center text-[8px] text-white font-bold opacity-80 ion";
          ionCu.innerText = "Cu";
          ionCu.style.left = Math.random() * 50 + "%"; // Start left side
          ionCu.style.top = Math.random() * 80 + 20 + "%";
          ionsContainer.appendChild(ionCu);

          // SO4 (Yellow/Gray) - moves to anode but doesn't react (water reacts)
          let ionSO4 = document.createElement("div");
          ionSO4.className =
            "absolute w-5 h-5 bg-slate-400 rounded-full flex items-center justify-center text-[6px] text-white font-bold opacity-60 ion";
          ionSO4.innerText = "SO₄";
          ionSO4.style.right = Math.random() * 50 + "%"; // Start right side
          ionSO4.style.top = Math.random() * 80 + 20 + "%";
          ionsContainer.appendChild(ionSO4);

          // Animate
          setTimeout(() => {
            ionCu.style.left = "85%"; // Move to Cathode
            ionCu.style.opacity = "0"; // Disappear (plated)

            ionSO4.style.left = "15%"; // Move to Anode
          }, 100);
        }
      }

      // --- 5. FARADAY CALCULATOR ---
      function calcFaraday() {
        const I = parseFloat(document.getElementById("f-I").value);
        const t = parseFloat(document.getElementById("f-t").value);
        const metalSelect = document.getElementById("f-metal");

        let M = 64,
          n = 2; // Default Cu
        if (metalSelect.value === "Ag") {
          M = 108;
          n = 1;
        }
        if (metalSelect.value === "Zn") {
          M = 65;
          n = 2;
        }

        const F = 96500;
        const m = (M * I * t) / (n * F);

        document.getElementById("f-result").innerText = m.toFixed(3) + " g";
      }

      // --- 6. QUIZ LOGIC ---
      const questions = [
        {
          q: "Trong pin điện hóa Zn-Cu, quá trình nào xảy ra ở cực dương (Cathode)?",
          options: ["Oxi hóa Zn", "Khử Cu²⁺", "Oxi hóa Cu", "Khử Zn²⁺"],
          correct: 1,
          type: "Lý thuyết",
          expl: "Tại Cathode (+) xảy ra quá trình khử ion dương (Cu²⁺ + 2e → Cu).",
        },
        {
          q: "Khi điện phân dung dịch NaCl có màng ngăn, sản phẩm thu được ở cực âm là gì?",
          options: ["Na", "Cl₂", "H₂ và NaOH", "O₂"],
          correct: 2,
          type: "Vận dụng",
          expl: "Tại cực âm, H₂O bị khử sinh ra H₂ và OH⁻ (tạo NaOH).",
        },
        {
          q: "Để mạ bạc (Ag) lên một chiếc thìa bằng sắt, cần đặt chiếc thìa ở đâu?",
          options: ["Anode", "Cathode", "Treo lơ lửng", "Cực dương nguồn điện"],
          correct: 1,
          type: "Thực tế",
          expl: "Vật cần mạ phải đặt ở Cathode (cực âm) để ion kim loại di chuyển đến và bám vào.",
        },
        {
          q: "Tính lượng Cu thu được khi điện phân CuSO₄ với I=5A trong 32 phút 10 giây?",
          options: ["3.2g", "6.4g", "1.6g", "0.64g"],
          correct: 0,
          type: "Bài tập",
          expl: "m = (64*5*1930)/(2*96500) = 3.2g.",
        },
        {
          q: "Kim loại nào sau đây KHÔNG thể điều chế bằng phương pháp điện phân dung dịch?",
          options: ["Cu", "Ag", "Al", "Zn"],
          correct: 2,
          type: "Lý thuyết",
          expl: "Al là kim loại mạnh (nhóm IIIA), chỉ điều chế được bằng điện phân nóng chảy Al₂O₃.",
        },
      ];

      let currentQ = 0;
      let score = 0;

      function loadQuiz() {
        const q = questions[currentQ];
        document.getElementById("q-counter").innerText =
          `Câu ${currentQ + 1}/${questions.length}`;
        document.getElementById("q-type").innerText = q.type;
        document.getElementById("q-text").innerText = q.q;

        const area = document.getElementById("q-options");
        area.innerHTML = "";

        q.options.forEach((opt, idx) => {
          const btn = document.createElement("button");
          btn.className =
            "w-full text-left p-4 rounded-xl bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 hover:bg-blue-50 dark:hover:bg-slate-700 transition flex items-center gap-3 font-medium";
          btn.innerText = opt;
          btn.onclick = () => checkAnswer(idx, btn);
          area.appendChild(btn);
        });

        // Progress Bar
        document.getElementById("quiz-bar").style.width =
          (currentQ / questions.length) * 100 + "%";
      }

      function checkAnswer(idx, btn) {
        const q = questions[currentQ];
        const feedback = document.getElementById("q-feedback");
        const allBtns = document.getElementById("q-options").children;

        // Disable all
        for (let b of allBtns) b.disabled = true;

        if (idx === q.correct) {
          score++;
          btn.classList.add(
            "bg-green-100",
            "border",
            "border-green-500",
            "text-green-800",
          );
          feedback.innerHTML = `<span class="text-green-600 font-bold">Chính xác!</span> ${q.expl}`;
          feedback.className =
            "mt-6 p-4 rounded-xl text-sm bg-green-50 border border-green-200 block";
        } else {
          btn.classList.add(
            "bg-red-100",
            "border",
            "border-red-500",
            "text-red-800",
          );
          allBtns[q.correct].classList.add(
            "bg-green-100",
            "border",
            "border-green-500",
            "text-green-800",
          ); // Show correct
          feedback.innerHTML = `<span class="text-red-600 font-bold">Sai rồi!</span> ${q.expl}`;
          feedback.className =
            "mt-6 p-4 rounded-xl text-sm bg-red-50 border border-red-200 block";
        }

        document.getElementById("q-next").classList.remove("hidden");
        document.getElementById("q-next").onclick = nextQuestion;
      }

      function nextQuestion() {
        currentQ++;
        document.getElementById("q-feedback").classList.add("hidden");
        document.getElementById("q-next").classList.add("hidden");

        if (currentQ < questions.length) {
          loadQuiz();
        } else {
          showResult();
        }
      }

      function showResult() {
        document.getElementById("quiz-content").classList.add("hidden");
        document.getElementById("quiz-result").classList.remove("hidden");
        document.getElementById("quiz-bar").style.width = "100%";
        document.getElementById("final-score-text").innerText =
          `Bạn trả lời đúng ${score}/${questions.length} câu.`;
      }

      function resetQuiz() {
        currentQ = 0;
        score = 0;
        document.getElementById("quiz-result").classList.add("hidden");
        document.getElementById("quiz-content").classList.remove("hidden");
        loadQuiz();
      }

      // Init
      loadQuiz();
    </script>
  </body>
</html>
