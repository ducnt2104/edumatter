<!DOCTYPE html>
<html lang="vi" class="scroll-smooth">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>ChemStudy Teen - Ch∆∞∆°ng 4: Hydrocarbon</title>
    <link
      rel="icon"
      href="https://cdn-icons-png.flaticon.com/512/1239/1239695.png"
    />

    <!-- Libraries -->
    <script src="https://cdn.tailwindcss.com"></script>
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
    />
    <link
      href="https://fonts.googleapis.com/css2?family=Nunito:wght@400;600;700;800&display=swap"
      rel="stylesheet"
    />
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/controls/OrbitControls.js"></script>

    <script>
      tailwind.config = {
        darkMode: "class",
        theme: {
          extend: {
            fontFamily: { sans: ["Nunito", "sans-serif"] },
            colors: {
              alkane: "#10b981", // Emerald
              alkene: "#ef4444", // Red
              alkyne: "#8b5cf6", // Violet
              arene: "#f59e0b", // Amber
              darkBg: "#0f172a",
              darkCard: "#1e293b",
            },
            animation: {
              float: "float 6s ease-in-out infinite",
              "pulse-fast": "pulse 1s cubic-bezier(0.4, 0, 0.6, 1) infinite",
              rise: "rise 3s infinite ease-in",
            },
            keyframes: {
              float: {
                "0%, 100%": { transform: "translateY(0)" },
                "50%": { transform: "translateY(-10px)" },
              },
              rise: {
                "0%": { bottom: "0", opacity: "0", transform: "scale(0.5)" },
                "50%": { opacity: "1" },
                "100%": {
                  bottom: "100%",
                  opacity: "0",
                  transform: "scale(1.5)",
                },
              },
            },
          },
        },
      };
    </script>

    <style>
      ::-webkit-scrollbar {
        width: 8px;
      }
      ::-webkit-scrollbar-track {
        background: transparent;
      }
      ::-webkit-scrollbar-thumb {
        background: #94a3b8;
        border-radius: 4px;
      }
      ::-webkit-scrollbar-thumb:hover {
        background: #64748b;
      }
      .dark ::-webkit-scrollbar-thumb {
        background: #475569;
      }

      .canvas-container {
        width: 100%;
        height: 100%;
        border-radius: 1rem;
        cursor: move;
      }

      .flame {
        border-radius: 50% 50% 20% 20%;
        background: radial-gradient(
          ellipse at bottom,
          rgba(255, 255, 0, 0.8) 0%,
          rgba(255, 0, 0, 0.5) 60%,
          transparent 100%
        );
        filter: blur(2px);
        animation: flicker 0.1s infinite alternate;
        transform-origin: center bottom;
      }

      @keyframes flicker {
        0% {
          transform: scale(1);
        }
        100% {
          transform: scale(1.05) translate(1px);
        }
      }

      .smoke-particle {
        position: absolute;
        background: rgba(50, 50, 50, 0.6);
        border-radius: 50%;
        animation: rise-smoke 2s forwards;
        pointer-events: none;
      }

      @keyframes rise-smoke {
        0% {
          bottom: 40px;
          opacity: 0.8;
          transform: scale(1);
        }
        100% {
          bottom: 150px;
          opacity: 0;
          transform: scale(3);
        }
      }

      /* Hide scrollbar for horizontal nav */
      .no-scrollbar::-webkit-scrollbar {
        display: none;
      }
      .no-scrollbar {
        -ms-overflow-style: none;
        scrollbar-width: none;
      }
    </style>
  </head>
  <body
    class="bg-gray-50 text-gray-800 dark:bg-darkBg dark:text-gray-100 transition-colors duration-300 min-h-screen flex flex-col"
  >
    <!-- Header -->
    <header
      class="sticky top-0 z-50 bg-white/90 dark:bg-darkCard/90 backdrop-blur-md shadow-sm border-b border-gray-200 dark:border-gray-700"
    >
      <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
        <div class="flex items-center justify-between h-16">
          <div class="flex items-center gap-3">
            <!-- Back Button Restored -->
            <a
              href="../chemstudyteen.html"
              class="p-2 rounded-full hover:bg-gray-100 dark:hover:bg-gray-700 transition group"
              title="Quay v·ªÅ"
            >
              <i
                class="fa-solid fa-arrow-left text-xl text-gray-600 dark:text-gray-300 group-hover:text-alkane"
              ></i>
            </a>
            <div class="flex items-center gap-2 select-none">
              <i
                class="fa-solid fa-flask text-2xl text-alkane animate-bounce"
              ></i>
              <span
                class="font-extrabold text-xl tracking-tight bg-clip-text text-transparent bg-gradient-to-r from-alkane to-alkene"
              >
                ChemStudy Teen
              </span>
            </div>
          </div>

          <!-- Desktop Tabs -->
          <nav
            class="hidden md:flex space-x-2 bg-gray-100 dark:bg-gray-800 p-1 rounded-xl"
            id="desktop-tabs"
          >
            <!-- JS Injected -->
          </nav>

          <button
            id="theme-toggle"
            class="p-2 rounded-lg bg-gray-100 dark:bg-gray-700 text-yellow-500 hover:bg-gray-200 dark:hover:bg-gray-600 transition shadow-sm"
          >
            <i class="fa-solid fa-sun text-lg dark:hidden"></i>
            <i class="fa-solid fa-moon text-lg hidden dark:block"></i>
          </button>
        </div>
      </div>

      <!-- Mobile Tabs -->
      <div
        class="md:hidden overflow-x-auto no-scrollbar border-t border-gray-200 dark:border-gray-700 bg-white dark:bg-darkCard"
      >
        <nav class="flex px-4 py-3 space-x-3 min-w-max" id="mobile-tabs">
          <!-- JS Injected -->
        </nav>
      </div>
    </header>

    <!-- Main Content -->
    <main class="flex-grow container mx-auto px-4 py-6 max-w-7xl relative">
      <!-- TAB 1: ALKANE -->
      <section id="tab-content-0" class="tab-content block animate-float">
        <div class="grid lg:grid-cols-12 gap-6">
          <!-- Theory & Sims -->
          <div class="lg:col-span-7 space-y-6">
            <!-- 1. Intro -->
            <div
              class="bg-white dark:bg-darkCard rounded-2xl shadow-lg p-6 border-l-4 border-alkane"
            >
              <h2 class="text-2xl font-bold text-alkane mb-3">
                <i class="fa-solid fa-gas-pump mr-2"></i>I. ALKANE (ANE)
              </h2>
              <div class="space-y-4 text-sm md:text-base">
                <div>
                  <h3 class="font-bold text-gray-800 dark:text-white mb-1">
                    1. Kh√°i ni·ªám
                  </h3>
                  <ul
                    class="list-disc list-inside text-gray-600 dark:text-gray-300 ml-2 space-y-1"
                  >
                    <li>
                      Alkane l√† hydrocarbon no, m·∫°ch h·ªü. C√¥ng th·ª©c chung:
                      <strong>C<sub>n</sub>H<sub>2n+2</sub></strong
                      >.
                    </li>
                    <li>
                      Ch·ªâ ch·ª©a li√™n k·∫øt ƒë∆°n (œÉ) b·ªÅn v·ªØng ‚Üí R·∫•t k√©m ho·∫°t ƒë·ªông
                      (tr∆° v·ªÅ m·∫∑t h√≥a h·ªçc).
                    </li>
                    <li>
                      ƒê∆∞·ª£c xem l√† "x∆∞∆°ng s·ªëng" c·ªßa h√≥a h·ªØu c∆° v√† l√† n·ªÅn t·∫£ng c·ªßa
                      d·∫ßu m·ªè.
                    </li>
                  </ul>
                </div>
                <div>
                  <h3 class="font-bold text-gray-800 dark:text-white mb-1">
                    2. Danh ph√°p
                  </h3>
                  <div class="ml-2 text-gray-600 dark:text-gray-300">
                    <p class="font-semibold text-sm mb-1 text-alkane">
                      a. Danh ph√°p th∆∞·ªùng (g·ªëc ‚Äì ch·ª©c):
                    </p>
                    <p class="text-sm mb-2">
                      Metan, etan, propan, butan, pentan...
                    </p>

                    <p class="font-semibold text-sm mb-1 text-alkane">
                      b. Danh ph√°p IUPAC:
                    </p>
                    <ol class="list-decimal list-inside text-sm space-y-1">
                      <li>Ch·ªçn m·∫°ch carbon d√†i nh·∫•t (m·∫°ch ch√≠nh).</li>
                      <li>ƒê√°nh s·ªë t·ª´ ƒë·∫ßu g·∫ßn nh√°nh nh·∫•t.</li>
                      <li>
                        G·ªçi t√™n:
                        <strong
                          >S·ªë ch·ªâ v·ªã tr√≠ nh√°nh ‚Äì T√™n nh√°nh ‚Äì T√™n m·∫°ch ch√≠nh ‚Äì
                          an</strong
                        >.
                      </li>
                    </ol>
                    <p class="text-xs italic mt-1 text-gray-500">
                      V√≠ d·ª•: 3-methylpentane, 2,2-dimethylbutane.
                    </p>
                  </div>
                </div>
                <div>
                  <h3 class="font-bold text-gray-800 dark:text-white mb-1">
                    3. T√≠nh ch·∫•t v·∫≠t l√≠
                  </h3>
                  <ul
                    class="list-disc list-inside text-gray-600 dark:text-gray-300 text-sm"
                  >
                    <li><strong>Kh√≠:</strong> C‚ÇÅ ‚Äì C‚ÇÑ</li>
                    <li><strong>L·ªèng:</strong> C‚ÇÖ ‚Äì C‚ÇÅ‚Çá</li>
                    <li><strong>R·∫Øn:</strong> > C‚ÇÅ‚Çá</li>
                    <li>
                      Kh√¥ng tan trong n∆∞·ªõc (k·ªã n∆∞·ªõc), tan t·ªët trong dung m√¥i h·ªØu
                      c∆°.
                    </li>
                    <li>M·∫°ch c√†ng d√†i ‚Üí Nhi·ªát ƒë·ªô s√¥i c√†ng cao.</li>
                  </ul>
                </div>
              </div>
            </div>

            <!-- Sim 1: Nomenclature -->
            <div
              class="bg-white dark:bg-darkCard rounded-2xl shadow-lg p-6 relative"
            >
              <span
                class="absolute top-0 right-0 px-3 py-1 bg-blue-100 text-blue-700 text-xs font-bold rounded-bl-xl"
                >M√¥ ph·ªèng 1</span
              >
              <h3 class="font-bold text-lg mb-2">Th·ª≠ th√°ch IUPAC</h3>
              <div
                class="bg-gray-100 dark:bg-gray-800 p-3 rounded-lg text-center mb-3 border border-gray-300 dark:border-gray-600"
              >
                <div
                  class="text-xl md:text-2xl font-mono font-bold tracking-wider text-gray-700 dark:text-gray-200"
                >
                  CH<sub>3</sub>-CH(CH<sub>3</sub>)-CH<sub>2</sub>-CH<sub
                    >3</sub
                  >
                </div>
              </div>
              <div class="grid grid-cols-2 gap-2">
                <button
                  onclick="checkName(this, false)"
                  class="p-2 border rounded hover:bg-red-50 dark:hover:bg-red-900/30 text-sm transition font-medium"
                >
                  2-ethylpropane
                </button>
                <button
                  onclick="checkName(this, true)"
                  class="p-2 border rounded hover:bg-green-50 dark:hover:bg-green-900/30 text-sm transition font-medium"
                >
                  2-methylbutane
                </button>
              </div>
              <div
                id="name-fb"
                class="h-5 mt-2 text-center text-xs font-bold transition-all"
              ></div>
            </div>

            <!-- Properties & Sims -->
            <div class="grid md:grid-cols-2 gap-4">
              <!-- Sim 2: Boiling Point -->
              <div class="bg-white dark:bg-darkCard rounded-xl p-4 shadow-lg">
                <span class="text-xs font-bold text-gray-500 uppercase"
                  >M√¥ ph·ªèng 2: Nhi·ªát ƒë·ªô s√¥i</span
                >
                <div class="h-40 mt-2"><canvas id="bpChart"></canvas></div>
                <p class="text-[10px] text-gray-400 mt-1 italic text-center">
                  M·∫°ch C c√†ng d√†i, nhi·ªát ƒë·ªô s√¥i c√†ng tƒÉng.
                </p>
              </div>
              <!-- Sim 3: Solubility -->
              <div
                class="bg-white dark:bg-darkCard rounded-xl p-4 shadow-lg flex flex-col"
              >
                <span class="text-xs font-bold text-gray-500 uppercase mb-2"
                  >M√¥ ph·ªèng 3: T√≠nh k·ªã n∆∞·ªõc</span
                >
                <div
                  class="flex-grow bg-blue-100 dark:bg-blue-900/30 rounded-lg relative overflow-hidden cursor-pointer group"
                  onclick="shakeMixture()"
                >
                  <div
                    class="absolute bottom-0 w-full h-1/2 bg-blue-400/50 flex items-center justify-center text-xs text-white z-0"
                  >
                    N∆∞·ªõc
                  </div>
                  <div
                    id="oil-layer"
                    class="absolute top-0 w-full h-1/2 bg-yellow-200/80 flex items-center justify-center text-xs text-yellow-800 transition-all duration-1000 z-10 font-bold border-b border-white/20"
                  >
                    Alkane (D·∫ßu)
                  </div>
                  <div
                    class="absolute inset-0 flex items-center justify-center pointer-events-none opacity-0 group-hover:opacity-100 transition"
                  >
                    <i
                      class="fa-solid fa-hand-shake text-2xl text-gray-500/50"
                    ></i>
                  </div>
                </div>
                <p class="text-[10px] text-center mt-1 text-gray-500">
                  Nh·∫•n ƒë·ªÉ l·∫Øc h·ªón h·ª£p
                </p>
              </div>
            </div>

            <!-- 4. Chemical Properties -->
            <div class="bg-white dark:bg-darkCard rounded-2xl shadow-lg p-6">
              <h3 class="font-bold text-gray-800 dark:text-white mb-3">
                4. T√≠nh ch·∫•t h√≥a h·ªçc
              </h3>
              <p class="text-sm text-gray-600 dark:text-gray-400 mb-4">
                Alkane r·∫•t tr∆°, nh∆∞ng v·∫´n c√≥ v√†i ph·∫£n ·ª©ng quan tr·ªçng:
              </p>

              <!-- Sim 4: Substitution -->
              <div
                class="mb-6 p-4 bg-gray-50 dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700"
              >
                <div class="flex justify-between items-center mb-2">
                  <h4 class="font-bold text-sm text-alkane">
                    a. Ph·∫£n ·ª©ng th·∫ø halogen (Clo/Brom h√≥a)
                  </h4>
                  <span
                    class="text-[10px] bg-alkane text-white px-2 py-0.5 rounded"
                    >M√¥ ph·ªèng 4</span
                  >
                </div>
                <div class="text-xs mb-2 space-y-1">
                  <p>
                    <strong>ƒêi·ªÅu ki·ªán:</strong> √Ånh s√°ng (hv) ho·∫∑c nhi·ªát ƒë·ªô
                    (t¬∞).
                  </p>
                  <p><strong>C∆° ch·∫ø:</strong> G·ªëc t·ª± do (radical).</p>
                  <p
                    class="font-mono bg-white dark:bg-black/20 p-1 rounded inline-block"
                  >
                    CH‚ÇÑ + Cl‚ÇÇ ‚Üí CH‚ÇÉCl + HCl
                  </p>
                </div>
                <div
                  class="h-28 bg-gray-900 rounded-lg relative overflow-hidden flex items-center justify-center"
                  id="subst-sim"
                >
                  <div
                    id="subst-mol"
                    class="text-white text-xl md:text-2xl font-bold transition-all duration-1000 font-mono"
                  >
                    CH<sub>4</sub> + Cl<sub>2</sub>
                  </div>
                  <div
                    id="subst-flash"
                    class="absolute inset-0 bg-yellow-400 opacity-0 pointer-events-none transition-opacity duration-100"
                  ></div>
                </div>
                <button
                  onclick="playSubst()"
                  class="w-full mt-2 py-2 bg-gray-200 dark:bg-gray-700 rounded text-xs font-bold hover:bg-alkane hover:text-white transition shadow-sm"
                >
                  <i class="fa-solid fa-sun mr-1"></i> Chi·∫øu s√°ng (hv)
                </button>
              </div>

              <!-- Sim 5: Combustion -->
              <div
                class="mb-6 p-4 bg-gray-50 dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700"
              >
                <div class="flex justify-between items-center mb-2">
                  <h4 class="font-bold text-sm text-orange-500">
                    b. Ph·∫£n ·ª©ng ch√°y
                  </h4>
                  <span
                    class="text-[10px] bg-orange-500 text-white px-2 py-0.5 rounded"
                    >M√¥ ph·ªèng 5</span
                  >
                </div>
                <p class="text-xs mb-2">
                  T·∫°o CO‚ÇÇ + H‚ÇÇO, t·ªèa nhi·ªÅu nhi·ªát ‚Üí nhi√™n li·ªáu quan tr·ªçng.
                </p>
                <div
                  class="flex items-end justify-center h-28 bg-gray-900 rounded-lg relative overflow-hidden gap-8 pt-4"
                >
                  <div class="flex flex-col items-center relative group">
                    <div
                      id="flame-blue"
                      class="w-8 h-16 flame bg-blue-500 opacity-50 transition-all duration-500"
                    ></div>
                    <div class="w-12 h-2 bg-gray-600 rounded mt-1"></div>
                    <span class="text-[10px] text-gray-400 mt-1">ƒê·ªß O2</span>
                  </div>
                  <div class="flex flex-col items-center relative group">
                    <div
                      id="flame-yellow"
                      class="w-10 h-20 flame bg-yellow-500 opacity-50 transition-all duration-500"
                    ></div>
                    <div
                      id="soot-area"
                      class="absolute -top-4 w-full h-full pointer-events-none"
                    ></div>
                    <div class="w-12 h-2 bg-gray-600 rounded mt-1"></div>
                    <span class="text-[10px] text-gray-400 mt-1"
                      >Thi·∫øu O2 (Mu·ªôi)</span
                    >
                  </div>
                </div>
                <div class="mt-3 flex gap-2 items-center">
                  <span class="text-xs font-bold text-gray-500">√çt O2</span>
                  <input
                    type="range"
                    min="0"
                    max="100"
                    value="50"
                    class="flex-grow h-2 bg-gray-300 rounded-lg appearance-none cursor-pointer accent-orange-500"
                    oninput="adjustOxygen(this.value)"
                  />
                  <span class="text-xs font-bold text-gray-500">Nhi·ªÅu O2</span>
                </div>
              </div>

              <!-- Sim 6: Cracking & Isomerization -->
              <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                <div
                  class="p-4 bg-gray-50 dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700"
                >
                  <div class="flex justify-between items-center mb-2">
                    <h4 class="font-bold text-sm text-red-500">
                      c. Cracking (B·∫ª m·∫°ch)
                    </h4>
                    <span
                      class="text-[10px] bg-red-500 text-white px-2 py-0.5 rounded"
                      >M√¥ ph·ªèng 6</span
                    >
                  </div>
                  <p class="text-xs mb-2">
                    ƒêi·ªÅu ki·ªán: 500‚Äì700 ¬∞C, x√∫c t√°c. T√°ch alkane l·ªõn th√†nh alkene
                    + alkane nh·ªè.
                  </p>
                  <div
                    class="h-20 bg-white/50 dark:bg-black/20 rounded-lg flex flex-col items-center justify-center cursor-pointer relative hover:bg-white/80 dark:hover:bg-black/30 transition border border-dashed border-gray-400"
                    onclick="crackChain()"
                  >
                    <div
                      id="long-chain"
                      class="flex gap-0.5 items-center transition-all duration-300"
                    >
                      <!-- JS Generated Circles -->
                    </div>
                    <div
                      class="absolute text-[10px] font-bold text-gray-500 bottom-1 uppercase tracking-wider"
                    >
                      Nh·∫•n ƒë·ªÉ b·∫ª m·∫°ch
                    </div>
                  </div>
                </div>

                <div
                  class="p-4 bg-gray-50 dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700"
                >
                  <h4 class="font-bold text-sm text-purple-500 mb-2">
                    d. Ph·∫£n ·ª©ng Isomer h√≥a
                  </h4>
                  <p class="text-xs mb-2">
                    Chuy·ªÉn m·∫°ch th·∫≥ng ‚Üí m·∫°ch nh√°nh (gi√∫p xƒÉng ch√°y t·ªët h∆°n, tƒÉng
                    ch·ªâ s·ªë Octane).
                  </p>
                  <div
                    class="bg-white/50 dark:bg-black/20 p-2 rounded text-center text-xs font-mono"
                  >
                    C-C-C-C-C
                    <i class="fa-solid fa-arrow-right mx-1 text-gray-400"></i>
                    C-C(C)-C-C
                  </div>
                </div>
              </div>
            </div>

            <!-- 5. Applications -->
            <div class="bg-white dark:bg-darkCard rounded-2xl shadow-lg p-6">
              <h3 class="font-bold text-gray-800 dark:text-white mb-3">
                5. ·ª®ng d·ª•ng v√† ƒëi·ªÅu ch·∫ø c√¥ng nghi·ªáp
              </h3>
              <div class="grid md:grid-cols-2 gap-6 text-sm">
                <div>
                  <h4 class="font-bold text-green-600 mb-2">·ª®ng d·ª•ng</h4>
                  <ul
                    class="list-disc list-inside space-y-1 text-gray-600 dark:text-gray-300"
                  >
                    <li>Nhi√™n li·ªáu (XƒÉng, d·∫ßu, kh√≠ gas).</li>
                    <li>Th√†nh ph·∫ßn ch√≠nh c·ªßa kh√≠ thi√™n nhi√™n (CH‚ÇÑ).</li>
                    <li>Nguy√™n li·ªáu s·∫£n xu·∫•t H‚ÇÇ, NH‚ÇÉ, alcohol, polymer...</li>
                    <li>Methane d√πng trong ng√†nh ƒëi·ªán, g·ªëm, th√©p.</li>
                  </ul>
                </div>
                <div>
                  <h4 class="font-bold text-blue-600 mb-2">
                    ƒêi·ªÅu ch·∫ø c√¥ng nghi·ªáp
                  </h4>
                  <ul
                    class="list-disc list-inside space-y-1 text-gray-600 dark:text-gray-300"
                  >
                    <li>T√°ch t·ª´ d·∫ßu m·ªè qua ch∆∞ng c·∫•t ph√¢n ƒëo·∫°n.</li>
                    <li>Hydro h√≥a alkene: C‚ÇÇH‚ÇÑ + H‚ÇÇ ‚Üí C‚ÇÇH‚ÇÜ.</li>
                    <li>Kh·ª≠ CO, CO‚ÇÇ b·∫±ng H‚ÇÇ.</li>
                  </ul>
                </div>
              </div>
            </div>
          </div>

          <!-- Visuals & 3D Models -->
          <div class="lg:col-span-5 space-y-6">
            <!-- Sim 8: 3D Methane -->
            <div
              class="bg-gray-800 rounded-2xl shadow-xl overflow-hidden relative h-72 group border border-gray-700"
            >
              <div class="absolute top-2 left-2 z-10 flex flex-col items-start">
                <span
                  class="px-2 py-1 bg-black/60 text-white text-[10px] font-bold rounded border border-white/10 mb-1"
                  >M√¥ ph·ªèng 8: Methane (CH‚ÇÑ)</span
                >
                <span class="text-[9px] text-gray-300 px-1"
                  >Xoay ƒë·ªÉ xem c·∫•u tr√∫c t·ª© di·ªán</span
                >
              </div>
              <div id="canvas-methane" class="canvas-container"></div>
            </div>

            <!-- Sim 9: Distillation -->
            <div class="bg-white dark:bg-darkCard rounded-2xl shadow-lg p-4">
              <div class="flex justify-between items-center mb-2">
                <h3 class="font-bold text-sm text-gray-800 dark:text-white">
                  M√¥ ph·ªèng 9: Ch∆∞ng c·∫•t ph√¢n ƒëo·∫°n
                </h3>
              </div>
              <div
                class="relative w-full h-96 bg-gray-100 dark:bg-gray-700 rounded-lg overflow-hidden flex flex-col-reverse border-2 border-gray-300 dark:border-gray-600"
              >
                <!-- Helper Text -->
                <div
                  class="absolute top-2 left-2 text-[9px] text-gray-500 z-10"
                >
                  Nhi·ªát ƒë·ªô th·∫•p (Nh·∫π)
                </div>
                <div
                  class="absolute bottom-2 left-2 text-[9px] text-white z-10"
                >
                  Nhi·ªát ƒë·ªô cao (N·∫∑ng)
                </div>

                <!-- Levels -->
                <div
                  class="flex-grow bg-gray-900/90 w-full border-t border-white/10 flex items-center px-2 text-[10px] text-white font-bold group hover:bg-black transition relative cursor-help"
                >
                  > 400¬∞C: Nh·ª±a ƒë∆∞·ªùng
                  <span
                    class="absolute right-2 opacity-50 group-hover:opacity-100"
                    >üõ£Ô∏è C>20</span
                  >
                </div>
                <div
                  class="h-14 bg-yellow-800/90 w-full border-t border-white/10 flex items-center px-2 text-[10px] text-white font-bold group hover:bg-yellow-700 transition relative cursor-help"
                >
                  300-400¬∞C: D·∫ßu nh·ªùn
                  <span
                    class="absolute right-2 opacity-50 group-hover:opacity-100"
                    >‚öôÔ∏è C16-20</span
                  >
                </div>
                <div
                  class="h-14 bg-yellow-600/90 w-full border-t border-white/10 flex items-center px-2 text-[10px] text-white font-bold group hover:bg-yellow-500 transition relative cursor-help"
                >
                  250-350¬∞C: Diesel
                  <span
                    class="absolute right-2 opacity-50 group-hover:opacity-100"
                    >üöõ C11-15</span
                  >
                </div>
                <div
                  class="h-14 bg-blue-600/80 w-full border-t border-white/10 flex items-center px-2 text-[10px] text-white font-bold group hover:bg-blue-500 transition relative cursor-help"
                >
                  170-250¬∞C: D·∫ßu h·ªèa
                  <span
                    class="absolute right-2 opacity-50 group-hover:opacity-100"
                    >‚úàÔ∏è C10-16</span
                  >
                </div>
                <div
                  class="h-16 bg-green-500/80 w-full border-t border-white/10 flex items-center px-2 text-[10px] text-white font-bold group hover:bg-green-400 transition relative cursor-help"
                >
                  40-170¬∞C: XƒÉng
                  <span
                    class="absolute right-2 opacity-50 group-hover:opacity-100"
                    >üöó C5-10</span
                  >
                </div>
                <div
                  class="h-20 bg-gray-200/90 w-full flex items-center px-2 text-[10px] text-gray-800 font-bold group hover:bg-white transition relative cursor-help"
                >
                  < 40¬∞C: Kh√≠ gas
                  <span
                    class="absolute right-2 opacity-0 group-hover:opacity-100 animate-pulse"
                    >‚òÅÔ∏è C1-4</span
                  >
                </div>
              </div>
            </div>
          </div>
        </div>
      </section>

      <!-- TAB 2: ALKENE & ALKYNE -->
      <section id="tab-content-1" class="tab-content hidden animate-float">
        <div class="grid lg:grid-cols-12 gap-6">
          <div class="lg:col-span-7 space-y-6">
            <!-- Intro -->
            <div
              class="bg-white dark:bg-darkCard rounded-2xl shadow-lg p-6 border-l-4 border-alkene"
            >
              <h2 class="text-2xl font-bold text-alkene mb-3">
                <i class="fa-solid fa-link mr-2"></i>II. ALKENE & ALKYNE
              </h2>
              <div class="space-y-4 text-sm md:text-base">
                <!-- 1. Concept -->
                <div>
                  <h3 class="font-bold text-gray-800 dark:text-white mb-2">
                    1. Kh√°i ni·ªám
                  </h3>
                  <div class="grid grid-cols-2 gap-4 text-sm mb-2">
                    <div
                      class="p-3 bg-red-50 dark:bg-red-900/20 rounded-lg border border-red-100 dark:border-red-800"
                    >
                      <strong class="text-red-500 block mb-1"
                        >Alkene (C<sub>n</sub>H<sub>2n</sub>)</strong
                      >
                      Ch·ª©a √≠t nh·∫•t 1 li√™n k·∫øt ƒë√¥i (C=C).
                    </div>
                    <div
                      class="p-3 bg-purple-50 dark:bg-purple-900/20 rounded-lg border border-purple-100 dark:border-purple-800"
                    >
                      <strong class="text-purple-500 block mb-1"
                        >Alkyne (C<sub>n</sub>H<sub>2n-2</sub>)</strong
                      >
                      Ch·ª©a √≠t nh·∫•t 1 li√™n k·∫øt ba (C‚â°C).
                    </div>
                  </div>
                  <p class="text-xs italic text-gray-500">
                    ƒê·ªô ho·∫°t ƒë·ªông: Alkyne > Alkene > Alkane.
                  </p>
                </div>

                <!-- 2. Nomenclature -->
                <div>
                  <h3 class="font-bold text-gray-800 dark:text-white mb-2">
                    2. Danh ph√°p
                  </h3>
                  <div class="grid md:grid-cols-2 gap-4">
                    <div>
                      <p class="font-bold text-red-500 text-sm">Alkene</p>
                      <ul
                        class="list-disc list-inside text-xs text-gray-600 dark:text-gray-300"
                      >
                        <li>M·∫°ch ch√≠nh: Ch·ª©a li√™n k·∫øt ƒë√¥i.</li>
                        <li>ƒê√°nh s·ªë: T·ª´ ph√≠a g·∫ßn li√™n k·∫øt ƒë√¥i.</li>
                        <li>T√™n: V·ªã tr√≠ C=C + t√™n m·∫°ch + ene.</li>
                        <li>VD: but-2-ene, prop-1-ene.</li>
                      </ul>
                    </div>
                    <div>
                      <p class="font-bold text-purple-500 text-sm">Alkyne</p>
                      <ul
                        class="list-disc list-inside text-xs text-gray-600 dark:text-gray-300"
                      >
                        <li>T√™n: V·ªã tr√≠ C‚â°C + t√™n m·∫°ch + yne.</li>
                        <li>VD: but-1-yne, propyne.</li>
                      </ul>
                    </div>
                  </div>
                </div>
              </div>
            </div>

            <!-- 3. Geometric Isomers -->
            <div class="bg-white dark:bg-darkCard rounded-2xl shadow-lg p-6">
              <div class="flex justify-between items-center mb-4">
                <h3 class="font-bold text-gray-800 dark:text-white">
                  3. ƒê·ªìng ph√¢n h√¨nh h·ªçc (Cis-Trans)
                </h3>
                <span
                  class="text-[10px] bg-gray-500 text-white px-2 py-0.5 rounded"
                  >M√¥ ph·ªèng 10</span
                >
              </div>
              <div class="text-sm text-gray-600 dark:text-gray-300 mb-4">
                <ul class="list-disc list-inside space-y-1">
                  <li>
                    Ch·ªâ c√≥ ·ªü alkene khi m·ªói C c·ªßa li√™n k·∫øt ƒë√¥i g·∫Øn v·ªõi 2 nh√≥m
                    kh√°c nhau.
                  </li>
                  <li>
                    <strong>Cis (c√πng ph√≠a):</strong> Ph√¢n c·ª±c h∆°n, s√¥i cao h∆°n.
                  </li>
                  <li>
                    <strong>Trans (ƒë·ªëi x·ª©ng):</strong> B·ªÅn h∆°n, s√¥i th·∫•p h∆°n.
                  </li>
                  <li>
                    Alkyne kh√¥ng c√≥ ƒë·ªìng ph√¢n cis‚Äìtrans v√¨ li√™n k·∫øt ba th·∫≥ng
                    180¬∞.
                  </li>
                </ul>
              </div>
              <div
                class="relative h-48 bg-gray-100 dark:bg-gray-800 rounded-xl flex items-center justify-center transition-all duration-500 overflow-hidden"
                id="cistrans-container"
              >
                <div
                  id="isomer-display"
                  class="relative w-full h-full flex items-center justify-center"
                >
                  <!-- Drawn by JS -->
                </div>
              </div>
              <div class="grid grid-cols-2 gap-2 mt-3">
                <button
                  onclick="drawIsomer('cis')"
                  class="py-2 bg-red-100 dark:bg-red-900/40 text-red-700 dark:text-red-300 rounded font-bold text-xs hover:bg-red-200 transition"
                >
                  Cis-But-2-ene
                </button>
                <button
                  onclick="drawIsomer('trans')"
                  class="py-2 bg-green-100 dark:bg-green-900/40 text-green-700 dark:text-green-300 rounded font-bold text-xs hover:bg-green-200 transition"
                >
                  Trans-But-2-ene
                </button>
              </div>
            </div>

            <!-- 4. Physical Properties -->
            <div class="bg-white dark:bg-darkCard rounded-2xl shadow-lg p-6">
              <h3 class="font-bold text-gray-800 dark:text-white mb-2">
                4. T√≠nh ch·∫•t v·∫≠t l√≠
              </h3>
              <ul
                class="list-disc list-inside text-sm text-gray-600 dark:text-gray-300"
              >
                <li>C‚ÇÇ‚ÄìC‚ÇÑ: Kh√≠.</li>
                <li>C‚ÇÖ‚ÄìC‚ÇÅ‚ÇÜ: L·ªèng.</li>
                <li>M·∫°ch d√†i: R·∫Øn.</li>
                <li>
                  Kh√¥ng tan trong n∆∞·ªõc. T∆∞∆°ng t·ª± alkane nh∆∞ng ph√¢n c·ª±c h∆°i cao
                  h∆°n.
                </li>
              </ul>
            </div>

            <!-- 5. Chemical Properties -->
            <div class="bg-white dark:bg-darkCard rounded-2xl shadow-lg p-6">
              <h3 class="font-bold text-gray-800 dark:text-white mb-2">
                5. T√≠nh ch·∫•t ho√° h·ªçc
              </h3>
              <p class="text-sm text-gray-600 mb-4">
                Li√™n k·∫øt ƒë√¥i/b·ªô ba c√≥ v√πng electron gi√†u ‚Üí ch·ªß y·∫øu tham gia
                <strong>ph·∫£n ·ª©ng c·ªông</strong>.
              </p>

              <!-- Sim 11: Hydrogenation -->
              <div
                class="mb-4 p-4 bg-gray-50 dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700"
              >
                <div class="flex justify-between items-center mb-2">
                  <h4 class="font-bold text-sm text-blue-500">
                    a. Ph·∫£n ·ª©ng c·ªông H‚ÇÇ (Hydrogen h√≥a)
                  </h4>
                  <span
                    class="text-[10px] bg-blue-500 text-white px-2 py-0.5 rounded"
                    >M√¥ ph·ªèng 11</span
                  >
                </div>
                <p class="text-xs mb-2">
                  Alkene ‚Üí Alkane | Alkyne ‚Üí Alkene ‚Üí Alkane
                </p>
                <div
                  class="h-28 bg-gray-900 rounded-xl flex items-center justify-center gap-4 relative overflow-hidden"
                >
                  <div
                    id="hydro-mol"
                    class="text-white font-bold text-xl md:text-2xl font-mono transition-all"
                  >
                    CH<sub>2</sub>=CH<sub>2</sub>
                  </div>
                  <div
                    id="hydro-gas"
                    class="text-gray-400 font-bold transition-all opacity-100"
                  >
                    + H<sub>2</sub>
                  </div>
                  <div
                    class="bg-gray-700 px-2 py-1 rounded text-[10px] text-white absolute top-2 right-2"
                  >
                    Ni, t¬∞
                  </div>
                </div>
                <button
                  onclick="animateHydro()"
                  class="w-full mt-2 py-2 bg-blue-600 text-white rounded text-xs font-bold hover:bg-blue-700 transition"
                >
                  K√≠ch ho·∫°t x√∫c t√°c Nickel
                </button>
              </div>

              <!-- Sim 12: Bromine Test -->
              <div
                class="mb-4 p-4 bg-gray-50 dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700"
              >
                <div class="flex justify-between items-center mb-2">
                  <h4 class="font-bold text-sm text-orange-600">
                    b. C·ªông Halogen (Nh·∫≠n bi·∫øt)
                  </h4>
                  <span
                    class="text-[10px] bg-orange-600 text-white px-2 py-0.5 rounded"
                    >M√¥ ph·ªèng 12</span
                  >
                </div>
                <p class="text-xs mb-2">
                  Dung d·ªãch Br‚ÇÇ b·ªã m·∫•t m√†u nhanh ch√≥ng khi g·∫∑p li√™n k·∫øt b·ªôi.
                </p>
                <div
                  class="flex justify-center gap-12 h-44 bg-gray-200 dark:bg-gray-900 rounded-xl items-end pb-4 pt-4 relative"
                >
                  <!-- Tube 1 -->
                  <div
                    class="cursor-pointer group flex flex-col items-center"
                    onclick="dropBromine('alkane')"
                  >
                    <div
                      class="w-10 h-28 border-2 border-gray-400 border-t-0 rounded-b-2xl bg-white/40 relative overflow-hidden backdrop-blur-sm"
                    >
                      <div
                        id="liq-alkane"
                        class="absolute bottom-0 w-full h-8 bg-transparent transition-colors duration-500"
                      ></div>
                      <div
                        id="drop-alkane"
                        class="absolute -top-2 left-1/2 -translate-x-1/2 w-2 h-2 bg-orange-600 rounded-full opacity-0"
                      ></div>
                      <div
                        class="absolute bottom-0 w-full h-4 bg-gray-300/30"
                      ></div>
                      <!-- Liquid base -->
                    </div>
                    <p
                      class="text-[10px] text-center mt-2 font-bold bg-white dark:bg-gray-700 px-2 rounded"
                    >
                      Alkane
                    </p>
                  </div>
                  <!-- Tube 2 -->
                  <div
                    class="cursor-pointer group flex flex-col items-center"
                    onclick="dropBromine('alkene')"
                  >
                    <div
                      class="w-10 h-28 border-2 border-gray-400 border-t-0 rounded-b-2xl bg-white/40 relative overflow-hidden backdrop-blur-sm"
                    >
                      <div
                        id="liq-alkene"
                        class="absolute bottom-0 w-full h-8 bg-transparent transition-colors duration-500"
                      ></div>
                      <div
                        id="drop-alkene"
                        class="absolute -top-2 left-1/2 -translate-x-1/2 w-2 h-2 bg-orange-600 rounded-full opacity-0"
                      ></div>
                      <div
                        class="absolute bottom-0 w-full h-4 bg-gray-300/30"
                      ></div>
                    </div>
                    <p
                      class="text-[10px] text-center mt-2 font-bold text-orange-500 bg-white dark:bg-gray-700 px-2 rounded"
                    >
                      Alkene
                    </p>
                  </div>
                  <div class="absolute top-2 text-[10px] text-gray-500">
                    Nh·∫•n ·ªëng nghi·ªám ƒë·ªÉ nh·ªè Br‚ÇÇ
                  </div>
                </div>
              </div>

              <!-- c. Markovnikov & d. Polymerization -->
              <div class="grid md:grid-cols-2 gap-4 mb-4">
                <div
                  class="p-4 bg-green-50 dark:bg-green-900/20 rounded-xl border border-green-200 dark:border-green-800"
                >
                  <h4 class="font-bold text-sm text-green-600 mb-2">
                    c. C·ªông HX (Markovnikov)
                  </h4>
                  <p class="text-xs text-gray-700 dark:text-gray-300">
                    "Gi√†u c√†ng gi√†u th√™m": H ∆∞u ti√™n c·ªông v√†o carbon b·∫≠c th·∫•p
                    h∆°n (ƒë√£ c√≥ nhi·ªÅu H h∆°n).
                  </p>
                </div>
                <div
                  class="p-4 bg-yellow-50 dark:bg-yellow-900/20 rounded-xl border border-yellow-200 dark:border-yellow-800"
                >
                  <h4 class="font-bold text-sm text-yellow-600 mb-2">
                    d. Ph·∫£n ·ª©ng tr√πng h·ª£p
                  </h4>
                  <ul
                    class="list-disc list-inside text-xs text-gray-700 dark:text-gray-300"
                  >
                    <li>Ethene ‚Üí Polyethene (PE)</li>
                    <li>Propene ‚Üí Polypropene (PP)</li>
                    <li>Ng√†nh nh·ª±a d·ª±a ch·ªß y·∫øu v√†o alkene.</li>
                  </ul>
                </div>
              </div>

              <!-- Sim 15: Terminal Alkyne Test -->
              <div
                class="p-4 bg-gray-50 dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700"
              >
                <div class="flex justify-between items-center mb-2">
                  <h4 class="font-bold text-sm text-gray-500">
                    e. T√≠nh acid nh·∫π c·ªßa alkyne ƒë·∫ßu m·∫°ch
                  </h4>
                  <span
                    class="text-[10px] bg-gray-500 text-white px-2 py-0.5 rounded"
                    >M√¥ ph·ªèng 15</span
                  >
                </div>
                <p class="text-xs mb-2 font-mono">
                  RC‚â°CH + AgNO‚ÇÉ/NH‚ÇÉ ‚Üí RC‚â°CAg‚Üì + NH‚ÇÑNO‚ÇÉ
                </p>
                <div
                  class="flex justify-center gap-12 h-44 bg-gray-200 dark:bg-gray-900 rounded-xl items-end pb-4 pt-4 relative"
                >
                  <div
                    class="cursor-pointer group flex flex-col items-center"
                    onclick="testAg('ethyne')"
                  >
                    <div
                      class="w-10 h-28 border-2 border-gray-400 border-t-0 rounded-b-2xl bg-white/40 relative overflow-hidden backdrop-blur-sm"
                    >
                      <div
                        id="ppt-ethyne"
                        class="absolute bottom-0 w-full h-0 bg-yellow-400 transition-all duration-1000 opacity-90 border-t border-yellow-500"
                      ></div>
                      <div
                        class="absolute bottom-0 w-full h-8 bg-gray-300/30"
                      ></div>
                    </div>
                    <p
                      class="text-[10px] text-center mt-2 font-bold bg-white dark:bg-gray-700 px-2 rounded"
                    >
                      Ethyne
                    </p>
                  </div>
                  <div
                    class="cursor-pointer group flex flex-col items-center"
                    onclick="testAg('but2yne')"
                  >
                    <div
                      class="w-10 h-28 border-2 border-gray-400 border-t-0 rounded-b-2xl bg-white/40 relative overflow-hidden backdrop-blur-sm"
                    >
                      <div
                        class="absolute bottom-0 w-full h-8 bg-gray-300/30"
                      ></div>
                    </div>
                    <p
                      class="text-[10px] text-center mt-2 font-bold bg-white dark:bg-gray-700 px-2 rounded"
                    >
                      But-2-yne
                    </p>
                  </div>
                  <div class="absolute top-2 text-[10px] text-gray-500">
                    Nh·∫•n ƒë·ªÉ th√™m AgNO‚ÇÉ/NH‚ÇÉ
                  </div>
                </div>
              </div>
            </div>

            <!-- 6. Application & Prep -->
            <div class="bg-white dark:bg-darkCard rounded-2xl shadow-lg p-6">
              <h3 class="font-bold text-gray-800 dark:text-white mb-2">
                6. ·ª®ng d·ª•ng v√† ƒëi·ªÅu ch·∫ø
              </h3>
              <div class="grid md:grid-cols-2 gap-4 text-sm">
                <div>
                  <h4 class="font-bold text-green-600 mb-1">·ª®ng d·ª•ng</h4>
                  <ul
                    class="list-disc list-inside text-xs text-gray-600 dark:text-gray-300"
                  >
                    <li>
                      <strong>Ethene:</strong> nh·ª±a PE, r∆∞·ª£u etylic, ethylene
                      oxide.
                    </li>
                    <li><strong>Propene:</strong> PP, cumene ‚Üí phenol.</li>
                    <li>
                      <strong>Acetylene:</strong> h√†n c·∫Øt kim lo·∫°i, nh·ª±a PVC.
                    </li>
                  </ul>
                </div>
                <div>
                  <h4 class="font-bold text-blue-600 mb-1">ƒêi·ªÅu ch·∫ø</h4>
                  <ul
                    class="list-disc list-inside text-xs text-gray-600 dark:text-gray-300"
                  >
                    <li>Cracking alkane.</li>
                    <li>Kh·ª≠ H alcohol (ƒëun n√≥ng, x√∫c t√°c).</li>
                    <li>
                      <strong>ƒêi·ªÅu ch·∫ø Acetylene:</strong><br />CaC‚ÇÇ + 2H‚ÇÇO ‚Üí
                      C‚ÇÇH‚ÇÇ + Ca(OH)‚ÇÇ.
                    </li>
                  </ul>
                </div>
              </div>
            </div>
          </div>

          <!-- 3D Models Visuals -->
          <div class="lg:col-span-5 space-y-6">
            <!-- Ethene 3D -->
            <div
              class="bg-gray-800 rounded-2xl shadow-xl overflow-hidden relative h-64 group border border-gray-700"
            >
              <span
                class="absolute top-2 left-2 px-2 py-1 bg-black/60 text-white text-[10px] font-bold rounded z-10 border border-white/10"
                >M√¥ ph·ªèng 17: Ethene (C‚ÇÇH‚ÇÑ)</span
              >
              <div id="canvas-ethene" class="canvas-container"></div>
            </div>
            <!-- Ethyne 3D -->
            <div
              class="bg-gray-800 rounded-2xl shadow-xl overflow-hidden relative h-64 group border border-gray-700"
            >
              <span
                class="absolute top-2 left-2 px-2 py-1 bg-black/60 text-white text-[10px] font-bold rounded z-10 border border-white/10"
                >M√¥ ph·ªèng 18: Ethyne (C‚ÇÇH‚ÇÇ)</span
              >
              <div id="canvas-ethyne" class="canvas-container"></div>
            </div>
            <!-- Prep Acetylene -->
            <div class="bg-white dark:bg-darkCard rounded-2xl shadow-lg p-4">
              <h4 class="font-bold text-sm text-gray-800 dark:text-white mb-2">
                M√¥ ph·ªèng 16: ƒêi·ªÅu ch·∫ø Acetylene
              </h4>
              <div
                class="bg-gray-800 h-40 rounded-xl relative overflow-hidden flex items-end justify-center border border-gray-700"
              >
                <div
                  class="absolute bottom-2 bg-gray-600 w-16 h-8 rounded border-b-4 border-r-4 border-gray-900 flex items-center justify-center text-[10px] text-white z-10"
                >
                  CaC<sub>2</sub>
                </div>
                <div
                  id="water-drop"
                  class="absolute top-4 w-3 h-3 bg-blue-400 rounded-full opacity-0"
                ></div>
                <div
                  id="gas-bubbles"
                  class="hidden absolute bottom-10 left-1/2 -translate-x-1/2 w-full h-full pointer-events-none"
                >
                  <!-- Bubbles injected here -->
                </div>
              </div>
              <button
                onclick="prepAcetylene()"
                class="w-full mt-2 py-2 bg-blue-500 text-white rounded text-xs font-bold hover:bg-blue-600 transition"
              >
                Nh·ªè n∆∞·ªõc (H‚ÇÇO) v√†o ƒë·∫•t ƒë√®n
              </button>
            </div>
          </div>
        </div>
      </section>

      <!-- TAB 3: ARENE -->
      <section id="tab-content-2" class="tab-content hidden animate-float">
        <div class="grid lg:grid-cols-12 gap-6">
          <div class="lg:col-span-7 space-y-6">
            <!-- Intro -->
            <div
              class="bg-white dark:bg-darkCard rounded-2xl shadow-lg p-6 border-l-4 border-arene"
            >
              <h2 class="text-2xl font-bold text-arene mb-3">
                <i class="fa-solid fa-cube mr-2"></i>III. ARENE (HYDROCARBON
                TH∆†M)
              </h2>
              <div class="space-y-4 text-sm">
                <!-- 1. Concept -->
                <div>
                  <h3 class="font-bold text-gray-800 dark:text-white mb-1">
                    1. Kh√°i ni·ªám
                  </h3>
                  <p class="text-gray-600 dark:text-gray-300">
                    Arene l√† c√°c hydrocarbon c√≥ ch·ª©a v√≤ng benzen. V√≠ d·ª•: benzen,
                    toluen, xylene, naphtalen.
                    <br /><strong>C·∫•u tr√∫c Benzen:</strong> V√≤ng 6 c·∫°nh ph·∫≥ng,
                    c√°c electron œÄ ph√¢n b·ªë ƒë·ªÅu (li√™n h·ª£p) ‚Üí t√≠nh th∆°m (r·∫•t b·ªÅn).
                  </p>
                </div>
                <!-- 2. Physical Properties -->
                <div>
                  <h3 class="font-bold text-gray-800 dark:text-white mb-1">
                    2. T√≠nh ch·∫•t v·∫≠t l√≠
                  </h3>
                  <ul
                    class="list-disc list-inside text-gray-600 dark:text-gray-300"
                  >
                    <li>
                      Ch·∫•t l·ªèng, kh√¥ng m√†u, d·ªÖ bay h∆°i, m√πi th∆°m ƒë·∫∑c tr∆∞ng.
                    </li>
                    <li>Kh√¥ng tan trong n∆∞·ªõc.</li>
                    <li>D·ªÖ ch√°y, t·∫°o kh√≥i ƒëen (do h√†m l∆∞·ª£ng Carbon cao).</li>
                  </ul>
                </div>
              </div>
            </div>

            <!-- Reactions -->
            <div class="bg-white dark:bg-darkCard rounded-2xl shadow-lg p-6">
              <h3 class="font-bold text-gray-800 dark:text-white mb-2">
                3. T√≠nh ch·∫•t ho√° h·ªçc
              </h3>
              <p class="text-sm text-gray-600 mb-4">
                Kh√°c v·ªõi alkene, benzen kh√¥ng th√≠ch ph·∫£n ·ª©ng c·ªông (v√¨ ph√° v·ª°
                t√≠nh th∆°m), m√† ch·ªß y·∫øu tham gia <strong>ph·∫£n ·ª©ng th·∫ø</strong>.
              </p>

              <!-- Sim 19 -->
              <div
                class="bg-orange-50 dark:bg-orange-900/20 p-4 rounded-xl border border-orange-100 dark:border-orange-800"
              >
                <h4
                  class="font-bold text-sm text-orange-800 dark:text-orange-400 mb-2"
                >
                  M√¥ ph·ªèng 19: C√°c ph·∫£n ·ª©ng th·∫ø quan tr·ªçng
                </h4>
                <div class="space-y-2">
                  <button
                    onclick="reactArene('br2')"
                    class="w-full text-left p-3 bg-white dark:bg-gray-800 rounded-lg text-xs hover:shadow-md transition border border-gray-100 dark:border-gray-700 flex justify-between items-center group"
                  >
                    <span class="font-bold text-gray-700 dark:text-gray-300"
                      >a. Th·∫ø Halogen (FeBr‚ÇÉ)</span
                    >
                    <span
                      class="text-gray-400 group-hover:text-arene transition"
                      >C‚ÇÜH‚ÇÜ + Br‚ÇÇ ‚Üí ?</span
                    >
                  </button>
                  <button
                    onclick="reactArene('hno3')"
                    class="w-full text-left p-3 bg-white dark:bg-gray-800 rounded-lg text-xs hover:shadow-md transition border border-gray-100 dark:border-gray-700 flex justify-between items-center group"
                  >
                    <span class="font-bold text-gray-700 dark:text-gray-300"
                      >b. Nitro h√≥a (H‚ÇÇSO‚ÇÑ)</span
                    >
                    <span
                      class="text-gray-400 group-hover:text-arene transition"
                      >C‚ÇÜH‚ÇÜ + HNO‚ÇÉ ‚Üí ?</span
                    >
                  </button>
                  <div
                    class="p-2 text-xs text-gray-600 dark:text-gray-400 ml-1"
                  >
                    <p>
                      <strong>c. Alkyl h√≥a (Friedel‚ÄìCrafts):</strong> C‚ÇÜH‚ÇÜ +
                      CH‚ÇÉCl ‚Üí C‚ÇÜH‚ÇÖCH‚ÇÉ + HCl (AlCl‚ÇÉ)
                    </p>
                  </div>
                </div>
                <div
                  id="arene-res"
                  class="mt-3 text-center text-sm font-bold h-8 flex items-center justify-center text-arene bg-white dark:bg-gray-900 rounded"
                >
                  Ch·ªçn ph·∫£n ·ª©ng ƒë·ªÉ xem k·∫øt qu·∫£
                </div>
              </div>
            </div>

            <!-- 4. Applications -->
            <div class="bg-white dark:bg-darkCard rounded-2xl shadow-lg p-6">
              <h3 class="font-bold text-gray-800 dark:text-white mb-2">
                4. ·ª®ng d·ª•ng v√† ƒëi·ªÅu ch·∫ø
              </h3>
              <div class="text-sm">
                <h4 class="font-bold text-green-600 mb-1">
                  ·ª®ng d·ª•ng h√≥a d·∫ßu quan tr·ªçng:
                </h4>
                <ul
                  class="list-disc list-inside text-gray-600 dark:text-gray-300 mb-2"
                >
                  <li><strong>Benzen:</strong> ‚Üí Styren ‚Üí Nh·ª±a PS.</li>
                  <li><strong>Toluen:</strong> ‚Üí Thu·ªëc n·ªï TNT.</li>
                  <li><strong>Xylene:</strong> ‚Üí Polyester (t∆° s·ª£i).</li>
                  <li>S·∫£n xu·∫•t thu·ªëc, ph·∫©m nhu·ªôm, d∆∞·ª£c li·ªáu.</li>
                </ul>
                <h4 class="font-bold text-blue-600 mb-1">ƒêi·ªÅu ch·∫ø:</h4>
                <ul
                  class="list-disc list-inside text-gray-600 dark:text-gray-300"
                >
                  <li>T√°ch t·ª´ d·∫ßu m·ªè (qu√° tr√¨nh reforming).</li>
                  <li>Chuy·ªÉn h√≥a alkane ‚Üí arene (x√∫c t√°c, nhi·ªát ƒë·ªô cao).</li>
                  <li>Tr·ª±c ti·∫øp t·ª´ nh·ª±a than ƒë√°.</li>
                </ul>
              </div>
            </div>

            <!-- Sim 20: Sooty Flame -->
            <div class="bg-white dark:bg-darkCard rounded-2xl shadow-lg p-6">
              <div class="flex justify-between items-center mb-4">
                <h3 class="font-bold text-gray-800 dark:text-white">
                  M√¥ ph·ªèng 20: So s√°nh khi ƒë·ªët ch√°y
                </h3>
              </div>
              <div
                class="flex justify-center gap-12 h-56 bg-gray-900 rounded-xl items-end pb-4 pt-4 border border-gray-700"
              >
                <!-- Hexane -->
                <div class="flex flex-col items-center">
                  <div class="relative h-32 flex items-end justify-center">
                    <div class="w-6 h-16 flame bg-blue-400 opacity-80"></div>
                    <div
                      class="absolute -top-4 w-1 h-1 bg-gray-400 rounded-full opacity-30 animate-rise"
                    ></div>
                  </div>
                  <span class="text-xs text-gray-400 mt-2 font-bold"
                    >Hexane (No)</span
                  >
                  <span class="text-[9px] text-gray-500">√çt kh√≥i</span>
                </div>
                <!-- Benzene -->
                <div class="flex flex-col items-center">
                  <div class="relative h-32 flex items-end justify-center">
                    <div class="w-8 h-20 flame bg-orange-600 opacity-90"></div>
                    <!-- Lots of smoke -->
                    <div
                      id="benzene-smoke-emitter"
                      class="absolute top-0 w-full flex justify-center"
                    ></div>
                  </div>
                  <span class="text-xs text-orange-400 mt-2 font-bold"
                    >Benzene (Th∆°m)</span
                  >
                  <span class="text-[9px] text-gray-500"
                    >Nhi·ªÅu mu·ªôi than (C% cao)</span
                  >
                </div>
              </div>
            </div>
          </div>

          <!-- 3D Benzene -->
          <div class="lg:col-span-5 space-y-6">
            <div
              class="bg-gray-800 rounded-2xl shadow-xl overflow-hidden relative h-80 group flex flex-col items-center justify-center border border-gray-700"
            >
              <span
                class="absolute top-2 left-2 px-2 py-1 bg-black/60 text-white text-[10px] font-bold rounded z-10 border border-white/10"
                >M√¥ ph·ªèng 21: Benzene (C‚ÇÜH‚ÇÜ)</span
              >
              <div id="canvas-benzene" class="canvas-container"></div>
              <div
                class="absolute bottom-4 left-4 right-4 bg-black/50 backdrop-blur rounded p-2 text-center"
              >
                <div class="text-[10px] text-white mb-1 font-bold">
                  H·ªá li√™n h·ª£p œÄ
                </div>
                <div class="h-1 w-full bg-gray-700 rounded overflow-hidden">
                  <div class="h-full bg-arene animate-pulse w-full"></div>
                </div>
              </div>
            </div>

            <!-- Resonance Visual -->
            <div class="bg-white dark:bg-darkCard rounded-2xl shadow-lg p-4">
              <h4 class="font-bold text-sm text-gray-800 dark:text-white mb-3">
                M√¥ ph·ªèng 22: C·∫•u tr√∫c c·ªông h∆∞·ªüng Kekul√©
              </h4>
              <div
                class="h-40 flex items-center justify-center gap-4 bg-gray-100 dark:bg-gray-800 rounded-xl"
              >
                <div
                  class="w-20 h-24 border-4 border-gray-800 dark:border-gray-400 relative hexagonal flex items-center justify-center"
                >
                  <!-- Double bonds set 1 -->
                  <div
                    class="absolute w-full h-full animate-[pulse_1s_infinite] opacity-100"
                    id="kekule-1"
                  >
                    <div
                      class="absolute top-2 right-1 w-1 h-8 bg-gray-800 dark:bg-gray-400 rotate-[30deg]"
                    ></div>
                    <div
                      class="absolute bottom-2 left-1 w-1 h-8 bg-gray-800 dark:bg-gray-400 rotate-[30deg]"
                    ></div>
                    <div
                      class="absolute top-1/2 left-0 w-1 h-8 bg-gray-800 dark:bg-gray-400 -translate-y-1/2 -rotate-90"
                    ></div>
                  </div>
                  <!-- Double bonds set 2 (Offset) -->
                  <div
                    class="absolute w-full h-full animate-[pulse_1s_infinite_reverse] opacity-50"
                    id="kekule-2"
                  >
                    <div
                      class="absolute top-2 left-1 w-1 h-8 bg-gray-600 dark:bg-gray-500 -rotate-[30deg]"
                    ></div>
                    <div
                      class="absolute bottom-2 right-1 w-1 h-8 bg-gray-600 dark:bg-gray-500 -rotate-[30deg]"
                    ></div>
                    <div
                      class="absolute top-1/2 right-0 w-1 h-8 bg-gray-600 dark:bg-gray-500 -translate-y-1/2 -rotate-90"
                    ></div>
                  </div>
                </div>
                <i class="fa-solid fa-arrow-right-arrow-left text-gray-400"></i>
                <div
                  class="w-20 h-24 border-4 border-arene relative hexagonal flex items-center justify-center"
                >
                  <div
                    class="w-12 h-12 rounded-full border-2 border-arene border-dashed animate-spin-slow"
                  ></div>
                </div>
              </div>
              <style>
                .hexagonal {
                  clip-path: polygon(
                    50% 0%,
                    100% 25%,
                    100% 75%,
                    50% 100%,
                    0% 75%,
                    0% 25%
                  );
                  background: transparent;
                }
                .animate-spin-slow {
                  animation: spin 4s linear infinite;
                }
              </style>
            </div>
          </div>
        </div>
      </section>
    </main>

    <!-- Scripts -->
    <script>
      // --- 1. Global Setup & Tabs ---
      const tabs = [
        { id: 0, name: "Alkane", color: "text-alkane" },
        { id: 1, name: "Alkene & Alkyne", color: "text-alkene" },
        { id: 2, name: "Arene", color: "text-arene" },
      ];
      let currentTab = 0;

      function renderTabs() {
        const desk = document.getElementById("desktop-tabs");
        const mobile = document.getElementById("mobile-tabs");

        const generateHTML = (isMobile) =>
          tabs
            .map(
              (t) => `
                <button onclick="switchTab(${t.id})" 
                    class="${
                      isMobile
                        ? "flex-shrink-0 px-4 py-2 rounded-lg text-sm font-bold border"
                        : "px-4 py-1.5 rounded-lg text-sm font-bold transition-all"
                    } 
                    ${
                      currentTab === t.id
                        ? isMobile
                          ? `bg-${t.name
                              .split(" ")[0]
                              .toLowerCase()} text-white border-transparent`
                          : "bg-white dark:bg-gray-700 shadow text-gray-900 dark:text-white"
                        : isMobile
                        ? "bg-gray-50 dark:bg-gray-800 text-gray-500 border-gray-200 dark:border-gray-700"
                        : "text-gray-500 hover:text-gray-700 dark:hover:text-gray-300"
                    }">
                    ${t.name}
                </button>
            `
            )
            .join("");

        desk.innerHTML = generateHTML(false);
        mobile.innerHTML = generateHTML(true);
      }

      function switchTab(id) {
        document
          .getElementById(`tab-content-${currentTab}`)
          .classList.add("hidden");
        document.getElementById(`tab-content-${id}`).classList.remove("hidden");
        currentTab = id;
        renderTabs();
        // Trigger resize for 3D canvases which might have been hidden
        window.dispatchEvent(new Event("resize"));
      }

      // --- 2. Theme Toggle ---
      const themeBtn = document.getElementById("theme-toggle");
      themeBtn.addEventListener("click", () => {
        document.documentElement.classList.toggle("dark");
        const isDark = document.documentElement.classList.contains("dark");
        localStorage.setItem("theme", isDark ? "dark" : "light");
        // Update Charts and 3D backgrounds if needed
        updateChartsTheme(isDark);
      });
      if (localStorage.getItem("theme") === "dark")
        document.documentElement.classList.add("dark");

      // --- 3. Simulations Logic ---

      // Sim 1: Nomenclature
      function checkName(btn, isCorrect) {
        const fb = document.getElementById("name-fb");
        if (isCorrect) {
          fb.textContent =
            "Ch√≠nh x√°c! M·∫°ch ch√≠nh 4C (Butane), nh√°nh Methyl ·ªü C2.";
          fb.className =
            "h-5 mt-2 text-center text-xs font-bold text-green-500";
          btn.classList.add("bg-green-100", "border-green-500");
        } else {
          fb.textContent = "Sai r·ªìi. Ph·∫£i ch·ªçn m·∫°ch d√†i nh·∫•t (4C).";
          fb.className = "h-5 mt-2 text-center text-xs font-bold text-red-500";
          btn.classList.add("bg-red-100", "border-red-500");
        }
        setTimeout(() => {
          btn.classList.remove(
            "bg-green-100",
            "border-green-500",
            "bg-red-100",
            "border-red-500"
          );
        }, 2000);
      }

      // Sim 2: BP Chart
      let bpChart;
      function initChart() {
        const ctx = document.getElementById("bpChart").getContext("2d");
        const isDark = document.documentElement.classList.contains("dark");
        const color = isDark ? "#fff" : "#333";

        bpChart = new Chart(ctx, {
          type: "line",
          data: {
            labels: ["C1", "C2", "C3", "C4", "C5", "C6"],
            datasets: [
              {
                label: "Nhi·ªát ƒë·ªô s√¥i (¬∞C)",
                data: [-161, -89, -42, -0.5, 36, 69],
                borderColor: "#10b981",
                backgroundColor: "rgba(16, 185, 129, 0.2)",
                tension: 0.4,
                fill: true,
              },
            ],
          },
          options: {
            responsive: true,
            maintainAspectRatio: false,
            plugins: { legend: { display: false } },
            scales: {
              y: {
                ticks: { color: color },
                grid: { color: isDark ? "#374151" : "#e5e7eb" },
              },
              x: { ticks: { color: color }, grid: { display: false } },
            },
          },
        });
      }
      function updateChartsTheme(isDark) {
        if (!bpChart) return;
        const color = isDark ? "#fff" : "#333";
        bpChart.options.scales.y.ticks.color = color;
        bpChart.options.scales.x.ticks.color = color;
        bpChart.options.scales.y.grid.color = isDark ? "#374151" : "#e5e7eb";
        bpChart.update();
      }

      // Sim 3: Solubility
      function shakeMixture() {
        const layer = document.getElementById("oil-layer");
        layer.style.top = "25%";
        layer.style.transform = "rotate(5deg)";
        setTimeout(() => {
          layer.style.transform = "rotate(-5deg)";
        }, 100);
        setTimeout(() => {
          layer.style.transform = "rotate(5deg)";
        }, 200);
        setTimeout(() => {
          layer.style.top = "0";
          layer.style.transform = "rotate(0)";
        }, 1000);
      }

      // Sim 4: Substitution
      function playSubst() {
        const flash = document.getElementById("subst-flash");
        const txt = document.getElementById("subst-mol");
        flash.style.opacity = "1";
        setTimeout(() => {
          flash.style.opacity = "0";
          txt.innerHTML = "CH<sub>3</sub>Cl + HCl";
          txt.classList.add("text-alkane");
        }, 200);
        setTimeout(() => {
          txt.innerHTML = "CH<sub>4</sub> + Cl<sub>2</sub>";
          txt.classList.remove("text-alkane");
        }, 3000);
      }

      // Sim 5: Combustion
      function adjustOxygen(val) {
        const blue = document.getElementById("flame-blue");
        const yellow = document.getElementById("flame-yellow");
        const soot = document.getElementById("soot-area");

        // Logic: High Val = More Blue, Less Yellow
        const blueOp = val / 100;
        const yellowOp = 1 - val / 100;

        blue.style.opacity = blueOp;
        yellow.style.opacity = yellowOp;

        soot.innerHTML = "";
        if (val < 40) {
          // Generate soot particles
          if (Math.random() > 0.7) {
            const p = document.createElement("div");
            p.className = "smoke-particle w-2 h-2 absolute left-1/2";
            p.style.left = Math.random() * 100 + "%";
            soot.appendChild(p);
            setTimeout(() => p.remove(), 2000);
          }
        }
      }

      // Sim 6: Cracking
      function crackChain() {
        const container = document.getElementById("long-chain");
        // Init chain
        if (container.children.length === 0 || container.children.length > 5) {
          container.innerHTML = "";
          for (let i = 0; i < 8; i++) {
            const c = document.createElement("div");
            c.className = "w-3 h-3 rounded-full bg-gray-600";
            container.appendChild(c);
          }
        } else {
          // Crack it
          container.innerHTML = `
                    <div class="flex gap-0.5 animate-float"><div class="w-3 h-3 rounded-full bg-alkane"></div><div class="w-3 h-3 rounded-full bg-alkane"></div></div>
                    <span class="mx-2 text-red-500 font-bold text-xs">+</span>
                    <div class="flex gap-0.5 animate-float" style="animation-delay: 0.5s"><div class="w-3 h-3 rounded-full bg-gray-400"></div><div class="w-3 h-3 rounded-full bg-gray-400"></div></div>
                `;
        }
      }
      // Initialize Sim 6
      crackChain();

      // Sim 10: Cis Trans
      function drawIsomer(type) {
        const container = document.getElementById("isomer-display");
        // Simplified CSS representation
        if (type === "cis") {
          container.innerHTML = `
                    <div class="flex flex-col items-center justify-center gap-1">
                        <div class="flex gap-8 mb-1">
                            <div class="w-8 h-8 rounded-full bg-alkane text-[10px] flex items-center justify-center text-white font-bold shadow-lg">CH3</div>
                            <div class="w-8 h-8 rounded-full bg-alkane text-[10px] flex items-center justify-center text-white font-bold shadow-lg">CH3</div>
                        </div>
                        <div class="w-24 h-2 bg-gray-800 rounded relative">
                            <div class="absolute w-full h-1 bg-gray-600 top-3 rounded"></div>
                        </div>
                        <div class="flex gap-8 mt-4">
                            <div class="w-6 h-6 rounded-full bg-gray-300 flex items-center justify-center text-[10px]">H</div>
                            <div class="w-6 h-6 rounded-full bg-gray-300 flex items-center justify-center text-[10px]">H</div>
                        </div>
                        <div class="text-xs font-bold text-red-500 mt-2">Cis (C√πng ph√≠a) - Ph√¢n c·ª±c</div>
                    </div>
                `;
        } else {
          container.innerHTML = `
                    <div class="flex flex-col items-center justify-center gap-1 relative h-32 w-full">
                        <div class="absolute top-2 left-1/3 w-8 h-8 rounded-full bg-alkane text-[10px] flex items-center justify-center text-white font-bold shadow-lg">CH3</div>
                        <div class="absolute bottom-2 right-1/3 w-8 h-8 rounded-full bg-alkane text-[10px] flex items-center justify-center text-white font-bold shadow-lg">CH3</div>
                        
                        <div class="w-24 h-2 bg-gray-800 rounded relative my-auto rotate-12">
                            <div class="absolute w-full h-1 bg-gray-600 top-3 rounded"></div>
                        </div>

                        <div class="absolute bottom-2 left-1/3 w-6 h-6 rounded-full bg-gray-300 flex items-center justify-center text-[10px]">H</div>
                        <div class="absolute top-2 right-1/3 w-6 h-6 rounded-full bg-gray-300 flex items-center justify-center text-[10px]">H</div>
                        <div class="absolute bottom-0 text-xs font-bold text-green-500">Trans (Kh√°c ph√≠a) - B·ªÅn h∆°n</div>
                    </div>
                `;
        }
      }
      drawIsomer("cis");

      // Sim 11: Hydrogenation
      function animateHydro() {
        const mol = document.getElementById("hydro-mol");
        const gas = document.getElementById("hydro-gas");
        gas.style.transform = "translateX(-50px)";
        gas.style.opacity = "0";
        setTimeout(() => {
          mol.innerHTML = "CH<sub>3</sub>-CH<sub>3</sub>";
          mol.classList.remove("text-white");
          mol.classList.add("text-alkane");
        }, 500);
        setTimeout(() => {
          mol.innerHTML = "CH<sub>2</sub>=CH<sub>2</sub>";
          mol.classList.add("text-white");
          mol.classList.remove("text-alkane");
          gas.style.transform = "translateX(0)";
          gas.style.opacity = "1";
        }, 3000);
      }

      // Sim 12: Bromine
      function dropBromine(type) {
        const drop = document.getElementById(`drop-${type}`);
        const liq = document.getElementById(`liq-${type}`);

        // Anim drop
        drop.style.opacity = "1";
        drop.style.top = "50%";

        setTimeout(() => {
          drop.style.opacity = "0";
          drop.style.top = "-8px"; // reset

          if (type === "alkene") {
            liq.classList.add("bg-orange-200");
            setTimeout(() => {
              liq.classList.remove("bg-orange-200"); // Fades to clear
              liq.classList.add("bg-transparent");
            }, 500);
          } else {
            liq.classList.add("bg-orange-500"); // Stays orange
          }
        }, 600);
      }

      // Sim 15: Ag Test
      function testAg(type) {
        if (type === "ethyne") {
          const ppt = document.getElementById("ppt-ethyne");
          ppt.style.height = "20px";
          setTimeout(() => {
            ppt.style.height = "0px";
          }, 4000);
        }
      }

      // Sim 16: Prep Acetylene
      function prepAcetylene() {
        const drop = document.getElementById("water-drop");
        const bubbleCont = document.getElementById("gas-bubbles");

        drop.style.opacity = "1";
        drop.style.top = "70%"; // Fall down

        setTimeout(() => {
          drop.style.opacity = "0";
          drop.style.top = "1rem";

          // Bubbles
          bubbleCont.innerHTML = "";
          bubbleCont.classList.remove("hidden");
          for (let i = 0; i < 5; i++) {
            setTimeout(() => {
              const b = document.createElement("div");
              b.className =
                "w-2 h-2 bg-white rounded-full animate-rise absolute bottom-0";
              b.style.left = Math.random() * 20 + "px";
              bubbleCont.appendChild(b);
            }, i * 300);
          }
          setTimeout(() => bubbleCont.classList.add("hidden"), 3000);
        }, 500);
      }

      // Sim 19: Arene reactions
      function reactArene(type) {
        const res = document.getElementById("arene-res");
        if (type === "br2") {
          res.textContent = "Bromobenzene (C‚ÇÜH‚ÇÖBr) + HBr ‚Üë";
        } else {
          res.textContent = "Nitrobenzene (C‚ÇÜH‚ÇÖNO‚ÇÇ) + H‚ÇÇO";
        }
      }

      // Sim 20: Benzene Smoke
      setInterval(() => {
        if (currentTab === 2) {
          // Only if tab open
          const emitter = document.getElementById("benzene-smoke-emitter");
          if (emitter && Math.random() > 0.5) {
            const p = document.createElement("div");
            p.className =
              "smoke-particle w-3 h-3 bg-black opacity-60 rounded-full absolute";
            p.style.left = Math.random() * 20 - 10 + "px";
            emitter.appendChild(p);
            setTimeout(() => p.remove(), 2000);
          }
        }
      }, 300);

      // --- 4. Three.js 3D Models ---

      function initMolecule(containerId, type) {
        const container = document.getElementById(containerId);
        if (!container) return;

        const scene = new THREE.Scene();
        scene.background = new THREE.Color(0x1f2937); // Dark gray

        const camera = new THREE.PerspectiveCamera(
          50,
          container.clientWidth / container.clientHeight,
          0.1,
          100
        );
        camera.position.z = 5;

        const renderer = new THREE.WebGLRenderer({
          antialias: true,
          alpha: true,
        });
        renderer.setSize(container.clientWidth, container.clientHeight);
        container.appendChild(renderer.domElement);

        const controls = new THREE.OrbitControls(camera, renderer.domElement);
        controls.enableZoom = false;
        controls.autoRotate = true;
        controls.autoRotateSpeed = 2;

        // Lights
        const ambientLight = new THREE.AmbientLight(0xffffff, 0.6);
        scene.add(ambientLight);
        const dirLight = new THREE.DirectionalLight(0xffffff, 0.8);
        dirLight.position.set(5, 5, 5);
        scene.add(dirLight);

        // Helpers
        const createAtom = (color, size, x, y, z) => {
          const geo = new THREE.SphereGeometry(size, 32, 32);
          const mat = new THREE.MeshPhongMaterial({
            color: color,
            shininess: 100,
          });
          const mesh = new THREE.Mesh(geo, mat);
          mesh.position.set(x, y, z);
          scene.add(mesh);
          return mesh;
        };

        const createBond = (start, end, type = "single") => {
          const direction = new THREE.Vector3().subVectors(end, start);
          const length = direction.length();
          const orientation = new THREE.Matrix4();
          orientation.lookAt(start, end, new THREE.Object3D().up);
          orientation.multiply(
            new THREE.Matrix4().set(
              1,
              0,
              0,
              0,
              0,
              0,
              1,
              0,
              0,
              -1,
              0,
              0,
              0,
              0,
              0,
              1
            )
          );

          if (type === "single") {
            const geo = new THREE.CylinderGeometry(0.1, 0.1, length, 12);
            const mat = new THREE.MeshPhongMaterial({ color: 0x9ca3af });
            const mesh = new THREE.Mesh(geo, mat);
            mesh.applyMatrix4(orientation);
            mesh.position.copy(start).add(direction.multiplyScalar(0.5));
            scene.add(mesh);
          } else if (type === "double") {
            const offset = 0.15;
            const geo = new THREE.CylinderGeometry(0.08, 0.08, length, 12);
            const mat = new THREE.MeshPhongMaterial({ color: 0x9ca3af });

            const mesh1 = new THREE.Mesh(geo, mat);
            mesh1.applyMatrix4(orientation);
            mesh1.position
              .copy(start)
              .add(direction.clone().multiplyScalar(0.5));
            mesh1.translateX(offset);
            scene.add(mesh1);

            const mesh2 = new THREE.Mesh(geo, mat);
            mesh2.applyMatrix4(orientation);
            mesh2.position
              .copy(start)
              .add(direction.clone().multiplyScalar(0.5));
            mesh2.translateX(-offset);
            scene.add(mesh2);
          } else if (type === "triple") {
            const geo = new THREE.CylinderGeometry(0.3, 0.3, length, 12); // Thick cylinder
            const mat = new THREE.MeshPhongMaterial({ color: 0x666666 });
            const mesh = new THREE.Mesh(geo, mat);
            mesh.applyMatrix4(orientation);
            mesh.position.copy(start).add(direction.multiplyScalar(0.5));
            scene.add(mesh);
          }
        };

        const atomC = 0x333333; // Black/Grey
        const atomH = 0xffffff; // White

        if (type === "methane") {
          createAtom(atomC, 0.6, 0, 0, 0);
          // Tetrahedral coords approx
          const hCoords = [
            [0.8, 0.8, 0.8],
            [-0.8, -0.8, 0.8],
            [-0.8, 0.8, -0.8],
            [0.8, -0.8, -0.8],
          ];
          hCoords.forEach((pos) => {
            createAtom(atomH, 0.3, pos[0], pos[1], pos[2]);
            createBond(
              new THREE.Vector3(0, 0, 0),
              new THREE.Vector3(pos[0], pos[1], pos[2])
            );
          });
        } else if (type === "ethene") {
          // C=C
          createAtom(atomC, 0.6, -0.7, 0, 0);
          createAtom(atomC, 0.6, 0.7, 0, 0);
          createBond(
            new THREE.Vector3(-0.7, 0, 0),
            new THREE.Vector3(0.7, 0, 0),
            "double"
          );

          // H
          const hPos = [
            [-1.5, 1, 0],
            [-1.5, -1, 0],
            [1.5, 1, 0],
            [1.5, -1, 0],
          ];
          hPos.forEach((pos, idx) => {
            createAtom(atomH, 0.3, pos[0], pos[1], pos[2]);
            createBond(
              new THREE.Vector3(idx < 2 ? -0.7 : 0.7, 0, 0),
              new THREE.Vector3(pos[0], pos[1], pos[2])
            );
          });
        } else if (type === "ethyne") {
          createAtom(atomC, 0.6, -0.6, 0, 0);
          createAtom(atomC, 0.6, 0.6, 0, 0);
          createBond(
            new THREE.Vector3(-0.6, 0, 0),
            new THREE.Vector3(0.6, 0, 0),
            "triple"
          );

          createAtom(atomH, 0.3, -1.8, 0, 0);
          createBond(
            new THREE.Vector3(-0.6, 0, 0),
            new THREE.Vector3(-1.8, 0, 0)
          );

          createAtom(atomH, 0.3, 1.8, 0, 0);
          createBond(
            new THREE.Vector3(0.6, 0, 0),
            new THREE.Vector3(1.8, 0, 0)
          );
        } else if (type === "benzene") {
          const radius = 1.5;
          const cPoints = [];
          for (let i = 0; i < 6; i++) {
            const theta = (i / 6) * Math.PI * 2;
            const x = Math.cos(theta) * radius;
            const y = Math.sin(theta) * radius;
            cPoints.push(new THREE.Vector3(x, y, 0));
            createAtom(atomC, 0.5, x, y, 0);

            // H atoms
            const hX = Math.cos(theta) * (radius + 1);
            const hY = Math.sin(theta) * (radius + 1);
            createAtom(atomH, 0.25, hX, hY, 0);
            createBond(
              new THREE.Vector3(x, y, 0),
              new THREE.Vector3(hX, hY, 0)
            );
          }

          // Ring bonds
          for (let i = 0; i < 6; i++) {
            const next = (i + 1) % 6;
            // Alternating double/single for visualization, though technically delocalized
            const type = i % 2 === 0 ? "double" : "single";
            createBond(cPoints[i], cPoints[next], type);
          }

          // Delocalized ring visual (Torus inside)
          const torusGeo = new THREE.TorusGeometry(0.8, 0.05, 16, 100);
          const torusMat = new THREE.MeshBasicMaterial({
            color: 0xf59e0b,
            transparent: true,
            opacity: 0.5,
          });
          const torus = new THREE.Mesh(torusGeo, torusMat);
          scene.add(torus);
        }

        // Animation Loop
        function animate() {
          requestAnimationFrame(animate);
          controls.update();
          renderer.render(scene, camera);
        }
        animate();

        // Resize handle
        window.addEventListener("resize", () => {
          camera.aspect = container.clientWidth / container.clientHeight;
          camera.updateProjectionMatrix();
          renderer.setSize(container.clientWidth, container.clientHeight);
        });
      }

      // --- Init Logic ---
      window.onload = function () {
        renderTabs();
        initChart();
        initMolecule("canvas-methane", "methane");
        initMolecule("canvas-ethene", "ethene");
        initMolecule("canvas-ethyne", "ethyne");
        initMolecule("canvas-benzene", "benzene");
      };
    </script>
  </body>
</html>
