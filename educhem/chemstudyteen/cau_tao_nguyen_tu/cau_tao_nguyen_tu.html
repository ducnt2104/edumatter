<!DOCTYPE html>
<html lang="vi">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>H√≥a H·ªçc 10 - C·∫•u T·∫°o Nguy√™n T·ª≠</title>
    <link rel="icon" href="../../../favicon/educhem.svg" type="image/svg+xml" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/controls/OrbitControls.js"></script>
    <link
      href="https://fonts.googleapis.com/css2?family=Nunito:wght@400;600;700;800&display=swap"
      rel="stylesheet"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css"
    />
    <style>
      :root {
        --primary: #4361ee;
        --primary-dark: #3a0ca3;
        --secondary: #7209b7;
        --accent: #f72585;
        --success: #4cc9f0;
        --bg: #f8f9fa;
        --card-bg: #ffffff;
        --text: #2b2d42;
        --text-light: #6c757d;
        --border: #e9ecef;
        --shadow: 0 4px 6px rgba(0, 0, 0, 0.05);
        --radius: 12px;
      }

      [data-theme="dark"] {
        --primary: #4cc9f0;
        --primary-dark: #4895ef;
        --secondary: #7209b7;
        --accent: #f72585;
        --bg: #121212;
        --card-bg: #1e1e1e;
        --text: #e0e0e0;
        --text-light: #adb5bd;
        --border: #333;
        --shadow: 0 4px 6px rgba(0, 0, 0, 0.4);
      }

      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
        transition: background 0.3s, color 0.3s, border-color 0.3s;
      }

      html {
        scroll-behavior: smooth;
      }

      body {
        font-family: "Nunito", sans-serif;
        background-color: var(--bg);
        color: var(--text);
        line-height: 1.6;
        padding-top: 120px; /* Space for fixed header */
      }

      /* --- HEADER & NAV --- */
      .main-header {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        background: var(--card-bg);
        box-shadow: var(--shadow);
        z-index: 1000;
        padding: 10px 0;
      }

      .header-top {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 0 20px 10px;
        border-bottom: 1px solid var(--border);
      }

      .header-left {
        display: flex;
        align-items: center;
        gap: 15px;
      }

      .logo-area {
        display: flex;
        align-items: center;
        gap: 10px;
        font-weight: 800;
        font-size: 1.2rem;
        color: var(--primary);
      }

      .nav-bar {
        display: flex;
        justify-content: center;
        padding: 10px 0 0;
        gap: 20px;
        overflow-x: auto;
      }

      .nav-link {
        text-decoration: none;
        color: var(--text-light);
        font-weight: 700;
        padding: 5px 15px;
        border-radius: 20px;
        white-space: nowrap;
        font-size: 0.9rem;
      }

      .nav-link:hover,
      .nav-link.active {
        background: var(--primary);
        color: white;
      }

      /* Style chung cho n√∫t Back v√† Toggle Theme */
      .icon-btn {
        background: var(--bg);
        border: 1px solid var(--border);
        color: var(--text);
        width: 40px;
        height: 40px;
        border-radius: 50%;
        cursor: pointer;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 1.1rem;
        text-decoration: none; /* Cho th·∫ª a */
        transition: all 0.3s ease;
      }

      .icon-btn:hover {
        background: var(--primary);
        color: white;
        border-color: var(--primary);
        transform: translateY(-2px);
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
      }

      /* --- CONTENT LAYOUT --- */
      .container {
        max-width: 1000px;
        margin: 0 auto;
        padding: 20px;
      }

      .section-block {
        scroll-margin-top: 140px;
        margin-bottom: 60px;
      }

      .section-title {
        font-size: 2rem;
        color: var(--primary);
        text-transform: uppercase;
        border-left: 5px solid var(--accent);
        padding-left: 15px;
        margin-bottom: 30px;
        font-weight: 800;
      }

      .card {
        background: var(--card-bg);
        border-radius: var(--radius);
        padding: 25px;
        margin-bottom: 25px;
        box-shadow: var(--shadow);
        border: 1px solid var(--border);
      }

      h3 {
        color: var(--secondary);
        margin-bottom: 15px;
        font-size: 1.3rem;
        display: flex;
        align-items: center;
        gap: 10px;
      }

      h3 i {
        color: var(--accent);
      }

      ul {
        list-style-position: inside;
        padding-left: 10px;
      }

      li {
        margin-bottom: 8px;
      }

      strong {
        color: var(--primary);
      }

      /* --- TABLES --- */
      .table-responsive {
        overflow-x: auto;
        border-radius: var(--radius);
        border: 1px solid var(--border);
      }

      table {
        width: 100%;
        border-collapse: collapse;
        font-size: 0.95rem;
        min-width: 600px;
      }

      th,
      td {
        padding: 12px 15px;
        text-align: left;
        border-bottom: 1px solid var(--border);
      }

      th {
        background-color: rgba(67, 97, 238, 0.1);
        color: var(--primary);
        font-weight: 800;
      }

      tr:last-child td {
        border-bottom: none;
      }

      /* --- SPECIAL BOXES & FORMULAS --- */
      .highlight-box {
        background: rgba(76, 201, 240, 0.1);
        padding: 20px;
        border-radius: var(--radius);
        border: 1px dashed var(--primary);
        margin: 15px 0;
        text-align: center;
      }

      .formula-container {
        display: flex;
        align-items: center;
        justify-content: center;
        font-family: "Courier New", monospace;
        font-weight: bold;
        font-size: 1.4rem;
        color: var(--accent);
        margin: 15px 0;
        gap: 10px;
      }

      .fraction {
        display: inline-block;
        text-align: center;
        vertical-align: middle;
      }

      .fraction-top {
        border-bottom: 2px solid var(--accent);
        padding-bottom: 2px;
        display: block;
      }

      .fraction-bottom {
        padding-top: 2px;
        display: block;
      }

      .note {
        font-size: 0.9rem;
        color: var(--text-light);
        font-style: italic;
      }

      /* --- SIMULATION CONTAINERS --- */
      .sim-wrapper {
        position: relative;
        background: #000;
        border-radius: var(--radius);
        overflow: hidden;
        margin: 20px 0;
        box-shadow: var(--shadow);
      }

      #atom-canvas {
        width: 100%;
        height: 400px;
        display: block;
      }

      .sim-controls {
        padding: 15px;
        background: rgba(255, 255, 255, 0.1);
        backdrop-filter: blur(10px);
        position: absolute;
        bottom: 0;
        width: 100%;
        display: flex;
        gap: 10px;
        flex-wrap: wrap;
        justify-content: center;
      }

      [data-theme="light"] .sim-controls {
        background: rgba(255, 255, 255, 0.8);
        border-top: 1px solid #ddd;
      }

      .btn {
        background: var(--primary);
        color: white;
        border: none;
        padding: 8px 16px;
        border-radius: 8px;
        cursor: pointer;
        font-weight: 700;
        font-size: 0.9rem;
      }

      .btn:hover {
        background: var(--primary-dark);
        transform: translateY(-2px);
      }

      .btn.accent {
        background: var(--accent);
      }

      .btn.outline {
        background: transparent;
        border: 2px solid var(--primary);
        color: var(--primary);
      }

      .btn.outline:hover {
        background: var(--primary);
        color: white;
      }

      /* --- CALCULATOR BOX --- */
      .calc-box {
        background: var(--bg);
        padding: 20px;
        border-radius: var(--radius);
        margin-top: 25px;
        border-left: 4px solid var(--secondary);
        box-shadow: inset 0 0 10px rgba(0, 0, 0, 0.03);
      }

      .calc-title {
        margin-bottom: 15px;
        color: var(--secondary);
        font-weight: 800;
        text-transform: uppercase;
        font-size: 1rem;
        display: flex;
        align-items: center;
        gap: 8px;
      }

      /* --- AUFBAU DIAGRAM --- */
      .aufbau-container {
        display: flex;
        flex-direction: column-reverse; /* Energy goes up */
        align-items: center;
        gap: 15px;
        padding: 20px;
        background: var(--card-bg);
        border: 1px solid var(--border);
        border-radius: var(--radius);
        margin-top: 20px;
      }

      .orbital-row {
        display: flex;
        align-items: center;
        gap: 20px;
      }

      .subshell {
        display: flex;
        gap: 5px;
        position: relative;
      }

      .subshell-label {
        position: absolute;
        left: -35px;
        top: 50%;
        transform: translateY(-50%);
        font-weight: bold;
        font-size: 0.85rem;
        color: var(--text-light);
      }

      .orbital-box {
        width: 40px;
        height: 40px;
        border: 2px solid var(--text-light);
        display: flex;
        justify-content: center;
        align-items: center;
        font-size: 1.2rem;
        background: rgba(0, 0, 0, 0.03);
        border-radius: 4px;
      }

      .spin-arrow {
        font-weight: bold;
      }

      .spin-up {
        color: var(--accent);
      }

      .spin-down {
        color: var(--primary);
      }

      /* --- RESPONSIVE --- */
      @media (max-width: 600px) {
        .section-title {
          font-size: 1.5rem;
        }

        .orbital-box {
          width: 30px;
          height: 30px;
          font-size: 1rem;
        }

        .header-top {
          /* flex-direction: column; */
          /* gap: 10px; */
          /* align-items: flex-start; */
        }

        .logo-area span {
          display: none; /* Hide text on very small screens if needed */
        }
      }
    </style>
  </head>
  <body>
    <header class="main-header">
      <div class="header-top">
        <div class="header-left">
          <a
            href="../chemstudyteen.html"
            class="icon-btn"
            title="Quay v·ªÅ Danh s√°ch"
          >
            <i class="fas fa-arrow-left"></i>
          </a>

          <div class="logo-area">
            <i class="fas fa-atom fa-spin"></i>
            <span
              >chemstudy teen - H√ìA H·ªåC 10: ch·ªß ƒë·ªÅ 1: c·∫•u t·∫°o nguy√™n t·ª≠</span
            >
          </div>
        </div>

        <button
          class="icon-btn theme-toggle"
          onclick="toggleTheme()"
          title="ƒê·ªïi ch·∫ø ƒë·ªô S√°ng/T·ªëi"
        >
          <i class="fas fa-moon"></i>
        </button>
      </div>

      <nav class="nav-bar">
        <a href="#phan1" class="nav-link">I. Th√†nh ph·∫ßn NT</a>
        <a href="#phan2" class="nav-link">II. Nguy√™n t·ªë & ƒê·ªìng v·ªã</a>
        <a href="#phan3" class="nav-link">III. C·∫•u tr√∫c v·ªè e</a>
      </nav>
    </header>

    <div class="container">
      <section id="phan1" class="section-block">
        <h1 class="section-title">I. Th√†nh Ph·∫ßn C·ªßa Nguy√™n T·ª≠</h1>

        <div class="card">
          <h3><i class="fas fa-microscope"></i> 1. Th√†nh ph·∫ßn c·∫•u t·∫°o</h3>
          <p>
            Nguy√™n t·ª≠ l√† h·∫°t v√¥ c√πng nh·ªè, trung h√≤a v·ªÅ ƒëi·ªán, g·ªìm 2 ph·∫ßn ch√≠nh:
          </p>
          <ul style="margin-top: 10px">
            <li>
              <strong>H·∫°t nh√¢n (Nucleus):</strong> N·∫±m ·ªü t√¢m, mang ƒëi·ªán t√≠ch
              d∆∞∆°ng (+). G·ªìm h·∫°t Proton (p) v√† Neutron (n).
            </li>
            <li>
              <strong>V·ªè nguy√™n t·ª≠ (Electron Shell):</strong> G·ªìm c√°c Electron
              (e) mang ƒëi·ªán t√≠ch √¢m (-) chuy·ªÉn ƒë·ªông r·∫•t nhanh xung quanh h·∫°t
              nh√¢n.
            </li>
          </ul>
          <div class="highlight-box">
            V√¨ nguy√™n t·ª≠ trung h√≤a v·ªÅ ƒëi·ªán n√™n: <br />
            <strong style="font-size: 1.2rem"
              >S·ªë Proton (p) = S·ªë Electron (e) = Z</strong
            >
          </div>
        </div>

        <div class="card">
          <h3><i class="fas fa-cube"></i> M√¥ ph·ªèng c·∫•u t·∫°o nguy√™n t·ª≠</h3>
          <p class="note">
            Di chu·ªôt ƒë·ªÉ xoay, lƒÉn chu·ªôt ƒë·ªÉ ph√≥ng to. H·∫°t ƒë·ªè: Proton, H·∫°t x√°m:
            Neutron, H·∫°t v√†ng: Electron.
          </p>
          <div class="sim-wrapper">
            <div id="atom-canvas"></div>
            <div class="sim-controls">
              <button class="btn" onclick="updateAtom(1)">
                Hydro (1p, 0n)
              </button>
              <button class="btn" onclick="updateAtom(2)">Heli (2p, 2n)</button>
              <button class="btn" onclick="updateAtom(3)">Liti (3p, 4n)</button>
              <button class="btn" onclick="updateAtom(6)">
                Cacbon (6p, 6n)
              </button>
            </div>
          </div>
        </div>

        <div class="card">
          <h3><i class="fas fa-table"></i> 2. ƒê·∫∑c t√≠nh c√°c h·∫°t c∆° b·∫£n</h3>
          <div class="table-responsive">
            <table>
              <thead>
                <tr>
                  <th>H·∫°t</th>
                  <th>K√Ω hi·ªáu</th>
                  <th>ƒêi·ªán t√≠ch (Cul√¥ng)</th>
                  <th>ƒêi·ªán t√≠ch (Quy ∆∞·ªõc)</th>
                  <th>Kh·ªëi l∆∞·ª£ng (amu)</th>
                  <th>Kh·ªëi l∆∞·ª£ng (kg)</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td><strong>Proton</strong></td>
                  <td>p</td>
                  <td>+1,602 √ó 10<sup>-19</sup></td>
                  <td>+1</td>
                  <td>‚âà 1</td>
                  <td>1,673 √ó 10<sup>-27</sup></td>
                </tr>
                <tr>
                  <td><strong>Neutron</strong></td>
                  <td>n</td>
                  <td>0</td>
                  <td>0</td>
                  <td>‚âà 1</td>
                  <td>1,675 √ó 10<sup>-27</sup></td>
                </tr>
                <tr>
                  <td><strong>Electron</strong></td>
                  <td>e</td>
                  <td>-1,602 √ó 10<sup>-19</sup></td>
                  <td>-1</td>
                  <td>‚âà 0,00055 (1/1840)</td>
                  <td>9,11 √ó 10<sup>-31</sup></td>
                </tr>
              </tbody>
            </table>
          </div>
          <p style="margin-top: 15px">
            ‚û§ <strong>K·∫øt lu·∫≠n:</strong> Kh·ªëi l∆∞·ª£ng electron r·∫•t nh·ªè so v·ªõi
            proton v√† neutron, n√™n kh·ªëi l∆∞·ª£ng nguy√™n t·ª≠ t·∫≠p trung h·∫ßu h·∫øt ·ªü h·∫°t
            nh√¢n.
          </p>
        </div>

        <div class="card">
          <h3>
            <i class="fas fa-ruler-combined"></i> 3. K√≠ch th∆∞·ªõc & Kh·ªëi l∆∞·ª£ng
          </h3>
          <ul>
            <li>
              <strong>ƒê∆∞·ªùng k√≠nh:</strong> Nguy√™n t·ª≠ (~10<sup>-10</sup>m) > H·∫°t
              nh√¢n (~10<sup>-14</sup>m).
            </li>
            <li>
              <strong>C·∫•u tr√∫c r·ªóng:</strong> N·∫øu coi h·∫°t nh√¢n l√† qu·∫£ b√≥ng b√†n
              th√¨ nguy√™n t·ª≠ to b·∫±ng s√¢n v·∫≠n ƒë·ªông.
            </li>
            <li>
              <strong>ƒê∆°n v·ªã kh·ªëi l∆∞·ª£ng nguy√™n t·ª≠ (amu/u):</strong> 1 amu = 1/12
              kh·ªëi l∆∞·ª£ng nguy√™n t·ª≠ Carbon-12.
            </li>
          </ul>
        </div>
      </section>

      <section id="phan2" class="section-block">
        <h1 class="section-title">II. Nguy√™n T·ªë H√≥a H·ªçc</h1>

        <div class="card">
          <h3><i class="fas fa-fingerprint"></i> 1. ƒê·ªãnh nghƒ©a & S·ªë kh·ªëi</h3>
          <ul>
            <li>
              <strong>Nguy√™n t·ªë h√≥a h·ªçc:</strong> L√† t·∫≠p h·ª£p c√°c nguy√™n t·ª≠ c√≥
              c√πng s·ªë ƒë∆°n v·ªã ƒëi·ªán t√≠ch h·∫°t nh√¢n (c√πng s·ªë proton Z).
            </li>
            <li>S·ªë Z quy·∫øt ƒë·ªãnh t√≠nh ch·∫•t h√≥a h·ªçc c∆° b·∫£n c·ªßa nguy√™n t·ªë.</li>
            <li>
              <strong>S·ªë kh·ªëi (A):</strong> T·ªïng s·ªë h·∫°t trong h·∫°t nh√¢n.
              <div
                class="formula-container"
                style="justify-content: flex-start; margin-left: 20px"
              >
                A = Z + N
              </div>
            </li>
            <li>
              <strong>K√Ω hi·ªáu nguy√™n t·ª≠:</strong>
              <span
                style="
                  font-family: serif;
                  font-size: 1.5rem;
                  display: inline-block;
                  vertical-align: middle;
                  line-height: 1;
                "
              >
                <sup>A</sup><sub style="margin-left: -12px">Z</sub
                ><span style="font-size: 2rem; font-weight: bold">X</span>
              </span>
            </li>
          </ul>
        </div>

        <div class="card">
          <h3><i class="fas fa-copy"></i> 2. ƒê·ªìng v·ªã (Isotopes)</h3>
          <p>
            L√† nh·ªØng nguy√™n t·ª≠ c·ªßa <strong>c√πng m·ªôt nguy√™n t·ªë</strong> (c√πng Z),
            nh∆∞ng kh√°c nhau v·ªÅ s·ªë <strong>Neutron</strong> (kh√°c N) d·∫´n ƒë·∫øn
            <strong>s·ªë kh·ªëi A</strong> kh√°c nhau.
          </p>
          <p>
            <em>V√≠ d·ª•:</em> Hydro c√≥ 3 ƒë·ªìng v·ªã: <sup>1</sup>H (Protium),
            <sup>2</sup>H (Deuterium), <sup>3</sup>H (Tritium).
          </p>
        </div>

        <div class="card">
          <h3>
            <i class="fas fa-calculator"></i> 3. Nguy√™n t·ª≠ kh·ªëi trung b√¨nh
          </h3>
          <p>
            H·∫ßu h·∫øt c√°c nguy√™n t·ªë trong t·ª± nhi√™n l√† h·ªón h·ª£p c·ªßa nhi·ªÅu ƒë·ªìng v·ªã.
            C√¥ng th·ª©c t√≠nh nguy√™n t·ª≠ kh·ªëi trung b√¨nh (ƒÄ) nh∆∞ sau:
          </p>
          <div class="highlight-box">
            <div class="formula-container">
              <span>ƒÄ = </span>
              <span class="fraction">
                <span class="fraction-top">(a . X) + (b . Y) + ...</span>
                <span class="fraction-bottom">100</span>
              </span>
            </div>
            <p>Trong ƒë√≥:</p>
            <ul style="list-style: none; padding: 0">
              <li><strong>X, Y:</strong> S·ªë kh·ªëi c·ªßa c√°c ƒë·ªìng v·ªã.</li>
              <li>
                <strong>a, b:</strong> Ph·∫ßn trƒÉm (%) s·ªë nguy√™n t·ª≠ t∆∞∆°ng ·ª©ng.
              </li>
            </ul>
          </div>

          <div class="calc-box">
            <div class="calc-title">
              <i class="fas fa-flask"></i> C√¥ng c·ª• th·ª±c h√†nh: T√≠nh Nguy√™n t·ª≠
              kh·ªëi
            </div>
            <div style="display: flex; gap: 10px; flex-wrap: wrap">
              <div style="flex: 1; min-width: 150px">
                <label style="font-weight: bold; font-size: 0.9em"
                  >ƒê·ªìng v·ªã 1 (S·ªë kh·ªëi):</label
                >
                <input
                  type="number"
                  id="mass1"
                  class="btn outline"
                  style="width: 100%; text-align: left; color: var(--text)"
                  placeholder="VD: 35 (Cl)"
                />
              </div>
              <div style="flex: 1; min-width: 150px">
                <label style="font-weight: bold; font-size: 0.9em"
                  >Ph·∫ßn trƒÉm (%):</label
                >
                <input
                  type="number"
                  id="pct1"
                  class="btn outline"
                  style="width: 100%; text-align: left; color: var(--text)"
                  placeholder="VD: 75"
                  oninput="document.getElementById('pct2').value = 100 - this.value"
                />
              </div>
            </div>
            <div
              style="
                display: flex;
                gap: 10px;
                flex-wrap: wrap;
                margin-top: 15px;
              "
            >
              <div style="flex: 1; min-width: 150px">
                <label style="font-weight: bold; font-size: 0.9em"
                  >ƒê·ªìng v·ªã 2 (S·ªë kh·ªëi):</label
                >
                <input
                  type="number"
                  id="mass2"
                  class="btn outline"
                  style="width: 100%; text-align: left; color: var(--text)"
                  placeholder="VD: 37 (Cl)"
                />
              </div>
              <div style="flex: 1; min-width: 150px">
                <label style="font-weight: bold; font-size: 0.9em"
                  >Ph·∫ßn trƒÉm (%):</label
                >
                <input
                  type="number"
                  id="pct2"
                  class="btn outline"
                  style="
                    width: 100%;
                    text-align: left;
                    color: var(--text);
                    background: #eee;
                  "
                  readonly
                />
              </div>
            </div>
            <button
              onclick="calculateAvgMass()"
              class="btn accent"
              style="width: 100%; margin-top: 20px; padding: 12px"
            >
              T√çNH K·∫æT QU·∫¢ NGAY
            </button>
            <div
              id="calc-result"
              style="
                margin-top: 15px;
                font-weight: 800;
                text-align: center;
                color: var(--secondary);
                font-size: 1.2rem;
                min-height: 30px;
              "
            ></div>
          </div>
        </div>
      </section>

      <section id="phan3" class="section-block">
        <h1 class="section-title">III. C·∫•u Tr√∫c V·ªè Nguy√™n T·ª≠</h1>

        <div class="card">
          <h3><i class="fas fa-atom"></i> 1. Chuy·ªÉn ƒë·ªông c·ªßa Electron</h3>
          <ul>
            <li>
              M√¥ h√¨nh hi·ªán ƒë·∫°i: Electron chuy·ªÉn ƒë·ªông r·∫•t nhanh, kh√¥ng theo qu·ªπ
              ƒë·∫°o x√°c ƒë·ªãnh m√† trong c√°c v√πng kh√¥ng gian g·ªçi l√†
              <strong>Orbital (AO)</strong>.
            </li>
            <li>
              AO l√† v√πng kh√¥ng gian c√≥ x√°c su·∫•t t√¨m th·∫•y electron l·ªõn nh·∫•t
              (~90%).
            </li>
            <li>
              H√¨nh d·∫°ng AO:
              <ul>
                <li><strong>AO s:</strong> H√¨nh c·∫ßu.</li>
                <li><strong>AO p:</strong> H√¨nh s·ªë 8 n·ªïi.</li>
              </ul>
            </li>
          </ul>
        </div>

        <div class="card">
          <h3><i class="fas fa-layer-group"></i> 2. L·ªõp v√† Ph√¢n l·ªõp</h3>
          <ul>
            <li>
              <strong>L·ªõp (Shell):</strong> ƒê√°nh s·ªë n = 1, 2, 3, 4... T√™n g·ªçi:
              K, L, M, N... NƒÉng l∆∞·ª£ng tƒÉng d·∫ßn t·ª´ trong ra ngo√†i.
            </li>
            <li>
              <strong>Ph√¢n l·ªõp (Subshell):</strong> K√Ω hi·ªáu s, p, d, f.
              <ul>
                <li>Ph√¢n l·ªõp s: T·ªëi ƒëa 2e.</li>
                <li>Ph√¢n l·ªõp p: T·ªëi ƒëa 6e.</li>
                <li>Ph√¢n l·ªõp d: T·ªëi ƒëa 10e.</li>
                <li>Ph√¢n l·ªõp f: T·ªëi ƒëa 14e.</li>
              </ul>
            </li>
          </ul>
        </div>

        <div class="card">
          <h3><i class="fas fa-pencil-alt"></i> 3. C·∫•u h√¨nh Electron</h3>
          <p><strong>Th·ª© t·ª± m·ª©c nƒÉng l∆∞·ª£ng (Quy t·∫Øc Klechkowski):</strong></p>
          <div
            class="highlight-box"
            style="font-weight: bold; color: var(--secondary)"
          >
            1s < 2s < 2p < 3s < 3p < 4s < 3d < 4p < 5s...
          </div>
          <p class="note">
            L∆∞u √Ω: Ph√¢n l·ªõp 4s c√≥ nƒÉng l∆∞·ª£ng th·∫•p h∆°n 3d n√™n ƒëi·ªÅn e v√†o 4s
            tr∆∞·ªõc.
          </p>

          <div style="margin-top: 20px">
            <h4>üéØ T∆∞∆°ng t√°c: X√¢y d·ª±ng c·∫•u h√¨nh Electron</h4>
            <p>
              Nh·∫•n n√∫t (+) ƒë·ªÉ th√™m electron v√†o c√°c √¥ l∆∞·ª£ng t·ª≠ tu√¢n theo Nguy√™n
              l√Ω Pauli v√† Quy t·∫Øc Hund.
            </p>

            <div
              style="
                display: flex;
                justify-content: space-between;
                align-items: center;
                margin-bottom: 10px;
              "
            >
              <div
                id="config-text"
                style="
                  font-size: 1.5rem;
                  font-weight: 800;
                  color: var(--primary);
                "
              >
                1s‚Å∞
              </div>
              <div>
                <button class="btn accent" onclick="addElectron()">
                  + Th√™m e
                </button>
                <button class="btn outline" onclick="resetElectron()">
                  L√†m l·∫°i
                </button>
              </div>
            </div>

            <div class="aufbau-container" id="aufbau-diagram"></div>

            <div
              class="highlight-box"
              style="margin-top: 15px; text-align: left"
            >
              <strong>ƒê·∫∑c ƒëi·ªÉm l·ªõp ngo√†i c√πng:</strong>
              <ul>
                <li>1, 2, 3e: Kim lo·∫°i (th∆∞·ªùng nh∆∞·ªùng e).</li>
                <li>5, 6, 7e: Phi kim (th∆∞·ªùng nh·∫≠n e).</li>
                <li>8e: Kh√≠ hi·∫øm (b·ªÅn v·ªØng).</li>
              </ul>
            </div>
          </div>
        </div>
      </section>
    </div>

    <script>
      // --- LOGIC GIAO DI·ªÜN & T∆Ø∆†NG T√ÅC ---

      // 1. Dark Mode
      function toggleTheme() {
        const body = document.body;
        const currentTheme = body.getAttribute("data-theme");
        const icon = document.querySelector(".theme-toggle i");

        if (currentTheme === "dark") {
          body.setAttribute("data-theme", "light");
          icon.className = "fas fa-moon";
        } else {
          body.setAttribute("data-theme", "dark");
          icon.className = "fas fa-sun";
        }
      }

      // Highlight active nav link on scroll
      window.addEventListener("scroll", () => {
        const sections = document.querySelectorAll("section");
        const navLinks = document.querySelectorAll(".nav-link");
        let current = "";

        sections.forEach((section) => {
          const sectionTop = section.offsetTop;
          if (scrollY >= sectionTop - 150) {
            current = section.getAttribute("id");
          }
        });

        navLinks.forEach((link) => {
          link.classList.remove("active");
          if (link.getAttribute("href").includes(current)) {
            link.classList.add("active");
          }
        });
      });

      // 2. M√°y t√≠nh Nguy√™n t·ª≠ kh·ªëi
      function calculateAvgMass() {
        const m1 = parseFloat(document.getElementById("mass1").value);
        const p1 = parseFloat(document.getElementById("pct1").value);
        const m2 = parseFloat(document.getElementById("mass2").value);
        const p2 = 100 - p1; // Auto calc percentage

        if (isNaN(m1) || isNaN(p1) || isNaN(m2)) {
          document.getElementById("calc-result").innerHTML =
            "‚ö†Ô∏è Vui l√≤ng nh·∫≠p ƒë·ªß th√¥ng tin!";
          return;
        }

        const result = (m1 * p1 + m2 * p2) / 100;
        document.getElementById(
          "calc-result"
        ).innerHTML = `K·∫øt qu·∫£: ƒÄ = ${result.toFixed(4)}`;
      }

      // --- M√î PH·ªéNG 3D (THREE.JS) ---
      let scene,
        camera,
        renderer,
        atomGroup,
        electrons = [];

      function init3D() {
        const container = document.getElementById("atom-canvas");
        const width = container.offsetWidth;
        const height = container.offsetHeight;

        scene = new THREE.Scene();
        camera = new THREE.PerspectiveCamera(60, width / height, 0.1, 1000);
        camera.position.z = 18;

        renderer = new THREE.WebGLRenderer({ alpha: true, antialias: true });
        renderer.setSize(width, height);
        renderer.setPixelRatio(window.devicePixelRatio);
        container.appendChild(renderer.domElement);

        const controls = new THREE.OrbitControls(camera, renderer.domElement);
        controls.enableDamping = true;
        controls.dampingFactor = 0.05;

        // Lights
        const ambientLight = new THREE.AmbientLight(0xffffff, 0.7);
        scene.add(ambientLight);

        const pointLight = new THREE.PointLight(0xffffff, 0.8);
        pointLight.position.set(10, 10, 10);
        scene.add(pointLight);

        atomGroup = new THREE.Group();
        scene.add(atomGroup);

        // Initial Atom (Carbon)
        updateAtom(6);
        animate();

        window.addEventListener("resize", () => {
          const newWidth = container.offsetWidth;
          const newHeight = container.offsetHeight;
          camera.aspect = newWidth / newHeight;
          camera.updateProjectionMatrix();
          renderer.setSize(newWidth, newHeight);
        });
      }

      function createSphere(radius, color, x, y, z) {
        const geo = new THREE.SphereGeometry(radius, 32, 32);
        const mat = new THREE.MeshPhongMaterial({
          color: color,
          shininess: 100,
        });
        const mesh = new THREE.Mesh(geo, mat);
        mesh.position.set(x, y, z);
        return mesh;
      }

      function updateAtom(Z) {
        // Clear old atom
        while (atomGroup.children.length > 0) {
          atomGroup.remove(atomGroup.children[0]);
        }
        electrons = [];

        // 1. Create Nucleus (Protons + Neutrons)
        // Estimation: N ‚âà Z for small atoms (except H)
        const N = Z === 1 ? 0 : Z;
        const nucleusGroup = new THREE.Group();

        // Tightly pack spheres
        const nucleusRadius = 0.6;
        for (let i = 0; i < Z + N; i++) {
          // Simple random clustering
          const r = nucleusRadius * Math.pow(Z + N, 0.3) * 0.8;
          const theta = Math.random() * Math.PI * 2;
          const phi = Math.acos(2 * Math.random() - 1);

          const x = r * Math.sin(phi) * Math.cos(theta);
          const y = r * Math.sin(phi) * Math.sin(theta);
          const z = r * Math.cos(phi);

          // Red for Proton, Grey for Neutron
          const isProton = i < Z;
          const color = isProton ? 0xff4d4d : 0xaaaaaa;
          nucleusGroup.add(createSphere(0.4, color, x, y, z));
        }
        atomGroup.add(nucleusGroup);

        // 2. Create Electrons & Shells
        // Config capacity: 2, 8, 18
        const shellCaps = [2, 8, 8]; // Simplified for first 20 elements
        let eRemaining = Z;
        let currentShell = 0;

        while (eRemaining > 0 && currentShell < shellCaps.length) {
          const count = Math.min(eRemaining, shellCaps[currentShell]);
          const radius = 4 + currentShell * 2.5;
          const speed = 0.02 - currentShell * 0.005;

          // Draw orbital path (ring)
          const pathGeo = new THREE.TorusGeometry(radius, 0.02, 16, 100);
          const pathMat = new THREE.MeshBasicMaterial({
            color: 0xffffff,
            opacity: 0.2,
            transparent: true,
          });
          const path = new THREE.Mesh(pathGeo, pathMat);
          path.rotation.x = Math.PI / 2;
          // Tilt shells slightly differently for visual effect
          path.rotation.y = currentShell * 0.2;
          atomGroup.add(path);

          // Add electrons
          for (let i = 0; i < count; i++) {
            const angle = (i / count) * Math.PI * 2;
            const eMesh = createSphere(
              0.2,
              0xffd166,
              Math.cos(angle) * radius,
              0,
              Math.sin(angle) * radius
            );

            // Add glow sprite
            // (Simplified mesh here)

            electrons.push({
              mesh: eMesh,
              radius: radius,
              angle: angle,
              speed: speed,
              tilt: currentShell * 0.2,
            });
            atomGroup.add(eMesh);
          }
          eRemaining -= count;
          currentShell++;
        }
      }

      function animate() {
        requestAnimationFrame(animate);

        // Rotate electrons
        electrons.forEach((e) => {
          e.angle += e.speed;
          // Calculate position based on tilted orbit
          const x = e.radius * Math.cos(e.angle);
          const z = e.radius * Math.sin(e.angle);

          // Apply tilt rotation manualy or just group rotation?
          // Let's keep it simple: rotate x,z on the tilted plane
          // y = x * sin(tilt), x = x * cos(tilt) roughly
          e.mesh.position.x = x * Math.cos(e.tilt);
          e.mesh.position.y = x * Math.sin(e.tilt); // Simplified tilt effect
          e.mesh.position.z = z;
        });

        // Gently rotate nucleus
        atomGroup.children[0].rotation.y += 0.005;
        atomGroup.children[0].rotation.z += 0.002;

        renderer.render(scene, camera);
      }

      // --- AUFBAU DIAGRAM BUILDER ---
      const orbitals = [
        { name: "1s", n: 1, l: 0, cap: 2 },
        { name: "2s", n: 2, l: 0, cap: 2 },
        { name: "2p", n: 2, l: 1, cap: 6 },
        { name: "3s", n: 3, l: 0, cap: 2 },
        { name: "3p", n: 3, l: 1, cap: 6 },
        { name: "4s", n: 4, l: 0, cap: 2 },
        { name: "3d", n: 3, l: 2, cap: 10 },
      ];

      let electronCount = 0;

      function renderAufbau() {
        const container = document.getElementById("aufbau-diagram");
        container.innerHTML = "";

        let eRem = electronCount;
        let configStr = "";

        // We render list but CSS reverses it so 1s is at bottom
        // Need to process data correctly first
        // Map electron distribution
        const filledOrbitals = orbitals.map((orb) => {
          const fill = Math.min(eRem, orb.cap);
          eRem -= fill;
          if (fill > 0) configStr += `${orb.name}<sup>${fill}</sup> `;
          return { ...orb, current: fill };
        });

        document.getElementById("config-text").innerHTML = configStr || "1s‚Å∞";

        // Render HTML
        filledOrbitals.forEach((orb) => {
          const boxCount = orb.cap / 2;
          let boxesHtml = "";

          for (let i = 0; i < boxCount; i++) {
            let arrow = "";
            // Hund's Rule Logic:
            // If p orbital (3 boxes), and 2 electrons: Up, Up, Empty
            // If 4 electrons: Up-Down, Up, Up
            const isUp = orb.current > i;
            const isDown = orb.current > i + boxCount;

            if (isUp) arrow += `<span class="spin-arrow spin-up">‚Üë</span>`;
            if (isDown) arrow += `<span class="spin-arrow spin-down">‚Üì</span>`;

            boxesHtml += `<div class="orbital-box">${arrow}</div>`;
          }

          const row = document.createElement("div");
          row.className = "orbital-row";
          row.innerHTML = `
                <div class="subshell">
                    <span class="subshell-label">${orb.name}</span>
                    ${boxesHtml}
                </div>
            `;
          container.appendChild(row);
        });
      }

      function addElectron() {
        if (electronCount < 30) {
          electronCount++;
          renderAufbau();
        }
      }

      function resetElectron() {
        electronCount = 0;
        renderAufbau();
      }

      // Initialize
      init3D();
      renderAufbau();
    </script>
  </body>
</html>
