<!DOCTYPE html>
<html lang="vi">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Chuyên Đề: Cấu Tạo Nguyên Tử</title>

    <script src="https://cdn.tailwindcss.com"></script>

    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
    />

    <script>
      MathJax = {
        tex: {
          inlineMath: [
            ["$", "$"],
            ["\\(", "\\)"],
          ],
        },
      };
    </script>
    <script
      id="MathJax-script"
      async
      src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"
    ></script>

    <style>
      body {
        font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
        background-color: #f3f4f6;
      }
      .tab-btn.active {
        background-color: white;
        color: #2563eb;
        border-bottom: 2px solid #2563eb;
        box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
      }
      .solution-content {
        transition: max-height 0.3s ease-out;
        max-height: 0;
        overflow: hidden;
      }
      .solution-content.show {
        max-height: 1000px; /* Đủ lớn để hiện nội dung */
      }
      /* Custom scrollbar */
      ::-webkit-scrollbar {
        width: 8px;
      }
      ::-webkit-scrollbar-track {
        background: #f1f1f1;
      }
      ::-webkit-scrollbar-thumb {
        background: #888;
        border-radius: 4px;
      }
      ::-webkit-scrollbar-thumb:hover {
        background: #555;
      }
    </style>
  </head>
  <body class="text-gray-800">
    <header
      class="bg-gradient-to-r from-blue-700 to-indigo-800 text-white shadow-lg sticky top-0 z-50"
    >
      <div
        class="container mx-auto px-4 py-4 flex flex-col md:flex-row justify-between items-center"
      >
        <div class="flex items-center gap-3 mb-3 md:mb-0">
          <i
            class="fa-solid fa-atom text-3xl animate-spin-slow"
            style="animation-duration: 10s"
          ></i>
          <div>
            <h1 class="text-2xl font-bold">Cấu Tạo Nguyên Tử</h1>
            <p class="text-xs text-blue-200">
              Hệ thống kiến thức & Bài tập chuyên sâu
            </p>
          </div>
        </div>

        <nav class="flex gap-2 bg-blue-900/30 p-1 rounded-lg">
          <button
            onclick="switchTab('theory')"
            id="tab-theory"
            class="tab-btn active px-4 py-2 rounded-md font-semibold transition-all hover:bg-white/10"
          >
            <i class="fa-solid fa-book mr-1"></i> Lý Thuyết
          </button>
          <button
            onclick="switchTab('exercises')"
            id="tab-exercises"
            class="tab-btn px-4 py-2 rounded-md font-semibold transition-all hover:bg-white/10"
          >
            <i class="fa-solid fa-pen-to-square mr-1"></i> Tự Luận
          </button>
          <button
            onclick="switchTab('quiz')"
            id="tab-quiz"
            class="tab-btn px-4 py-2 rounded-md font-semibold transition-all hover:bg-white/10"
          >
            <i class="fa-solid fa-list-check mr-1"></i> Trắc Nghiệm
          </button>
        </nav>
      </div>
    </header>

    <main class="container mx-auto px-4 py-8 max-w-5xl min-h-screen">
      <div id="content-theory" class="block animate-fade-in">
        <div
          class="bg-white rounded-xl shadow-md border border-gray-200 overflow-hidden mb-6"
        >
          <div
            class="bg-blue-50 px-6 py-3 border-b border-blue-100 flex items-center gap-3"
          >
            <div
              class="w-8 h-8 rounded-full bg-blue-600 text-white flex items-center justify-center font-bold"
            >
              I
            </div>
            [cite_start]
            <h2 class="text-xl font-bold text-gray-800">
              Thành phần cấu tạo nguyên tử [cite: 1105]
            </h2>
          </div>
          <div class="p-6 space-y-4">
            <p>
              Nguyên tử gồm hạt nhân (mang điện dương) và vỏ electron (mang điện
              âm).
            </p>
            <div class="overflow-x-auto">
              <table
                class="min-w-full border-collapse border border-gray-300 text-sm"
              >
                <thead>
                  <tr class="bg-gray-100">
                    <th class="border border-gray-300 p-2">Hạt</th>
                    <th class="border border-gray-300 p-2">Vị trí</th>
                    <th class="border border-gray-300 p-2">Khối lượng (amu)</th>
                    <th class="border border-gray-300 p-2">Điện tích</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td
                      class="border border-gray-300 p-2 font-bold text-red-600"
                    >
                      Proton (p)
                    </td>
                    <td class="border border-gray-300 p-2">Hạt nhân</td>
                    <td class="border border-gray-300 p-2">$\approx 1$</td>
                    <td class="border border-gray-300 p-2">+1</td>
                  </tr>
                  <tr>
                    <td
                      class="border border-gray-300 p-2 font-bold text-gray-600"
                    >
                      Neutron (n)
                    </td>
                    <td class="border border-gray-300 p-2">Hạt nhân</td>
                    <td class="border border-gray-300 p-2">$\approx 1$</td>
                    <td class="border border-gray-300 p-2">0</td>
                  </tr>
                  <tr>
                    <td
                      class="border border-gray-300 p-2 font-bold text-blue-600"
                    >
                      Electron (e)
                    </td>
                    <td class="border border-gray-300 p-2">Vỏ</td>
                    <td class="border border-gray-300 p-2">
                      $\approx 0,00055$
                    </td>
                    <td class="border border-gray-300 p-2">-1</td>
                  </tr>
                </tbody>
              </table>
            </div>
            <div class="bg-yellow-50 border-l-4 border-yellow-400 p-3 text-sm">
              [cite_start]<strong>Lưu ý:</strong> [cite: 1113] Khối lượng
              electron rất nhỏ không đáng kể, nên khối lượng nguyên tử tập trung
              hầu hết ở hạt nhân ($m_{nt} \approx m_p + m_n$).
            </div>
          </div>
        </div>

        <div
          class="bg-white rounded-xl shadow-md border border-gray-200 overflow-hidden mb-6"
        >
          <div
            class="bg-blue-50 px-6 py-3 border-b border-blue-100 flex items-center gap-3"
          >
            <div
              class="w-8 h-8 rounded-full bg-blue-600 text-white flex items-center justify-center font-bold"
            >
              II
            </div>
            [cite_start]
            <h2 class="text-xl font-bold text-gray-800">
              Đồng vị & Nguyên tử khối [cite: 1143]
            </h2>
          </div>
          <div class="p-6 space-y-4">
            <h3 class="font-bold text-blue-800">1. Đồng vị</h3>
            <p>
              Là các nguyên tử có cùng số proton (Z) nhưng khác nhau về số
              neutron (N), dẫn đến số khối (A) khác nhau.
            </p>
            <p>
              <em>Ví dụ:</em> Hydrogen có 3 đồng vị: $^1H$ (Protium), $^2H$
              (Deuterium), $^3H$ (Tritium).
            </p>

            <h3 class="font-bold text-blue-800 mt-4">
              2. [cite_start]Nguyên tử khối trung bình ($\overline{A}$) [cite:
              1164]
            </h3>
            <p>
              Giả sử nguyên tố X có 2 đồng vị X và Y với phần trăm số nguyên tử
              tương ứng là a% và b%.
            </p>
            <div
              class="bg-gray-100 p-4 rounded text-center text-lg font-mono border border-gray-300"
            >
              $\overline{A} = \frac{a \cdot A_X + b \cdot A_Y}{100}$
            </div>
          </div>
        </div>

        <div
          class="bg-white rounded-xl shadow-md border border-gray-200 overflow-hidden mb-6"
        >
          <div
            class="bg-blue-50 px-6 py-3 border-b border-blue-100 flex items-center gap-3"
          >
            <div
              class="w-8 h-8 rounded-full bg-blue-600 text-white flex items-center justify-center font-bold"
            >
              III
            </div>
            [cite_start]
            <h2 class="text-xl font-bold text-gray-800">
              Cấu hình Electron [cite: 1223]
            </h2>
          </div>
          <div class="p-6 space-y-4">
            <p><strong>Thứ tự mức năng lượng (Quy tắc Klechkowski):</strong></p>
            <div
              class="bg-indigo-900 text-white p-3 rounded text-center font-bold tracking-wider"
            >
              1s 2s 2p 3s 3p 4s 3d 4p 5s 4d 5p ...
            </div>

            <div class="grid md:grid-cols-2 gap-4 mt-4">
              <div class="border p-3 rounded-lg bg-gray-50">
                <h4 class="font-bold text-red-600">Nguyên lý Pauli</h4>
                <p class="text-sm">
                  Mỗi obitan chứa tối đa 2 electron có chiều tự quay ngược nhau.
                </p>
              </div>
              <div class="border p-3 rounded-lg bg-gray-50">
                <h4 class="font-bold text-green-600">Quy tắc Hund</h4>
                <p class="text-sm">
                  Trong cùng một phân lớp, electron phân bố sao cho số electron
                  độc thân là tối đa.
                </p>
              </div>
            </div>

            <div class="bg-red-50 p-4 rounded border border-red-200 mt-4">
              [cite_start]
              <h4 class="font-bold text-red-700 mb-2">
                <i class="fa-solid fa-triangle-exclamation"></i> Trường hợp
                ngoại lệ (Bão hòa sớm) [cite: 1291]
              </h4>
              <ul class="list-disc ml-5 space-y-1">
                <li>
                  <strong>Cr (Z=24):</strong> $[Ar]3d^5 4s^1$ (bán bão hòa bền
                  hơn $3d^4 4s^2$)
                </li>
                <li>
                  <strong>Cu (Z=29):</strong> $[Ar]3d^{10} 4s^1$ (bão hòa bền
                  hơn $3d^9 4s^2$)
                </li>
              </ul>
            </div>
          </div>
        </div>

        <div
          class="bg-white rounded-xl shadow-md border border-gray-200 overflow-hidden mb-6"
        >
          <div
            class="bg-blue-50 px-6 py-3 border-b border-blue-100 flex items-center gap-3"
          >
            <div
              class="w-8 h-8 rounded-full bg-blue-600 text-white flex items-center justify-center font-bold"
            >
              IV
            </div>
            [cite_start]
            <h2 class="text-xl font-bold text-gray-800">
              Phản ứng hạt nhân [cite: 1360]
            </h2>
          </div>
          <div class="p-6 space-y-4">
            <ul class="list-disc ml-5">
              <li>
                <strong>Tia Alpha ($\alpha$):</strong> Hạt nhân $^4_2He$. Lùi 2
                ô trong bảng tuần hoàn.
              </li>
              <li>
                <strong>Tia Beta ($\beta^-$):</strong> Electron $^0_{-1}e$. Tiến
                1 ô trong bảng tuần hoàn.
              </li>
              <li>
                <strong>Tia Gamma ($\gamma$):</strong> Sóng điện từ năng lượng
                cao.
              </li>
            </ul>
            <div class="bg-gray-100 p-3 rounded mt-2">
              [cite_start]
              <p><strong>Định luật phóng xạ[cite: 1400]:</strong></p>
              <p class="text-center text-lg my-2">$N = N_0 \cdot 2^{-t/T}$</p>
              <p class="text-sm italic text-center">
                (T: Chu kỳ bán rã, t: Thời gian, N: Số hạt còn lại)
              </p>
            </div>
          </div>
        </div>
      </div>

      <div id="content-exercises" class="hidden animate-fade-in">
        <div
          class="bg-yellow-50 border border-yellow-200 p-4 rounded-lg mb-6 flex items-start gap-3"
        >
          <i class="fa-solid fa-lightbulb text-yellow-600 mt-1"></i>
          <div>
            <h3 class="font-bold text-yellow-800">Hướng dẫn</h3>
            <p class="text-sm text-yellow-800">
              Hãy thử tự làm ra giấy trước khi bấm xem đáp án. Các bài tập được
              trích xuất từ tài liệu ôn thi học sinh giỏi và đại học.
            </p>
          </div>
        </div>

        <div id="exercises-container" class="space-y-4"></div>
      </div>

      <div id="content-quiz" class="hidden animate-fade-in">
        <div class="bg-white p-6 rounded-xl shadow-md text-center mb-8">
          <h2 class="text-2xl font-bold text-gray-800 mb-2">
            Kiểm tra kiến thức
          </h2>
          <p class="text-gray-600">
            Chọn đáp án đúng nhất cho các câu hỏi dưới đây.
          </p>
          <div
            id="quiz-score"
            class="hidden mt-4 text-xl font-bold text-blue-600"
          ></div>
        </div>

        <div id="quiz-container" class="max-w-3xl mx-auto space-y-6"></div>

        <div class="text-center mt-8 pb-8">
          <button
            onclick="submitQuiz()"
            id="btn-submit"
            class="bg-gradient-to-r from-green-500 to-emerald-600 text-white px-8 py-3 rounded-full font-bold shadow-lg hover:scale-105 transition-transform"
          >
            Nộp bài & Xem kết quả
          </button>
          <button
            onclick="resetQuiz()"
            id="btn-reset"
            class="hidden bg-gray-500 text-white px-8 py-3 rounded-full font-bold shadow-lg hover:bg-gray-600 transition-transform ml-4"
          >
            Làm lại
          </button>
        </div>
      </div>
    </main>

    <footer class="bg-gray-800 text-gray-400 py-8 text-center text-sm mt-auto">
      <p class="font-semibold text-gray-200">Ứng dụng học tập Hóa học 10</p>
      <p class="mt-2">
        Dữ liệu được số hóa từ tài liệu chuyên đề: "Cấu tạo nguyên tử"
      </p>
      <p class="mt-1 text-xs">Phát triển bởi AI Assistant</p>
    </footer>

    <script>
      // --- DỮ LIỆU BÀI TẬP TỰ LUẬN ---
      const exercisesData = [
          {
              id: 1,
              title: "Dạng 1: Tính % đồng vị (Bài toán Đồng)",
              question: "Nguyên tử khối trung bình của Đồng (Cu) là 63,54. Đồng tồn tại trong tự nhiên dưới hai dạng đồng vị $^{63}Cu$ và $^{65}Cu$. Tính thành phần phần trăm về khối lượng của $^{63}Cu$ có trong tinh thể $Cu(OH)_2 \\cdot CuCO_3$? (Cho H=1, C=12, O=16) [cite_start][cite: 2743].",
              solution: `
                  <p><strong>Bước 1: Tính % số nguyên tử của mỗi đồng vị Cu.</strong></p>
                  <p>Gọi x là % số nguyên tử của $^{63}Cu$. Ta có % của $^{65}Cu$ là $(100-x)$.</p>
                  <p>$$\\overline{A} = \\frac{63x + 65(100-x)}{100} = 63,54$$</p>
                  <p>$\\Rightarrow 63x + 6500 - 65x = 6354 \\Rightarrow 2x = 146 \\Rightarrow x = 73\\%$.</p>
                  <p>Vậy $^{63}Cu$ chiếm 73% về số mol.</p>
                  <br>
                  <p><strong>Bước 2: Tính % khối lượng trong hợp chất.</strong></p>
                  <p>Công thức phân tử: $Cu_2(OH)_2CO_3$ (Gom lại từ $Cu(OH)_2 \\cdot CuCO_3$).</p>
                  <p>Phân tử khối $M = 2 \\cdot 63,54 + 2(17) + 60 = 221,08$.</p>
                  <p>Trong 1 mol hợp chất có 2 mol Cu. Số mol $^{63}Cu = 2 \\cdot 73\\% = 1,46$ mol.</p>
                  <p>$$\\%m_{^{63}Cu} = \\frac{1,46 \\cdot 63}{221,08} \\cdot 100\\% \\approx 41,6\\%$$</p>
              `
          },
          {
              id: 2,
              [cite_start]title: "Dạng 2: Bán kính & Khối lượng riêng [cite: 3310]",
              question: "Trong tinh thể, các nguyên tử Sắt (Fe) là những hình cầu chiếm 74% thể tích tinh thể, phần còn lại là các khe rỗng. Cho khối lượng nguyên tử của Fe là 55,85. Khối lượng riêng của Fe là $7,87 g/cm^3$. Tính bán kính nguyên tử gần đúng của Fe (theo Angstrom). Biết $N_A = 6,022 \\cdot 10^{23}$.",
              solution: `
                  <p><strong>Bước 1: Tính thể tích 1 mol tinh thể Fe.</strong></p>
                  <p>$V_{mol} = \\frac{M}{D} = \\frac{55,85}{7,87} \\approx 7,097 \\, cm^3$.</p>
                  <br>
                  <p><strong>Bước 2: Tính thể tích thực của các nguyên tử Fe trong 1 mol (chỉ chiếm 74%).</strong></p>
                  <p>$V_{thuc} = 7,097 \\cdot 74\\% \\approx 5,25 \\, cm^3$.</p>
                  <br>
                  <p><strong>Bước 3: Tính thể tích 1 nguyên tử Fe.</strong></p>
                  <p>$V_{1nt} = \\frac{5,25}{6,022 \\cdot 10^{23}} \\approx 8,72 \\cdot 10^{-24} \\, cm^3$.</p>
                  <br>
                  <p><strong>Bước 4: Tính bán kính r.</strong></p>
                  <p>Ta có $V = \\frac{4}{3}\\pi r^3 \\Rightarrow r = \\sqrt[3]{\\frac{3V}{4\\pi}}$</p>
                  <p>$r = \\sqrt[3]{\\frac{3 \\cdot 8,72 \\cdot 10^{-24}}{4 \\cdot 3,14}} \\approx 1,28 \\cdot 10^{-8} \\, cm$.</p>
                  <p>Đổi ra Angstrom: $r = 1,28 \\mathring{A}$.</p>
              `
          },
          {
              id: 3,
              [cite_start]title: "Dạng 3: Xác định nguyên tố qua số hạt [cite: 1731]",
              question: "Tổng số hạt (p, n, e) trong hai nguyên tử kim loại A và B là 142, trong đó tổng số hạt mang điện nhiều hơn số hạt không mang điện là 42. Số hạt mang điện của B nhiều hơn của A là 12. Xác định A và B.",
              solution: `
                  <p>Gọi $p_A, n_A, e_A$ và $p_B, n_B, e_B$ là số hạt của A và B (với $p=e$).</p>
                  <p>Theo đề bài ta có hệ phương trình:</p>
                  <ul class="list-disc ml-6 mb-2">
                      <li>Tổng hạt: $(2p_A + n_A) + (2p_B + n_B) = 142$ (1)</li>
                      <li>Hiệu mang điện/không mang điện: $(2p_A + 2p_B) - (n_A + n_B) = 42$ (2)</li>
                      <li>Chênh lệch mang điện: $2p_B - 2p_A = 12 \\Rightarrow p_B - p_A = 6$ (3)</li>
                  </ul>
                  <p><strong>Giải:</strong></p>
                  <p>Lấy (1) + (2): $4(p_A + p_B) = 184 \\Rightarrow p_A + p_B = 46$ (4).</p>
                  <p>Từ (3) và (4):</p>
                  <p>$\\begin{cases} p_B - p_A = 6 \\\\ p_B + p_A = 46 \\end{cases} \\Rightarrow \\begin{cases} p_B = 26 \\\\ p_A = 20 \\end{cases}$</p>
                  <p>Vậy A là <strong>Canxi (Ca)</strong>, B là <strong>Sắt (Fe)</strong>.</p>
              `
          },
          {
              id: 4,
              [cite_start]title: "Dạng 4: Cấu hình Electron Ion [cite: 2130]",
              question: "Viết cấu hình electron của $Fe$ (Z=26) và $Fe^{3+}$. Giải thích tại sao ion $Fe^{3+}$ bền hơn $Fe^{2+}$?",
              solution: `
                  <p><strong>1. Cấu hình Fe (Z=26):</strong></p>
                  <p>Thứ tự năng lượng: $1s^2 2s^2 2p^6 3s^2 3p^6 4s^2 3d^6$</p>
                  <p>Sắp xếp lại: $[Ar] 3d^6 4s^2$.</p>
                  <br>
                  <p><strong>2. Cấu hình ion:</strong></p>
                  <p>- $Fe^{2+}$ (mất 2e ở 4s): $[Ar] 3d^6$.</p>
                  <p>- $Fe^{3+}$ (mất thêm 1e ở 3d): $[Ar] 3d^5$.</p>
                  <br>
                  <p><strong>3. Giải thích:</strong></p>
                  <p>Cấu hình $3d^5$ là cấu hình <strong>bán bão hòa</strong> (mỗi obitan d chứa đúng 1e độc thân), trạng thái này rất bền vững về mặt năng lượng. Do đó $Fe^{3+}$ bền hơn $Fe^{2+}$.</p>
              `
          },
          {
              id: 5,
              [cite_start]title: "Dạng 5: Phản ứng hạt nhân - Tính tuổi mẫu vật [cite: 3237]",
              question: "Một mẫu đá chứa 13,2 $\\mu g$ Uranium ($^{238}U$) và 3,42 $\\mu g$ Chì ($^{206}Pb$). Biết chu kỳ bán hủy của U là $4,51 \\cdot 10^9$ năm. Hãy tính tuổi của mẫu đá trên (giả sử toàn bộ chì sinh ra là do U phân rã).",
              solution: `
                  <p>Số mol Pb hiện có: $n_{Pb} = \\frac{3,42 \\cdot 10^{-6}}{206} \\approx 1,66 \\cdot 10^{-8}$ mol.</p>
                  <p>Số mol U còn lại: $n_{U(dư)} = \\frac{13,2 \\cdot 10^{-6}}{238} \\approx 5,55 \\cdot 10^{-8}$ mol.</p>
                  <p>Số mol U ban đầu ($N_0$): $n_0 = n_{Pb} + n_{U(dư)} = 7,21 \\cdot 10^{-8}$ mol.</p>
                  <p>Áp dụng định luật phóng xạ: $N = N_0 \\cdot 2^{-t/T}$</p>
                  <p>$\\Rightarrow 5,55 = 7,21 \\cdot 2^{-t/4,51 \\cdot 10^9}$</p>
                  <p>$\\Rightarrow 2^{-t/T} = 0,7697 \\Rightarrow -t/T = \\log_2(0,7697) \\approx -0,377$</p>
                  <p>$\\Rightarrow t = 0,377 \\cdot 4,51 \\cdot 10^9 \\approx 1,7 \\cdot 10^9$ năm.</p>
              `
          }
      ];

      // --- DỮ LIỆU TRẮC NGHIỆM ---
      const quizData = [
          {
              id: 1,
              [cite_start]question: "Nguyên tử của nguyên tố X có tổng số hạt là 40. Tổng số hạt mang điện nhiều hơn số hạt không mang điện là 12. Nguyên tố X là: [cite: 1639]",
              options: ["Na (Z=11)", "Mg (Z=12)", "Al (Z=13)", "Ca (Z=20)"],
              correct: 2,
              explain: "Ta có hệ: 2Z + N = 40 và 2Z - N = 12. Cộng vế theo vế: 4Z = 52 => Z = 13 (Al)."
          },
          {
              id: 2,
              [cite_start]question: "Cấu hình electron nào sau đây vi phạm quy tắc Hund? [cite: 1263]",
              options: ["1s²", "1s² 2s² 2p³ (các e ở 2p độc thân)", "1s² 2s² 2p⁴ (1 ô ghép đôi, 2 ô độc thân)", "1s² 2s² (2p: ↑↓  _  ↑)"],
              correct: 3,
              explain: "Quy tắc Hund: Electron phải phân bố sao cho số e độc thân tối đa. Đáp án D sai vì 2p có 3e phải điền vào 3 ô (↑)(↑)(↑) thay vì ghép đôi sớm."
          },
          {
              id: 3,
              question: "Ion M²⁺ có cấu hình electron lớp ngoài cùng là 3d⁹. [cite_start]Cấu hình của nguyên tử M là: [cite: 1294]",
              options: ["[Ar] 3d⁹ 4s²", "[Ar] 3d¹⁰ 4s¹", "[Ar] 3d¹⁰ 4s²", "[Ar] 4s² 3d⁹"],
              correct: 1,
              explain: "Ion M2+ (mất 2e) còn 3d9. Vậy M ban đầu có thêm 2e. Theo thứ tự năng lượng là 4s2 3d9 => Chuyển thành cấu hình bền (bão hòa): 3d10 4s1 (Cu - Đồng)."
          },
          {
              id: 4,
              [cite_start]question: "Số orbital trong phân lớp d là: [cite: 1218]",
              options: ["1", "3", "5", "7"],
              correct: 2,
              explain: "Phân lớp s: 1 AO, p: 3 AO, d: 5 AO, f: 7 AO."
          },
          {
              id: 5,
              question: "Nguyên tử X có ký hiệu $^{56}_{26}Fe$. Số neutron trong hạt nhân là:",
              options: ["26", "30", "56", "82"],
              correct: 1,
              explain: "N = A - Z = 56 - 26 = 30."
          },
          {
              id: 6,
              question: "Phản ứng hạt nhân: $^{27}_{13}Al + \\alpha \\rightarrow ^{30}_{15}P + X$. [cite_start]Hạt X là: [cite: 1386]",
              options: ["Proton", "Neutron", "Electron", "Positron"],
              correct: 1,
              explain: "Tia alpha là He(4,2). Bảo toàn số khối: 27+4 = 30+A => A=1. Bảo toàn điện tích: 13+2 = 15+Z => Z=0. Hạt (1;0) là Neutron."
          },
          {
              id: 7,
              question: "Một nguyên tử X có tổng số electron ở các phân lớp p là 11. X là nguyên tố nào?",
              options: ["Cl (Z=17)", "S (Z=16)", "P (Z=15)", "Ar (Z=18)"],
              correct: 0,
              explain: "Cấu hình e: 1s² 2s² 2p⁶ 3s² 3p⁵. Tổng e ở p = 6 + 5 = 11. Tổng Z = 2+2+6+2+5 = 17 (Cl)."
          }
      ];

      // --- HÀM XỬ LÝ GIAO DIỆN ---

      // 1. Render Bài tập tự luận
      function renderExercises() {
          const container = document.getElementById('exercises-container');
          let html = '';
          exercisesData.forEach((ex, index) => {
              html += `
                  <div class="bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden transition-all hover:shadow-md">
                      <button onclick="toggleSolution('sol-${ex.id}')" class="w-full text-left p-5 flex justify-between items-start focus:outline-none">
                          <div>
                              <span class="inline-block px-2 py-1 bg-indigo-100 text-indigo-700 text-xs font-bold rounded mb-2">
                                  ${ex.title}
                              </span>
                              <p class="text-gray-800 font-medium">${ex.question}</p>
                          </div>
                          <div id="icon-sol-${ex.id}" class="ml-4 mt-1 text-gray-400 transform transition-transform">
                              <i class="fa-solid fa-chevron-down"></i>
                          </div>
                      </button>
                      <div id="sol-${ex.id}" class="solution-content bg-blue-50/50 border-t border-gray-100">
                          <div class="p-5 text-gray-700">
                              <h4 class="font-bold text-green-700 mb-2 flex items-center gap-2">
                                  <i class="fa-solid fa-check-circle"></i> Lời giải:
                              </h4>
                              <div class="prose max-w-none text-sm md:text-base">
                                  ${ex.solution}
                              </div>
                          </div>
                      </div>
                  </div>
              `;
          });
          container.innerHTML = html;
      }

      // 2. Render Trắc nghiệm
      function renderQuiz() {
          const container = document.getElementById('quiz-container');
          let html = '';
          quizData.forEach((q, index) => {
              html += `
                  <div class="bg-white p-5 rounded-lg shadow-sm border border-gray-200 relative overflow-hidden" id="q-card-${q.id}">
                      <h3 class="font-bold text-gray-800 mb-3 flex gap-2">
                          <span class="bg-blue-100 text-blue-800 w-6 h-6 flex items-center justify-center rounded-full text-sm flex-shrink-0">${index + 1}</span>
                          ${q.question}
                      </h3>
                      <div class="space-y-2 ml-8">
                          ${q.options.map((opt, i) => `
                              <label class="flex items-center p-3 border rounded-lg cursor-pointer hover:bg-gray-50 transition-colors" id="label-${q.id}-${i}">
                                  <input type="radio" name="q-${q.id}" value="${i}" class="mr-3 h-4 w-4 text-blue-600">
                                  <span>${opt}</span>
                              </label>
                          `).join('')}
                      </div>
                      <div id="explain-${q.id}" class="hidden mt-4 ml-8 p-3 bg-gray-100 rounded text-sm text-gray-700 border-l-4">
                          <span class="font-bold">Giải thích:</span> ${q.explain}
                      </div>
                  </div>
              `;
          });
          container.innerHTML = html;
      }

      // 3. Logic Accordion (Ẩn/Hiện lời giải)
      function toggleSolution(id) {
          const content = document.getElementById(id);
          const icon = document.getElementById('icon-' + id);

          if (content.classList.contains('show')) {
              content.classList.remove('show');
              icon.style.transform = 'rotate(0deg)';
          } else {
              content.classList.add('show');
              icon.style.transform = 'rotate(180deg)';
          }
      }

      // 4. Logic Chấm điểm Quiz
      function submitQuiz() {
          let score = 0;
          let answered = 0;

          quizData.forEach(q => {
              const selected = document.querySelector(`input[name="q-${q.id}"]:checked`);
              const card = document.getElementById(`q-card-${q.id}`);
              const explainDiv = document.getElementById(`explain-${q.id}`);

              // Reset styles
              card.classList.remove('border-green-500', 'border-red-500');
              explainDiv.classList.add('hidden');

              // Disable inputs
              const inputs = document.querySelectorAll(`input[name="q-${q.id}"]`);
              inputs.forEach(inp => inp.disabled = true);

              if (selected) {
                  answered++;
                  const val = parseInt(selected.value);
                  const correctLabel = document.getElementById(`label-${q.id}-${q.correct}`);
                  const selectedLabel = document.getElementById(`label-${q.id}-${val}`);

                  if (val === q.correct) {
                      score++;
                      card.classList.add('border-green-500', 'border-2');
                      selectedLabel.classList.add('bg-green-100', 'border-green-500', 'text-green-800');
                      explainDiv.classList.remove('hidden');
                      explainDiv.classList.add('border-green-500', 'bg-green-50');
                  } else {
                      card.classList.add('border-red-500', 'border-2');
                      selectedLabel.classList.add('bg-red-100', 'border-red-500', 'text-red-800');
                      correctLabel.classList.add('bg-green-100', 'border-green-500', 'text-green-800'); // Show correct answer
                      explainDiv.classList.remove('hidden');
                      explainDiv.classList.add('border-red-500', 'bg-red-50');
                  }
              }
          });

          const scoreDiv = document.getElementById('quiz-score');
          scoreDiv.classList.remove('hidden');
          scoreDiv.innerHTML = `Kết quả: ${score}/${quizData.length}`;

          document.getElementById('btn-submit').classList.add('hidden');
          document.getElementById('btn-reset').classList.remove('hidden');

          window.scrollTo({ top: 0, behavior: 'smooth' });
      }

      function resetQuiz() {
          renderQuiz();
          document.getElementById('quiz-score').classList.add('hidden');
          document.getElementById('btn-submit').classList.remove('hidden');
          document.getElementById('btn-reset').classList.add('hidden');
          // Re-render mathjax for quiz
          MathJax.typesetPromise();
      }

      // 5. Logic chuyển Tab
      function switchTab(tabId) {
          // Hide all content
          ['theory', 'exercises', 'quiz'].forEach(id => {
              document.getElementById(`content-${id}`).classList.add('hidden');
              document.getElementById(`tab-${id}`).classList.remove('active', 'bg-white', 'text-blue-700');
              document.getElementById(`tab-${id}`).classList.add('text-white');
          });

          // Show selected
          document.getElementById(`content-${tabId}`).classList.remove('hidden');
          const activeBtn = document.getElementById(`tab-${tabId}`);
          activeBtn.classList.add('active', 'bg-white', 'text-blue-700');
          activeBtn.classList.remove('text-white');

          // Trigger MathJax render when tab changes (to ensure formulas appear)
          MathJax.typesetPromise();
      }

      // --- KHỞI CHẠY ---
      document.addEventListener('DOMContentLoaded', () => {
          renderExercises();
          renderQuiz();
          // Mặc định tab Lý thuyết
          switchTab('theory');
      });
    </script>
  </body>
</html>
