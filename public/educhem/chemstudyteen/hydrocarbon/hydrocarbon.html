<!DOCTYPE html>
<html lang="vi">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>H√≥a H·ªçc H·ªØu C∆° 11: ƒê·∫°i C∆∞∆°ng & Hydrocarbon (Full Version)</title>
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Lucide Icons -->
    <script src="https://unpkg.com/lucide@latest"></script>
    <!-- Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

    <style>
      @import url("https://fonts.googleapis.com/css2?family=Be+Vietnam+Pro:wght@300;400;500;600;700;900&display=swap");
      @import url("https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;700&display=swap");

      body {
        font-family: "Be Vietnam Pro", sans-serif;
        background-color: #f0f4f8;
        color: #334155;
        scroll-behavior: smooth;
      }

      .mono-font {
        font-family: "JetBrains Mono", monospace;
      }

      /* --- Interactive Card Styles --- */
      .interactive-card {
        background: white;
        border-radius: 1rem;
        box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1),
          0 2px 4px -1px rgba(0, 0, 0, 0.06);
        transition: all 0.3s ease;
        overflow: hidden;
        border: 1px solid #e2e8f0;
      }

      .interactive-card:hover {
        box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1),
          0 10px 10px -5px rgba(0, 0, 0, 0.04);
        transform: translateY(-2px);
      }

      /* --- Animations --- */
      @keyframes float {
        0%,
        100% {
          transform: translateY(0);
        }
        50% {
          transform: translateY(-10px);
        }
      }
      .animate-float {
        animation: float 3s ease-in-out infinite;
      }

      /* Polymer Animation */
      @keyframes link-up {
        0% {
          transform: scale(1);
        }
        50% {
          transform: scale(1.2);
          background-color: #fbbf24;
        }
        100% {
          transform: scale(1);
          background-color: #3b82f6;
        }
      }
      .monomer {
        transition: all 0.5s;
      }
      .polymer-link {
        animation: link-up 0.5s forwards;
      }

      /* Reaction Animation */
      @keyframes shake {
        0%,
        100% {
          transform: translateX(0);
        }
        25% {
          transform: translateX(-5px);
        }
        75% {
          transform: translateX(5px);
        }
      }
      .shake-atom {
        animation: shake 0.5s ease-in-out;
      }

      /* --- Custom Scrollbar for Theory Blocks --- */
      .theory-scroll::-webkit-scrollbar {
        width: 6px;
      }
      .theory-scroll::-webkit-scrollbar-track {
        background: #f1f5f9;
      }
      .theory-scroll::-webkit-scrollbar-thumb {
        background: #cbd5e1;
        border-radius: 3px;
      }
      .theory-scroll::-webkit-scrollbar-thumb:hover {
        background: #94a3b8;
      }

      /* Section Dividers */
      .chapter-badge {
        display: inline-flex;
        align-items: center;
        padding: 0.5rem 1rem;
        border-radius: 9999px;
        font-weight: 800;
        font-size: 0.75rem;
        letter-spacing: 0.1em;
        text-transform: uppercase;
        margin-bottom: 1rem;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
      }
    </style>
  </head>
  <body onload="initApp()">
    <!-- Navigation -->
    <nav
      class="bg-slate-900/95 backdrop-blur-md text-white sticky top-0 z-50 shadow-xl border-b border-slate-700"
    >
      <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
        <div class="flex items-center justify-between h-16">
          <div class="flex items-center gap-2">
            <div class="bg-yellow-500 p-1.5 rounded-lg">
              <i data-lucide="flask-conical" class="w-6 h-6 text-slate-900"></i>
            </div>
            <span
              class="font-extrabold text-lg tracking-tight hidden sm:block bg-clip-text text-transparent bg-gradient-to-r from-yellow-400 to-orange-400"
              >H√ìA H·ªåC 11</span
            >
          </div>
          <div
            class="flex space-x-1 sm:space-x-2 text-xs sm:text-sm font-medium overflow-x-auto no-scrollbar"
          >
            <a
              href="#chuong3"
              class="px-3 py-2 rounded-lg hover:bg-slate-800 transition whitespace-nowrap opacity-80 hover:opacity-100"
              >ƒê·∫°i C∆∞∆°ng</a
            >
            <a
              href="#alkane"
              class="px-3 py-2 rounded-lg bg-green-900/30 text-green-400 border border-green-800 hover:bg-green-900/50 transition whitespace-nowrap"
              >Alkane</a
            >
            <a
              href="#alkene"
              class="px-3 py-2 rounded-lg bg-pink-900/30 text-pink-400 border border-pink-800 hover:bg-pink-900/50 transition whitespace-nowrap"
              >Kh√¥ng No</a
            >
            <a
              href="#arene"
              class="px-3 py-2 rounded-lg bg-purple-900/30 text-purple-400 border border-purple-800 hover:bg-purple-900/50 transition whitespace-nowrap"
              >Arene</a
            >
          </div>
        </div>
      </div>
    </nav>

    <div class="max-w-7xl mx-auto p-4 sm:p-6 lg:p-8 space-y-16">
      <!-- ================= CH∆Ø∆†NG 3 (T√ìM T·∫ÆT) ================= -->
      <div id="chuong3" class="scroll-mt-24">
        <div class="flex items-center justify-between mb-6">
          <span
            class="chapter-badge bg-indigo-100 text-indigo-800 border border-indigo-200"
            >√în t·∫≠p Ch∆∞∆°ng 3</span
          >
          <button
            onclick="document.getElementById('c3-content').classList.toggle('hidden')"
            class="text-indigo-600 text-sm font-medium hover:underline"
          >
            ·∫®n/Hi·ªán
          </button>
        </div>

        <div id="c3-content" class="grid lg:grid-cols-2 gap-6">
          <!-- Card 1: Nh√≥m ch·ª©c -->
          <div
            class="interactive-card p-5 border-l-4 border-indigo-500 flex flex-col justify-center"
          >
            <h3 class="font-bold text-slate-700 mb-3 flex items-center gap-2">
              <i data-lucide="scan-search" class="w-5 h-5 text-indigo-500"></i>
              Tra c·ª©u Nh√≥m ch·ª©c & IR
            </h3>
            <div class="flex gap-2">
              <select
                id="func-select"
                onchange="updateFuncInfo()"
                class="flex-1 p-2 rounded border border-slate-300 bg-slate-50 text-sm focus:border-indigo-500 outline-none"
              >
                <option value="alcohol">Alcohol (-OH)</option>
                <option value="aldehyde">Aldehyde (-CHO)</option>
                <option value="ketone">Ketone (>C=O)</option>
                <option value="acid">Carboxylic Acid (-COOH)</option>
              </select>
              <div
                id="func-display"
                class="bg-indigo-50 px-4 py-2 rounded border border-indigo-100 flex-1 text-sm flex flex-col justify-center"
              >
                <!-- Content injected via JS -->
              </div>
            </div>
          </div>

          <!-- Card 2: M√°y t√≠nh C√¥ng th·ª©c -->
          <div class="interactive-card p-5 border-l-4 border-yellow-500">
            <h3 class="font-bold text-slate-700 mb-3 flex items-center gap-2">
              <i data-lucide="calculator" class="w-5 h-5 text-yellow-500"></i>
              M√°y t√≠nh CTPT
            </h3>
            <div class="flex gap-2 mb-2">
              <input
                type="number"
                id="inp-c"
                placeholder="%C"
                class="w-1/3 p-2 border rounded text-sm bg-slate-50"
              />
              <input
                type="number"
                id="inp-h"
                placeholder="%H"
                class="w-1/3 p-2 border rounded text-sm bg-slate-50"
              />
              <input
                type="number"
                id="inp-o"
                placeholder="%O"
                class="w-1/3 p-2 border rounded text-sm bg-slate-50"
              />
            </div>
            <div class="flex gap-2">
              <input
                type="number"
                id="inp-m"
                placeholder="M (Optional)"
                class="flex-1 p-2 border rounded text-sm bg-slate-50"
              />
              <button
                onclick="calculateFormula()"
                class="px-4 bg-yellow-500 text-white rounded font-bold text-sm hover:bg-yellow-600"
              >
                T√≠nh
              </button>
            </div>
            <div
              id="calc-result"
              class="mt-2 text-center font-mono font-bold text-indigo-600 text-sm min-h-[1.25rem]"
            ></div>
          </div>
        </div>
      </div>

      <!-- ================= CH∆Ø∆†NG 4 ================= -->
      <header class="text-center py-8 border-b-2 border-slate-200">
        <h1
          class="text-4xl sm:text-6xl font-black text-slate-800 tracking-tight mb-2"
        >
          HYDROCARBON
        </h1>
        <p class="text-slate-500 font-medium">
          Alkane ‚Ä¢ Alkene ‚Ä¢ Alkyne ‚Ä¢ Arene
        </p>
      </header>

      <!-- PH·∫¶N I: ALKANE -->
      <section id="alkane" class="scroll-mt-24">
        <div class="flex items-center gap-3 mb-8">
          <div
            class="p-3 bg-green-600 rounded-xl text-white shadow-lg shadow-green-200"
          >
            <i data-lucide="flame" class="w-8 h-8"></i>
          </div>
          <div>
            <span
              class="text-green-600 font-bold tracking-wider text-sm uppercase"
              >Ph·∫ßn I</span
            >
            <h2 class="text-3xl font-extrabold text-slate-800">ALKANE (No)</h2>
          </div>
        </div>

        <div class="grid lg:grid-cols-12 gap-8">
          <!-- THEORY COLUMN (Left) -->
          <div class="lg:col-span-7 space-y-6">
            <!-- 1. Kh√°i ni·ªám -->
            <div
              class="bg-white p-6 rounded-2xl shadow-sm border border-slate-100"
            >
              <h3
                class="font-bold text-lg text-green-700 mb-3 border-b border-green-100 pb-2"
              >
                1. Kh√°i ni·ªám & C·∫•u tr√∫c
              </h3>
              <ul class="space-y-2 text-slate-600 text-sm leading-relaxed">
                <li class="flex gap-2">
                  <i
                    data-lucide="check"
                    class="w-4 h-4 text-green-500 mt-0.5"
                  ></i>
                  <span
                    ><strong>Hydrocarbon no:</strong> Ch·ªâ ch·ª©a li√™n k·∫øt ƒë∆°n
                    ($\sigma$).</span
                  >
                </li>
                <li class="flex gap-2">
                  <i
                    data-lucide="check"
                    class="w-4 h-4 text-green-500 mt-0.5"
                  ></i>
                  <span
                    ><strong>C√¥ng th·ª©c chung:</strong>
                    <code
                      class="bg-slate-100 px-1 rounded font-mono text-green-600 font-bold"
                      >$C_nH_{2n+2}$</code
                    >
                    ($n \ge 1$).</span
                  >
                </li>
                <li class="flex gap-2">
                  <i
                    data-lucide="check"
                    class="w-4 h-4 text-green-500 mt-0.5"
                  ></i>
                  <span
                    ><strong>ƒê·∫∑c ƒëi·ªÉm:</strong> R·∫•t k√©m ho·∫°t ƒë·ªông ·ªü ƒëi·ªÅu ki·ªán
                    th∆∞·ªùng (tr∆°). L√† th√†nh ph·∫ßn ch√≠nh c·ªßa d·∫ßu m·ªè & kh√≠ thi√™n
                    nhi√™n.</span
                  >
                </li>
              </ul>
            </div>

            <!-- 2. Danh ph√°p -->
            <div
              class="bg-white p-6 rounded-2xl shadow-sm border border-slate-100 relative overflow-hidden"
            >
              <div class="absolute top-0 right-0 p-4 opacity-10">
                <i data-lucide="type" class="w-24 h-24 text-green-500"></i>
              </div>
              <h3
                class="font-bold text-lg text-green-700 mb-3 border-b border-green-100 pb-2"
              >
                2. Danh ph√°p (IUPAC)
              </h3>
              <ol
                class="list-decimal pl-5 space-y-2 text-slate-600 text-sm relative z-10"
              >
                <li>
                  <strong>Ch·ªçn m·∫°ch ch√≠nh:</strong> D√†i nh·∫•t, nhi·ªÅu nh√°nh nh·∫•t.
                </li>
                <li><strong>ƒê√°nh s·ªë:</strong> T·ª´ ph√≠a g·∫ßn nh√°nh h∆°n.</li>
                <li>
                  <strong>G·ªçi t√™n:</strong> <br />
                  <span
                    class="inline-block bg-slate-100 p-2 rounded mt-1 font-mono text-xs text-slate-800 border border-slate-200"
                  >
                    [V·ªã tr√≠ nh√°nh] - [T√™n nh√°nh] [T√™n m·∫°ch ch√≠nh] - ane
                  </span>
                </li>
              </ol>

              <!-- INTERACTIVE: IUPAC DECODER -->
              <div
                class="mt-4 bg-green-50 p-4 rounded-xl border border-green-100 relative z-10"
              >
                <h4 class="text-xs font-bold text-green-800 uppercase mb-2">
                  üîé Gi·∫£i m√£ t√™n g·ªçi: 3-methylpentane
                </h4>
                <div
                  class="flex gap-1 justify-center text-lg font-mono font-bold"
                >
                  <span
                    class="cursor-pointer hover:text-red-500 transition px-1 rounded hover:bg-red-100"
                    onmouseover="hlIupac('pos')"
                    onmouseout="hlIupac('')"
                    >3</span
                  >-
                  <span
                    class="cursor-pointer hover:text-blue-500 transition px-1 rounded hover:bg-blue-100"
                    onmouseover="hlIupac('branch')"
                    onmouseout="hlIupac('')"
                    >methyl</span
                  >
                  <span
                    class="cursor-pointer hover:text-purple-500 transition px-1 rounded hover:bg-purple-100"
                    onmouseover="hlIupac('main')"
                    onmouseout="hlIupac('')"
                    >pent</span
                  >
                  <span
                    class="cursor-pointer hover:text-slate-500 transition px-1 rounded hover:bg-slate-200"
                    onmouseover="hlIupac('suffix')"
                    onmouseout="hlIupac('')"
                    >ane</span
                  >
                </div>
                <p
                  id="iupac-desc"
                  class="text-center text-xs text-green-700 mt-2 h-4"
                >
                  Di chu·ªôt v√†o t·ª´ng ph·∫ßn ƒë·ªÉ xem √Ω nghƒ©a.
                </p>
              </div>
            </div>

            <!-- 4. T√≠nh ch·∫•t h√≥a h·ªçc -->
            <div
              class="bg-white p-6 rounded-2xl shadow-sm border border-slate-100"
            >
              <h3
                class="font-bold text-lg text-green-700 mb-3 border-b border-green-100 pb-2"
              >
                4. T√≠nh ch·∫•t h√≥a h·ªçc
              </h3>
              <div class="space-y-4">
                <div>
                  <strong class="text-slate-700 text-sm"
                    >a. Ph·∫£n ·ª©ng th·∫ø Halogen ($Cl_2, Br_2$)</strong
                  >
                  <p class="text-xs text-slate-500">
                    ƒêK: √Ånh s√°ng ho·∫∑c $t^\circ$. C∆° ch·∫ø g·ªëc t·ª± do. ∆Øu ti√™n th·∫ø
                    v√†o C b·∫≠c cao.
                  </p>
                  <div
                    class="bg-slate-50 p-3 rounded mt-2 font-mono text-xs border border-slate-200 flex items-center justify-between"
                  >
                    <span>$CH_4 + Cl_2 \xrightarrow{as} CH_3Cl + HCl$</span>
                    <button
                      onclick="playSubAnim()"
                      class="text-xs bg-white border px-2 py-1 rounded shadow-sm hover:bg-green-50 text-green-600"
                    >
                      ‚ñ∂ Xem c∆° ch·∫ø
                    </button>
                  </div>
                  <!-- Visual for reaction -->
                  <div
                    id="sub-reaction-visual"
                    class="h-16 bg-slate-100 mt-2 rounded flex items-center justify-center overflow-hidden relative hidden"
                  >
                    <div
                      id="atom-ch4"
                      class="absolute left-10 transition-all duration-1000"
                    >
                      ‚ö™‚ö´‚ö´‚ö´‚ö´
                    </div>
                    <div
                      id="atom-cl2"
                      class="absolute right-10 text-green-600 font-bold transition-all duration-1000"
                    >
                      Cl-Cl
                    </div>
                  </div>
                </div>
                <div>
                  <strong class="text-slate-700 text-sm"
                    >b. Ph·∫£n ·ª©ng t√°ch (Cracking)</strong
                  >
                  <p class="text-xs text-slate-500">
                    B·∫ª g√£y m·∫°ch d√†i th√†nh m·∫°ch ng·∫Øn (Alkene + Alkane).
                  </p>
                </div>
                <div>
                  <strong class="text-slate-700 text-sm"
                    >c. Ph·∫£n ·ª©ng ch√°y</strong
                  >
                  <p class="text-xs text-slate-500">
                    T·ªèa nhi·ªÅu nhi·ªát ‚Üí ·ª®ng d·ª•ng l√†m nhi√™n li·ªáu (Gas, XƒÉng).
                  </p>
                </div>
              </div>
            </div>
          </div>

          <!-- VISUAL/INTERACTIVE COLUMN (Right) -->
          <div class="lg:col-span-5 space-y-6">
            <!-- Boiling Point Chart -->
            <div class="interactive-card p-6 h-80">
              <h4
                class="font-bold text-slate-700 mb-4 text-sm flex justify-between"
              >
                <span>üìà Nhi·ªát ƒë·ªô s√¥i & Tr·∫°ng th√°i</span>
              </h4>
              <div class="relative h-60">
                <canvas id="alkaneChart"></canvas>
              </div>
            </div>

            <!-- Ung dung Card -->
            <div
              class="interactive-card p-6 bg-gradient-to-br from-green-50 to-white"
            >
              <h4
                class="font-bold text-green-800 mb-3 text-sm flex items-center gap-2"
              >
                <i data-lucide="factory" class="w-4 h-4"></i> 5. ·ª®ng d·ª•ng & ƒêi·ªÅu
                ch·∫ø
              </h4>
              <ul class="text-xs space-y-2 text-slate-600">
                <li>
                  ‚õΩ <strong>Nhi√™n li·ªáu:</strong> CH4 (Gas), XƒÉng d·∫ßu, Kh√≠ ƒë·ªët.
                </li>
                <li>
                  üí° <strong>C√¥ng nghi·ªáp:</strong> S·∫£n xu·∫•t H2, NH3, Acetylene.
                </li>
                <li>
                  üè≠ <strong>ƒêi·ªÅu ch·∫ø:</strong> Ch∆∞ng c·∫•t ph√¢n ƒëo·∫°n d·∫ßu m·ªè.
                </li>
              </ul>
            </div>
          </div>
        </div>
      </section>

      <!-- PH·∫¶N II: HYDROCARBON KH√îNG NO -->
      <section id="alkene" class="scroll-mt-24">
        <div class="flex items-center gap-3 mb-8">
          <div
            class="p-3 bg-pink-600 rounded-xl text-white shadow-lg shadow-pink-200"
          >
            <i data-lucide="layers" class="w-8 h-8"></i>
          </div>
          <div>
            <span
              class="text-pink-600 font-bold tracking-wider text-sm uppercase"
              >Ph·∫ßn II</span
            >
            <h2 class="text-3xl font-extrabold text-slate-800">
              ALKENE & ALKYNE
            </h2>
          </div>
        </div>

        <div class="grid lg:grid-cols-2 gap-8 mb-8">
          <!-- Theory Box -->
          <div
            class="bg-white p-6 rounded-2xl shadow-sm border border-slate-100"
          >
            <h3 class="font-bold text-lg text-pink-700 mb-4">
              L√Ω thuy·∫øt tr·ªçng t√¢m
            </h3>

            <div class="grid grid-cols-2 gap-4 mb-4">
              <div class="bg-pink-50 p-3 rounded border border-pink-100">
                <strong class="text-pink-800 block mb-1 text-sm"
                  >Alkene ($C_nH_{2n}$)</strong
                >
                <p class="text-xs text-slate-600">
                  Ch·ª©a 1 li√™n k·∫øt ƒë√¥i ($C=C$).
                </p>
                <p class="text-xs text-slate-500 mt-1">
                  VD: $CH_2=CH_2$ (Ethene)
                </p>
              </div>
              <div class="bg-purple-50 p-3 rounded border border-purple-100">
                <strong class="text-purple-800 block mb-1 text-sm"
                  >Alkyne ($C_nH_{2n-2}$)</strong
                >
                <p class="text-xs text-slate-600">
                  Ch·ª©a 1 li√™n k·∫øt ba ($C \equiv C$).
                </p>
                <p class="text-xs text-slate-500 mt-1">
                  VD: $CH \equiv CH$ (Ethyne)
                </p>
              </div>
            </div>

            <div class="space-y-3 text-sm text-slate-600">
              <p>
                <strong>‚Ä¢ Danh ph√°p:</strong> ƒê·ªïi ƒëu√¥i <em>-ane</em> th√†nh
                <em>-ene</em> (n·ªëi ƒë√¥i) ho·∫∑c <em>-yne</em> (n·ªëi ba). ƒê√°nh s·ªë ∆∞u
                ti√™n li√™n k·∫øt b·ªôi.
              </p>
              <p>
                <strong>‚Ä¢ ƒê·ªìng ph√¢n h√¨nh h·ªçc (Cis-Trans):</strong> Ch·ªâ Alkene c√≥
                c·∫•u t·∫°o th·ªèa m√£n ƒëi·ªÅu ki·ªán m·ªõi c√≥.
              </p>
              <p>
                <strong>‚Ä¢ T√≠nh ch·∫•t h√≥a h·ªçc:</strong> Ph·∫£n ·ª©ng c·ªông ƒë·∫∑c tr∆∞ng
                ($H_2, Br_2, HX$).
              </p>
            </div>
          </div>

          <!-- Interactive: Cis-Trans Toggle -->
          <div
            class="interactive-card p-6 flex flex-col items-center justify-center bg-slate-900 text-white relative overflow-hidden"
          >
            <h4 class="font-bold text-pink-400 mb-4 absolute top-4 left-6">
              M√¥ h√¨nh Cis-Trans (But-2-ene)
            </h4>

            <div class="relative w-64 h-32 my-6">
              <!-- Double Bond -->
              <div
                class="absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-20 h-4 bg-slate-600 rounded-full border border-slate-500 flex items-center justify-center z-10"
              >
                <span
                  class="text-[10px] font-bold text-slate-300 tracking-widest"
                  >DOUBLE</span
                >
              </div>

              <!-- Groups Left -->
              <div
                class="absolute top-0 left-0 w-10 h-10 bg-green-500 rounded-full flex items-center justify-center text-[10px] font-bold shadow-lg transform -translate-y-2 border-2 border-green-400"
              >
                CH3
              </div>
              <div
                class="absolute bottom-0 left-0 w-8 h-8 bg-slate-400 rounded-full flex items-center justify-center text-[10px] font-bold border border-slate-300 shadow transform translate-y-2"
              >
                H
              </div>

              <!-- Groups Right (Animated) -->
              <div
                id="group-right-top"
                class="isomer-model absolute top-0 right-0 w-10 h-10 bg-green-500 rounded-full flex items-center justify-center text-[10px] font-bold shadow-lg transform -translate-y-2 border-2 border-green-400"
              >
                CH3
              </div>
              <div
                id="group-right-bottom"
                class="isomer-model absolute bottom-0 right-0 w-8 h-8 bg-slate-400 rounded-full flex items-center justify-center text-[10px] font-bold border border-slate-300 shadow transform translate-y-2"
              >
                H
              </div>

              <!-- Bonds -->
              <div
                class="absolute top-5 left-5 w-16 h-0.5 bg-slate-500 transform -rotate-[30deg] -z-10 origin-right"
              ></div>
              <div
                class="absolute bottom-5 left-5 w-16 h-0.5 bg-slate-500 transform rotate-[30deg] -z-10 origin-right"
              ></div>
              <div
                class="absolute top-5 right-5 w-16 h-0.5 bg-slate-500 transform rotate-[30deg] -z-10 origin-left"
              ></div>
              <div
                class="absolute bottom-5 right-5 w-16 h-0.5 bg-slate-500 transform -rotate-[30deg] -z-10 origin-left"
              ></div>
            </div>

            <div class="flex items-center gap-4 z-20">
              <span id="label-cis" class="font-bold text-pink-400 text-sm"
                >CIS</span
              >
              <label class="relative inline-flex items-center cursor-pointer">
                <input
                  type="checkbox"
                  id="isomer-toggle"
                  class="sr-only peer"
                  onchange="toggleIsomer()"
                />
                <div
                  class="w-12 h-6 bg-slate-700 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-pink-600"
                ></div>
              </label>
              <span id="label-trans" class="font-bold text-slate-500 text-sm"
                >TRANS</span
              >
            </div>
          </div>
        </div>

        <!-- INTERACTIVE GAMES SECTION -->
        <div class="grid lg:grid-cols-3 gap-8">
          <!-- Game 1: Markovnikov -->
          <div
            class="interactive-card p-6 border-t-4 border-blue-500 bg-blue-50/50"
          >
            <h4 class="font-bold text-blue-800 mb-2 flex items-center gap-2">
              <i data-lucide="crosshair" class="w-5 h-5"></i> Th√°ch th·ª©c
              Markovnikov
            </h4>
            <p class="text-xs text-slate-600 mb-4">
              C·ªông $HCl$ v√†o Propene ($CH_2=CH-CH_3$). D·ª± ƒëo√°n s·∫£n ph·∫©m ch√≠nh?
            </p>

            <div class="space-y-2">
              <button
                onclick="checkMarkov(true, this)"
                class="markov-btn w-full p-3 bg-white border border-blue-200 rounded-lg hover:shadow-md text-left text-sm font-mono transition"
              >
                A. $CH_3-CH(Cl)-CH_3$
              </button>
              <button
                onclick="checkMarkov(false, this)"
                class="markov-btn w-full p-3 bg-white border border-blue-200 rounded-lg hover:shadow-md text-left text-sm font-mono transition"
              >
                B. $CH_2(Cl)-CH_2-CH_3$
              </button>
            </div>
            <div
              id="markov-result"
              class="mt-3 text-xs font-bold min-h-[1.5rem]"
            ></div>
          </div>

          <!-- Game 2: Bromine Test -->
          <div
            class="interactive-card p-6 border-t-4 border-orange-500 bg-orange-50/50"
          >
            <h4 class="font-bold text-orange-800 mb-2 flex items-center gap-2">
              <i data-lucide="flask-conical" class="w-5 h-5"></i> Th√≠ nghi·ªám
              Brom
            </h4>
            <p class="text-xs text-slate-600 mb-4">
              Nh·ªè dung d·ªãch Brom (n√¢u ƒë·ªè) v√†o Alkene.
            </p>
            <div class="flex justify-center items-end h-32 gap-4">
              <div
                class="relative w-12 h-24 border-2 border-slate-300 rounded-b-xl bg-white overflow-hidden"
              >
                <div
                  id="tube-liquid"
                  class="absolute bottom-0 w-full h-12 bg-transparent transition-colors duration-1000"
                ></div>
                <div
                  id="brom-drop"
                  class="absolute top-[-10px] left-1/2 -translate-x-1/2 w-3 h-3 bg-orange-600 rounded-full opacity-0"
                ></div>
              </div>
              <button
                onclick="runBromTest()"
                class="px-3 py-1 bg-orange-600 text-white text-xs rounded shadow hover:bg-orange-700"
              >
                Nh·ªè Brom
              </button>
            </div>
          </div>

          <!-- Game 3: Polymerization -->
          <div
            class="interactive-card p-6 border-t-4 border-yellow-500 bg-yellow-50/50"
          >
            <h4 class="font-bold text-yellow-800 mb-2 flex items-center gap-2">
              <i data-lucide="link" class="w-5 h-5"></i> Tr√πng h·ª£p PE
            </h4>
            <p class="text-xs text-slate-600 mb-4">
              K·∫øt n·ªëi c√°c ph√¢n t·ª≠ Ethene.
            </p>

            <div
              id="poly-container"
              class="h-24 flex items-center justify-center gap-2 overflow-hidden bg-white rounded border border-yellow-200 p-2"
            >
              <div
                class="monomer w-8 h-8 rounded-full bg-blue-500 text-white flex items-center justify-center text-[8px] font-bold shadow animate-float"
                style="animation-delay: 0s"
              >
                C2H4
              </div>
              <div
                class="monomer w-8 h-8 rounded-full bg-blue-500 text-white flex items-center justify-center text-[8px] font-bold shadow animate-float"
                style="animation-delay: 0.5s"
              >
                C2H4
              </div>
              <div
                class="monomer w-8 h-8 rounded-full bg-blue-500 text-white flex items-center justify-center text-[8px] font-bold shadow animate-float"
                style="animation-delay: 1s"
              >
                C2H4
              </div>
            </div>
            <button
              onclick="runPolymer()"
              class="w-full mt-3 px-3 py-2 bg-yellow-500 text-white text-xs font-bold rounded shadow hover:bg-yellow-600"
            >
              Tr√πng h·ª£p (Polymerize)
            </button>
          </div>
        </div>
      </section>

      <!-- PH·∫¶N III: ARENE -->
      <section id="arene" class="scroll-mt-24 mb-12">
        <div class="flex items-center gap-3 mb-8">
          <div
            class="p-3 bg-purple-600 rounded-xl text-white shadow-lg shadow-purple-200"
          >
            <i data-lucide="hexagon" class="w-8 h-8"></i>
          </div>
          <div>
            <span
              class="text-purple-600 font-bold tracking-wider text-sm uppercase"
              >Ph·∫ßn III</span
            >
            <h2 class="text-3xl font-extrabold text-slate-800">ARENE (TH∆†M)</h2>
          </div>
        </div>

        <div class="grid lg:grid-cols-2 gap-8">
          <!-- Theory -->
          <div class="space-y-6">
            <div
              class="bg-white p-6 rounded-2xl shadow-sm border border-slate-100"
            >
              <h3 class="font-bold text-lg text-purple-800 mb-2">
                ƒê·∫∑c ƒëi·ªÉm Benzen ($C_6H_6$)
              </h3>
              <p class="text-slate-600 text-sm mb-4">
                C·∫•u tr√∫c v√≤ng l·ª•c gi√°c ƒë·ªÅu ph·∫≥ng. H·ªá electron $\pi$ li√™n h·ª£p b·ªÅn
                v·ªØng.
              </p>

              <div class="grid grid-cols-2 gap-3 text-xs">
                <div class="bg-slate-50 p-3 rounded border border-slate-200">
                  <strong>V·∫≠t l√Ω:</strong> L·ªèng, kh√¥ng m√†u, m√πi th∆°m ƒë·∫∑c tr∆∞ng,
                  kh√¥ng tan trong n∆∞·ªõc. ƒê·ªôc.
                </div>
                <div class="bg-slate-50 p-3 rounded border border-slate-200">
                  <strong>H√≥a h·ªçc:</strong> D·ªÖ th·∫ø, kh√≥ c·ªông, b·ªÅn v·ªõi oxi h√≥a.
                </div>
              </div>
            </div>

            <div class="interactive-card p-6 bg-purple-50 border-purple-100">
              <h4
                class="font-bold text-purple-800 mb-4 text-sm uppercase tracking-wide"
              >
                Trung t√¢m T·ªïng h·ª£p H√≥a ch·∫•t
              </h4>
              <div class="space-y-2">
                <button
                  onclick="reactBenzene('brom')"
                  class="w-full p-3 bg-white border border-purple-200 rounded-lg shadow-sm hover:bg-white/80 text-left flex items-center justify-between group transition"
                >
                  <div>
                    <div class="font-bold text-purple-700 text-sm">
                      Th·∫ø Halogen ($Br_2/Fe$)
                    </div>
                    <div class="text-[10px] text-slate-500">
                      $C_6H_6 + Br_2 \to C_6H_5Br + HBr$
                    </div>
                  </div>
                  <i
                    data-lucide="flask-conical"
                    class="w-4 h-4 text-purple-300 group-hover:text-purple-600"
                  ></i>
                </button>

                <button
                  onclick="reactBenzene('nitro')"
                  class="w-full p-3 bg-white border border-purple-200 rounded-lg shadow-sm hover:bg-white/80 text-left flex items-center justify-between group transition"
                >
                  <div>
                    <div class="font-bold text-purple-700 text-sm">
                      Nitro h√≥a ($HNO_3/H_2SO_4$)
                    </div>
                    <div class="text-[10px] text-slate-500">
                      $C_6H_6 + HNO_3 \to C_6H_5NO_2 + H_2O$
                    </div>
                  </div>
                  <i
                    data-lucide="bomb"
                    class="w-4 h-4 text-purple-300 group-hover:text-purple-600"
                  ></i>
                </button>

                <button
                  onclick="reactBenzene('ankyl')"
                  class="w-full p-3 bg-white border border-purple-200 rounded-lg shadow-sm hover:bg-white/80 text-left flex items-center justify-between group transition"
                >
                  <div>
                    <div class="font-bold text-purple-700 text-sm">
                      Alkylation (Friedel-Crafts)
                    </div>
                    <div class="text-[10px] text-slate-500">
                      $C_6H_6 + CH_3Cl \to C_6H_5CH_3$
                    </div>
                  </div>
                  <i
                    data-lucide="hammer"
                    class="w-4 h-4 text-purple-300 group-hover:text-purple-600"
                  ></i>
                </button>
              </div>
            </div>
          </div>

          <!-- Visualizer -->
          <div
            class="interactive-card bg-slate-800 text-white flex flex-col items-center justify-center p-8 relative"
          >
            <div
              id="arene-display"
              class="w-48 h-48 relative flex items-center justify-center transition-all duration-500"
            >
              <!-- Benzene Base -->
              <svg
                class="w-32 h-32 absolute animate-[spin_20s_linear_infinite]"
                viewBox="0 0 100 100"
              >
                <polygon
                  points="50,5 95,27.5 95,72.5 50,95 5,72.5 5,27.5"
                  fill="none"
                  stroke="white"
                  stroke-width="3"
                />
                <circle
                  cx="50"
                  cy="50"
                  r="20"
                  fill="none"
                  stroke="white"
                  stroke-width="2"
                  stroke-dasharray="4 2"
                  opacity="0.6"
                />
              </svg>
              <!-- Group Attached (Hidden by default) -->
              <div
                id="attached-group"
                class="absolute top-0 right-10 bg-yellow-400 text-slate-900 font-bold px-2 py-1 rounded text-xs opacity-0 transition-all duration-500 transform translate-y-4"
              >
                -NO2
              </div>
            </div>
            <div class="text-center mt-4">
              <h4 id="arene-product" class="text-xl font-bold text-yellow-400">
                Benzen
              </h4>
              <p
                id="arene-desc"
                class="text-xs text-slate-400 mt-1 max-w-xs mx-auto"
              >
                Ch∆∞a c√≥ ph·∫£n ·ª©ng.
              </p>
            </div>
          </div>
        </div>
      </section>

      <footer
        class="text-center py-10 border-t border-slate-200 mt-12 text-slate-500 text-sm"
      >
        <p>¬© 2024 Interactive Chemistry Learning</p>
        <p class="text-xs mt-1">N·ªôi dung b√°m s√°t SGK H√≥a h·ªçc 11 m·ªõi.</p>
      </footer>
    </div>

    <script>
      function initApp() {
        lucide.createIcons();
        initAlkaneChart();
        updateFuncInfo();
      }

      // --- CHAPTER 3 UTILS ---
      const funcData = {
        alcohol: { r: "3200-3500", ex: "Ethanol" },
        aldehyde: { r: "1720-1740", ex: "HCHO" },
        ketone: { r: "1705-1725", ex: "Acetone" },
        acid: { r: "2500-3000, 1700", ex: "CH3COOH" },
      };
      function updateFuncInfo() {
        const val = document.getElementById("func-select").value;
        const data = funcData[val];
        document.getElementById("func-display").innerHTML = `
                <div class="text-xs text-slate-500">IR Peak: <span class="font-bold text-indigo-600">${data.r} cm‚Åª¬π</span></div>
                <div class="text-xs text-slate-500">VD: <span class="font-bold text-slate-800">${data.ex}</span></div>
            `;
      }
      function calculateFormula() {
        const C = parseFloat(document.getElementById("inp-c").value) || 0;
        const H = parseFloat(document.getElementById("inp-h").value) || 0;
        const O = parseFloat(document.getElementById("inp-o").value) || 0;
        if (!C) return;
        const x = Math.round(C / 12),
          y = Math.round(H / 1),
          z = Math.round(O / 16);
        const gcd = (a, b) => (b ? gcd(b, a % b) : a);
        let d = gcd(x, gcd(y, z || x));
        document.getElementById("calc-result").textContent = `CTƒêGN: C${
          x / d
        }H${y / d}${z > 0 ? "O" + z / d : ""}`;
      }

      // --- CHAPTER 4: ALKANE ---
      function initAlkaneChart() {
        const ctx = document.getElementById("alkaneChart").getContext("2d");
        new Chart(ctx, {
          type: "line",
          data: {
            labels: ["C1", "C2", "C3", "C4", "C5", "C6", "C7", "C8", "C10"],
            datasets: [
              {
                label: "Nhi·ªát ƒë·ªô s√¥i (¬∞C)",
                data: [-161, -88, -42, -0.5, 36, 69, 98, 126, 174],
                borderColor: "#16a34a",
                backgroundColor: "rgba(22, 163, 74, 0.1)",
                fill: true,
                tension: 0.4,
                pointRadius: 4,
              },
            ],
          },
          options: {
            responsive: true,
            maintainAspectRatio: false,
            plugins: { legend: { display: false } },
            scales: {
              y: { grid: { color: "#f1f5f9" } },
              x: { grid: { display: false } },
            },
          },
        });
      }

      // IUPAC Highlighter
      function hlIupac(part) {
        const desc = document.getElementById("iupac-desc");
        const texts = {
          pos: "V·ªã tr√≠ c·ªßa nh√°nh tr√™n m·∫°ch ch√≠nh (C s·ªë 3)",
          branch: "T√™n nh√°nh: Methyl (-CH3)",
          main: "M·∫°ch ch√≠nh: 5 Carbon (Pent)",
          suffix: "H·∫≠u t·ªë -ane: Ch·ªâ li√™n k·∫øt ƒë∆°n (no)",
          "": "Di chu·ªôt v√†o t·ª´ng ph·∫ßn ƒë·ªÉ xem √Ω nghƒ©a.",
        };
        desc.textContent = texts[part] || texts[""];
        desc.className = part
          ? "text-center text-xs font-bold text-green-600 mt-2 h-4 transition"
          : "text-center text-xs text-green-700 mt-2 h-4";
      }

      // Substitution Animation
      function playSubAnim() {
        const box = document.getElementById("sub-reaction-visual");
        const ch4 = document.getElementById("atom-ch4");
        const cl2 = document.getElementById("atom-cl2");

        box.classList.remove("hidden");
        // Reset
        ch4.style.left = "10px";
        ch4.innerHTML = "‚ö™‚ö´‚ö´‚ö´‚ö´";
        ch4.style.opacity = 1;
        cl2.style.right = "10px";
        cl2.innerHTML = "Cl-Cl";
        cl2.style.opacity = 1;

        setTimeout(() => {
          // Collide
          ch4.style.left = "40%";
          cl2.style.right = "40%";

          setTimeout(() => {
            // Product
            ch4.innerHTML =
              "‚ö™‚ö´‚ö´‚ö´<span class='text-green-600 font-bold'>Cl</span>"; // CH3Cl visual hack
            cl2.innerHTML = "H-Cl";
            ch4.style.left = "10px";
            cl2.style.right = "10px";
          }, 1000);
        }, 500);
      }

      // --- CHAPTER 4: UNSATURATED ---
      let isCis = true;
      function toggleIsomer() {
        isCis = !isCis;
        const gTop = document.getElementById("group-right-top");
        const gBot = document.getElementById("group-right-bottom");
        const lCis = document.getElementById("label-cis");
        const lTrans = document.getElementById("label-trans");

        if (!isCis) {
          // To Trans
          gTop.classList.replace("top-0", "bottom-0");
          gTop.classList.replace("-translate-y-2", "translate-y-2");
          gBot.classList.replace("bottom-0", "top-0");
          gBot.classList.replace("translate-y-2", "-translate-y-2");
          lTrans.classList.replace("text-slate-500", "text-pink-500");
          lCis.classList.replace("text-pink-400", "text-slate-500");
        } else {
          // To Cis
          gTop.classList.replace("bottom-0", "top-0");
          gTop.classList.replace("translate-y-2", "-translate-y-2");
          gBot.classList.replace("top-0", "bottom-0");
          gBot.classList.replace("-translate-y-2", "translate-y-2");
          lCis.classList.replace("text-slate-500", "text-pink-400");
          lTrans.classList.replace("text-pink-500", "text-slate-500");
        }
      }

      // Markovnikov Game
      function checkMarkov(isMajor, btn) {
        const res = document.getElementById("markov-result");
        document
          .querySelectorAll(".markov-btn")
          .forEach((b) =>
            b.classList.remove("ring-2", "ring-blue-500", "bg-blue-50")
          );

        if (isMajor) {
          res.textContent =
            "‚úÖ Ch√≠nh x√°c! Theo quy t·∫Øc Markovnikov: H ∆∞u ti√™n c·ªông v√†o C c√≥ nhi·ªÅu H h∆°n (b·∫≠c th·∫•p h∆°n), Cl v√†o C b·∫≠c cao h∆°n.";
          res.className =
            "mt-3 text-xs font-bold text-green-600 min-h-[1.5rem]";
          btn.classList.add("ring-2", "ring-green-500", "bg-green-50");
        } else {
          res.textContent = "‚ùå Sai r·ªìi. ƒê√¢y l√† s·∫£n ph·∫©m ph·ª• (tr√°i quy t·∫Øc).";
          res.className = "mt-3 text-xs font-bold text-red-500 min-h-[1.5rem]";
          btn.classList.add("ring-2", "ring-red-200");
        }
      }

      // Bromine Test
      function runBromTest() {
        const drop = document.getElementById("brom-drop");
        const liquid = document.getElementById("tube-liquid");

        drop.style.opacity = 1;
        drop.style.top = "100%"; // Drop falls
        drop.style.transition = "top 0.8s ease-in";

        setTimeout(() => {
          drop.style.opacity = 0;
          drop.style.top = "-10px"; // Reset pos
          drop.style.transition = "none";

          // Liquid flash orange then clear
          liquid.style.backgroundColor = "rgba(234, 88, 12, 0.5)"; // Flash color
          setTimeout(() => {
            liquid.style.backgroundColor = "transparent"; // Clear (Reaction happened)
          }, 500);
        }, 800);
      }

      // Polymerization
      function runPolymer() {
        const container = document.getElementById("poly-container");
        const monomers = container.querySelectorAll(".monomer");

        // Stop floating
        monomers.forEach((m) => {
          m.classList.remove("animate-float");
          m.classList.add("polymer-link");
          m.style.margin = "0 -4px"; // Squeeze together
          m.textContent = "-CH2-";
        });

        setTimeout(() => {
          container.innerHTML =
            '<div class="text-sm font-bold text-blue-700 animate-pulse">(-CH2-CH2-)n <br> Polyethylene (PE)</div>';
        }, 1000);

        // Reset after 3s
        setTimeout(() => {
          container.innerHTML = `
                    <div class="monomer w-8 h-8 rounded-full bg-blue-500 text-white flex items-center justify-center text-[8px] font-bold shadow animate-float" style="animation-delay: 0s;">C2H4</div>
                    <div class="monomer w-8 h-8 rounded-full bg-blue-500 text-white flex items-center justify-center text-[8px] font-bold shadow animate-float" style="animation-delay: 0.5s;">C2H4</div>
                    <div class="monomer w-8 h-8 rounded-full bg-blue-500 text-white flex items-center justify-center text-[8px] font-bold shadow animate-float" style="animation-delay: 1s;">C2H4</div>
                `;
        }, 4000);
      }

      // --- CHAPTER 4: ARENE ---
      function reactBenzene(type) {
        const group = document.getElementById("attached-group");
        const product = document.getElementById("arene-product");
        const desc = document.getElementById("arene-desc");

        // Reset
        group.style.opacity = 0;
        group.style.transform = "translate(0, 20px)";

        setTimeout(() => {
          group.style.opacity = 1;
          group.style.transform = "translate(0, -10px)";

          if (type === "brom") {
            group.textContent = "-Br";
            group.className =
              "absolute top-0 right-8 bg-orange-500 text-white font-bold px-2 py-1 rounded text-xs transition-all duration-500";
            product.textContent = "Bromobenzene";
            product.className = "text-xl font-bold text-orange-400";
            desc.textContent = "Ch·∫•t l·ªèng kh√¥ng m√†u. Ph·∫£n ·ª©ng th·∫ø H b·∫±ng Br.";
          } else if (type === "nitro") {
            group.textContent = "-NO2";
            group.className =
              "absolute top-0 right-8 bg-yellow-500 text-black font-bold px-2 py-1 rounded text-xs transition-all duration-500";
            product.textContent = "Nitrobenzene";
            product.className = "text-xl font-bold text-yellow-400";
            desc.textContent = "M√†u v√†ng, m√πi h·∫°nh nh√¢n. Ti·ªÅn ch·∫•t thu·ªëc n·ªï.";
          } else {
            group.textContent = "-CH3";
            group.className =
              "absolute top-0 right-8 bg-green-500 text-white font-bold px-2 py-1 rounded text-xs transition-all duration-500";
            product.textContent = "Toluene";
            product.className = "text-xl font-bold text-green-400";
            desc.textContent = "G·∫Øn m·∫°ch nh√°nh Methyl. D·ªÖ th·∫ø h∆°n Benzen.";
          }
        }, 100);
      }
    </script>
  </body>
</html>
