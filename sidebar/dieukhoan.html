<!DOCTYPE html>
<html lang="vi" class="scroll-smooth">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Điều khoản sử dụng | EDUMATTER</title>
    <meta
      name="description"
      content="Các điều khoản và điều kiện sử dụng dịch vụ trên nền tảng giáo dục EDUMATTER."
    />
    <link rel="icon" href="../favicon/edumatter.svg" type="image/x-icon" />
    <!-- Fonts: Noto Sans Vietnamese -->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Noto+Sans+Vietnamese:wght@300;400;500;600;700&display=swap"
      rel="stylesheet"
    />

    <!-- Icons: FontAwesome -->
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
    />

    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>

    <!-- Tailwind Configuration -->
    <script>
      tailwind.config = {
        darkMode: "class",
        theme: {
          extend: {
            fontFamily: {
              sans: ['"Noto Sans Vietnamese"', "sans-serif"],
            },
            colors: {
              primary: {
                50: "#eff6ff",
                100: "#dbeafe",
                500: "#3b82f6",
                600: "#2563eb",
                700: "#1d4ed8",
                900: "#1e3a8a",
              },
            },
          },
        },
      };
    </script>

    <style>
      /* Custom Scrollbar */
      ::-webkit-scrollbar {
        width: 8px;
      }
      ::-webkit-scrollbar-track {
        background: transparent;
      }
      ::-webkit-scrollbar-thumb {
        background-color: #cbd5e1;
        border-radius: 20px;
      }
      .dark ::-webkit-scrollbar-thumb {
        background-color: #475569;
      }

      /* Glassmorphism Effect */
      .glass {
        background: rgba(255, 255, 255, 0.7);
        backdrop-filter: blur(10px);
        -webkit-backdrop-filter: blur(10px);
        border: 1px solid rgba(255, 255, 255, 0.18);
      }
      .dark .glass {
        background: rgba(15, 23, 42, 0.7);
        border: 1px solid rgba(255, 255, 255, 0.05);
      }

      /* Sidebar Link Active State */
      .nav-link.active {
        color: #2563eb;
        font-weight: 600;
        border-left: 3px solid #2563eb;
        background-color: rgba(59, 130, 246, 0.1);
      }
      .dark .nav-link.active {
        color: #60a5fa;
        border-left: 3px solid #60a5fa;
        background-color: rgba(59, 130, 246, 0.15);
      }

      /* Fade In Animation */
      @keyframes fadeIn {
        from {
          opacity: 0;
          transform: translateY(10px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }
      .animate-fade-in {
        animation: fadeIn 0.5s ease-out forwards;
      }
    </style>
  </head>

  <body
    class="bg-slate-50 text-slate-800 dark:bg-slate-900 dark:text-slate-200 transition-colors duration-300 font-sans selection:bg-blue-200 dark:selection:bg-blue-900"
  >
    <!-- Header / Navigation -->
    <header
      class="fixed top-0 w-full z-50 glass shadow-sm transition-all duration-300"
      id="main-header"
    >
      <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
        <div class="flex justify-between items-center h-16">
          <!-- Logo area -->
          <div
            class="flex-shrink-0 flex items-center cursor-pointer"
            onclick="window.location.href='../index.html'"
          >
            <div
              class="w-8 h-8 bg-blue-600 rounded-lg flex items-center justify-center text-white font-bold text-xl mr-2 shadow-lg shadow-blue-500/50"
            >
              E
            </div>
            <span
              class="font-bold text-xl tracking-tight text-slate-900 dark:text-white"
              >EDUMATTER</span
            >
          </div>

          <!-- Right Controls -->
          <div class="flex items-center space-x-4">
            <!-- Dark Mode Toggle -->
            <button
              id="theme-toggle"
              class="p-2 rounded-full hover:bg-slate-200 dark:hover:bg-slate-700 transition-colors focus:outline-none focus:ring-2 focus:ring-blue-500"
              aria-label="Toggle Dark Mode"
            >
              <i
                class="fas fa-moon text-slate-600 dark:text-yellow-300 text-lg transition-transform duration-500 rotate-0 dark:rotate-180"
              ></i>
            </button>

            <a
              href="../index.html"
              class="hidden md:flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 shadow-lg shadow-blue-500/30 transition-all transform hover:-translate-y-0.5"
            >
              <i class="fa-solid fa-house mr-2"></i> Trang chủ
            </a>
          </div>
        </div>
      </div>
    </header>

    <!-- Main Content Wrapper -->
    <div class="pt-24 pb-12 px-4 sm:px-6 lg:px-8 max-w-7xl mx-auto">
      <div class="lg:grid lg:grid-cols-12 lg:gap-8">
        <!-- Sidebar Navigation (Desktop) / TOC -->
        <aside class="hidden lg:block lg:col-span-3">
          <nav
            class="sticky top-24 space-y-1 overflow-y-auto max-h-[calc(100vh-8rem)] pr-2"
            id="sidebar-nav"
          >
            <p
              class="px-3 text-xs font-semibold text-slate-500 uppercase tracking-wider mb-2"
            >
              Mục lục
            </p>
            <a
              href="#intro"
              class="nav-link group flex items-center px-3 py-2 text-sm font-medium text-slate-600 rounded-r-md hover:text-slate-900 hover:bg-slate-100 dark:text-slate-400 dark:hover:text-white dark:hover:bg-slate-800 transition-all border-l-2 border-transparent"
            >
              Lời mở đầu
            </a>
            <a
              href="#acceptance"
              class="nav-link group flex items-center px-3 py-2 text-sm font-medium text-slate-600 rounded-r-md hover:text-slate-900 hover:bg-slate-100 dark:text-slate-400 dark:hover:text-white dark:hover:bg-slate-800 transition-all border-l-2 border-transparent"
            >
              1. Chấp nhận điều khoản
            </a>
            <a
              href="#purpose"
              class="nav-link group flex items-center px-3 py-2 text-sm font-medium text-slate-600 rounded-r-md hover:text-slate-900 hover:bg-slate-100 dark:text-slate-400 dark:hover:text-white dark:hover:bg-slate-800 transition-all border-l-2 border-transparent"
            >
              2. Mục đích sử dụng
            </a>
            <a
              href="#account"
              class="nav-link group flex items-center px-3 py-2 text-sm font-medium text-slate-600 rounded-r-md hover:text-slate-900 hover:bg-slate-100 dark:text-slate-400 dark:hover:text-white dark:hover:bg-slate-800 transition-all border-l-2 border-transparent"
            >
              3. Tài khoản người dùng
            </a>
            <a
              href="#intellectual"
              class="nav-link group flex items-center px-3 py-2 text-sm font-medium text-slate-600 rounded-r-md hover:text-slate-900 hover:bg-slate-100 dark:text-slate-400 dark:hover:text-white dark:hover:bg-slate-800 transition-all border-l-2 border-transparent"
            >
              4. Quyền sở hữu trí tuệ
            </a>
            <a
              href="#conduct"
              class="nav-link group flex items-center px-3 py-2 text-sm font-medium text-slate-600 rounded-r-md hover:text-slate-900 hover:bg-slate-100 dark:text-slate-400 dark:hover:text-white dark:hover:bg-slate-800 transition-all border-l-2 border-transparent"
            >
              5. Quy tắc ứng xử
            </a>
            <a
              href="#disclaimer"
              class="nav-link group flex items-center px-3 py-2 text-sm font-medium text-slate-600 rounded-r-md hover:text-slate-900 hover:bg-slate-100 dark:text-slate-400 dark:hover:text-white dark:hover:bg-slate-800 transition-all border-l-2 border-transparent"
            >
              6. Miễn trừ trách nhiệm
            </a>
            <a
              href="#changes"
              class="nav-link group flex items-center px-3 py-2 text-sm font-medium text-slate-600 rounded-r-md hover:text-slate-900 hover:bg-slate-100 dark:text-slate-400 dark:hover:text-white dark:hover:bg-slate-800 transition-all border-l-2 border-transparent"
            >
              7. Sửa đổi điều khoản
            </a>
          </nav>
        </aside>

        <!-- Content Area -->
        <main class="lg:col-span-9 space-y-10">
          <!-- Hero Section -->
          <div
            id="intro"
            class="text-center lg:text-left space-y-4 border-b border-slate-200 dark:border-slate-700 pb-10 animate-fade-in"
          >
            <span
              class="inline-block py-1 px-3 rounded-full bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200 text-xs font-semibold tracking-wide uppercase"
              >Quy định</span
            >
            <h1
              class="text-3xl sm:text-4xl font-extrabold text-slate-900 dark:text-white tracking-tight"
            >
              Điều khoản sử dụng
            </h1>
            <p class="text-lg text-slate-600 dark:text-slate-300 max-w-2xl">
              Chào mừng bạn đến với EDUMATTER. Việc sử dụng nền tảng đồng nghĩa
              với việc bạn đã đọc, hiểu và đồng ý tuân thủ các quy định dưới
              đây.
            </p>
            <p class="text-sm text-slate-500 dark:text-slate-400">
              <i class="fa-regular fa-clock mr-1"></i> Cập nhật lần cuối:
              <span class="font-semibold text-slate-700 dark:text-slate-300"
                >Năm 2025</span
              >
            </p>
          </div>

          <!-- Section 1 -->
          <section
            id="acceptance"
            class="scroll-mt-28 animate-fade-in"
            style="animation-delay: 0.1s"
          >
            <div class="flex items-start">
              <div class="flex-shrink-0 mr-4 mt-1">
                <div
                  class="w-10 h-10 rounded-full bg-blue-100 dark:bg-slate-700 flex items-center justify-center text-blue-600 dark:text-blue-400"
                >
                  <i class="fa-solid fa-handshake"></i>
                </div>
              </div>
              <div>
                <h2
                  class="text-2xl font-bold text-slate-900 dark:text-white mb-4"
                >
                  1. Chấp nhận điều khoản
                </h2>
                <p
                  class="text-slate-600 dark:text-slate-300 mb-4 leading-relaxed"
                >
                  Bằng việc truy cập, đăng ký tài khoản hoặc sử dụng bất kỳ dịch
                  vụ nào trên website EDUMATTER, bạn xác nhận rằng bạn có đầy đủ
                  năng lực hành vi dân sự và đồng ý bị ràng buộc bởi các điều
                  khoản này.
                </p>
                <p class="text-slate-600 dark:text-slate-300">
                  Nếu bạn không đồng ý với bất kỳ phần nào của các điều khoản,
                  vui lòng ngừng sử dụng dịch vụ ngay lập tức.
                </p>
              </div>
            </div>
          </section>

          <hr class="border-slate-200 dark:border-slate-800" />

          <!-- Section 2 -->
          <section
            id="purpose"
            class="scroll-mt-28 animate-fade-in"
            style="animation-delay: 0.2s"
          >
            <div class="flex items-start">
              <div class="flex-shrink-0 mr-4 mt-1">
                <div
                  class="w-10 h-10 rounded-full bg-indigo-100 dark:bg-slate-700 flex items-center justify-center text-indigo-600 dark:text-indigo-400"
                >
                  <i class="fa-solid fa-graduation-cap"></i>
                </div>
              </div>
              <div>
                <h2
                  class="text-2xl font-bold text-slate-900 dark:text-white mb-4"
                >
                  2. Mục đích sử dụng
                </h2>
                <p class="text-slate-600 dark:text-slate-300 mb-4">
                  EDUMATTER là nền tảng hỗ trợ học tập, tra cứu và luyện tập
                  kiến thức. Bạn được cấp quyền sử dụng không độc quyền, không
                  thể chuyển nhượng để truy cập dịch vụ cho mục đích:
                </p>
                <ul class="list-none space-y-3">
                  <li class="flex items-start">
                    <i class="fa-solid fa-check text-green-500 mt-1 mr-3"></i>
                    <span class="text-slate-600 dark:text-slate-400"
                      >Học tập cá nhân và nghiên cứu phi thương mại.</span
                    >
                  </li>
                  <li class="flex items-start">
                    <i class="fa-solid fa-check text-green-500 mt-1 mr-3"></i>
                    <span class="text-slate-600 dark:text-slate-400"
                      >Tham gia các bài kiểm tra, đánh giá năng lực được cung
                      cấp trên hệ thống.</span
                    >
                  </li>
                </ul>
              </div>
            </div>
          </section>

          <hr class="border-slate-200 dark:border-slate-800" />

          <!-- Section 3 -->
          <section id="account" class="scroll-mt-28 animate-fade-in">
            <div class="flex items-start">
              <div class="flex-shrink-0 mr-4 mt-1">
                <div
                  class="w-10 h-10 rounded-full bg-teal-100 dark:bg-slate-700 flex items-center justify-center text-teal-600 dark:text-teal-400"
                >
                  <i class="fa-solid fa-user-lock"></i>
                </div>
              </div>
              <div>
                <h2
                  class="text-2xl font-bold text-slate-900 dark:text-white mb-4"
                >
                  3. Tài khoản và Bảo mật
                </h2>
                <p
                  class="text-slate-600 dark:text-slate-300 leading-relaxed mb-4"
                >
                  Để sử dụng một số tính năng nâng cao, bạn có thể cần tạo tài
                  khoản. Bạn chịu trách nhiệm hoàn toàn đối với việc bảo mật
                  thông tin đăng nhập của mình.
                </p>
                <div
                  class="bg-red-50 dark:bg-red-900/20 border-l-4 border-red-400 p-4"
                >
                  <h4 class="font-bold text-red-700 dark:text-red-200 mb-2">
                    Trách nhiệm người dùng:
                  </h4>
                  <ul
                    class="list-disc pl-5 space-y-1 text-sm text-red-600 dark:text-red-300"
                  >
                    <li>
                      Không chia sẻ mật khẩu hoặc cho phép người khác truy cập
                      tài khoản của bạn.
                    </li>
                    <li>
                      Thông báo ngay cho EDUMATTER nếu phát hiện hành vi truy
                      cập trái phép.
                    </li>
                    <li>
                      Không sử dụng tài khoản để spam, phá hoại hoặc giả mạo
                      người khác.
                    </li>
                  </ul>
                </div>
              </div>
            </div>
          </section>

          <hr class="border-slate-200 dark:border-slate-800" />

          <!-- Section 4 -->
          <section id="intellectual" class="scroll-mt-28 animate-fade-in">
            <div class="flex items-start">
              <div class="flex-shrink-0 mr-4 mt-1">
                <div
                  class="w-10 h-10 rounded-full bg-orange-100 dark:bg-slate-700 flex items-center justify-center text-orange-600 dark:text-orange-400"
                >
                  <i class="fa-solid fa-copyright"></i>
                </div>
              </div>
              <div>
                <h2
                  class="text-2xl font-bold text-slate-900 dark:text-white mb-4"
                >
                  4. Quyền sở hữu trí tuệ
                </h2>
                <p class="text-slate-600 dark:text-slate-300 mb-4">
                  Tất cả nội dung trên EDUMATTER bao gồm nhưng không giới hạn ở
                  văn bản, đồ họa, logo, biểu tượng, hình ảnh, clip âm thanh,
                  tải xuống kỹ thuật số và mã nguồn đều là tài sản của EDUMATTER
                  hoặc các nhà cung cấp nội dung của chúng tôi.
                </p>
                <div class="bg-slate-100 dark:bg-slate-800 p-4 rounded-lg">
                  <p class="text-slate-700 dark:text-slate-300 font-medium">
                    <i class="fa-solid fa-ban text-red-500 mr-2"></i> Nghiêm
                    cấm:
                  </p>
                  <p class="text-sm text-slate-600 dark:text-slate-400 mt-1">
                    Sao chép, tái bản, bán lại hoặc khai thác bất kỳ phần nào
                    của Dịch vụ cho mục đích thương mại mà không có sự đồng ý
                    bằng văn bản của chúng tôi.
                  </p>
                </div>
              </div>
            </div>
          </section>

          <hr class="border-slate-200 dark:border-slate-800" />

          <!-- Section 5 -->
          <section id="conduct" class="scroll-mt-28 animate-fade-in">
            <div class="flex items-start">
              <div class="flex-shrink-0 mr-4 mt-1">
                <div
                  class="w-10 h-10 rounded-full bg-purple-100 dark:bg-slate-700 flex items-center justify-center text-purple-600 dark:text-purple-400"
                >
                  <i class="fa-solid fa-gavel"></i>
                </div>
              </div>
              <div>
                <h2
                  class="text-2xl font-bold text-slate-900 dark:text-white mb-4"
                >
                  5. Quy tắc ứng xử
                </h2>
                <p class="text-slate-600 dark:text-slate-300 mb-4">
                  Để duy trì môi trường học tập lành mạnh, bạn cam kết KHÔNG
                  thực hiện các hành vi sau:
                </p>
                <div class="grid md:grid-cols-2 gap-4">
                  <div
                    class="flex p-3 border border-slate-200 dark:border-slate-700 rounded-lg"
                  >
                    <i
                      class="fa-solid fa-virus-slash text-red-500 mt-1 mr-3"
                    ></i>
                    <span class="text-sm text-slate-600 dark:text-slate-400"
                      >Phát tán virus, mã độc hoặc tấn công từ chối dịch vụ
                      (DDoS).</span
                    >
                  </div>
                  <div
                    class="flex p-3 border border-slate-200 dark:border-slate-700 rounded-lg"
                  >
                    <i
                      class="fa-solid fa-comment-slash text-red-500 mt-1 mr-3"
                    ></i>
                    <span class="text-sm text-slate-600 dark:text-slate-400"
                      >Đăng tải nội dung xúc phạm, đồi trụy, thù địch hoặc vi
                      phạm pháp luật.</span
                    >
                  </div>
                  <div
                    class="flex p-3 border border-slate-200 dark:border-slate-700 rounded-lg"
                  >
                    <i class="fa-solid fa-robot text-red-500 mt-1 mr-3"></i>
                    <span class="text-sm text-slate-600 dark:text-slate-400"
                      >Sử dụng tool, bot để gian lận kết quả học tập hoặc thu
                      thập dữ liệu.</span
                    >
                  </div>
                  <div
                    class="flex p-3 border border-slate-200 dark:border-slate-700 rounded-lg"
                  >
                    <i class="fa-solid fa-bullhorn text-red-500 mt-1 mr-3"></i>
                    <span class="text-sm text-slate-600 dark:text-slate-400"
                      >Quảng cáo trái phép hoặc lôi kéo người dùng sang nền tảng
                      khác.</span
                    >
                  </div>
                </div>
              </div>
            </div>
          </section>

          <hr class="border-slate-200 dark:border-slate-800" />

          <!-- Section 6 -->
          <section id="disclaimer" class="scroll-mt-28 animate-fade-in">
            <div class="flex items-start">
              <div class="flex-shrink-0 mr-4 mt-1">
                <div
                  class="w-10 h-10 rounded-full bg-pink-100 dark:bg-slate-700 flex items-center justify-center text-pink-600 dark:text-pink-400"
                >
                  <i class="fa-solid fa-triangle-exclamation"></i>
                </div>
              </div>
              <div>
                <h2
                  class="text-2xl font-bold text-slate-900 dark:text-white mb-4"
                >
                  6. Giới hạn trách nhiệm
                </h2>
                <p class="text-slate-600 dark:text-slate-300 mb-4">
                  Dịch vụ được cung cấp trên cơ sở "nguyên trạng" và "có sẵn".
                </p>
                <ul
                  class="list-disc pl-5 space-y-2 text-slate-600 dark:text-slate-400"
                >
                  <li>
                    <strong>Tính chính xác:</strong> Mặc dù chúng tôi nỗ lực đảm
                    bảo nội dung kiến thức là chính xác và cập nhật, EDUMATTER
                    không đảm bảo rằng mọi tài liệu đều không có sai sót.
                  </li>
                  <li>
                    <strong>Hoạt động kỹ thuật:</strong> Chúng tôi không cam kết
                    hệ thống sẽ hoạt động liên tục 100% không bị gián đoạn hay
                    không có lỗi kỹ thuật.
                  </li>
                  <li>
                    <strong>Dữ liệu:</strong> Chúng tôi không chịu trách nhiệm
                    về việc mất mát dữ liệu do các sự cố bất khả kháng hoặc lỗi
                    từ phía người dùng.
                  </li>
                </ul>
              </div>
            </div>
          </section>

          <hr class="border-slate-200 dark:border-slate-800" />

          <!-- Section 7 -->
          <section id="changes" class="scroll-mt-28 animate-fade-in">
            <div class="flex items-start">
              <div class="flex-shrink-0 mr-4 mt-1">
                <div
                  class="w-10 h-10 rounded-full bg-slate-200 dark:bg-slate-700 flex items-center justify-center text-slate-600 dark:text-slate-400"
                >
                  <i class="fa-solid fa-rotate"></i>
                </div>
              </div>
              <div>
                <h2
                  class="text-2xl font-bold text-slate-900 dark:text-white mb-4"
                >
                  7. Thay đổi điều khoản
                </h2>
                <p class="text-slate-600 dark:text-slate-300 mb-4">
                  EDUMATTER bảo lưu quyền sửa đổi, bổ sung các Điều khoản sử
                  dụng này bất cứ lúc nào.
                </p>
                <div
                  class="bg-blue-50 dark:bg-blue-900/20 p-4 rounded-lg border-l-4 border-blue-500"
                >
                  <p class="text-sm text-blue-800 dark:text-blue-200">
                    Các thay đổi sẽ có hiệu lực ngay khi được đăng tải trên
                    trang web. Việc bạn tiếp tục sử dụng Dịch vụ sau khi các
                    thay đổi được đăng tải đồng nghĩa với việc bạn chấp nhận và
                    đồng ý với các thay đổi đó.
                  </p>
                </div>
              </div>
            </div>
          </section>

          <!-- Footer in Main Content for Mobile -->
          <div
            class="block lg:hidden pt-8 border-t border-slate-200 dark:border-slate-700"
          >
            <p class="text-center text-slate-500 text-sm">
              © 2025 EDUMATTER - Nguyễn Tiến Đức
            </p>
          </div>
        </main>
      </div>
    </div>

    <!-- Scroll to Top Button -->
    <button
      id="scrollToTopBtn"
      class="fixed bottom-8 right-8 p-3 rounded-full bg-blue-600 text-white shadow-lg hover:bg-blue-700 transition-all transform translate-y-20 opacity-0 z-40 focus:outline-none"
      aria-label="Lên đầu trang"
    >
      <i class="fa-solid fa-arrow-up"></i>
    </button>

    <!-- Footer (Desktop) -->
    <footer
      class="bg-white dark:bg-slate-900 border-t border-slate-200 dark:border-slate-800 mt-12 py-8 hidden lg:block"
    >
      <div
        class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 flex flex-col md:flex-row justify-between items-center"
      >
        <div class="mb-4 md:mb-0">
          <span class="font-bold text-slate-700 dark:text-slate-200"
            >EDUMATTER</span
          >
          <p class="text-sm text-slate-500 mt-1">
            © 2025 – Thiết kế bởi Nguyễn Tiến Đức
          </p>
        </div>
        <div class="flex space-x-6">
          <a
            href="#"
            class="text-slate-400 hover:text-blue-600 transition-colors"
          >
            <i class="fa-brands fa-facebook text-xl"></i>
          </a>
          <a
            href="#"
            class="text-slate-400 hover:text-blue-600 transition-colors"
          >
            <i class="fa-brands fa-github text-xl"></i>
          </a>
          <a
            href="#"
            class="text-slate-400 hover:text-blue-600 transition-colors"
          >
            <i class="fa-solid fa-envelope text-xl"></i>
          </a>
        </div>
      </div>
    </footer>

    <!-- JavaScript Logic -->
    <script>
      // --- Dark Mode Logic ---
      const themeToggleBtn = document.getElementById("theme-toggle");
      const themeIcon = themeToggleBtn.querySelector("i");

      // Check local storage or system preference
      if (
        localStorage.getItem("color-theme") === "dark" ||
        (!("color-theme" in localStorage) &&
          window.matchMedia("(prefers-color-scheme: dark)").matches)
      ) {
        document.documentElement.classList.add("dark");
        themeIcon.classList.remove("fa-moon");
        themeIcon.classList.add("fa-sun");
      } else {
        document.documentElement.classList.remove("dark");
      }

      themeToggleBtn.addEventListener("click", function () {
        // Toggle icons
        themeIcon.classList.toggle("fa-moon");
        themeIcon.classList.toggle("fa-sun");
        themeIcon.classList.toggle("rotate-180"); // Rotate animation

        // Toggle dark mode class
        if (document.documentElement.classList.contains("dark")) {
          document.documentElement.classList.remove("dark");
          localStorage.setItem("color-theme", "light");
        } else {
          document.documentElement.classList.add("dark");
          localStorage.setItem("color-theme", "dark");
        }
      });

      // --- Scroll to Top Logic ---
      const scrollToTopBtn = document.getElementById("scrollToTopBtn");

      window.addEventListener("scroll", () => {
        if (window.scrollY > 300) {
          scrollToTopBtn.classList.remove("translate-y-20", "opacity-0");
        } else {
          scrollToTopBtn.classList.add("translate-y-20", "opacity-0");
        }
      });

      scrollToTopBtn.addEventListener("click", () => {
        window.scrollTo({
          top: 0,
          behavior: "smooth",
        });
      });

      // --- Active Table of Contents (Scroll Spy) ---
      const sections = document.querySelectorAll("section, #intro");
      const navLinks = document.querySelectorAll(".nav-link");

      function changeLinkState() {
        let index = sections.length;

        while (--index && window.scrollY + 150 < sections[index].offsetTop) {}

        navLinks.forEach((link) => link.classList.remove("active"));
        // Highlight the corresponding link
        // Note: If index is -1 (top of page), highlight the first one (intro)
        if (index >= 0) {
          navLinks[index].classList.add("active");
        }
      }

      changeLinkState();
      window.addEventListener("scroll", changeLinkState);

      // --- Header Glass Effect on Scroll ---
      const header = document.getElementById("main-header");
      window.addEventListener("scroll", () => {
        if (window.scrollY > 10) {
          header.classList.add("shadow-md");
        } else {
          header.classList.remove("shadow-md");
        }
      });
    </script>
  </body>
</html>
